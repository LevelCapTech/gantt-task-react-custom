{"code":"import React, { useEffect, useRef, useState, useMemo } from \"react\";\r\nimport { getStatusBadgeText, getStatusColor, normalizeStatus, } from \"../../helpers/task-helper\";\r\nimport { Bar } from \"./bar/bar\";\r\nimport { BarSmall } from \"./bar/bar-small\";\r\nimport { Milestone } from \"./milestone/milestone\";\r\nimport { Project } from \"./project/project\";\r\nimport style from \"./task-list.module.css\";\r\nexport const TaskItem = props => {\r\n    const { task, arrowIndent, isDelete, taskHeight, isSelected, rtl, onEventStart, isProgressChangeable, isDateChangeable, } = {\r\n        ...props,\r\n    };\r\n    const textRef = useRef(null);\r\n    const [taskItem, setTaskItem] = useState(React.createElement(\"div\", null));\r\n    const [isTextInside, setIsTextInside] = useState(true);\r\n    const normalizedStatus = normalizeStatus(task.status);\r\n    const statusColor = getStatusColor(normalizedStatus);\r\n    const statusBadgeText = getStatusBadgeText(normalizedStatus);\r\n    const taskItemProps = useMemo(() => ({\r\n        task,\r\n        arrowIndent,\r\n        taskHeight,\r\n        isProgressChangeable,\r\n        isDateChangeable,\r\n        isDelete,\r\n        isSelected,\r\n        rtl,\r\n        onEventStart,\r\n    }), [\r\n        task,\r\n        arrowIndent,\r\n        taskHeight,\r\n        isProgressChangeable,\r\n        isDateChangeable,\r\n        isDelete,\r\n        isSelected,\r\n        rtl,\r\n        onEventStart,\r\n    ]);\r\n    useEffect(() => {\r\n        switch (task.typeInternal) {\r\n            case \"milestone\":\r\n                setTaskItem(React.createElement(Milestone, Object.assign({}, taskItemProps)));\r\n                break;\r\n            case \"project\":\r\n                setTaskItem(React.createElement(Project, Object.assign({}, taskItemProps)));\r\n                break;\r\n            case \"smalltask\":\r\n                setTaskItem(React.createElement(BarSmall, Object.assign({}, taskItemProps)));\r\n                break;\r\n            default:\r\n                setTaskItem(React.createElement(Bar, Object.assign({}, taskItemProps)));\r\n                break;\r\n        }\r\n    }, [\r\n        task,\r\n        taskItemProps,\r\n    ]);\r\n    const getBBoxWidth = () => {\r\n        if (!textRef.current || typeof textRef.current.getBBox !== \"function\") {\r\n            return 0;\r\n        }\r\n        return textRef.current.getBBox().width;\r\n    };\r\n    useEffect(() => {\r\n        setIsTextInside(getBBoxWidth() < task.x2 - task.x1);\r\n    }, [textRef, task]);\r\n    const getX = () => {\r\n        const width = task.x2 - task.x1;\r\n        const hasChild = task.barChildren.length > 0;\r\n        if (isTextInside) {\r\n            return task.x1 + width * 0.5;\r\n        }\r\n        if (rtl && textRef.current) {\r\n            return (task.x1 -\r\n                getBBoxWidth() -\r\n                arrowIndent * +hasChild -\r\n                arrowIndent * 0.2);\r\n        }\r\n        else {\r\n            return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\r\n        }\r\n    };\r\n    return (React.createElement(\"g\", { onKeyDown: e => {\r\n            switch (e.key) {\r\n                case \"Delete\": {\r\n                    if (isDelete)\r\n                        onEventStart(\"delete\", task, e);\r\n                    break;\r\n                }\r\n            }\r\n            e.stopPropagation();\r\n        }, onMouseEnter: e => {\r\n            onEventStart(\"mouseenter\", task, e);\r\n        }, onMouseLeave: e => {\r\n            onEventStart(\"mouseleave\", task, e);\r\n        }, onDoubleClick: e => {\r\n            onEventStart(\"dblclick\", task, e);\r\n        }, onClick: e => {\r\n            onEventStart(\"click\", task, e);\r\n        }, onFocus: () => {\r\n            onEventStart(\"select\", task);\r\n        } },\r\n        taskItem,\r\n        React.createElement(\"text\", { x: getX(), y: task.y + taskHeight * 0.5, className: isTextInside\r\n                ? style.barLabel\r\n                : style.barLabel && style.barLabelOutside, ref: textRef },\r\n            !!statusBadgeText && (React.createElement(\"tspan\", { className: style.statusDot, fill: statusColor }, \"\\u25CF\")),\r\n            React.createElement(\"tspan\", { dx: statusBadgeText ? 4 : 0 }, task.name))));\r\n};\r\n//# sourceMappingURL=task-item.js.map","references":["/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/node_modules/@types/react/ts5.0/index.d.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/types/bar-task.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/types/gantt-task-actions.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/helpers/task-helper.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/components/task-item/bar/bar.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/components/task-item/bar/bar-small.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/components/task-item/milestone/milestone.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/components/task-item/project/project.tsx"],"map":"{\"version\":3,\"file\":\"task-item.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/task-item/task-item.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/components/task-item/task-item.d.ts","writeByteOrderMark":false,"text":"import React from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { GanttContentMoveAction } from \"../../types/gantt-task-actions\";\r\nexport declare type TaskItemProps = {\r\n    task: BarTask;\r\n    arrowIndent: number;\r\n    taskHeight: number;\r\n    isProgressChangeable: boolean;\r\n    isDateChangeable: boolean;\r\n    isDelete: boolean;\r\n    isSelected: boolean;\r\n    rtl: boolean;\r\n    onEventStart: (action: GanttContentMoveAction, selectedTask: BarTask, event?: React.MouseEvent | React.KeyboardEvent) => any;\r\n};\r\nexport declare const TaskItem: React.FC<TaskItemProps>;\r\n"}}
