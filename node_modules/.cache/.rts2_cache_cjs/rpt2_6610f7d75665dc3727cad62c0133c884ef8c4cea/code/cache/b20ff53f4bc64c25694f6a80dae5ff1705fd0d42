{"code":"import React, { useRef, useEffect, useState } from \"react\";\r\nimport { formatDate, formatEffort, getStatusBadgeText, getStatusColor, normalizeProcess, normalizeStatus, } from \"../../helpers/task-helper\";\r\nimport styles from \"./tooltip.module.css\";\r\nexport const Tooltip = ({ task, rowHeight, rtl, svgContainerHeight, svgContainerWidth, scrollX, scrollY, arrowIndent, fontSize, fontFamily, headerHeight, taskListWidth, TooltipContent, effortDisplayUnit, }) => {\r\n    const tooltipRef = useRef(null);\r\n    const [relatedY, setRelatedY] = useState(0);\r\n    const [relatedX, setRelatedX] = useState(0);\r\n    useEffect(() => {\r\n        if (tooltipRef.current) {\r\n            const tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\r\n            const tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\r\n            let newRelatedY = task.index * rowHeight - scrollY + headerHeight;\r\n            let newRelatedX;\r\n            if (rtl) {\r\n                newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\r\n                if (newRelatedX < 0) {\r\n                    newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\r\n                }\r\n                const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n                if (tooltipLeftmostPoint > svgContainerWidth) {\r\n                    newRelatedX = svgContainerWidth - tooltipWidth;\r\n                    newRelatedY += rowHeight;\r\n                }\r\n            }\r\n            else {\r\n                newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\r\n                const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n                const fullChartWidth = taskListWidth + svgContainerWidth;\r\n                if (tooltipLeftmostPoint > fullChartWidth) {\r\n                    newRelatedX =\r\n                        task.x1 +\r\n                            taskListWidth -\r\n                            arrowIndent * 1.5 -\r\n                            scrollX -\r\n                            tooltipWidth;\r\n                }\r\n                if (newRelatedX < taskListWidth) {\r\n                    newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\r\n                    newRelatedY += rowHeight;\r\n                }\r\n            }\r\n            const tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\r\n            if (tooltipLowerPoint > svgContainerHeight - scrollY) {\r\n                newRelatedY = svgContainerHeight - tooltipHeight;\r\n            }\r\n            setRelatedY(newRelatedY);\r\n            setRelatedX(newRelatedX);\r\n        }\r\n    }, [\r\n        tooltipRef,\r\n        task,\r\n        arrowIndent,\r\n        scrollX,\r\n        scrollY,\r\n        headerHeight,\r\n        taskListWidth,\r\n        rowHeight,\r\n        svgContainerHeight,\r\n        svgContainerWidth,\r\n        rtl,\r\n    ]);\r\n    return (React.createElement(\"div\", { ref: tooltipRef, className: relatedX\r\n            ? styles.tooltipDetailsContainer\r\n            : styles.tooltipDetailsContainerHidden, style: { left: relatedX, top: relatedY } },\r\n        React.createElement(TooltipContent, { task: task, fontSize: fontSize, fontFamily: fontFamily, effortDisplayUnit: effortDisplayUnit })));\r\n};\r\nexport const StandardTooltipContent = ({ task, fontSize, fontFamily, effortDisplayUnit = \"MH\" }) => {\r\n    const style = {\r\n        fontSize,\r\n        fontFamily,\r\n    };\r\n    const normalizedStatus = normalizeStatus(task.status);\r\n    const normalizedProcess = normalizeProcess(task.process);\r\n    const dateRange = `${formatDate(task.start)} 〜 ${formatDate(task.end)}`;\r\n    const plannedRange = task.plannedStart || task.plannedEnd\r\n        ? `${formatDate(task.plannedStart)} 〜 ${formatDate(task.plannedEnd)}`\r\n        : \"\";\r\n    const plannedEffort = formatEffort(task.plannedEffort, effortDisplayUnit);\r\n    const actualEffort = formatEffort(task.actualEffort, effortDisplayUnit);\r\n    return (React.createElement(\"div\", { className: styles.tooltipDefaultContainer, style: style },\r\n        React.createElement(\"div\", { className: styles.tooltipTitle },\r\n            React.createElement(\"b\", { className: styles.tooltipName }, task.name),\r\n            React.createElement(\"span\", { className: styles.tooltipDate }, dateRange)),\r\n        React.createElement(\"div\", { className: styles.tooltipRow },\r\n            React.createElement(\"span\", { className: styles.tooltipLabel }, \"\\u5DE5\\u7A0B\"),\r\n            React.createElement(\"span\", { className: styles.tooltipValue }, normalizedProcess)),\r\n        React.createElement(\"div\", { className: styles.tooltipRow },\r\n            React.createElement(\"span\", { className: styles.tooltipLabel }, \"\\u62C5\\u5F53\"),\r\n            React.createElement(\"span\", { className: styles.tooltipValue }, task.assignee || \"-\")),\r\n        plannedRange && (React.createElement(\"div\", { className: styles.tooltipRow },\r\n            React.createElement(\"span\", { className: styles.tooltipLabel }, \"\\u4E88\\u5B9A\"),\r\n            React.createElement(\"span\", { className: styles.tooltipValue }, plannedRange))),\r\n        plannedEffort && (React.createElement(\"div\", { className: styles.tooltipRow },\r\n            React.createElement(\"span\", { className: styles.tooltipLabel }, \"\\u4E88\\u5B9A\\u5DE5\\u6570\"),\r\n            React.createElement(\"span\", { className: styles.tooltipValue }, plannedEffort))),\r\n        actualEffort && (React.createElement(\"div\", { className: styles.tooltipRow },\r\n            React.createElement(\"span\", { className: styles.tooltipLabel }, \"\\u5B9F\\u7E3E\\u5DE5\\u6570\"),\r\n            React.createElement(\"span\", { className: styles.tooltipValue }, actualEffort))),\r\n        React.createElement(\"div\", { className: styles.tooltipRow },\r\n            React.createElement(\"span\", { className: styles.tooltipLabel }, \"\\u30B9\\u30C6\\u30FC\\u30BF\\u30B9\"),\r\n            React.createElement(\"span\", { className: styles.tooltipValue },\r\n                React.createElement(\"span\", { className: styles.tooltipStatus, style: { backgroundColor: getStatusColor(normalizedStatus) } }, getStatusBadgeText(normalizedStatus)),\r\n                React.createElement(\"span\", { className: styles.tooltipStatusText }, normalizedStatus))),\r\n        !!task.progress && (React.createElement(\"p\", { className: styles.tooltipDefaultContainerParagraph },\r\n            \"\\u9032\\u6357\\u7387: \",\r\n            task.progress,\r\n            \" %\"))));\r\n};\r\n//# sourceMappingURL=tooltip.js.map","references":["/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/node_modules/@types/react/ts5.0/index.d.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/types/public-types.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/types/bar-task.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/helpers/task-helper.ts"],"map":"{\"version\":3,\"file\":\"tooltip.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/other/tooltip.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/components/other/tooltip.d.ts","writeByteOrderMark":false,"text":"import React from \"react\";\r\nimport { EffortUnit, Task } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nexport declare type TooltipProps = {\r\n    task: BarTask;\r\n    arrowIndent: number;\r\n    rtl: boolean;\r\n    svgContainerHeight: number;\r\n    svgContainerWidth: number;\r\n    svgWidth: number;\r\n    headerHeight: number;\r\n    taskListWidth: number;\r\n    scrollX: number;\r\n    scrollY: number;\r\n    rowHeight: number;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n    TooltipContent: React.FC<{\r\n        task: Task;\r\n        fontSize: string;\r\n        fontFamily: string;\r\n        effortDisplayUnit?: EffortUnit;\r\n    }>;\r\n    effortDisplayUnit: EffortUnit;\r\n};\r\nexport declare const Tooltip: React.FC<TooltipProps>;\r\nexport declare const StandardTooltipContent: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n    effortDisplayUnit?: EffortUnit;\r\n}>;\r\n"}}
