{"code":"import React, { useCallback, useEffect, useMemo, useRef, useState, } from \"react\";\r\nimport { OverlayEditor } from \"./overlay-editor\";\r\nexport const TaskListEditingStateContext = React.createContext(null);\r\nexport const DEFAULT_MIN_WIDTH = 32;\r\nexport const getDefaultWidth = (field, rowWidth) => field === \"name\" ? 140 : Number.parseInt(rowWidth, 10) || 155;\r\nexport const TaskList = ({ headerHeight, fontFamily, fontSize, rowWidth, rowHeight, scrollY, horizontalScroll = 0, tasks, selectedTask, setSelectedTask, onExpanderClick, ganttHeight, taskListRef, headerContainerRef, bodyContainerRef, horizontalContainerClass, TaskListHeader, TaskListTable, visibleFields, onUpdateTask, onCellCommit, effortDisplayUnit, enableColumnDrag = true, onHorizontalScroll, }) => {\r\n    const internalHorizontalRef = useRef(null);\r\n    const internalHeaderRef = useRef(null);\r\n    const horizontalContainerRef = bodyContainerRef ?? internalHorizontalRef;\r\n    const headerRef = headerContainerRef ?? internalHeaderRef;\r\n    useEffect(() => {\r\n        if (horizontalContainerRef.current) {\r\n            horizontalContainerRef.current.scrollTop = scrollY;\r\n        }\r\n    }, [scrollY, horizontalContainerRef]);\r\n    useEffect(() => {\r\n        if (horizontalContainerRef.current) {\r\n            horizontalContainerRef.current.scrollLeft = horizontalScroll;\r\n        }\r\n        if (headerRef.current) {\r\n            headerRef.current.scrollLeft = horizontalScroll;\r\n        }\r\n    }, [horizontalScroll, horizontalContainerRef, headerRef]);\r\n    const initialColumns = useMemo(() => visibleFields.map((field) => ({\r\n        id: field,\r\n        label: field,\r\n        width: getDefaultWidth(field, rowWidth),\r\n        minWidth: DEFAULT_MIN_WIDTH,\r\n        visible: true,\r\n    })), [visibleFields, rowWidth]);\r\n    const [columnsState, setColumnsState] = useState(initialColumns);\r\n    useEffect(() => {\r\n        setColumnsState(prev => {\r\n            const existingMap = new Map(prev.map(column => [column.id, column]));\r\n            const nextColumns = visibleFields.map(field => {\r\n                const existing = existingMap.get(field);\r\n                if (existing) {\r\n                    return existing;\r\n                }\r\n                return {\r\n                    id: field,\r\n                    label: field,\r\n                    width: getDefaultWidth(field, rowWidth),\r\n                    minWidth: DEFAULT_MIN_WIDTH,\r\n                    visible: true,\r\n                };\r\n            });\r\n            return nextColumns;\r\n        });\r\n    }, [visibleFields, rowWidth]);\r\n    const visibleColumns = useMemo(() => columnsState.filter(column => column.visible), [columnsState]);\r\n    const headerProps = {\r\n        headerHeight,\r\n        fontFamily,\r\n        fontSize,\r\n        rowWidth,\r\n        visibleFields,\r\n        columnsState,\r\n        setColumnsState,\r\n        enableColumnDrag,\r\n    };\r\n    const selectedTaskId = selectedTask ? selectedTask.id : \"\";\r\n    const tableProps = {\r\n        rowHeight,\r\n        rowWidth,\r\n        fontFamily,\r\n        fontSize,\r\n        tasks,\r\n        selectedTaskId: selectedTaskId,\r\n        setSelectedTask,\r\n        onExpanderClick,\r\n        visibleFields,\r\n        onUpdateTask,\r\n        onCellCommit,\r\n        effortDisplayUnit,\r\n        columnsState: visibleColumns,\r\n    };\r\n    const [editingState, setEditingState] = useState({\r\n        mode: \"viewing\",\r\n        rowId: null,\r\n        columnId: null,\r\n        trigger: null,\r\n        pending: false,\r\n        errorMessage: null,\r\n    });\r\n    const previousEditingStateRef = useRef(null);\r\n    const closeEditing = useCallback(() => {\r\n        setEditingState(prev => {\r\n            if (prev.mode === \"viewing\") {\r\n                return prev;\r\n            }\r\n            return {\r\n                mode: \"viewing\",\r\n                rowId: null,\r\n                columnId: null,\r\n                trigger: null,\r\n                pending: false,\r\n                errorMessage: null,\r\n            };\r\n        });\r\n    }, []);\r\n    const mountedRef = useRef(true);\r\n    useEffect(() => {\r\n        return () => {\r\n            mountedRef.current = false;\r\n        };\r\n    }, []);\r\n    const cancelEditing = useCallback((reason) => {\r\n        if (editingState.mode !== \"editing\") {\r\n            return;\r\n        }\r\n        console.debug(\"[edit:cancel]\", {\r\n            rowId: editingState.rowId,\r\n            columnId: editingState.columnId,\r\n            reason,\r\n        });\r\n        closeEditing();\r\n    }, [closeEditing, editingState.columnId, editingState.mode, editingState.rowId]);\r\n    const commitEditing = useCallback(async (value, trigger) => {\r\n        if (!onCellCommit) {\r\n            return;\r\n        }\r\n        if (editingState.mode !== \"editing\" || editingState.pending) {\r\n            return;\r\n        }\r\n        if (!editingState.rowId || !editingState.columnId) {\r\n            return;\r\n        }\r\n        const rowId = editingState.rowId;\r\n        const columnId = editingState.columnId;\r\n        setEditingState(prev => {\r\n            if (prev.mode !== \"editing\" ||\r\n                prev.pending ||\r\n                prev.rowId !== rowId ||\r\n                prev.columnId !== columnId) {\r\n                return prev;\r\n            }\r\n            return { ...prev, pending: true, errorMessage: null };\r\n        });\r\n        try {\r\n            await onCellCommit({ rowId, columnId, value, trigger });\r\n            if (!mountedRef.current) {\r\n                return;\r\n            }\r\n            setEditingState(prev => {\r\n                if (prev.mode !== \"editing\" ||\r\n                    prev.rowId !== rowId ||\r\n                    prev.columnId !== columnId) {\r\n                    return prev;\r\n                }\r\n                return {\r\n                    mode: \"viewing\",\r\n                    rowId: null,\r\n                    columnId: null,\r\n                    trigger: null,\r\n                    pending: false,\r\n                    errorMessage: null,\r\n                };\r\n            });\r\n        }\r\n        catch (error) {\r\n            console.error(\"[commit:error]\", {\r\n                rowId,\r\n                columnId,\r\n                trigger,\r\n                message: error instanceof Error ? error.message : \"unknown\",\r\n            });\r\n            if (!mountedRef.current) {\r\n                return;\r\n            }\r\n            setEditingState(prev => {\r\n                if (prev.mode !== \"editing\" ||\r\n                    prev.rowId !== rowId ||\r\n                    prev.columnId !== columnId) {\r\n                    return prev;\r\n                }\r\n                return {\r\n                    ...prev,\r\n                    pending: false,\r\n                    errorMessage: \"Commit failed. Please retry.\",\r\n                };\r\n            });\r\n        }\r\n    }, [editingState, onCellCommit]);\r\n    const selectCell = useCallback((rowId, columnId) => {\r\n        console.debug(\"[TaskList] select cell\", { rowId, columnId });\r\n        setEditingState({\r\n            mode: \"selected\",\r\n            rowId,\r\n            columnId,\r\n            trigger: null,\r\n            pending: false,\r\n            errorMessage: null,\r\n        });\r\n    }, []);\r\n    const startEditing = useCallback((rowId, columnId, trigger) => {\r\n        if (editingState.pending) {\r\n            console.debug(\"[TaskList] ignore enter editing\", {\r\n                reason: \"pending\",\r\n                rowId,\r\n                columnId,\r\n            });\r\n            return;\r\n        }\r\n        console.debug(\"[TaskList] enter editing\", { rowId, columnId, trigger });\r\n        setEditingState({\r\n            mode: \"editing\",\r\n            rowId,\r\n            columnId,\r\n            trigger,\r\n            pending: false,\r\n            errorMessage: null,\r\n        });\r\n    }, [editingState.pending]);\r\n    useEffect(() => {\r\n        const previous = previousEditingStateRef.current;\r\n        if (previous) {\r\n            const buildLogContext = () => ({\r\n                rowId: editingState.rowId ?? previous.rowId,\r\n                columnId: editingState.columnId ?? previous.columnId,\r\n                trigger: editingState.trigger ?? previous.trigger,\r\n            });\r\n            if (previous.mode !== \"editing\" && editingState.mode === \"editing\") {\r\n                console.log(\"[edit:start]\", buildLogContext());\r\n            }\r\n            if (!previous.pending && editingState.pending) {\r\n                console.log(\"[commit:start]\", buildLogContext());\r\n            }\r\n            if (previous.pending && !editingState.pending) {\r\n                const logContext = buildLogContext();\r\n                if (editingState.mode === \"editing\") {\r\n                    console.log(\"[commit:reject]\", logContext);\r\n                }\r\n                else {\r\n                    console.log(\"[commit:resolve]\", logContext);\r\n                }\r\n            }\r\n            if (previous.mode === \"editing\" && editingState.mode !== \"editing\") {\r\n                console.log(\"[edit:end]\", { ...buildLogContext(), to: editingState.mode });\r\n            }\r\n        }\r\n        previousEditingStateRef.current = editingState;\r\n    }, [editingState]);\r\n    const editingContextValue = useMemo(() => ({\r\n        editingState,\r\n        selectCell,\r\n        startEditing,\r\n    }), [editingState, selectCell, startEditing]);\r\n    return (React.createElement(\"div\", { ref: taskListRef },\r\n        React.createElement(OverlayEditor, { editingState: editingState, taskListRef: taskListRef, headerContainerRef: headerRef, bodyContainerRef: horizontalContainerRef, onCommit: commitEditing, onCancel: cancelEditing }),\r\n        React.createElement(\"div\", { ref: headerRef, onScroll: onHorizontalScroll, style: { width: \"100%\", overflowX: \"hidden\" } },\r\n            React.createElement(TaskListHeader, Object.assign({}, headerProps))),\r\n        React.createElement(\"div\", { ref: horizontalContainerRef, className: horizontalContainerClass, style: ganttHeight ? { height: ganttHeight } : {}, onScroll: onHorizontalScroll },\r\n            React.createElement(TaskListEditingStateContext.Provider, { value: editingContextValue },\r\n                React.createElement(TaskListTable, Object.assign({}, tableProps))))));\r\n};\r\n//# sourceMappingURL=task-list.js.map","references":["/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/node_modules/@types/react/ts5.0/index.d.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/types/bar-task.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/types/public-types.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/src/components/task-list/overlay-editor.tsx"],"map":"{\"version\":3,\"file\":\"task-list.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/task-list/task-list.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/components/task-list/task-list.d.ts","writeByteOrderMark":false,"text":"import React, { SyntheticEvent } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { CellCommitPayload, ColumnsState, EffortUnit, Task, VisibleField } from \"../../types/public-types\";\r\nexport declare type EditingTrigger = \"dblclick\" | \"enter\" | \"key\";\r\ndeclare type EditingMode = \"viewing\" | \"selected\" | \"editing\";\r\ndeclare type EditingState = {\r\n    mode: EditingMode;\r\n    rowId: string | null;\r\n    columnId: VisibleField | null;\r\n    trigger: EditingTrigger | null;\r\n    pending: boolean;\r\n    errorMessage: string | null;\r\n};\r\ndeclare type EditingStateContextValue = {\r\n    editingState: EditingState;\r\n    selectCell: (rowId: string, columnId: VisibleField) => void;\r\n    startEditing: (rowId: string, columnId: VisibleField, trigger: EditingTrigger) => void;\r\n};\r\nexport declare const TaskListEditingStateContext: React.Context<EditingStateContextValue | null>;\r\nexport declare type TaskListProps = {\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    rowHeight: number;\r\n    ganttHeight: number;\r\n    scrollY: number;\r\n    horizontalScroll?: number;\r\n    visibleFields: VisibleField[];\r\n    effortDisplayUnit: EffortUnit;\r\n    tasks: Task[];\r\n    taskListRef: React.RefObject<HTMLDivElement>;\r\n    headerContainerRef?: React.RefObject<HTMLDivElement>;\r\n    bodyContainerRef?: React.RefObject<HTMLDivElement>;\r\n    horizontalContainerClass?: string;\r\n    selectedTask: BarTask | undefined;\r\n    setSelectedTask: (task: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n    onHorizontalScroll?: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n    onUpdateTask?: (taskId: string, updatedFields: Partial<Task>) => void;\r\n    onCellCommit?: (payload: CellCommitPayload) => Promise<void>;\r\n    TaskListHeader: React.FC<{\r\n        headerHeight: number;\r\n        rowWidth: string;\r\n        fontFamily: string;\r\n        fontSize: string;\r\n        visibleFields: VisibleField[];\r\n        columnsState?: ColumnsState;\r\n        setColumnsState?: React.Dispatch<React.SetStateAction<ColumnsState>>;\r\n        enableColumnDrag?: boolean;\r\n    }>;\r\n    TaskListTable: React.FC<{\r\n        rowHeight: number;\r\n        rowWidth: string;\r\n        fontFamily: string;\r\n        fontSize: string;\r\n        locale?: string;\r\n        tasks: Task[];\r\n        selectedTaskId: string;\r\n        setSelectedTask: (taskId: string) => void;\r\n        onExpanderClick: (task: Task) => void;\r\n        visibleFields: VisibleField[];\r\n        onUpdateTask?: (taskId: string, updatedFields: Partial<Task>) => void;\r\n        onCellCommit?: (payload: CellCommitPayload) => Promise<void>;\r\n        effortDisplayUnit: EffortUnit;\r\n        columnsState?: ColumnsState;\r\n    }>;\r\n    enableColumnDrag?: boolean;\r\n};\r\nexport declare const DEFAULT_MIN_WIDTH = 32;\r\nexport declare const getDefaultWidth: (field: VisibleField, rowWidth: string) => number;\r\nexport declare const TaskList: React.FC<TaskListProps>;\r\nexport {};\r\n"}}
