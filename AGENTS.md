# 役割

このドキュメントは、**エージェントの振る舞い・出力言語・レビュー方針に限定した行動規範**を定義します。設計・実装・運用ルールの SSOT は `.github/copilot/00-index.md` を起点とする `.github/copilot/` 配下のドキュメント群です。

## 基本方針

- 本リポジトリでは `.github/copilot/` を **設計・実装・運用ルールの SSOT** として扱う。
- AGENTS.md は **エージェントの振る舞い（出力言語・レビュー形式・コミュニケーション方針）のみを規定する SSOT** とする。
- 技術仕様・設計判断・実装ルールについては、常に `.github/copilot/00-index.md` を起点とする参照順に従うこと。

## 出力言語

- すべて日本語で出力する（レビューコメント／提案／要約／理由説明を含む）。

## 実装ガイドライン

- 実装時は以下の SSOT を参照すること：

  - `.github/copilot-instructions.md`
  - `.github/instructions/**/*.instructions.md`
  - `.github/copilot/10-requirements.md` から `.github/copilot/60-ci-quality-gates.md` までの関連ファイル

- CI は必ず成功させること（lint / typecheck / test / security）。

## レビューガイドライン

- レビューコメントは必ず日本語で書くこと。
- 指摘は以下の形式で簡潔に記述すること：

  - 重要度（Copilot severity: nit / moderate / critical および本ドキュメントの P0 / P1 / P2）
  - 理由
  - 修正案

- 重要度の定義と扱いは以下とする（`nit` / `moderate` / `critical` は GitHub Copilot のレビューシステムで使用される severity レベルであり、本ドキュメントの P レベルと次のように 1:1 で対応させる）：
  - critical / P0: マージ前必須。CI が通っていても、P0 指摘が残っている場合はマージしてはならない。
  - moderate / P1: 原則対応。今回の PR での対応が望ましいが、対応しない場合はその理由をコメントに明記すること。
  - nit / P2: 任意対応。情報共有・将来の改善提案として扱い、対応有無は実装者とレビュアーの合意に委ねる。
- 本ドキュメントにおけるレビュー時の SSOT は、`.github/copilot/` 配下の設計・実装・運用ルールおよび本 AGENTS.md に記載された振る舞い・レビュー方針とする。これら SSOT に明示的に基づかない主観的な指摘は禁止する。

## 禁止事項

- SSOT に定義されていない新ルールをレビューや実装内で創作しない。
- 既存仕様を変更する前提で実装・修正を進めない（必ず設計・合意フェーズを経る）。
- 文脈を無視した大規模リファクタリングや整理目的のみの変更を行わない。
- 指示されていないスコープ拡張・機能追加・最適化を行わない。

## 衝突時の判断

- 設計・仕様・実装の解釈に迷った場合は、次の手順に従う：
  1. **技術仕様・設計判断・実装ルールについては、常に `.github/copilot/00-index.md` を起点とする参照順を優先**し、該当するドキュメントを確認する。
  2. **エージェントの出力言語・レビュー形式・コミュニケーション方針については、AGENTS.md の記載を優先**する。
  3. どのドキュメントにも明示的な記載がない場合は、既存の実装・テスト・過去 PR の振る舞いを参考にしつつ、`.github/copilot/` および AGENTS.md に記載された基本方針・禁止事項に整合する解釈を採用する。
