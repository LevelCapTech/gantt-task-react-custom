{"ast":null,"code":"import React, { useState, useRef, useMemo, useCallback, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useSensors, useSensor, PointerSensor, DndContext } from '@dnd-kit/core';\nimport { SortableContext, horizontalListSortingStrategy, useSortable, arrayMove } from '@dnd-kit/sortable';\nimport { CSS as CSS$1 } from '@dnd-kit/utilities';\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _createForOfIteratorHelperLoose(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (t) return (t = t.call(r)).next.bind(t);\n  if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n    t && (r = t);\n    var o = 0;\n    return function () {\n      return o >= r.length ? {\n        done: !0\n      } : {\n        done: !1,\n        value: r[o++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\nvar ViewMode;\n(function (ViewMode) {\n  ViewMode[\"Hour\"] = \"Hour\";\n  ViewMode[\"QuarterDay\"] = \"Quarter Day\";\n  ViewMode[\"HalfDay\"] = \"Half Day\";\n  ViewMode[\"Day\"] = \"Day\";\n  ViewMode[\"Week\"] = \"Week\";\n  ViewMode[\"Month\"] = \"Month\";\n  ViewMode[\"QuarterYear\"] = \"QuarterYear\";\n  ViewMode[\"Year\"] = \"Year\";\n})(ViewMode || (ViewMode = {}));\nvar intlDTCache = {};\nvar getCachedDateTimeFormat = function getCachedDateTimeFormat(locString, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  var key = JSON.stringify([locString, opts]);\n  var dtf = intlDTCache[key];\n  if (!dtf) {\n    dtf = new Intl.DateTimeFormat(locString, opts);\n    intlDTCache[key] = dtf;\n  }\n  return dtf;\n};\nvar addToDate = function addToDate(date, quantity, scale) {\n  var newDate = new Date(date.getFullYear() + (scale === \"year\" ? quantity : 0), date.getMonth() + (scale === \"month\" ? quantity : 0), date.getDate() + (scale === \"day\" ? quantity : 0), date.getHours() + (scale === \"hour\" ? quantity : 0), date.getMinutes() + (scale === \"minute\" ? quantity : 0), date.getSeconds() + (scale === \"second\" ? quantity : 0), date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0));\n  return newDate;\n};\nvar startOfDate = function startOfDate(date, scale) {\n  var scores = [\"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"month\", \"year\"];\n  var shouldReset = function shouldReset(_scale) {\n    var maxScore = scores.indexOf(scale);\n    return scores.indexOf(_scale) <= maxScore;\n  };\n  var newDate = new Date(date.getFullYear(), shouldReset(\"year\") ? 0 : date.getMonth(), shouldReset(\"month\") ? 1 : date.getDate(), shouldReset(\"day\") ? 0 : date.getHours(), shouldReset(\"hour\") ? 0 : date.getMinutes(), shouldReset(\"minute\") ? 0 : date.getSeconds(), shouldReset(\"second\") ? 0 : date.getMilliseconds());\n  return newDate;\n};\nvar ganttDateRange = function ganttDateRange(tasks, viewMode, preStepsCount) {\n  var newStartDate = tasks[0].start;\n  var newEndDate = tasks[0].start;\n  for (var _iterator = _createForOfIteratorHelperLoose(tasks), _step; !(_step = _iterator()).done;) {\n    var task = _step.value;\n    if (task.start < newStartDate) {\n      newStartDate = task.start;\n    }\n    if (task.end > newEndDate) {\n      newEndDate = task.end;\n    }\n  }\n  switch (viewMode) {\n    case ViewMode.Year:\n      newStartDate = addToDate(newStartDate, -1, \"year\");\n      newStartDate = startOfDate(newStartDate, \"year\");\n      newEndDate = addToDate(newEndDate, 1, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n    case ViewMode.QuarterYear:\n      newStartDate = addToDate(newStartDate, -3, \"month\");\n      newStartDate = startOfDate(newStartDate, \"month\");\n      newEndDate = addToDate(newEndDate, 3, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n    case ViewMode.Month:\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"month\");\n      newStartDate = startOfDate(newStartDate, \"month\");\n      newEndDate = addToDate(newEndDate, 1, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n    case ViewMode.Week:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(getMonday(newStartDate), -7 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\n      break;\n    case ViewMode.Day:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 19, \"day\");\n      break;\n    case ViewMode.QuarterDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 66, \"hour\");\n      break;\n    case ViewMode.HalfDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 108, \"hour\");\n      break;\n    case ViewMode.Hour:\n      newStartDate = startOfDate(newStartDate, \"hour\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"hour\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 1, \"day\");\n      break;\n  }\n  return [newStartDate, newEndDate];\n};\nvar seedDates = function seedDates(startDate, endDate, viewMode) {\n  var currentDate = new Date(startDate);\n  var dates = [currentDate];\n  while (currentDate < endDate) {\n    switch (viewMode) {\n      case ViewMode.Year:\n        currentDate = addToDate(currentDate, 1, \"year\");\n        break;\n      case ViewMode.QuarterYear:\n        currentDate = addToDate(currentDate, 3, \"month\");\n        break;\n      case ViewMode.Month:\n        currentDate = addToDate(currentDate, 1, \"month\");\n        break;\n      case ViewMode.Week:\n        currentDate = addToDate(currentDate, 7, \"day\");\n        break;\n      case ViewMode.Day:\n        currentDate = addToDate(currentDate, 1, \"day\");\n        break;\n      case ViewMode.HalfDay:\n        currentDate = addToDate(currentDate, 12, \"hour\");\n        break;\n      case ViewMode.QuarterDay:\n        currentDate = addToDate(currentDate, 6, \"hour\");\n        break;\n      case ViewMode.Hour:\n        currentDate = addToDate(currentDate, 1, \"hour\");\n        break;\n    }\n    dates.push(currentDate);\n  }\n  return dates;\n};\nvar getLocaleMonth = function getLocaleMonth(date, locale) {\n  var bottomValue = getCachedDateTimeFormat(locale, {\n    month: \"long\"\n  }).format(date);\n  bottomValue = bottomValue.replace(bottomValue[0], bottomValue[0].toLocaleUpperCase());\n  return bottomValue;\n};\nvar getLocalDayOfWeek = function getLocalDayOfWeek(date, locale, format) {\n  var bottomValue = getCachedDateTimeFormat(locale, {\n    weekday: format\n  }).format(date);\n  bottomValue = bottomValue.replace(bottomValue[0], bottomValue[0].toLocaleUpperCase());\n  return bottomValue;\n};\nvar getMonday = function getMonday(date) {\n  var day = date.getDay();\n  var diff = date.getDate() - day + (day === 0 ? -6 : 1);\n  return new Date(date.setDate(diff));\n};\nvar getWeekNumberISO8601 = function getWeekNumberISO8601(date) {\n  var tmpDate = new Date(date.valueOf());\n  var dayNumber = (tmpDate.getDay() + 6) % 7;\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\n  var firstThursday = tmpDate.valueOf();\n  tmpDate.setMonth(0, 1);\n  if (tmpDate.getDay() !== 4) {\n    tmpDate.setMonth(0, 1 + (4 - tmpDate.getDay() + 7) % 7);\n  }\n  var weekNumber = (1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)).toString();\n  if (weekNumber.length === 1) {\n    return \"0\" + weekNumber;\n  } else {\n    return weekNumber;\n  }\n};\nvar getDaysInMonth = function getDaysInMonth(month, year) {\n  return new Date(year, month + 1, 0).getDate();\n};\nvar TASK_PROCESS_OPTIONS = [\"設計\", \"開発\", \"テスト\", \"レビュー\", \"リリース\", \"その他\"];\nvar TASK_STATUS_OPTIONS = [\"未着手\", \"進行中\", \"完了\", \"保留\"];\nvar TASK_STATUS_COLORS = {\n  未着手: \"#9e9e9e\",\n  進行中: \"#2196f3\",\n  完了: \"#4caf50\",\n  保留: \"#ff9800\"\n};\nvar TASK_STATUS_BADGE_TEXT = {\n  未着手: \"未\",\n  進行中: \"進\",\n  完了: \"完\",\n  保留: \"保\"\n};\nvar DEFAULT_VISIBLE_FIELDS = [\"name\", \"start\", \"end\", \"process\", \"assignee\", \"plannedStart\", \"plannedEnd\", \"plannedEffort\", \"actualEffort\", \"status\"];\nvar padTwo = function padTwo(value) {\n  return value.toString().padStart(2, \"0\");\n};\nvar formatDate = function formatDate(date) {\n  if (!date) return \"\";\n  return date.getFullYear() + \"-\" + padTwo(date.getMonth() + 1) + \"-\" + padTwo(date.getDate());\n};\nvar parseDateFromInput = function parseDateFromInput(value) {\n  if (!value) return undefined;\n  var _value$split$map = value.split(\"-\").map(function (v) {\n      return parseInt(v, 10);\n    }),\n    year = _value$split$map[0],\n    month = _value$split$map[1],\n    day = _value$split$map[2];\n  if (Number.isNaN(year) || Number.isNaN(month) || Number.isNaN(day) || month < 1 || month > 12 || day < 1 || day > 31) {\n    return undefined;\n  }\n  var date = new Date(year, month - 1, day);\n  if (Number.isNaN(date.getTime()) || date.getFullYear() !== year || date.getMonth() !== month - 1 || date.getDate() !== day) {\n    return undefined;\n  }\n  return date;\n};\nvar formatEffort = function formatEffort(effort, unit) {\n  if (unit === void 0) {\n    unit = \"MH\";\n  }\n  if (effort === undefined || effort === null || !Number.isFinite(effort) || effort < 0) {\n    return \"\";\n  }\n  var base = unit === \"MD\" ? 8 : unit === \"MM\" ? 160 : 1;\n  var converted = effort / base;\n  var rounded = unit === \"MH\" ? effort : Math.round(converted * 10) / 10;\n  return \"\" + rounded + unit;\n};\nvar sanitizeEffortInput = function sanitizeEffortInput(value) {\n  if (value === \"\") return undefined;\n  var parsed = Number(value);\n  if (!Number.isFinite(parsed) || parsed < 0) return undefined;\n  return parsed;\n};\nvar DEFAULT_TASK_PROCESS = TASK_PROCESS_OPTIONS.includes(\"その他\") ? \"その他\" : TASK_PROCESS_OPTIONS[0];\nvar normalizeProcess = function normalizeProcess(process) {\n  return TASK_PROCESS_OPTIONS.includes(process) ? process : DEFAULT_TASK_PROCESS;\n};\nvar normalizeStatus = function normalizeStatus(status) {\n  return TASK_STATUS_OPTIONS.includes(status) ? status : TASK_STATUS_OPTIONS[0];\n};\nvar getStatusColor = function getStatusColor(status) {\n  return TASK_STATUS_COLORS[normalizeStatus(status)];\n};\nvar getStatusBadgeText = function getStatusBadgeText(status) {\n  return TASK_STATUS_BADGE_TEXT[normalizeStatus(status)];\n};\nvar resolveVisibleFields = function resolveVisibleFields(visibleFields) {\n  return visibleFields && visibleFields.length > 0 ? visibleFields : DEFAULT_VISIBLE_FIELDS;\n};\nvar styles = {\n  \"ganttTable\": \"_3_ygE\",\n  \"ganttTable_Header\": \"_1nBOt\",\n  \"ganttTable_HeaderSeparator\": \"_2eZzQ\",\n  \"ganttTable_HeaderItem\": \"_WuQ0f\",\n  \"ganttTable_HeaderItemDragging\": \"_Fc5Tl\",\n  \"ganttTable_DragHandle\": \"_b6dPy\",\n  \"ganttTable_DragHandleDisabled\": \"_3ZMNU\",\n  \"ganttTable_DragIcon\": \"_QZHO8\",\n  \"ganttTable_HeaderLabel\": \"_2ANS-\",\n  \"ganttTable_ResizeHandle\": \"_OJ-Vg\",\n  \"ganttTable_ResizeHandleActive\": \"_21P28\"\n};\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\nvar classnames = createCommonjsModule(function (module) {\n  /*!\n  \tCopyright (c) 2018 Jed Watson.\n  \tLicensed under the MIT License (MIT), see\n  \thttp://jedwatson.github.io/classnames\n  */\n  /* global define */\n\n  (function () {\n    var hasOwn = {}.hasOwnProperty;\n    function classNames() {\n      var classes = '';\n      for (var i = 0; i < arguments.length; i++) {\n        var arg = arguments[i];\n        if (arg) {\n          classes = appendClass(classes, parseValue(arg));\n        }\n      }\n      return classes;\n    }\n    function parseValue(arg) {\n      if (typeof arg === 'string' || typeof arg === 'number') {\n        return arg;\n      }\n      if (typeof arg !== 'object') {\n        return '';\n      }\n      if (Array.isArray(arg)) {\n        return classNames.apply(null, arg);\n      }\n      if (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n        return arg.toString();\n      }\n      var classes = '';\n      for (var key in arg) {\n        if (hasOwn.call(arg, key) && arg[key]) {\n          classes = appendClass(classes, key);\n        }\n      }\n      return classes;\n    }\n    function appendClass(value, newClass) {\n      if (!newClass) {\n        return value;\n      }\n      if (value) {\n        return value + ' ' + newClass;\n      }\n      return value + newClass;\n    }\n    if (module.exports) {\n      classNames.default = classNames;\n      module.exports = classNames;\n    } else {\n      window.classNames = classNames;\n    }\n  })();\n});\n\n// A type of promise-like that resolves synchronously and supports only one observer\n\nconst _iteratorSymbol = /*#__PURE__*/typeof Symbol !== \"undefined\" ? Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\")) : \"@@iterator\";\nconst _asyncIteratorSymbol = /*#__PURE__*/typeof Symbol !== \"undefined\" ? Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\")) : \"@@asyncIterator\";\n\n// Asynchronously call a function and send errors to recovery continuation\nfunction _catch(body, recover) {\n  try {\n    var result = body();\n  } catch (e) {\n    return recover(e);\n  }\n  if (result && result.then) {\n    return result.then(void 0, recover);\n  }\n  return result;\n}\nvar styles$1 = {\n  \"taskListWrapper\": \"_3ZbQT\",\n  \"taskListTableRow\": \"_34SS0\",\n  \"taskListCell\": \"_3lLk3\",\n  \"overlayEditor\": \"_3Nu1y\",\n  \"overlayEditorPending\": \"_2jEdG\",\n  \"overlayEditorError\": \"_2TWaP\",\n  \"taskListNameWrapper\": \"_nI1Xw\",\n  \"taskListExpander\": \"_2QjE6\",\n  \"taskListEmptyExpander\": \"_2TfEi\",\n  \"taskListInput\": \"_1bdaa\",\n  \"taskListSelect\": \"_1u3fW\",\n  \"statusWrapper\": \"_dRJfs\",\n  \"statusBadge\": \"_33mea\",\n  \"statusText\": \"_vpQEz\"\n};\nvar NULL_CHAR_REGEX = new RegExp(String.fromCharCode(0), \"g\");\nvar ALPHANUMERIC_REGEX = /[a-zA-Z0-9]/;\nvar resolveOverlayInputType = function resolveOverlayInputType(columnId) {\n  switch (columnId) {\n    case \"start\":\n    case \"end\":\n    case \"plannedStart\":\n    case \"plannedEnd\":\n      return \"date\";\n    case \"plannedEffort\":\n    case \"actualEffort\":\n      return \"number\";\n    case \"process\":\n    case \"status\":\n      return \"select\";\n    case \"name\":\n    case \"assignee\":\n    default:\n      return \"text\";\n  }\n};\nvar escapeSelectorValue = function escapeSelectorValue(value) {\n  if (typeof CSS !== \"undefined\" && typeof CSS.escape === \"function\") {\n    return CSS.escape(value);\n  }\n  var sanitized = value.replace(NULL_CHAR_REGEX, \"\\uFFFD\");\n  return Array.from(sanitized).map(function (_char, index) {\n    var codePoint = _char.codePointAt(0);\n    if (codePoint === undefined) {\n      return \"\";\n    }\n    if (codePoint >= 0x1 && codePoint <= 0x1f || codePoint === 0x7f || index === 0 && codePoint >= 0x30 && codePoint <= 0x39 || index === 1 && codePoint >= 0x30 && codePoint <= 0x39 && sanitized.charCodeAt(0) === 0x2d) {\n      return \"\\\\\" + codePoint.toString(16) + \" \";\n    }\n    if (_char === \"-\" || _char === \"_\" || ALPHANUMERIC_REGEX.test(_char)) {\n      return _char;\n    }\n    return \"\\\\\" + _char;\n  }).join(\"\");\n};\nvar OverlayEditor = function OverlayEditor(_ref) {\n  var editingState = _ref.editingState,\n    taskListRef = _ref.taskListRef,\n    headerContainerRef = _ref.headerContainerRef,\n    bodyContainerRef = _ref.bodyContainerRef,\n    onCommit = _ref.onCommit,\n    onCancel = _ref.onCancel;\n  var _useState = useState(null),\n    rect = _useState[0],\n    setRect = _useState[1];\n  var _useState2 = useState(null),\n    targetElement = _useState2[0],\n    setTargetElement = _useState2[1];\n  var inputRef = useRef(null);\n  var defaultValueRef = useRef(\"\");\n  var compositionRef = useRef(false);\n  var rafIdRef = useRef(null);\n  var inputType = useMemo(function () {\n    return resolveOverlayInputType(editingState.columnId);\n  }, [editingState.columnId]);\n  var selectOptions = useMemo(function () {\n    if (editingState.columnId === \"process\") {\n      return TASK_PROCESS_OPTIONS;\n    }\n    if (editingState.columnId === \"status\") {\n      return TASK_STATUS_OPTIONS;\n    }\n    return [];\n  }, [editingState.columnId]);\n  var portalRoot = useMemo(function () {\n    if (typeof document === \"undefined\") {\n      return null;\n    }\n    return document.body;\n  }, []);\n  var resolveDefaultValue = useCallback(function (target) {\n    var _target$textContent;\n    var input = target.querySelector(\"input, textarea, select\");\n    if (input instanceof HTMLInputElement || input instanceof HTMLTextAreaElement) {\n      return input.value;\n    }\n    if (input instanceof HTMLSelectElement) {\n      return input.value;\n    }\n    return ((_target$textContent = target.textContent) != null ? _target$textContent : \"\").trim();\n  }, []);\n  var findTargetElement = useCallback(function () {\n    if (!taskListRef.current || !editingState.rowId || !editingState.columnId) {\n      return null;\n    }\n    var rowId = escapeSelectorValue(editingState.rowId);\n    var columnId = escapeSelectorValue(editingState.columnId);\n    return taskListRef.current.querySelector(\"[data-row-id=\\\"\" + rowId + \"\\\"][data-column-id=\\\"\" + columnId + \"\\\"]\");\n  }, [editingState.columnId, editingState.rowId, taskListRef]);\n  var updateRect = useCallback(function () {\n    if (editingState.mode !== \"editing\") {\n      setRect(null);\n      setTargetElement(null);\n      return;\n    }\n    var target = findTargetElement();\n    if (!target) {\n      setRect(null);\n      setTargetElement(null);\n      onCancel(\"unmounted\");\n      return;\n    }\n    if (targetElement !== target) {\n      var nextDefaultValue = resolveDefaultValue(target);\n      defaultValueRef.current = nextDefaultValue;\n      if (inputRef.current) {\n        inputRef.current.value = nextDefaultValue;\n      }\n      setTargetElement(target);\n    }\n    var nextRect = target.getBoundingClientRect();\n    setRect({\n      top: Math.round(nextRect.top),\n      left: Math.round(nextRect.left),\n      width: Math.round(nextRect.width),\n      height: Math.round(nextRect.height)\n    });\n  }, [editingState.mode, findTargetElement, onCancel, resolveDefaultValue, targetElement]);\n  var scheduleRectUpdate = useCallback(function () {\n    if (rafIdRef.current !== null) {\n      return;\n    }\n    rafIdRef.current = window.requestAnimationFrame(function () {\n      rafIdRef.current = null;\n      updateRect();\n    });\n  }, [updateRect]);\n  useEffect(function () {\n    if (editingState.mode !== \"editing\") {\n      defaultValueRef.current = \"\";\n      compositionRef.current = false;\n      setRect(null);\n      setTargetElement(null);\n      return;\n    }\n    scheduleRectUpdate();\n  }, [editingState.mode, scheduleRectUpdate]);\n  useEffect(function () {\n    if (editingState.mode !== \"editing\") {\n      return undefined;\n    }\n    var handleScroll = function handleScroll() {\n      return scheduleRectUpdate();\n    };\n    var handleResize = function handleResize() {\n      return scheduleRectUpdate();\n    };\n    window.addEventListener(\"scroll\", handleScroll, {\n      capture: true,\n      passive: true\n    });\n    window.addEventListener(\"resize\", handleResize, {\n      capture: true\n    });\n    document.addEventListener(\"scroll\", handleScroll, {\n      capture: true,\n      passive: true\n    });\n    var scrollTargets = [taskListRef.current, bodyContainerRef === null || bodyContainerRef === void 0 ? void 0 : bodyContainerRef.current, headerContainerRef === null || headerContainerRef === void 0 ? void 0 : headerContainerRef.current].filter(Boolean);\n    scrollTargets.forEach(function (element) {\n      return element.addEventListener(\"scroll\", handleScroll, {\n        capture: true,\n        passive: true\n      });\n    });\n    var ResizeObserverConstructor = typeof window !== \"undefined\" ? window.ResizeObserver : undefined;\n    var resizeObserver = ResizeObserverConstructor ? new ResizeObserverConstructor(function () {\n      return scheduleRectUpdate();\n    }) : null;\n    var observedElements = [targetElement, taskListRef.current, bodyContainerRef === null || bodyContainerRef === void 0 ? void 0 : bodyContainerRef.current, headerContainerRef === null || headerContainerRef === void 0 ? void 0 : headerContainerRef.current].filter(Boolean);\n    observedElements.forEach(function (element) {\n      return resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.observe(element);\n    });\n    return function () {\n      window.removeEventListener(\"scroll\", handleScroll, {\n        capture: true\n      });\n      window.removeEventListener(\"resize\", handleResize, {\n        capture: true\n      });\n      document.removeEventListener(\"scroll\", handleScroll, {\n        capture: true\n      });\n      scrollTargets.forEach(function (element) {\n        return element.removeEventListener(\"scroll\", handleScroll, {\n          capture: true\n        });\n      });\n      resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.disconnect();\n    };\n  }, [bodyContainerRef, editingState.mode, headerContainerRef, scheduleRectUpdate, targetElement, taskListRef]);\n  useEffect(function () {\n    return function () {\n      if (rafIdRef.current !== null) {\n        window.cancelAnimationFrame(rafIdRef.current);\n        rafIdRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(function () {\n    if (editingState.mode !== \"editing\") {\n      return;\n    }\n    var input = inputRef.current;\n    if (!input) {\n      return;\n    }\n    if (editingState.pending) {\n      input.focus();\n      return;\n    }\n    input.focus();\n    if (input instanceof HTMLInputElement) {\n      input.select();\n    }\n  }, [editingState.mode, editingState.pending, targetElement]);\n  var handleCommit = useCallback(function () {\n    try {\n      if (editingState.pending) {\n        return Promise.resolve();\n      }\n      var input = inputRef.current;\n      if (!input) {\n        return Promise.resolve();\n      }\n      return Promise.resolve(onCommit(input.value, \"enter\")).then(function () {});\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }, [editingState.pending, onCommit]);\n  var handleKeyDown = useCallback(function (event) {\n    if (editingState.pending) {\n      if (event.key === \"Escape\" || event.key === \"Enter\") {\n        event.preventDefault();\n      }\n      return;\n    }\n    if (event.key === \"Enter\") {\n      event.preventDefault();\n      void handleCommit();\n      return;\n    }\n    if (event.key === \"Escape\") {\n      event.preventDefault();\n      onCancel(\"escape\");\n    }\n  }, [editingState.pending, handleCommit, onCancel]);\n  var handleBlur = useCallback(function () {\n    if (editingState.pending || compositionRef.current) {\n      return;\n    }\n    var input = inputRef.current;\n    if (!input) {\n      return;\n    }\n    if (input.value === defaultValueRef.current) {\n      onCancel(\"nochange-blur\");\n    }\n  }, [editingState.pending, onCancel]);\n  var handleInput = useCallback(function (event) {\n    if (!editingState.pending) {\n      return;\n    }\n    var input = event.currentTarget;\n    input.value = defaultValueRef.current;\n  }, [editingState.pending]);\n  var handleCompositionStart = function handleCompositionStart() {\n    compositionRef.current = true;\n  };\n  var handleCompositionEnd = function handleCompositionEnd() {\n    compositionRef.current = false;\n  };\n  var handleInputElementRef = useCallback(function (element) {\n    inputRef.current = element;\n  }, []);\n  if (editingState.mode !== \"editing\" || !rect || !portalRoot) {\n    return null;\n  }\n  return createPortal(React.createElement(\"div\", {\n    className: styles$1.overlayEditor + \" \" + (editingState.pending ? styles$1.overlayEditorPending : \"\"),\n    \"data-testid\": \"overlay-editor\",\n    style: {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    }\n  }, inputType === \"select\" ? React.createElement(\"select\", {\n    className: styles$1.taskListSelect,\n    \"data-testid\": \"overlay-editor-input\",\n    \"aria-label\": \"\\u30BB\\u30EB\\u7DE8\\u96C6\",\n    defaultValue: defaultValueRef.current,\n    style: {\n      height: \"100%\"\n    },\n    ref: handleInputElementRef,\n    disabled: editingState.pending,\n    onKeyDown: handleKeyDown,\n    onBlur: handleBlur,\n    onInput: handleInput,\n    onChange: handleInput\n  }, selectOptions.map(function (option) {\n    return React.createElement(\"option\", {\n      key: option,\n      value: option\n    }, option);\n  })) : React.createElement(\"input\", {\n    className: styles$1.taskListInput,\n    \"data-testid\": \"overlay-editor-input\",\n    type: inputType,\n    \"aria-label\": \"\\u30BB\\u30EB\\u7DE8\\u96C6\",\n    defaultValue: defaultValueRef.current,\n    style: {\n      height: \"100%\"\n    },\n    ref: handleInputElementRef,\n    readOnly: editingState.pending,\n    onKeyDown: handleKeyDown,\n    onBlur: handleBlur,\n    onInput: handleInput,\n    onChange: handleInput,\n    onCompositionStart: handleCompositionStart,\n    onCompositionEnd: handleCompositionEnd\n  }), editingState.errorMessage && React.createElement(\"div\", {\n    className: styles$1.overlayEditorError,\n    role: \"alert\"\n  }, editingState.errorMessage)), portalRoot);\n};\nvar TaskListEditingStateContext = React.createContext(null);\nvar DEFAULT_MIN_WIDTH = 32;\nvar getDefaultWidth = function getDefaultWidth(field, rowWidth) {\n  return field === \"name\" ? 140 : Number.parseInt(rowWidth, 10) || 155;\n};\nvar TaskList = function TaskList(_ref) {\n  var headerHeight = _ref.headerHeight,\n    fontFamily = _ref.fontFamily,\n    fontSize = _ref.fontSize,\n    rowWidth = _ref.rowWidth,\n    rowHeight = _ref.rowHeight,\n    scrollY = _ref.scrollY,\n    _ref$horizontalScroll = _ref.horizontalScroll,\n    horizontalScroll = _ref$horizontalScroll === void 0 ? 0 : _ref$horizontalScroll,\n    tasks = _ref.tasks,\n    selectedTask = _ref.selectedTask,\n    setSelectedTask = _ref.setSelectedTask,\n    onExpanderClick = _ref.onExpanderClick,\n    ganttHeight = _ref.ganttHeight,\n    taskListRef = _ref.taskListRef,\n    headerContainerRef = _ref.headerContainerRef,\n    bodyContainerRef = _ref.bodyContainerRef,\n    horizontalContainerClass = _ref.horizontalContainerClass,\n    TaskListHeader = _ref.TaskListHeader,\n    TaskListTable = _ref.TaskListTable,\n    visibleFields = _ref.visibleFields,\n    onUpdateTask = _ref.onUpdateTask,\n    onCellCommit = _ref.onCellCommit,\n    effortDisplayUnit = _ref.effortDisplayUnit,\n    _ref$enableColumnDrag = _ref.enableColumnDrag,\n    enableColumnDrag = _ref$enableColumnDrag === void 0 ? true : _ref$enableColumnDrag,\n    onHorizontalScroll = _ref.onHorizontalScroll;\n  var internalHorizontalRef = useRef(null);\n  var internalHeaderRef = useRef(null);\n  var horizontalContainerRef = bodyContainerRef != null ? bodyContainerRef : internalHorizontalRef;\n  var headerRef = headerContainerRef != null ? headerContainerRef : internalHeaderRef;\n  useEffect(function () {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY, horizontalContainerRef]);\n  useEffect(function () {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollLeft = horizontalScroll;\n    }\n    if (headerRef.current) {\n      headerRef.current.scrollLeft = horizontalScroll;\n    }\n  }, [horizontalScroll, horizontalContainerRef, headerRef]);\n  var initialColumns = useMemo(function () {\n    return visibleFields.map(function (field) {\n      return {\n        id: field,\n        label: field,\n        width: getDefaultWidth(field, rowWidth),\n        minWidth: DEFAULT_MIN_WIDTH,\n        visible: true\n      };\n    });\n  }, [visibleFields, rowWidth]);\n  var _useState = useState(initialColumns),\n    columnsState = _useState[0],\n    setColumnsState = _useState[1];\n  useEffect(function () {\n    setColumnsState(function (prev) {\n      var existingMap = new Map(prev.map(function (column) {\n        return [column.id, column];\n      }));\n      var nextColumns = visibleFields.map(function (field) {\n        var existing = existingMap.get(field);\n        if (existing) {\n          return existing;\n        }\n        return {\n          id: field,\n          label: field,\n          width: getDefaultWidth(field, rowWidth),\n          minWidth: DEFAULT_MIN_WIDTH,\n          visible: true\n        };\n      });\n      return nextColumns;\n    });\n  }, [visibleFields, rowWidth]);\n  var visibleColumns = useMemo(function () {\n    return columnsState.filter(function (column) {\n      return column.visible;\n    });\n  }, [columnsState]);\n  var headerProps = {\n    headerHeight: headerHeight,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    rowWidth: rowWidth,\n    visibleFields: visibleFields,\n    columnsState: columnsState,\n    setColumnsState: setColumnsState,\n    enableColumnDrag: enableColumnDrag\n  };\n  var selectedTaskId = selectedTask ? selectedTask.id : \"\";\n  var tableProps = {\n    rowHeight: rowHeight,\n    rowWidth: rowWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    tasks: tasks,\n    selectedTaskId: selectedTaskId,\n    setSelectedTask: setSelectedTask,\n    onExpanderClick: onExpanderClick,\n    visibleFields: visibleFields,\n    onUpdateTask: onUpdateTask,\n    onCellCommit: onCellCommit,\n    effortDisplayUnit: effortDisplayUnit,\n    columnsState: visibleColumns\n  };\n  var _useState2 = useState({\n      mode: \"viewing\",\n      rowId: null,\n      columnId: null,\n      trigger: null,\n      pending: false,\n      errorMessage: null\n    }),\n    editingState = _useState2[0],\n    setEditingState = _useState2[1];\n  var previousEditingStateRef = useRef(null);\n  var closeEditing = useCallback(function () {\n    setEditingState(function (prev) {\n      if (prev.mode === \"viewing\") {\n        return prev;\n      }\n      return {\n        mode: \"viewing\",\n        rowId: null,\n        columnId: null,\n        trigger: null,\n        pending: false,\n        errorMessage: null\n      };\n    });\n  }, []);\n  var mountedRef = useRef(true);\n  useEffect(function () {\n    return function () {\n      mountedRef.current = false;\n    };\n  }, []);\n  var cancelEditing = useCallback(function (reason) {\n    if (editingState.mode !== \"editing\") {\n      return;\n    }\n    console.debug(\"[edit:cancel]\", {\n      rowId: editingState.rowId,\n      columnId: editingState.columnId,\n      reason: reason\n    });\n    closeEditing();\n  }, [closeEditing, editingState.columnId, editingState.mode, editingState.rowId]);\n  var commitEditing = useCallback(function (value, trigger) {\n    try {\n      if (!onCellCommit) {\n        return Promise.resolve();\n      }\n      if (editingState.mode !== \"editing\" || editingState.pending) {\n        return Promise.resolve();\n      }\n      if (!editingState.rowId || !editingState.columnId) {\n        return Promise.resolve();\n      }\n      var rowId = editingState.rowId;\n      var columnId = editingState.columnId;\n      setEditingState(function (prev) {\n        if (prev.mode !== \"editing\" || prev.pending || prev.rowId !== rowId || prev.columnId !== columnId) {\n          return prev;\n        }\n        return _extends({}, prev, {\n          pending: true,\n          errorMessage: null\n        });\n      });\n      return Promise.resolve(_catch(function () {\n        return Promise.resolve(onCellCommit({\n          rowId: rowId,\n          columnId: columnId,\n          value: value,\n          trigger: trigger\n        })).then(function () {\n          if (!mountedRef.current) {\n            return;\n          }\n          setEditingState(function (prev) {\n            if (prev.mode !== \"editing\" || prev.rowId !== rowId || prev.columnId !== columnId) {\n              return prev;\n            }\n            return {\n              mode: \"viewing\",\n              rowId: null,\n              columnId: null,\n              trigger: null,\n              pending: false,\n              errorMessage: null\n            };\n          });\n        });\n      }, function (error) {\n        console.error(\"[commit:error]\", {\n          rowId: rowId,\n          columnId: columnId,\n          trigger: trigger,\n          message: error instanceof Error ? error.message : \"unknown\"\n        });\n        if (!mountedRef.current) {\n          return;\n        }\n        setEditingState(function (prev) {\n          if (prev.mode !== \"editing\" || prev.rowId !== rowId || prev.columnId !== columnId) {\n            return prev;\n          }\n          return _extends({}, prev, {\n            pending: false,\n            errorMessage: \"Commit failed. Please retry.\"\n          });\n        });\n      }));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }, [editingState, onCellCommit]);\n  var selectCell = useCallback(function (rowId, columnId) {\n    console.debug(\"[TaskList] select cell\", {\n      rowId: rowId,\n      columnId: columnId\n    });\n    setEditingState({\n      mode: \"selected\",\n      rowId: rowId,\n      columnId: columnId,\n      trigger: null,\n      pending: false,\n      errorMessage: null\n    });\n  }, []);\n  var startEditing = useCallback(function (rowId, columnId, trigger) {\n    if (editingState.pending) {\n      console.debug(\"[TaskList] ignore enter editing\", {\n        reason: \"pending\",\n        rowId: rowId,\n        columnId: columnId\n      });\n      return;\n    }\n    console.debug(\"[TaskList] enter editing\", {\n      rowId: rowId,\n      columnId: columnId,\n      trigger: trigger\n    });\n    setEditingState({\n      mode: \"editing\",\n      rowId: rowId,\n      columnId: columnId,\n      trigger: trigger,\n      pending: false,\n      errorMessage: null\n    });\n  }, [editingState.pending]);\n  useEffect(function () {\n    var previous = previousEditingStateRef.current;\n    if (previous) {\n      var buildLogContext = function buildLogContext() {\n        var _editingState$rowId, _editingState$columnI, _editingState$trigger;\n        return {\n          rowId: (_editingState$rowId = editingState.rowId) != null ? _editingState$rowId : previous.rowId,\n          columnId: (_editingState$columnI = editingState.columnId) != null ? _editingState$columnI : previous.columnId,\n          trigger: (_editingState$trigger = editingState.trigger) != null ? _editingState$trigger : previous.trigger\n        };\n      };\n      if (previous.mode !== \"editing\" && editingState.mode === \"editing\") {\n        console.log(\"[edit:start]\", buildLogContext());\n      }\n      if (!previous.pending && editingState.pending) {\n        console.log(\"[commit:start]\", buildLogContext());\n      }\n      if (previous.pending && !editingState.pending) {\n        var logContext = buildLogContext();\n        if (editingState.mode === \"editing\") {\n          console.log(\"[commit:reject]\", logContext);\n        } else {\n          console.log(\"[commit:resolve]\", logContext);\n        }\n      }\n      if (previous.mode === \"editing\" && editingState.mode !== \"editing\") {\n        console.log(\"[edit:end]\", _extends({}, buildLogContext(), {\n          to: editingState.mode\n        }));\n      }\n    }\n    previousEditingStateRef.current = editingState;\n  }, [editingState]);\n  var editingContextValue = useMemo(function () {\n    return {\n      editingState: editingState,\n      selectCell: selectCell,\n      startEditing: startEditing\n    };\n  }, [editingState, selectCell, startEditing]);\n  return React.createElement(\"div\", {\n    ref: taskListRef\n  }, React.createElement(OverlayEditor, {\n    editingState: editingState,\n    taskListRef: taskListRef,\n    headerContainerRef: headerRef,\n    bodyContainerRef: horizontalContainerRef,\n    onCommit: commitEditing,\n    onCancel: cancelEditing\n  }), React.createElement(\"div\", {\n    ref: headerRef,\n    onScroll: onHorizontalScroll,\n    style: {\n      width: \"100%\",\n      overflowX: \"hidden\"\n    }\n  }, React.createElement(TaskListHeader, Object.assign({}, headerProps))), React.createElement(\"div\", {\n    ref: horizontalContainerRef,\n    className: horizontalContainerClass,\n    style: ganttHeight ? {\n      height: ganttHeight\n    } : {},\n    onScroll: onHorizontalScroll\n  }, React.createElement(TaskListEditingStateContext.Provider, {\n    value: editingContextValue\n  }, React.createElement(TaskListTable, Object.assign({}, tableProps)))));\n};\nvar TaskListHeaderDefault = function TaskListHeaderDefault(_ref) {\n  var headerHeight = _ref.headerHeight,\n    fontFamily = _ref.fontFamily,\n    fontSize = _ref.fontSize,\n    rowWidth = _ref.rowWidth,\n    visibleFields = _ref.visibleFields,\n    columnsState = _ref.columnsState,\n    setColumnsState = _ref.setColumnsState,\n    _ref$enableColumnDrag = _ref.enableColumnDrag,\n    enableColumnDrag = _ref$enableColumnDrag === void 0 ? true : _ref$enableColumnDrag;\n  var labels = {\n    name: \"タスク名\",\n    start: \"開始日\",\n    end: \"終了日\",\n    process: \"工程\",\n    assignee: \"担当者\",\n    plannedStart: \"予定開始\",\n    plannedEnd: \"予定終了\",\n    plannedEffort: \"予定工数\",\n    actualEffort: \"実績工数\",\n    status: \"ステータス\"\n  };\n  var fallbackColumns = resolveVisibleFields(visibleFields).map(function (field) {\n    return {\n      id: field,\n      label: labels[field],\n      width: getDefaultWidth(field, rowWidth),\n      minWidth: DEFAULT_MIN_WIDTH,\n      visible: true\n    };\n  });\n  var resolvedColumns = useMemo(function () {\n    return (columnsState || fallbackColumns).filter(function (column) {\n      return column.visible !== false;\n    });\n  }, [columnsState, fallbackColumns]);\n  var sensors = useSensors(useSensor(PointerSensor));\n  var _useState = useState(null),\n    resizingId = _useState[0],\n    setResizingId = _useState[1];\n  var onDragEnd = function onDragEnd(event) {\n    if (!setColumnsState || !enableColumnDrag) return;\n    var active = event.active,\n      over = event.over;\n    if (!over || active.id === over.id) return;\n    setColumnsState(function (prev) {\n      var visible = prev.filter(function (column) {\n        return column.visible !== false;\n      });\n      var oldIndex = visible.findIndex(function (column) {\n        return column.id === active.id;\n      });\n      var newIndex = visible.findIndex(function (column) {\n        return column.id === over.id;\n      });\n      if (oldIndex < 0 || newIndex < 0) return prev;\n      var moved = arrayMove(visible, oldIndex, newIndex);\n      var idx = 0;\n      return prev.map(function (column) {\n        return column.visible !== false ? moved[idx++] : column;\n      });\n    });\n  };\n  var headerContent = React.createElement(\"div\", {\n    className: styles.ganttTable,\n    style: {\n      fontFamily: fontFamily,\n      fontSize: fontSize\n    }\n  }, React.createElement(\"div\", {\n    className: styles.ganttTable_Header,\n    style: {\n      height: headerHeight - 2\n    }\n  }, resolvedColumns.map(function (column, index) {\n    return React.createElement(React.Fragment, {\n      key: column.id\n    }, React.createElement(SortableHeaderItem, {\n      column: column,\n      labels: labels,\n      setColumnsState: setColumnsState,\n      enableDrag: enableColumnDrag && !!setColumnsState,\n      setResizingId: setResizingId,\n      isResizing: resizingId === column.id\n    }), index !== resolvedColumns.length - 1 && React.createElement(\"div\", {\n      className: styles.ganttTable_HeaderSeparator,\n      style: {\n        height: headerHeight * 0.5,\n        marginTop: headerHeight * 0.2\n      }\n    }));\n  })));\n  return React.createElement(DndContext, {\n    sensors: sensors,\n    onDragEnd: enableColumnDrag ? onDragEnd : undefined\n  }, React.createElement(SortableContext, {\n    items: resolvedColumns.map(function (column) {\n      return column.id;\n    }),\n    strategy: horizontalListSortingStrategy\n  }, headerContent));\n};\nvar SortableHeaderItem = function SortableHeaderItem(_ref2) {\n  var _classNames, _classNames2, _classNames3;\n  var column = _ref2.column,\n    labels = _ref2.labels,\n    setColumnsState = _ref2.setColumnsState,\n    enableDrag = _ref2.enableDrag,\n    setResizingId = _ref2.setResizingId,\n    isResizing = _ref2.isResizing;\n  var _useSortable = useSortable({\n      id: column.id,\n      disabled: !enableDrag\n    }),\n    attributes = _useSortable.attributes,\n    listeners = _useSortable.listeners,\n    setNodeRef = _useSortable.setNodeRef,\n    transform = _useSortable.transform,\n    transition = _useSortable.transition,\n    isDragging = _useSortable.isDragging;\n  var startXRef = useRef(null);\n  var startWidthRef = useRef(null);\n  var moveHandlerRef = useRef(null);\n  var upHandlerRef = useRef(null);\n  useEffect(function () {\n    return function () {\n      if (moveHandlerRef.current) {\n        document.removeEventListener(\"mousemove\", moveHandlerRef.current);\n        moveHandlerRef.current = null;\n      }\n      if (upHandlerRef.current) {\n        document.removeEventListener(\"mouseup\", upHandlerRef.current);\n        upHandlerRef.current = null;\n      }\n    };\n  }, []);\n  var style = {\n    minWidth: column.width,\n    maxWidth: column.width,\n    transform: CSS$1.Transform.toString(transform),\n    transition: transition\n  };\n  var onMouseDownResize = function onMouseDownResize(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    startXRef.current = event.clientX;\n    startWidthRef.current = column.width;\n    setResizingId(column.id);\n    var handleMouseMove = function handleMouseMove(moveEvent) {\n      if (startXRef.current == null || startWidthRef.current == null) return;\n      var delta = moveEvent.clientX - startXRef.current;\n      var nextWidth = Math.max(column.minWidth, startWidthRef.current + delta);\n      setColumnsState === null || setColumnsState === void 0 ? void 0 : setColumnsState(function (prev) {\n        return prev.map(function (item) {\n          return item.id === column.id ? _extends({}, item, {\n            width: nextWidth\n          }) : item;\n        });\n      });\n    };\n    var handleMouseUp = function handleMouseUp() {\n      startXRef.current = null;\n      startWidthRef.current = null;\n      setResizingId(null);\n      if (moveHandlerRef.current) {\n        document.removeEventListener(\"mousemove\", moveHandlerRef.current);\n        moveHandlerRef.current = null;\n      }\n      if (upHandlerRef.current) {\n        document.removeEventListener(\"mouseup\", upHandlerRef.current);\n        upHandlerRef.current = null;\n      }\n    };\n    moveHandlerRef.current = handleMouseMove;\n    upHandlerRef.current = handleMouseUp;\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n  return React.createElement(\"div\", {\n    ref: setNodeRef,\n    className: classnames(styles.ganttTable_HeaderItem, (_classNames = {}, _classNames[styles.ganttTable_HeaderItemDragging] = isDragging, _classNames)),\n    style: style\n  }, React.createElement(\"div\", Object.assign({\n    className: classnames(styles.ganttTable_DragHandle, (_classNames2 = {}, _classNames2[styles.ganttTable_DragHandleDisabled] = !enableDrag, _classNames2))\n  }, attributes, listeners, {\n    \"aria-label\": \"Drag column\",\n    onMouseDown: function onMouseDown(event) {\n      return event.stopPropagation();\n    }\n  }), React.createElement(\"span\", {\n    className: styles.ganttTable_DragIcon,\n    \"aria-hidden\": \"true\"\n  }, \"\\u22EE\\u22EE\")), React.createElement(\"div\", {\n    className: styles.ganttTable_HeaderLabel\n  }, labels[column.id]), React.createElement(\"div\", {\n    className: classnames(styles.ganttTable_ResizeHandle, (_classNames3 = {}, _classNames3[styles.ganttTable_ResizeHandleActive] = isResizing, _classNames3)),\n    onMouseDown: onMouseDownResize,\n    \"aria-label\": \"Resize column\",\n    role: \"separator\",\n    \"aria-orientation\": \"vertical\"\n  }));\n};\nvar TaskListTableDefault = function TaskListTableDefault(_ref) {\n  var _columnsState$filter;\n  var rowHeight = _ref.rowHeight,\n    rowWidth = _ref.rowWidth,\n    tasks = _ref.tasks,\n    fontFamily = _ref.fontFamily,\n    fontSize = _ref.fontSize,\n    onExpanderClick = _ref.onExpanderClick,\n    visibleFields = _ref.visibleFields,\n    onCellCommit = _ref.onCellCommit,\n    effortDisplayUnit = _ref.effortDisplayUnit,\n    columnsState = _ref.columnsState;\n  var columns = (_columnsState$filter = columnsState === null || columnsState === void 0 ? void 0 : columnsState.filter(function (column) {\n    return column.visible !== false;\n  })) != null ? _columnsState$filter : resolveVisibleFields(visibleFields).map(function (field) {\n    return {\n      id: field,\n      width: getDefaultWidth(field, rowWidth)\n    };\n  });\n  var isCommitEnabled = !!onCellCommit;\n  var allowEditing = isCommitEnabled;\n  var editingContext = React.useContext(TaskListEditingStateContext);\n  var editingState = editingContext === null || editingContext === void 0 ? void 0 : editingContext.editingState;\n  var editableFields = new Set([\"name\", \"start\", \"end\", \"process\", \"assignee\", \"plannedStart\", \"plannedEnd\", \"plannedEffort\", \"actualEffort\", \"status\"]);\n  var columnIds = columns.map(function (column) {\n    return typeof column === \"string\" ? column : column.id;\n  });\n  var resolveColumnId = function resolveColumnId(column) {\n    return typeof column === \"string\" ? column : column.id;\n  };\n  var isCellEditable = function isCellEditable(task, columnId) {\n    var tableEditable = allowEditing;\n    var columnEditable = editableFields.has(columnId);\n    var rowEditable = task.isDisabled !== true;\n    var cellEditableByRule = true;\n    return tableEditable && columnEditable && rowEditable && cellEditableByRule;\n  };\n  var selectCell = editingContext === null || editingContext === void 0 ? void 0 : editingContext.selectCell;\n  var startEditing = editingContext === null || editingContext === void 0 ? void 0 : editingContext.startEditing;\n  var findCellPosition = function findCellPosition() {\n    if (!editingState || editingState.mode === \"viewing\") {\n      return null;\n    }\n    var rowIndex = tasks.findIndex(function (task) {\n      return task.id === editingState.rowId;\n    });\n    var columnIndex = columnIds.indexOf(editingState.columnId);\n    if (rowIndex < 0 || columnIndex < 0) {\n      return null;\n    }\n    return {\n      rowIndex: rowIndex,\n      columnIndex: columnIndex\n    };\n  };\n  var resolveSelectedCell = function resolveSelectedCell() {\n    if (!editingState || editingState.mode !== \"selected\") {\n      return null;\n    }\n    var columnId = editingState.columnId;\n    if (!columnId || !columnIds.includes(columnId)) {\n      return null;\n    }\n    var task = tasks.find(function (row) {\n      return row.id === editingState.rowId;\n    });\n    if (!task) {\n      return null;\n    }\n    return {\n      task: task,\n      columnId: columnId\n    };\n  };\n  var moveSelection = function moveSelection(direction) {\n    if (!selectCell || tasks.length === 0 || columnIds.length === 0) {\n      return;\n    }\n    var position = findCellPosition();\n    if (!position) {\n      var firstColumn = columnIds[0];\n      selectCell(tasks[0].id, firstColumn);\n      return;\n    }\n    var rowIndex = position.rowIndex,\n      columnIndex = position.columnIndex;\n    switch (direction) {\n      case \"up\":\n        rowIndex = Math.max(0, rowIndex - 1);\n        break;\n      case \"down\":\n        rowIndex = Math.min(tasks.length - 1, rowIndex + 1);\n        break;\n      case \"left\":\n        columnIndex = Math.max(0, columnIndex - 1);\n        break;\n      case \"right\":\n        columnIndex = Math.min(columnIds.length - 1, columnIndex + 1);\n        break;\n    }\n    selectCell(tasks[rowIndex].id, columnIds[columnIndex]);\n  };\n  var shouldIgnoreKeyEvent = function shouldIgnoreKeyEvent(target) {\n    if (!(target instanceof HTMLElement)) {\n      return false;\n    }\n    if (target.isContentEditable) {\n      return true;\n    }\n    var tagName = target.tagName;\n    return tagName === \"INPUT\" || tagName === \"TEXTAREA\" || tagName === \"SELECT\";\n  };\n  var handleWrapperKeyDown = function handleWrapperKeyDown(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    if (shouldIgnoreKeyEvent(event.target)) {\n      return;\n    }\n    if ((editingState === null || editingState === void 0 ? void 0 : editingState.mode) === \"editing\") {\n      return;\n    }\n    switch (event.key) {\n      case \"ArrowUp\":\n        event.preventDefault();\n        moveSelection(\"up\");\n        return;\n      case \"ArrowDown\":\n        event.preventDefault();\n        moveSelection(\"down\");\n        return;\n      case \"ArrowLeft\":\n        event.preventDefault();\n        moveSelection(\"left\");\n        return;\n      case \"ArrowRight\":\n        event.preventDefault();\n        moveSelection(\"right\");\n        return;\n    }\n    if ((editingState === null || editingState === void 0 ? void 0 : editingState.mode) !== \"selected\") {\n      return;\n    }\n    var selectedCell = resolveSelectedCell();\n    if (!selectedCell || !startEditing) {\n      return;\n    }\n    if (event.key === \"Enter\") {\n      if (!isCellEditable(selectedCell.task, selectedCell.columnId)) {\n        console.debug(\"[TaskList] ignore enter editing\", {\n          reason: \"not-editable\",\n          rowId: selectedCell.task.id,\n          columnId: selectedCell.columnId\n        });\n        return;\n      }\n      event.preventDefault();\n      startEditing(selectedCell.task.id, selectedCell.columnId, \"enter\");\n      return;\n    }\n    if (event.key === \"Escape\") {\n      return;\n    }\n    var isPrintableKey = event.key.length === 1 && !event.metaKey && !event.ctrlKey && !event.altKey;\n    if (isPrintableKey) {\n      if (!isCellEditable(selectedCell.task, selectedCell.columnId)) {\n        console.debug(\"[TaskList] ignore enter editing\", {\n          reason: \"not-editable\",\n          rowId: selectedCell.task.id,\n          columnId: selectedCell.columnId\n        });\n        return;\n      }\n      event.preventDefault();\n      startEditing(selectedCell.task.id, selectedCell.columnId, \"key\");\n    }\n  };\n  return React.createElement(\"div\", {\n    className: styles$1.taskListWrapper,\n    tabIndex: 0,\n    onKeyDown: handleWrapperKeyDown,\n    style: {\n      fontFamily: fontFamily,\n      fontSize: fontSize\n    }\n  }, tasks.map(function (t) {\n    var expanderSymbol = \"\";\n    if (t.hideChildren === false) {\n      expanderSymbol = \"▼\";\n    } else if (t.hideChildren === true) {\n      expanderSymbol = \"▶\";\n    }\n    var renderCell = function renderCell(field) {\n      switch (field) {\n        case \"name\":\n          return React.createElement(\"div\", {\n            className: styles$1.taskListNameWrapper\n          }, React.createElement(\"div\", {\n            className: expanderSymbol ? styles$1.taskListExpander : styles$1.taskListEmptyExpander,\n            onClick: function onClick() {\n              return onExpanderClick(t);\n            }\n          }, expanderSymbol), React.createElement(\"div\", null, t.name));\n        case \"start\":\n          return React.createElement(\"span\", null, formatDate(t.start));\n        case \"end\":\n          return React.createElement(\"span\", null, formatDate(t.end));\n        case \"process\":\n          return React.createElement(\"span\", null, normalizeProcess(t.process));\n        case \"assignee\":\n          return React.createElement(\"span\", null, t.assignee || \"\");\n        case \"plannedStart\":\n          return React.createElement(\"span\", null, formatDate(t.plannedStart));\n        case \"plannedEnd\":\n          return React.createElement(\"span\", null, formatDate(t.plannedEnd));\n        case \"plannedEffort\":\n          return React.createElement(\"span\", null, formatEffort(t.plannedEffort, effortDisplayUnit));\n        case \"actualEffort\":\n          return React.createElement(\"span\", null, formatEffort(t.actualEffort, effortDisplayUnit));\n        case \"status\":\n          {\n            var statusValue = normalizeStatus(t.status);\n            return React.createElement(\"div\", {\n              className: styles$1.statusWrapper\n            }, React.createElement(\"span\", {\n              className: styles$1.statusBadge,\n              style: {\n                backgroundColor: getStatusColor(statusValue)\n              }\n            }, getStatusBadgeText(statusValue)), React.createElement(\"span\", {\n              className: styles$1.statusText\n            }, statusValue));\n          }\n        default:\n          return null;\n      }\n    };\n    return React.createElement(\"div\", {\n      className: styles$1.taskListTableRow,\n      style: {\n        height: rowHeight\n      },\n      key: t.id + \"row\"\n    }, columns.map(function (column) {\n      var columnId = resolveColumnId(column);\n      var isSelected = (editingState === null || editingState === void 0 ? void 0 : editingState.mode) !== \"viewing\" && (editingState === null || editingState === void 0 ? void 0 : editingState.rowId) === t.id && (editingState === null || editingState === void 0 ? void 0 : editingState.columnId) === columnId;\n      var handleCellClick = function handleCellClick(event) {\n        if ((editingState === null || editingState === void 0 ? void 0 : editingState.mode) === \"editing\") {\n          var pending = editingState.pending;\n          console.log(\"[edit:select]\", {\n            rowId: t.id,\n            columnId: columnId,\n            pending: pending\n          });\n          if (pending) {\n            return;\n          }\n        }\n        if (selectCell) {\n          selectCell(t.id, columnId);\n        }\n        event.currentTarget.focus();\n      };\n      var handleCellDoubleClick = function handleCellDoubleClick() {\n        if (!startEditing) {\n          return;\n        }\n        if (!isCellEditable(t, columnId)) {\n          console.debug(\"[TaskList] ignore enter editing\", {\n            reason: \"not-editable\",\n            rowId: t.id,\n            columnId: columnId\n          });\n          return;\n        }\n        startEditing(t.id, columnId, \"dblclick\");\n      };\n      var handleCellKeyDown = function handleCellKeyDown(event) {\n        if (shouldIgnoreKeyEvent(event.target)) {\n          return;\n        }\n        if (!isSelected || (editingState === null || editingState === void 0 ? void 0 : editingState.mode) !== \"selected\") {\n          return;\n        }\n        if (event.key === \"Enter\") {\n          if (!startEditing) {\n            return;\n          }\n          if (!isCellEditable(t, columnId)) {\n            console.debug(\"[TaskList] ignore enter editing\", {\n              reason: \"not-editable\",\n              rowId: t.id,\n              columnId: columnId\n            });\n            return;\n          }\n          event.preventDefault();\n          startEditing(t.id, columnId, \"enter\");\n          return;\n        }\n        if (event.key === \"Escape\") {\n          return;\n        }\n        var isPrintableKey = event.key.length === 1 && !event.metaKey && !event.ctrlKey && !event.altKey;\n        if (isPrintableKey) {\n          if (!startEditing) {\n            return;\n          }\n          if (!isCellEditable(t, columnId)) {\n            console.debug(\"[TaskList] ignore enter editing\", {\n              reason: \"not-editable\",\n              rowId: t.id,\n              columnId: columnId\n            });\n            return;\n          }\n          event.preventDefault();\n          startEditing(t.id, columnId, \"key\");\n        }\n      };\n      return React.createElement(\"div\", {\n        key: t.id + \"-\" + columnId,\n        className: styles$1.taskListCell,\n        \"data-row-id\": t.id,\n        \"data-column-id\": columnId,\n        \"aria-selected\": isSelected || undefined,\n        tabIndex: isSelected ? 0 : -1,\n        onClick: handleCellClick,\n        onDoubleClick: handleCellDoubleClick,\n        onKeyDown: handleCellKeyDown,\n        style: {\n          minWidth: typeof column === \"string\" ? rowWidth : column.width + \"px\",\n          maxWidth: typeof column === \"string\" ? rowWidth : column.width + \"px\"\n        },\n        title: columnId === \"name\" ? t.name : undefined\n      }, renderCell(columnId));\n    }));\n  }));\n};\nvar styles$2 = {\n  \"tooltipDefaultContainer\": \"_3T42e\",\n  \"tooltipDefaultContainerParagraph\": \"_29NTg\",\n  \"tooltipTitle\": \"_OlR7X\",\n  \"tooltipName\": \"_1LUF2\",\n  \"tooltipDate\": \"_18-nf\",\n  \"tooltipRow\": \"_2rDF0\",\n  \"tooltipLabel\": \"_2vh4d\",\n  \"tooltipValue\": \"_2HKiU\",\n  \"tooltipStatus\": \"_2Vw2t\",\n  \"tooltipStatusText\": \"_33_nk\",\n  \"tooltipDetailsContainer\": \"_25P-K\",\n  \"tooltipDetailsContainerHidden\": \"_3gVAq\"\n};\nvar Tooltip = function Tooltip(_ref) {\n  var task = _ref.task,\n    rowHeight = _ref.rowHeight,\n    rtl = _ref.rtl,\n    svgContainerHeight = _ref.svgContainerHeight,\n    svgContainerWidth = _ref.svgContainerWidth,\n    scrollX = _ref.scrollX,\n    scrollY = _ref.scrollY,\n    arrowIndent = _ref.arrowIndent,\n    fontSize = _ref.fontSize,\n    fontFamily = _ref.fontFamily,\n    headerHeight = _ref.headerHeight,\n    taskListWidth = _ref.taskListWidth,\n    TooltipContent = _ref.TooltipContent,\n    effortDisplayUnit = _ref.effortDisplayUnit;\n  var tooltipRef = useRef(null);\n  var _useState = useState(0),\n    relatedY = _useState[0],\n    setRelatedY = _useState[1];\n  var _useState2 = useState(0),\n    relatedX = _useState2[0],\n    setRelatedX = _useState2[1];\n  useEffect(function () {\n    if (tooltipRef.current) {\n      var tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\n      var tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\n      var newRelatedY = task.index * rowHeight - scrollY + headerHeight;\n      var newRelatedX;\n      if (rtl) {\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\n        if (newRelatedX < 0) {\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\n        }\n        var tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n        if (tooltipLeftmostPoint > svgContainerWidth) {\n          newRelatedX = svgContainerWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      } else {\n        newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\n        var _tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n        var fullChartWidth = taskListWidth + svgContainerWidth;\n        if (_tooltipLeftmostPoint > fullChartWidth) {\n          newRelatedX = task.x1 + taskListWidth - arrowIndent * 1.5 - scrollX - tooltipWidth;\n        }\n        if (newRelatedX < taskListWidth) {\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      }\n      var tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\n        newRelatedY = svgContainerHeight - tooltipHeight;\n      }\n      setRelatedY(newRelatedY);\n      setRelatedX(newRelatedX);\n    }\n  }, [tooltipRef, task, arrowIndent, scrollX, scrollY, headerHeight, taskListWidth, rowHeight, svgContainerHeight, svgContainerWidth, rtl]);\n  return React.createElement(\"div\", {\n    ref: tooltipRef,\n    className: relatedX ? styles$2.tooltipDetailsContainer : styles$2.tooltipDetailsContainerHidden,\n    style: {\n      left: relatedX,\n      top: relatedY\n    }\n  }, React.createElement(TooltipContent, {\n    task: task,\n    fontSize: fontSize,\n    fontFamily: fontFamily,\n    effortDisplayUnit: effortDisplayUnit\n  }));\n};\nvar StandardTooltipContent = function StandardTooltipContent(_ref2) {\n  var task = _ref2.task,\n    fontSize = _ref2.fontSize,\n    fontFamily = _ref2.fontFamily,\n    _ref2$effortDisplayUn = _ref2.effortDisplayUnit,\n    effortDisplayUnit = _ref2$effortDisplayUn === void 0 ? \"MH\" : _ref2$effortDisplayUn;\n  var style = {\n    fontSize: fontSize,\n    fontFamily: fontFamily\n  };\n  var normalizedStatus = normalizeStatus(task.status);\n  var normalizedProcess = normalizeProcess(task.process);\n  var dateRange = formatDate(task.start) + \" \\u301C \" + formatDate(task.end);\n  var plannedRange = task.plannedStart || task.plannedEnd ? formatDate(task.plannedStart) + \" \\u301C \" + formatDate(task.plannedEnd) : \"\";\n  var plannedEffort = formatEffort(task.plannedEffort, effortDisplayUnit);\n  var actualEffort = formatEffort(task.actualEffort, effortDisplayUnit);\n  return React.createElement(\"div\", {\n    className: styles$2.tooltipDefaultContainer,\n    style: style\n  }, React.createElement(\"div\", {\n    className: styles$2.tooltipTitle\n  }, React.createElement(\"b\", {\n    className: styles$2.tooltipName\n  }, task.name), React.createElement(\"span\", {\n    className: styles$2.tooltipDate\n  }, dateRange)), React.createElement(\"div\", {\n    className: styles$2.tooltipRow\n  }, React.createElement(\"span\", {\n    className: styles$2.tooltipLabel\n  }, \"\\u5DE5\\u7A0B\"), React.createElement(\"span\", {\n    className: styles$2.tooltipValue\n  }, normalizedProcess)), React.createElement(\"div\", {\n    className: styles$2.tooltipRow\n  }, React.createElement(\"span\", {\n    className: styles$2.tooltipLabel\n  }, \"\\u62C5\\u5F53\"), React.createElement(\"span\", {\n    className: styles$2.tooltipValue\n  }, task.assignee || \"-\")), plannedRange && React.createElement(\"div\", {\n    className: styles$2.tooltipRow\n  }, React.createElement(\"span\", {\n    className: styles$2.tooltipLabel\n  }, \"\\u4E88\\u5B9A\"), React.createElement(\"span\", {\n    className: styles$2.tooltipValue\n  }, plannedRange)), plannedEffort && React.createElement(\"div\", {\n    className: styles$2.tooltipRow\n  }, React.createElement(\"span\", {\n    className: styles$2.tooltipLabel\n  }, \"\\u4E88\\u5B9A\\u5DE5\\u6570\"), React.createElement(\"span\", {\n    className: styles$2.tooltipValue\n  }, plannedEffort)), actualEffort && React.createElement(\"div\", {\n    className: styles$2.tooltipRow\n  }, React.createElement(\"span\", {\n    className: styles$2.tooltipLabel\n  }, \"\\u5B9F\\u7E3E\\u5DE5\\u6570\"), React.createElement(\"span\", {\n    className: styles$2.tooltipValue\n  }, actualEffort)), React.createElement(\"div\", {\n    className: styles$2.tooltipRow\n  }, React.createElement(\"span\", {\n    className: styles$2.tooltipLabel\n  }, \"\\u30B9\\u30C6\\u30FC\\u30BF\\u30B9\"), React.createElement(\"span\", {\n    className: styles$2.tooltipValue\n  }, React.createElement(\"span\", {\n    className: styles$2.tooltipStatus,\n    style: {\n      backgroundColor: getStatusColor(normalizedStatus)\n    }\n  }, getStatusBadgeText(normalizedStatus)), React.createElement(\"span\", {\n    className: styles$2.tooltipStatusText\n  }, normalizedStatus))), !!task.progress && React.createElement(\"p\", {\n    className: styles$2.tooltipDefaultContainerParagraph\n  }, \"\\u9032\\u6357\\u7387: \", task.progress, \" %\"));\n};\nvar styles$3 = {\n  \"scroll\": \"_1eT-t\"\n};\nvar VerticalScroll = function VerticalScroll(_ref) {\n  var scroll = _ref.scroll,\n    ganttHeight = _ref.ganttHeight,\n    ganttFullHeight = _ref.ganttFullHeight,\n    headerHeight = _ref.headerHeight,\n    rtl = _ref.rtl,\n    onScroll = _ref.onScroll;\n  var scrollRef = useRef(null);\n  useEffect(function () {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scroll;\n    }\n  }, [scroll]);\n  return React.createElement(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: headerHeight,\n      height: ganttHeight,\n      right: rtl ? undefined : 0,\n      left: rtl ? 0 : undefined\n    },\n    className: styles$3.scroll,\n    onScroll: onScroll,\n    ref: scrollRef\n  }, React.createElement(\"div\", {\n    style: {\n      height: ganttFullHeight,\n      width: 1\n    }\n  }));\n};\nvar styles$4 = {\n  \"gridRow\": \"_2dZTy\",\n  \"gridRowLine\": \"_3rUKi\",\n  \"gridTick\": \"_RuwuK\"\n};\nvar GridBody = function GridBody(_ref) {\n  var tasks = _ref.tasks,\n    dates = _ref.dates,\n    rowHeight = _ref.rowHeight,\n    svgWidth = _ref.svgWidth,\n    columnWidth = _ref.columnWidth,\n    todayColor = _ref.todayColor,\n    rtl = _ref.rtl;\n  var y = 0;\n  var gridRows = [];\n  var rowLines = [React.createElement(\"line\", {\n    key: \"RowLineFirst\",\n    x: \"0\",\n    y1: 0,\n    x2: svgWidth,\n    y2: 0,\n    className: styles$4.gridRowLine\n  })];\n  for (var _iterator = _createForOfIteratorHelperLoose(tasks), _step; !(_step = _iterator()).done;) {\n    var task = _step.value;\n    gridRows.push(React.createElement(\"rect\", {\n      key: \"Row\" + task.id,\n      x: \"0\",\n      y: y,\n      width: svgWidth,\n      height: rowHeight,\n      className: styles$4.gridRow\n    }));\n    rowLines.push(React.createElement(\"line\", {\n      key: \"RowLine\" + task.id,\n      x: \"0\",\n      y1: y + rowHeight,\n      x2: svgWidth,\n      y2: y + rowHeight,\n      className: styles$4.gridRowLine\n    }));\n    y += rowHeight;\n  }\n  var now = new Date();\n  var tickX = 0;\n  var ticks = [];\n  var today = React.createElement(\"rect\", null);\n  for (var i = 0; i < dates.length; i++) {\n    var date = dates[i];\n    ticks.push(React.createElement(\"line\", {\n      key: date.getTime(),\n      x1: tickX,\n      y1: 0,\n      x2: tickX,\n      y2: y,\n      className: styles$4.gridTick\n    }));\n    if (i + 1 !== dates.length && date.getTime() < now.getTime() && dates[i + 1].getTime() >= now.getTime() || i !== 0 && i + 1 === dates.length && date.getTime() < now.getTime() && addToDate(date, date.getTime() - dates[i - 1].getTime(), \"millisecond\").getTime() >= now.getTime()) {\n      today = React.createElement(\"rect\", {\n        x: tickX,\n        y: 0,\n        width: columnWidth,\n        height: y,\n        fill: todayColor\n      });\n    }\n    if (rtl && i + 1 !== dates.length && date.getTime() >= now.getTime() && dates[i + 1].getTime() < now.getTime()) {\n      today = React.createElement(\"rect\", {\n        x: tickX + columnWidth,\n        y: 0,\n        width: columnWidth,\n        height: y,\n        fill: todayColor\n      });\n    }\n    tickX += columnWidth;\n  }\n  return React.createElement(\"g\", {\n    className: \"gridBody\"\n  }, React.createElement(\"g\", {\n    className: \"rows\"\n  }, gridRows), React.createElement(\"g\", {\n    className: \"rowLines\"\n  }, rowLines), React.createElement(\"g\", {\n    className: \"ticks\"\n  }, ticks), React.createElement(\"g\", {\n    className: \"today\"\n  }, today));\n};\nvar Grid = function Grid(props) {\n  return React.createElement(\"g\", {\n    className: \"grid\"\n  }, React.createElement(GridBody, Object.assign({}, props)));\n};\nvar styles$5 = {\n  \"calendarBottomText\": \"_9w8d5\",\n  \"calendarTopTick\": \"_1rLuZ\",\n  \"calendarTopText\": \"_2q1Kt\",\n  \"calendarHeader\": \"_35nLX\"\n};\nvar TopPartOfCalendar = function TopPartOfCalendar(_ref) {\n  var value = _ref.value,\n    x1Line = _ref.x1Line,\n    y1Line = _ref.y1Line,\n    y2Line = _ref.y2Line,\n    xText = _ref.xText,\n    yText = _ref.yText;\n  return React.createElement(\"g\", {\n    className: \"calendarTop\"\n  }, React.createElement(\"line\", {\n    x1: x1Line,\n    y1: y1Line,\n    x2: x1Line,\n    y2: y2Line,\n    className: styles$5.calendarTopTick,\n    key: value + \"line\"\n  }), React.createElement(\"text\", {\n    key: value + \"text\",\n    y: yText,\n    x: xText,\n    className: styles$5.calendarTopText\n  }, value));\n};\nvar Calendar = function Calendar(_ref) {\n  var dateSetup = _ref.dateSetup,\n    locale = _ref.locale,\n    viewMode = _ref.viewMode,\n    rtl = _ref.rtl,\n    headerHeight = _ref.headerHeight,\n    columnWidth = _ref.columnWidth,\n    fontFamily = _ref.fontFamily,\n    fontSize = _ref.fontSize;\n  var getCalendarValuesForYear = function getCalendarValuesForYear() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n    for (var i = 0; i < dateSetup.dates.length; i++) {\n      var date = dateSetup.dates[i];\n      var bottomValue = date.getFullYear();\n      bottomValues.push(React.createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n      if (i === 0 || date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()) {\n        var topValue = date.getFullYear().toString();\n        var xText = void 0;\n        if (rtl) {\n          xText = (6 + i + date.getFullYear() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getFullYear()) * columnWidth;\n        }\n        topValues.push(React.createElement(TopPartOfCalendar, {\n          key: topValue,\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: headerHeight,\n          xText: xText,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n    return [topValues, bottomValues];\n  };\n  var getCalendarValuesForQuarterYear = function getCalendarValuesForQuarterYear() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n    for (var i = 0; i < dateSetup.dates.length; i++) {\n      var date = dateSetup.dates[i];\n      var quarter = \"Q\" + Math.floor((date.getMonth() + 3) / 3);\n      bottomValues.push(React.createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, quarter));\n      if (i === 0 || date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()) {\n        var topValue = date.getFullYear().toString();\n        var xText = void 0;\n        if (rtl) {\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getMonth()) * columnWidth;\n        }\n        topValues.push(React.createElement(TopPartOfCalendar, {\n          key: topValue,\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: Math.abs(xText),\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n    return [topValues, bottomValues];\n  };\n  var getCalendarValuesForMonth = function getCalendarValuesForMonth() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n    for (var i = 0; i < dateSetup.dates.length; i++) {\n      var date = dateSetup.dates[i];\n      var bottomValue = getLocaleMonth(date, locale);\n      bottomValues.push(React.createElement(\"text\", {\n        key: bottomValue + date.getFullYear(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n      if (i === 0 || date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()) {\n        var topValue = date.getFullYear().toString();\n        var xText = void 0;\n        if (rtl) {\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getMonth()) * columnWidth;\n        }\n        topValues.push(React.createElement(TopPartOfCalendar, {\n          key: topValue,\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: xText,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n    return [topValues, bottomValues];\n  };\n  var getCalendarValuesForWeek = function getCalendarValuesForWeek() {\n    var topValues = [];\n    var bottomValues = [];\n    var weeksCount = 1;\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n    for (var i = dates.length - 1; i >= 0; i--) {\n      var date = dates[i];\n      var topValue = \"\";\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\n        topValue = getLocaleMonth(date, locale) + \", \" + date.getFullYear();\n      }\n      var bottomValue = \"W\" + getWeekNumberISO8601(date);\n      bottomValues.push(React.createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * (i + +rtl),\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n      if (topValue) {\n        if (i !== dates.length - 1) {\n          topValues.push(React.createElement(TopPartOfCalendar, {\n            key: topValue,\n            value: topValue,\n            x1Line: columnWidth * i + weeksCount * columnWidth,\n            y1Line: 0,\n            y2Line: topDefaultHeight,\n            xText: columnWidth * i + columnWidth * weeksCount * 0.5,\n            yText: topDefaultHeight * 0.9\n          }));\n        }\n        weeksCount = 0;\n      }\n      weeksCount++;\n    }\n    return [topValues, bottomValues];\n  };\n  var getCalendarValuesForDay = function getCalendarValuesForDay() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n    for (var i = 0; i < dates.length; i++) {\n      var date = dates[i];\n      var bottomValue = getLocalDayOfWeek(date, locale, \"short\") + \", \" + date.getDate().toString();\n      bottomValues.push(React.createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n      if (i + 1 !== dates.length && date.getMonth() !== dates[i + 1].getMonth()) {\n        var topValue = getLocaleMonth(date, locale);\n        topValues.push(React.createElement(TopPartOfCalendar, {\n          key: topValue + date.getFullYear(),\n          value: topValue,\n          x1Line: columnWidth * (i + 1),\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: columnWidth * (i + 1) - getDaysInMonth(date.getMonth(), date.getFullYear()) * columnWidth * 0.5,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n    return [topValues, bottomValues];\n  };\n  var getCalendarValuesForPartOfDay = function getCalendarValuesForPartOfDay() {\n    var topValues = [];\n    var bottomValues = [];\n    var ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n    for (var i = 0; i < dates.length; i++) {\n      var date = dates[i];\n      var bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\"\n      }).format(date);\n      bottomValues.push(React.createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * (i + +rtl),\n        className: styles$5.calendarBottomText,\n        fontFamily: fontFamily\n      }, bottomValue));\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\n        var topValue = getLocalDayOfWeek(date, locale, \"short\") + \", \" + date.getDate() + \" \" + getLocaleMonth(date, locale);\n        topValues.push(React.createElement(TopPartOfCalendar, {\n          key: topValue + date.getFullYear(),\n          value: topValue,\n          x1Line: columnWidth * i + ticks * columnWidth,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: columnWidth * i + ticks * columnWidth * 0.5,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n    return [topValues, bottomValues];\n  };\n  var getCalendarValuesForHour = function getCalendarValuesForHour() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n    for (var i = 0; i < dates.length; i++) {\n      var date = dates[i];\n      var bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\"\n      }).format(date);\n      bottomValues.push(React.createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * (i + +rtl),\n        className: styles$5.calendarBottomText,\n        fontFamily: fontFamily\n      }, bottomValue));\n      if (i !== 0 && date.getDate() !== dates[i - 1].getDate()) {\n        var displayDate = dates[i - 1];\n        var topValue = getLocalDayOfWeek(displayDate, locale, \"long\") + \", \" + displayDate.getDate() + \" \" + getLocaleMonth(displayDate, locale);\n        var topPosition = (date.getHours() - 24) / 2;\n        topValues.push(React.createElement(TopPartOfCalendar, {\n          key: topValue + displayDate.getFullYear(),\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: columnWidth * (i + topPosition),\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n    return [topValues, bottomValues];\n  };\n  var topValues = [];\n  var bottomValues = [];\n  switch (dateSetup.viewMode) {\n    case ViewMode.Year:\n      var _getCalendarValuesFor = getCalendarValuesForYear();\n      topValues = _getCalendarValuesFor[0];\n      bottomValues = _getCalendarValuesFor[1];\n      break;\n    case ViewMode.QuarterYear:\n      var _getCalendarValuesFor2 = getCalendarValuesForQuarterYear();\n      topValues = _getCalendarValuesFor2[0];\n      bottomValues = _getCalendarValuesFor2[1];\n      break;\n    case ViewMode.Month:\n      var _getCalendarValuesFor3 = getCalendarValuesForMonth();\n      topValues = _getCalendarValuesFor3[0];\n      bottomValues = _getCalendarValuesFor3[1];\n      break;\n    case ViewMode.Week:\n      var _getCalendarValuesFor4 = getCalendarValuesForWeek();\n      topValues = _getCalendarValuesFor4[0];\n      bottomValues = _getCalendarValuesFor4[1];\n      break;\n    case ViewMode.Day:\n      var _getCalendarValuesFor5 = getCalendarValuesForDay();\n      topValues = _getCalendarValuesFor5[0];\n      bottomValues = _getCalendarValuesFor5[1];\n      break;\n    case ViewMode.QuarterDay:\n    case ViewMode.HalfDay:\n      var _getCalendarValuesFor6 = getCalendarValuesForPartOfDay();\n      topValues = _getCalendarValuesFor6[0];\n      bottomValues = _getCalendarValuesFor6[1];\n      break;\n    case ViewMode.Hour:\n      var _getCalendarValuesFor7 = getCalendarValuesForHour();\n      topValues = _getCalendarValuesFor7[0];\n      bottomValues = _getCalendarValuesFor7[1];\n  }\n  return React.createElement(\"g\", {\n    className: \"calendar\",\n    fontSize: fontSize,\n    fontFamily: fontFamily\n  }, React.createElement(\"rect\", {\n    x: 0,\n    y: 0,\n    width: columnWidth * dateSetup.dates.length,\n    height: headerHeight,\n    className: styles$5.calendarHeader\n  }), bottomValues, \" \", topValues);\n};\nvar Arrow = function Arrow(_ref) {\n  var taskFrom = _ref.taskFrom,\n    taskTo = _ref.taskTo,\n    rowHeight = _ref.rowHeight,\n    taskHeight = _ref.taskHeight,\n    arrowIndent = _ref.arrowIndent,\n    rtl = _ref.rtl;\n  var path;\n  var trianglePoints;\n  if (rtl) {\n    var _drownPathAndTriangle = drownPathAndTriangleRTL(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent);\n    path = _drownPathAndTriangle[0];\n    trianglePoints = _drownPathAndTriangle[1];\n  } else {\n    var _drownPathAndTriangle2 = drownPathAndTriangle(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent);\n    path = _drownPathAndTriangle2[0];\n    trianglePoints = _drownPathAndTriangle2[1];\n  }\n  return React.createElement(\"g\", {\n    className: \"arrow\"\n  }, React.createElement(\"path\", {\n    strokeWidth: \"1.5\",\n    d: path,\n    fill: \"none\"\n  }), React.createElement(\"polygon\", {\n    points: trianglePoints\n  }));\n};\nvar drownPathAndTriangle = function drownPathAndTriangle(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent) {\n  var indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  var taskToEndPosition = taskTo.y + taskHeight / 2;\n  var taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\n  var taskFromHorizontalOffsetValue = taskFromEndPosition < taskTo.x1 ? \"\" : \"H \" + (taskTo.x1 - arrowIndent);\n  var taskToHorizontalOffsetValue = taskFromEndPosition > taskTo.x1 ? arrowIndent : taskTo.x1 - taskFrom.x2 - arrowIndent;\n  var path = \"M \" + taskFrom.x2 + \" \" + (taskFrom.y + taskHeight / 2) + \" \\n  h \" + arrowIndent + \" \\n  v \" + indexCompare * rowHeight / 2 + \" \\n  \" + taskFromHorizontalOffsetValue + \"\\n  V \" + taskToEndPosition + \" \\n  h \" + taskToHorizontalOffsetValue;\n  var trianglePoints = taskTo.x1 + \",\" + taskToEndPosition + \" \\n  \" + (taskTo.x1 - 5) + \",\" + (taskToEndPosition - 5) + \" \\n  \" + (taskTo.x1 - 5) + \",\" + (taskToEndPosition + 5);\n  return [path, trianglePoints];\n};\nvar drownPathAndTriangleRTL = function drownPathAndTriangleRTL(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent) {\n  var indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  var taskToEndPosition = taskTo.y + taskHeight / 2;\n  var taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\n  var taskFromHorizontalOffsetValue = taskFromEndPosition > taskTo.x2 ? \"\" : \"H \" + (taskTo.x2 + arrowIndent);\n  var taskToHorizontalOffsetValue = taskFromEndPosition < taskTo.x2 ? -arrowIndent : taskTo.x2 - taskFrom.x1 + arrowIndent;\n  var path = \"M \" + taskFrom.x1 + \" \" + (taskFrom.y + taskHeight / 2) + \" \\n  h \" + -arrowIndent + \" \\n  v \" + indexCompare * rowHeight / 2 + \" \\n  \" + taskFromHorizontalOffsetValue + \"\\n  V \" + taskToEndPosition + \" \\n  h \" + taskToHorizontalOffsetValue;\n  var trianglePoints = taskTo.x2 + \",\" + taskToEndPosition + \" \\n  \" + (taskTo.x2 + 5) + \",\" + (taskToEndPosition + 5) + \" \\n  \" + (taskTo.x2 + 5) + \",\" + (taskToEndPosition - 5);\n  return [path, trianglePoints];\n};\nvar convertToBarTasks = function convertToBarTasks(tasks, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor) {\n  var barTasks = tasks.map(function (t, i) {\n    return convertToBarTask(t, i, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor);\n  });\n  barTasks = barTasks.map(function (task) {\n    var dependencies = task.dependencies || [];\n    var _loop = function _loop(j) {\n      var dependence = barTasks.findIndex(function (value) {\n        return value.id === dependencies[j];\n      });\n      if (dependence !== -1) barTasks[dependence].barChildren.push(task);\n    };\n    for (var j = 0; j < dependencies.length; j++) {\n      _loop(j);\n    }\n    return task;\n  });\n  return barTasks;\n};\nvar convertToBarTask = function convertToBarTask(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor) {\n  var barTask;\n  switch (task.type) {\n    case \"milestone\":\n      barTask = convertToMilestone(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, milestoneBackgroundColor, milestoneBackgroundSelectedColor);\n      break;\n    case \"project\":\n      barTask = convertToBar(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor);\n      break;\n    default:\n      barTask = convertToBar(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor);\n      break;\n  }\n  return barTask;\n};\nvar convertToBar = function convertToBar(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor) {\n  var x1;\n  var x2;\n  if (rtl) {\n    x2 = taskXCoordinateRTL(task.start, dates, columnWidth);\n    x1 = taskXCoordinateRTL(task.end, dates, columnWidth);\n  } else {\n    x1 = taskXCoordinate(task.start, dates, columnWidth);\n    x2 = taskXCoordinate(task.end, dates, columnWidth);\n  }\n  var typeInternal = task.type;\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\n    typeInternal = \"smalltask\";\n    x2 = x1 + handleWidth * 2;\n  }\n  var _progressWithByParams = progressWithByParams(x1, x2, task.progress, rtl),\n    progressWidth = _progressWithByParams[0],\n    progressX = _progressWithByParams[1];\n  var y = taskYCoordinate(index, rowHeight, taskHeight);\n  var hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\n  var styles = _extends({\n    backgroundColor: barBackgroundColor,\n    backgroundSelectedColor: barBackgroundSelectedColor,\n    progressColor: barProgressColor,\n    progressSelectedColor: barProgressSelectedColor\n  }, task.styles);\n  return _extends({}, task, {\n    typeInternal: typeInternal,\n    x1: x1,\n    x2: x2,\n    y: y,\n    index: index,\n    progressX: progressX,\n    progressWidth: progressWidth,\n    barCornerRadius: barCornerRadius,\n    handleWidth: handleWidth,\n    hideChildren: hideChildren,\n    height: taskHeight,\n    barChildren: [],\n    styles: styles\n  });\n};\nvar convertToMilestone = function convertToMilestone(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, milestoneBackgroundColor, milestoneBackgroundSelectedColor) {\n  var x = taskXCoordinate(task.start, dates, columnWidth);\n  var y = taskYCoordinate(index, rowHeight, taskHeight);\n  var x1 = x - taskHeight * 0.5;\n  var x2 = x + taskHeight * 0.5;\n  var rotatedHeight = taskHeight / 1.414;\n  var styles = _extends({\n    backgroundColor: milestoneBackgroundColor,\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\n    progressColor: \"\",\n    progressSelectedColor: \"\"\n  }, task.styles);\n  return _extends({}, task, {\n    end: task.start,\n    x1: x1,\n    x2: x2,\n    y: y,\n    index: index,\n    progressX: 0,\n    progressWidth: 0,\n    barCornerRadius: barCornerRadius,\n    handleWidth: handleWidth,\n    typeInternal: task.type,\n    progress: 0,\n    height: rotatedHeight,\n    hideChildren: undefined,\n    barChildren: [],\n    styles: styles\n  });\n};\nvar taskXCoordinate = function taskXCoordinate(xDate, dates, columnWidth) {\n  var index = dates.findIndex(function (d) {\n    return d.getTime() >= xDate.getTime();\n  }) - 1;\n  var remainderMillis = xDate.getTime() - dates[index].getTime();\n  var percentOfInterval = remainderMillis / (dates[index + 1].getTime() - dates[index].getTime());\n  var x = index * columnWidth + percentOfInterval * columnWidth;\n  return x;\n};\nvar taskXCoordinateRTL = function taskXCoordinateRTL(xDate, dates, columnWidth) {\n  var x = taskXCoordinate(xDate, dates, columnWidth);\n  x += columnWidth;\n  return x;\n};\nvar taskYCoordinate = function taskYCoordinate(index, rowHeight, taskHeight) {\n  var y = index * rowHeight + (rowHeight - taskHeight) / 2;\n  return y;\n};\nvar progressWithByParams = function progressWithByParams(taskX1, taskX2, progress, rtl) {\n  var progressWidth = (taskX2 - taskX1) * progress * 0.01;\n  var progressX;\n  if (rtl) {\n    progressX = taskX2 - progressWidth;\n  } else {\n    progressX = taskX1;\n  }\n  return [progressWidth, progressX];\n};\nvar progressByX = function progressByX(x, task) {\n  if (x >= task.x2) return 100;else if (x <= task.x1) return 0;else {\n    var barWidth = task.x2 - task.x1;\n    var progressPercent = Math.round((x - task.x1) * 100 / barWidth);\n    return progressPercent;\n  }\n};\nvar progressByXRTL = function progressByXRTL(x, task) {\n  if (x >= task.x2) return 0;else if (x <= task.x1) return 100;else {\n    var barWidth = task.x2 - task.x1;\n    var progressPercent = Math.round((task.x2 - x) * 100 / barWidth);\n    return progressPercent;\n  }\n};\nvar getProgressPoint = function getProgressPoint(progressX, taskY, taskHeight) {\n  var point = [progressX - 5, taskY + taskHeight, progressX + 5, taskY + taskHeight, progressX, taskY + taskHeight - 8.66];\n  return point.join(\",\");\n};\nvar startByX = function startByX(x, xStep, task) {\n  if (x >= task.x2 - task.handleWidth * 2) {\n    x = task.x2 - task.handleWidth * 2;\n  }\n  var steps = Math.round((x - task.x1) / xStep);\n  var additionalXValue = steps * xStep;\n  var newX = task.x1 + additionalXValue;\n  return newX;\n};\nvar endByX = function endByX(x, xStep, task) {\n  if (x <= task.x1 + task.handleWidth * 2) {\n    x = task.x1 + task.handleWidth * 2;\n  }\n  var steps = Math.round((x - task.x2) / xStep);\n  var additionalXValue = steps * xStep;\n  var newX = task.x2 + additionalXValue;\n  return newX;\n};\nvar moveByX = function moveByX(x, xStep, task) {\n  var steps = Math.round((x - task.x1) / xStep);\n  var additionalXValue = steps * xStep;\n  var newX1 = task.x1 + additionalXValue;\n  var newX2 = newX1 + task.x2 - task.x1;\n  return [newX1, newX2];\n};\nvar dateByX = function dateByX(x, taskX, taskDate, xStep, timeStep) {\n  var newDate = new Date((x - taskX) / xStep * timeStep + taskDate.getTime());\n  newDate = new Date(newDate.getTime() + (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000);\n  return newDate;\n};\nvar handleTaskBySVGMouseEvent = function handleTaskBySVGMouseEvent(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta, rtl) {\n  var result;\n  switch (selectedTask.type) {\n    case \"milestone\":\n      result = handleTaskBySVGMouseEventForMilestone(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta);\n      break;\n    default:\n      result = handleTaskBySVGMouseEventForBar(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta, rtl);\n      break;\n  }\n  return result;\n};\nvar handleTaskBySVGMouseEventForBar = function handleTaskBySVGMouseEventForBar(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta, rtl) {\n  var changedTask = _extends({}, selectedTask);\n  var isChanged = false;\n  switch (action) {\n    case \"progress\":\n      if (rtl) {\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\n      } else {\n        changedTask.progress = progressByX(svgX, selectedTask);\n      }\n      isChanged = changedTask.progress !== selectedTask.progress;\n      if (isChanged) {\n        var _progressWithByParams2 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n          progressWidth = _progressWithByParams2[0],\n          progressX = _progressWithByParams2[1];\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    case \"start\":\n      {\n        var newX1 = startByX(svgX, xStep, selectedTask);\n        changedTask.x1 = newX1;\n        isChanged = changedTask.x1 !== selectedTask.x1;\n        if (isChanged) {\n          if (rtl) {\n            changedTask.end = dateByX(newX1, selectedTask.x1, selectedTask.end, xStep, timeStep);\n          } else {\n            changedTask.start = dateByX(newX1, selectedTask.x1, selectedTask.start, xStep, timeStep);\n          }\n          var _progressWithByParams3 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n            _progressWidth = _progressWithByParams3[0],\n            _progressX = _progressWithByParams3[1];\n          changedTask.progressWidth = _progressWidth;\n          changedTask.progressX = _progressX;\n        }\n        break;\n      }\n    case \"end\":\n      {\n        var newX2 = endByX(svgX, xStep, selectedTask);\n        changedTask.x2 = newX2;\n        isChanged = changedTask.x2 !== selectedTask.x2;\n        if (isChanged) {\n          if (rtl) {\n            changedTask.start = dateByX(newX2, selectedTask.x2, selectedTask.start, xStep, timeStep);\n          } else {\n            changedTask.end = dateByX(newX2, selectedTask.x2, selectedTask.end, xStep, timeStep);\n          }\n          var _progressWithByParams4 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n            _progressWidth2 = _progressWithByParams4[0],\n            _progressX2 = _progressWithByParams4[1];\n          changedTask.progressWidth = _progressWidth2;\n          changedTask.progressX = _progressX2;\n        }\n        break;\n      }\n    case \"move\":\n      {\n        var _moveByX = moveByX(svgX - initEventX1Delta, xStep, selectedTask),\n          newMoveX1 = _moveByX[0],\n          newMoveX2 = _moveByX[1];\n        isChanged = newMoveX1 !== selectedTask.x1;\n        if (isChanged) {\n          changedTask.start = dateByX(newMoveX1, selectedTask.x1, selectedTask.start, xStep, timeStep);\n          changedTask.end = dateByX(newMoveX2, selectedTask.x2, selectedTask.end, xStep, timeStep);\n          changedTask.x1 = newMoveX1;\n          changedTask.x2 = newMoveX2;\n          var _progressWithByParams5 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n            _progressWidth3 = _progressWithByParams5[0],\n            _progressX3 = _progressWithByParams5[1];\n          changedTask.progressWidth = _progressWidth3;\n          changedTask.progressX = _progressX3;\n        }\n        break;\n      }\n  }\n  return {\n    isChanged: isChanged,\n    changedTask: changedTask\n  };\n};\nvar handleTaskBySVGMouseEventForMilestone = function handleTaskBySVGMouseEventForMilestone(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta) {\n  var changedTask = _extends({}, selectedTask);\n  var isChanged = false;\n  switch (action) {\n    case \"move\":\n      {\n        var _moveByX2 = moveByX(svgX - initEventX1Delta, xStep, selectedTask),\n          newMoveX1 = _moveByX2[0],\n          newMoveX2 = _moveByX2[1];\n        isChanged = newMoveX1 !== selectedTask.x1;\n        if (isChanged) {\n          changedTask.start = dateByX(newMoveX1, selectedTask.x1, selectedTask.start, xStep, timeStep);\n          changedTask.end = changedTask.start;\n          changedTask.x1 = newMoveX1;\n          changedTask.x2 = newMoveX2;\n        }\n        break;\n      }\n  }\n  return {\n    isChanged: isChanged,\n    changedTask: changedTask\n  };\n};\nfunction isKeyboardEvent(event) {\n  return event.key !== undefined;\n}\nfunction removeHiddenTasks(tasks) {\n  var groupedTasks = tasks.filter(function (t) {\n    return t.hideChildren && t.type === \"project\";\n  });\n  if (groupedTasks.length > 0) {\n    var _loop = function _loop() {\n      var groupedTask = groupedTasks[i];\n      var children = getChildren(tasks, groupedTask);\n      tasks = tasks.filter(function (t) {\n        return children.indexOf(t) === -1;\n      });\n    };\n    for (var i = 0; groupedTasks.length > i; i++) {\n      _loop();\n    }\n  }\n  return tasks;\n}\nfunction getChildren(taskList, task) {\n  var tasks = [];\n  if (task.type !== \"project\") {\n    tasks = taskList.filter(function (t) {\n      return t.dependencies && t.dependencies.indexOf(task.id) !== -1;\n    });\n  } else {\n    tasks = taskList.filter(function (t) {\n      return t.project && t.project === task.id;\n    });\n  }\n  var taskChildren = [];\n  tasks.forEach(function (t) {\n    taskChildren.push.apply(taskChildren, getChildren(taskList, t));\n  });\n  tasks = tasks.concat(tasks, taskChildren);\n  return tasks;\n}\nvar sortTasks = function sortTasks(taskA, taskB) {\n  var orderA = taskA.displayOrder || Number.MAX_VALUE;\n  var orderB = taskB.displayOrder || Number.MAX_VALUE;\n  if (orderA > orderB) {\n    return 1;\n  } else if (orderA < orderB) {\n    return -1;\n  } else {\n    return 0;\n  }\n};\nvar styles$6 = {\n  \"barWrapper\": \"_KxSXS\",\n  \"barHandle\": \"_3w_5u\",\n  \"barBackground\": \"_31ERP\"\n};\nvar BarDisplay = function BarDisplay(_ref) {\n  var x = _ref.x,\n    y = _ref.y,\n    width = _ref.width,\n    height = _ref.height,\n    isSelected = _ref.isSelected,\n    progressX = _ref.progressX,\n    progressWidth = _ref.progressWidth,\n    barCornerRadius = _ref.barCornerRadius,\n    styles = _ref.styles,\n    onMouseDown = _ref.onMouseDown;\n  var getProcessColor = function getProcessColor() {\n    return isSelected ? styles.progressSelectedColor : styles.progressColor;\n  };\n  var getBarColor = function getBarColor() {\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\n  };\n  return React.createElement(\"g\", {\n    onMouseDown: onMouseDown\n  }, React.createElement(\"rect\", {\n    x: x,\n    width: width,\n    y: y,\n    height: height,\n    ry: barCornerRadius,\n    rx: barCornerRadius,\n    fill: getBarColor(),\n    className: styles$6.barBackground\n  }), React.createElement(\"rect\", {\n    x: progressX,\n    width: progressWidth,\n    y: y,\n    height: height,\n    ry: barCornerRadius,\n    rx: barCornerRadius,\n    fill: getProcessColor()\n  }));\n};\nvar BarDateHandle = function BarDateHandle(_ref) {\n  var x = _ref.x,\n    y = _ref.y,\n    width = _ref.width,\n    height = _ref.height,\n    barCornerRadius = _ref.barCornerRadius,\n    onMouseDown = _ref.onMouseDown;\n  return React.createElement(\"rect\", {\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    className: styles$6.barHandle,\n    ry: barCornerRadius,\n    rx: barCornerRadius,\n    onMouseDown: onMouseDown\n  });\n};\nvar BarProgressHandle = function BarProgressHandle(_ref) {\n  var progressPoint = _ref.progressPoint,\n    onMouseDown = _ref.onMouseDown;\n  return React.createElement(\"polygon\", {\n    className: styles$6.barHandle,\n    points: progressPoint,\n    onMouseDown: onMouseDown\n  });\n};\nvar Bar = function Bar(_ref) {\n  var task = _ref.task,\n    isProgressChangeable = _ref.isProgressChangeable,\n    isDateChangeable = _ref.isDateChangeable,\n    rtl = _ref.rtl,\n    onEventStart = _ref.onEventStart,\n    isSelected = _ref.isSelected;\n  var progressPoint = getProgressPoint(+!rtl * task.progressWidth + task.progressX, task.y, task.height);\n  var handleHeight = task.height - 2;\n  return React.createElement(\"g\", {\n    className: styles$6.barWrapper,\n    tabIndex: 0\n  }, React.createElement(BarDisplay, {\n    x: task.x1,\n    y: task.y,\n    width: task.x2 - task.x1,\n    height: task.height,\n    progressX: task.progressX,\n    progressWidth: task.progressWidth,\n    barCornerRadius: task.barCornerRadius,\n    styles: task.styles,\n    isSelected: isSelected,\n    onMouseDown: function onMouseDown(e) {\n      isDateChangeable && onEventStart(\"move\", task, e);\n    }\n  }), React.createElement(\"g\", {\n    className: \"handleGroup\"\n  }, isDateChangeable && React.createElement(\"g\", null, React.createElement(BarDateHandle, {\n    x: task.x1 + 1,\n    y: task.y + 1,\n    width: task.handleWidth,\n    height: handleHeight,\n    barCornerRadius: task.barCornerRadius,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"start\", task, e);\n    }\n  }), React.createElement(BarDateHandle, {\n    x: task.x2 - task.handleWidth - 1,\n    y: task.y + 1,\n    width: task.handleWidth,\n    height: handleHeight,\n    barCornerRadius: task.barCornerRadius,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"end\", task, e);\n    }\n  })), isProgressChangeable && React.createElement(BarProgressHandle, {\n    progressPoint: progressPoint,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"progress\", task, e);\n    }\n  })));\n};\nvar BarSmall = function BarSmall(_ref) {\n  var task = _ref.task,\n    isProgressChangeable = _ref.isProgressChangeable,\n    isDateChangeable = _ref.isDateChangeable,\n    onEventStart = _ref.onEventStart,\n    isSelected = _ref.isSelected;\n  var progressPoint = getProgressPoint(task.progressWidth + task.x1, task.y, task.height);\n  return React.createElement(\"g\", {\n    className: styles$6.barWrapper,\n    tabIndex: 0\n  }, React.createElement(BarDisplay, {\n    x: task.x1,\n    y: task.y,\n    width: task.x2 - task.x1,\n    height: task.height,\n    progressX: task.progressX,\n    progressWidth: task.progressWidth,\n    barCornerRadius: task.barCornerRadius,\n    styles: task.styles,\n    isSelected: isSelected,\n    onMouseDown: function onMouseDown(e) {\n      isDateChangeable && onEventStart(\"move\", task, e);\n    }\n  }), React.createElement(\"g\", {\n    className: \"handleGroup\"\n  }, isProgressChangeable && React.createElement(BarProgressHandle, {\n    progressPoint: progressPoint,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"progress\", task, e);\n    }\n  })));\n};\nvar styles$7 = {\n  \"milestoneWrapper\": \"_RRr13\",\n  \"milestoneBackground\": \"_2P2B1\"\n};\nvar Milestone = function Milestone(_ref) {\n  var task = _ref.task,\n    isDateChangeable = _ref.isDateChangeable,\n    onEventStart = _ref.onEventStart,\n    isSelected = _ref.isSelected;\n  var transform = \"rotate(45 \" + (task.x1 + task.height * 0.356) + \" \\n    \" + (task.y + task.height * 0.85) + \")\";\n  var getBarColor = function getBarColor() {\n    return isSelected ? task.styles.backgroundSelectedColor : task.styles.backgroundColor;\n  };\n  return React.createElement(\"g\", {\n    tabIndex: 0,\n    className: styles$7.milestoneWrapper\n  }, React.createElement(\"rect\", {\n    fill: getBarColor(),\n    x: task.x1,\n    width: task.height,\n    y: task.y,\n    height: task.height,\n    rx: task.barCornerRadius,\n    ry: task.barCornerRadius,\n    transform: transform,\n    className: styles$7.milestoneBackground,\n    onMouseDown: function onMouseDown(e) {\n      isDateChangeable && onEventStart(\"move\", task, e);\n    }\n  }));\n};\nvar styles$8 = {\n  \"projectWrapper\": \"_1KJ6x\",\n  \"projectBackground\": \"_2RbVy\",\n  \"projectTop\": \"_2pZMF\"\n};\nvar Project = function Project(_ref) {\n  var task = _ref.task,\n    isSelected = _ref.isSelected;\n  var barColor = isSelected ? task.styles.backgroundSelectedColor : task.styles.backgroundColor;\n  var processColor = isSelected ? task.styles.progressSelectedColor : task.styles.progressColor;\n  var projectWith = task.x2 - task.x1;\n  var projectLeftTriangle = [task.x1, task.y + task.height / 2 - 1, task.x1, task.y + task.height, task.x1 + 15, task.y + task.height / 2 - 1].join(\",\");\n  var projectRightTriangle = [task.x2, task.y + task.height / 2 - 1, task.x2, task.y + task.height, task.x2 - 15, task.y + task.height / 2 - 1].join(\",\");\n  return React.createElement(\"g\", {\n    tabIndex: 0,\n    className: styles$8.projectWrapper\n  }, React.createElement(\"rect\", {\n    fill: barColor,\n    x: task.x1,\n    width: projectWith,\n    y: task.y,\n    height: task.height,\n    rx: task.barCornerRadius,\n    ry: task.barCornerRadius,\n    className: styles$8.projectBackground\n  }), React.createElement(\"rect\", {\n    x: task.progressX,\n    width: task.progressWidth,\n    y: task.y,\n    height: task.height,\n    ry: task.barCornerRadius,\n    rx: task.barCornerRadius,\n    fill: processColor\n  }), React.createElement(\"rect\", {\n    fill: barColor,\n    x: task.x1,\n    width: projectWith,\n    y: task.y,\n    height: task.height / 2,\n    rx: task.barCornerRadius,\n    ry: task.barCornerRadius,\n    className: styles$8.projectTop\n  }), React.createElement(\"polygon\", {\n    className: styles$8.projectTop,\n    points: projectLeftTriangle,\n    fill: barColor\n  }), React.createElement(\"polygon\", {\n    className: styles$8.projectTop,\n    points: projectRightTriangle,\n    fill: barColor\n  }));\n};\nvar style = {\n  \"barLabel\": \"_3zRJQ\",\n  \"barLabelOutside\": \"_3KcaM\",\n  \"statusDot\": \"_3ITgM\"\n};\nvar TaskItem = function TaskItem(props) {\n  var _props = _extends({}, props),\n    task = _props.task,\n    arrowIndent = _props.arrowIndent,\n    isDelete = _props.isDelete,\n    taskHeight = _props.taskHeight,\n    isSelected = _props.isSelected,\n    rtl = _props.rtl,\n    onEventStart = _props.onEventStart,\n    isProgressChangeable = _props.isProgressChangeable,\n    isDateChangeable = _props.isDateChangeable;\n  var textRef = useRef(null);\n  var _useState = useState(React.createElement(\"div\", null)),\n    taskItem = _useState[0],\n    setTaskItem = _useState[1];\n  var _useState2 = useState(true),\n    isTextInside = _useState2[0],\n    setIsTextInside = _useState2[1];\n  var normalizedStatus = normalizeStatus(task.status);\n  var statusColor = getStatusColor(normalizedStatus);\n  var statusBadgeText = getStatusBadgeText(normalizedStatus);\n  var taskItemProps = useMemo(function () {\n    return {\n      task: task,\n      arrowIndent: arrowIndent,\n      taskHeight: taskHeight,\n      isProgressChangeable: isProgressChangeable,\n      isDateChangeable: isDateChangeable,\n      isDelete: isDelete,\n      isSelected: isSelected,\n      rtl: rtl,\n      onEventStart: onEventStart\n    };\n  }, [task, arrowIndent, taskHeight, isProgressChangeable, isDateChangeable, isDelete, isSelected, rtl, onEventStart]);\n  useEffect(function () {\n    switch (task.typeInternal) {\n      case \"milestone\":\n        setTaskItem(React.createElement(Milestone, Object.assign({}, taskItemProps)));\n        break;\n      case \"project\":\n        setTaskItem(React.createElement(Project, Object.assign({}, taskItemProps)));\n        break;\n      case \"smalltask\":\n        setTaskItem(React.createElement(BarSmall, Object.assign({}, taskItemProps)));\n        break;\n      default:\n        setTaskItem(React.createElement(Bar, Object.assign({}, taskItemProps)));\n        break;\n    }\n  }, [task, taskItemProps]);\n  var getBBoxWidth = function getBBoxWidth() {\n    if (!textRef.current || typeof textRef.current.getBBox !== \"function\") {\n      return 0;\n    }\n    return textRef.current.getBBox().width;\n  };\n  useEffect(function () {\n    setIsTextInside(getBBoxWidth() < task.x2 - task.x1);\n  }, [textRef, task]);\n  var getX = function getX() {\n    var width = task.x2 - task.x1;\n    var hasChild = task.barChildren.length > 0;\n    if (isTextInside) {\n      return task.x1 + width * 0.5;\n    }\n    if (rtl && textRef.current) {\n      return task.x1 - getBBoxWidth() - arrowIndent * +hasChild - arrowIndent * 0.2;\n    } else {\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\n    }\n  };\n  return React.createElement(\"g\", {\n    onKeyDown: function onKeyDown(e) {\n      switch (e.key) {\n        case \"Delete\":\n          {\n            if (isDelete) onEventStart(\"delete\", task, e);\n            break;\n          }\n      }\n      e.stopPropagation();\n    },\n    onMouseEnter: function onMouseEnter(e) {\n      onEventStart(\"mouseenter\", task, e);\n    },\n    onMouseLeave: function onMouseLeave(e) {\n      onEventStart(\"mouseleave\", task, e);\n    },\n    onDoubleClick: function onDoubleClick(e) {\n      onEventStart(\"dblclick\", task, e);\n    },\n    onClick: function onClick(e) {\n      onEventStart(\"click\", task, e);\n    },\n    onFocus: function onFocus() {\n      onEventStart(\"select\", task);\n    }\n  }, taskItem, React.createElement(\"text\", {\n    x: getX(),\n    y: task.y + taskHeight * 0.5,\n    className: isTextInside ? style.barLabel : style.barLabelOutside,\n    ref: textRef\n  }, !!statusBadgeText && React.createElement(\"tspan\", {\n    className: style.statusDot,\n    fill: statusColor\n  }, \"\\u25CF\"), React.createElement(\"tspan\", {\n    dx: statusBadgeText ? 4 : 0\n  }, task.name)));\n};\nvar TaskGanttContent = function TaskGanttContent(_ref) {\n  var tasks = _ref.tasks,\n    dates = _ref.dates,\n    ganttEvent = _ref.ganttEvent,\n    selectedTask = _ref.selectedTask,\n    rowHeight = _ref.rowHeight,\n    columnWidth = _ref.columnWidth,\n    timeStep = _ref.timeStep,\n    svg = _ref.svg,\n    taskHeight = _ref.taskHeight,\n    arrowColor = _ref.arrowColor,\n    arrowIndent = _ref.arrowIndent,\n    fontFamily = _ref.fontFamily,\n    fontSize = _ref.fontSize,\n    rtl = _ref.rtl,\n    setGanttEvent = _ref.setGanttEvent,\n    setFailedTask = _ref.setFailedTask,\n    setSelectedTask = _ref.setSelectedTask,\n    onDateChange = _ref.onDateChange,\n    onProgressChange = _ref.onProgressChange,\n    onDoubleClick = _ref.onDoubleClick,\n    onClick = _ref.onClick,\n    onDelete = _ref.onDelete;\n  var point = svg !== null && svg !== void 0 && svg.current && \"createSVGPoint\" in svg.current ? svg.current.createSVGPoint() : undefined;\n  var _useState = useState(0),\n    xStep = _useState[0],\n    setXStep = _useState[1];\n  var _useState2 = useState(0),\n    initEventX1Delta = _useState2[0],\n    setInitEventX1Delta = _useState2[1];\n  var _useState3 = useState(false),\n    isMoving = _useState3[0],\n    setIsMoving = _useState3[1];\n  useEffect(function () {\n    var dateDelta = dates[1].getTime() - dates[0].getTime() - dates[1].getTimezoneOffset() * 60 * 1000 + dates[0].getTimezoneOffset() * 60 * 1000;\n    var newXStep = timeStep * columnWidth / dateDelta;\n    setXStep(newXStep);\n  }, [columnWidth, dates, timeStep]);\n  useEffect(function () {\n    var handleMouseMove = function handleMouseMove(event) {\n      try {\n        var _svg$current$getScree;\n        if (!ganttEvent.changedTask || !point || !(svg !== null && svg !== void 0 && svg.current)) return Promise.resolve();\n        event.preventDefault();\n        point.x = event.clientX;\n        var cursor = point.matrixTransform(svg === null || svg === void 0 ? void 0 : (_svg$current$getScree = svg.current.getScreenCTM()) === null || _svg$current$getScree === void 0 ? void 0 : _svg$current$getScree.inverse());\n        var _handleTaskBySVGMouse = handleTaskBySVGMouseEvent(cursor.x, ganttEvent.action, ganttEvent.changedTask, xStep, timeStep, initEventX1Delta, rtl),\n          isChanged = _handleTaskBySVGMouse.isChanged,\n          changedTask = _handleTaskBySVGMouse.changedTask;\n        if (isChanged) {\n          setGanttEvent({\n            action: ganttEvent.action,\n            changedTask: changedTask\n          });\n        }\n        return Promise.resolve();\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    };\n    var _handleMouseUp = function handleMouseUp(event) {\n      try {\n        var _svg$current$getScree2;\n        var _temp5 = function _temp5() {\n          if (!operationSuccess) {\n            setFailedTask(originalSelectedTask);\n          }\n        };\n        var action = ganttEvent.action,\n          originalSelectedTask = ganttEvent.originalSelectedTask,\n          changedTask = ganttEvent.changedTask;\n        if (!changedTask || !point || !(svg !== null && svg !== void 0 && svg.current) || !originalSelectedTask) return Promise.resolve();\n        event.preventDefault();\n        point.x = event.clientX;\n        var cursor = point.matrixTransform(svg === null || svg === void 0 ? void 0 : (_svg$current$getScree2 = svg.current.getScreenCTM()) === null || _svg$current$getScree2 === void 0 ? void 0 : _svg$current$getScree2.inverse());\n        var _handleTaskBySVGMouse2 = handleTaskBySVGMouseEvent(cursor.x, action, changedTask, xStep, timeStep, initEventX1Delta, rtl),\n          newChangedTask = _handleTaskBySVGMouse2.changedTask;\n        var isNotLikeOriginal = originalSelectedTask.start !== newChangedTask.start || originalSelectedTask.end !== newChangedTask.end || originalSelectedTask.progress !== newChangedTask.progress;\n        svg.current.removeEventListener(\"mousemove\", handleMouseMove);\n        svg.current.removeEventListener(\"mouseup\", _handleMouseUp);\n        setGanttEvent({\n          action: \"\"\n        });\n        setIsMoving(false);\n        var operationSuccess = true;\n        var _temp4 = function () {\n          if ((action === \"move\" || action === \"end\" || action === \"start\") && onDateChange && isNotLikeOriginal) {\n            var _temp = _catch(function () {\n              return Promise.resolve(onDateChange(newChangedTask, newChangedTask.barChildren)).then(function (result) {\n                if (result !== undefined) {\n                  operationSuccess = result;\n                }\n              });\n            }, function () {\n              operationSuccess = false;\n            });\n            if (_temp && _temp.then) return _temp.then(function () {});\n          } else {\n            var _temp6 = function () {\n              if (onProgressChange && isNotLikeOriginal) {\n                var _temp2 = _catch(function () {\n                  return Promise.resolve(onProgressChange(newChangedTask, newChangedTask.barChildren)).then(function (result) {\n                    if (result !== undefined) {\n                      operationSuccess = result;\n                    }\n                  });\n                }, function () {\n                  operationSuccess = false;\n                });\n                if (_temp2 && _temp2.then) return _temp2.then(function () {});\n              }\n            }();\n            if (_temp6 && _temp6.then) return _temp6.then(function () {});\n          }\n        }();\n        return Promise.resolve(_temp4 && _temp4.then ? _temp4.then(_temp5) : _temp5(_temp4));\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    };\n    if (!isMoving && (ganttEvent.action === \"move\" || ganttEvent.action === \"end\" || ganttEvent.action === \"start\" || ganttEvent.action === \"progress\") && svg !== null && svg !== void 0 && svg.current) {\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\n      svg.current.addEventListener(\"mouseup\", _handleMouseUp);\n      setIsMoving(true);\n    }\n  }, [ganttEvent, xStep, initEventX1Delta, onProgressChange, timeStep, onDateChange, svg, isMoving, point, rtl, setFailedTask, setGanttEvent]);\n  var handleBarEventStart = function handleBarEventStart(action, task, event) {\n    try {\n      return Promise.resolve(function () {\n        if (!event) {\n          if (action === \"select\") {\n            setSelectedTask(task.id);\n          }\n        } else return function () {\n          if (isKeyboardEvent(event)) {\n            var _temp9 = function () {\n              if (action === \"delete\") {\n                var _temp8 = function () {\n                  if (onDelete) {\n                    var _temp7 = _catch(function () {\n                      return Promise.resolve(onDelete(task)).then(function (result) {\n                        if (result !== undefined && result) {\n                          setGanttEvent({\n                            action: action,\n                            changedTask: task\n                          });\n                        }\n                      });\n                    }, function (error) {\n                      console.error(\"Error on Delete. \" + error);\n                    });\n                    if (_temp7 && _temp7.then) return _temp7.then(function () {});\n                  }\n                }();\n                if (_temp8 && _temp8.then) return _temp8.then(function () {});\n              }\n            }();\n            if (_temp9 && _temp9.then) return _temp9.then(function () {});\n          } else if (action === \"mouseenter\") {\n            if (!ganttEvent.action) {\n              setGanttEvent({\n                action: action,\n                changedTask: task,\n                originalSelectedTask: task\n              });\n            }\n          } else if (action === \"mouseleave\") {\n            if (ganttEvent.action === \"mouseenter\") {\n              setGanttEvent({\n                action: \"\"\n              });\n            }\n          } else if (action === \"dblclick\") {\n            !!onDoubleClick && onDoubleClick(task);\n          } else if (action === \"click\") {\n            !!onClick && onClick(task);\n          } else if (action === \"move\") {\n            var _svg$current$getScree3;\n            if (!(svg !== null && svg !== void 0 && svg.current) || !point) return;\n            point.x = event.clientX;\n            var cursor = point.matrixTransform((_svg$current$getScree3 = svg.current.getScreenCTM()) === null || _svg$current$getScree3 === void 0 ? void 0 : _svg$current$getScree3.inverse());\n            setInitEventX1Delta(cursor.x - task.x1);\n            setGanttEvent({\n              action: action,\n              changedTask: task,\n              originalSelectedTask: task\n            });\n          } else {\n            setGanttEvent({\n              action: action,\n              changedTask: task,\n              originalSelectedTask: task\n            });\n          }\n        }();\n      }());\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n  return React.createElement(\"g\", {\n    className: \"content\"\n  }, React.createElement(\"g\", {\n    className: \"arrows\",\n    fill: arrowColor,\n    stroke: arrowColor\n  }, tasks.map(function (task) {\n    return task.barChildren.map(function (child) {\n      return React.createElement(Arrow, {\n        key: \"Arrow from \" + task.id + \" to \" + tasks[child.index].id,\n        taskFrom: task,\n        taskTo: tasks[child.index],\n        rowHeight: rowHeight,\n        taskHeight: taskHeight,\n        arrowIndent: arrowIndent,\n        rtl: rtl\n      });\n    });\n  })), React.createElement(\"g\", {\n    className: \"bar\",\n    fontFamily: fontFamily,\n    fontSize: fontSize\n  }, tasks.map(function (task) {\n    return React.createElement(TaskItem, {\n      task: task,\n      arrowIndent: arrowIndent,\n      taskHeight: taskHeight,\n      isProgressChangeable: !!onProgressChange && !task.isDisabled,\n      isDateChangeable: !!onDateChange && !task.isDisabled,\n      isDelete: !task.isDisabled,\n      onEventStart: handleBarEventStart,\n      key: task.id,\n      isSelected: !!selectedTask && task.id === selectedTask.id,\n      rtl: rtl\n    });\n  })));\n};\nvar styles$9 = {\n  \"ganttVerticalContainer\": \"_CZjuD\",\n  \"horizontalContainer\": \"_2B2zv\",\n  \"wrapper\": \"_3eULf\",\n  \"taskListPanel\": \"_3eX5j\",\n  \"splitHandle\": \"_1YST3\",\n  \"splitHandleActive\": \"_3cO1L\",\n  \"ganttPanel\": \"_1G4xA\",\n  \"scrollRow\": \"_2VUKJ\",\n  \"scrollCellLeft\": \"_1vvPx\",\n  \"scrollCellRight\": \"_3sIUT\",\n  \"scrollSplitter\": \"_3gMam\"\n};\nvar TaskGantt = function TaskGantt(_ref) {\n  var gridProps = _ref.gridProps,\n    calendarProps = _ref.calendarProps,\n    barProps = _ref.barProps,\n    ganttHeight = _ref.ganttHeight,\n    scrollY = _ref.scrollY,\n    scrollX = _ref.scrollX,\n    verticalGanttContainerRef = _ref.verticalGanttContainerRef;\n  var ganttSVGRef = useRef(null);\n  var horizontalContainerRef = useRef(null);\n  var internalVerticalRef = useRef(null);\n  var ganttContainerRef = verticalGanttContainerRef || internalVerticalRef;\n  var newBarProps = _extends({}, barProps, {\n    svg: ganttSVGRef\n  });\n  useEffect(function () {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n  useEffect(function () {\n    if (ganttContainerRef.current) {\n      ganttContainerRef.current.scrollLeft = scrollX;\n    }\n  }, [scrollX, ganttContainerRef]);\n  return React.createElement(\"div\", {\n    className: styles$9.ganttVerticalContainer,\n    ref: ganttContainerRef,\n    dir: \"ltr\"\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: gridProps.svgWidth,\n    height: calendarProps.headerHeight,\n    fontFamily: barProps.fontFamily\n  }, React.createElement(Calendar, Object.assign({}, calendarProps))), React.createElement(\"div\", {\n    ref: horizontalContainerRef,\n    className: styles$9.horizontalContainer,\n    style: ganttHeight ? {\n      height: ganttHeight,\n      width: gridProps.svgWidth\n    } : {\n      width: gridProps.svgWidth\n    }\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: gridProps.svgWidth,\n    height: barProps.rowHeight * barProps.tasks.length,\n    fontFamily: barProps.fontFamily,\n    ref: ganttSVGRef\n  }, React.createElement(Grid, Object.assign({}, gridProps)), React.createElement(TaskGanttContent, Object.assign({}, newBarProps)))));\n};\nvar styles$a = {\n  \"scrollWrapper\": \"_2k9Ys\",\n  \"scroll\": \"_19jgW\"\n};\nvar HorizontalScroll = function HorizontalScroll(_ref) {\n  var scroll = _ref.scroll,\n    svgWidth = _ref.svgWidth,\n    scrollerWidth = _ref.scrollerWidth,\n    rtl = _ref.rtl,\n    onScroll = _ref.onScroll,\n    dataTestId = _ref[\"data-testid\"],\n    containerRef = _ref.containerRef,\n    hidden = _ref.hidden;\n  var scrollRef = useRef(null);\n  var wrapperRef = containerRef != null ? containerRef : scrollRef;\n  useEffect(function () {\n    if (wrapperRef.current) {\n      wrapperRef.current.scrollLeft = scroll;\n    }\n  }, [scroll, wrapperRef]);\n  return React.createElement(\"div\", {\n    dir: rtl ? \"rtl\" : \"ltr\",\n    className: styles$a.scrollWrapper,\n    onScroll: onScroll,\n    ref: wrapperRef,\n    \"data-testid\": dataTestId,\n    style: hidden ? {\n      display: \"none\"\n    } : {\n      width: svgWidth\n    }\n  }, React.createElement(\"div\", {\n    style: {\n      width: scrollerWidth != null ? scrollerWidth : svgWidth\n    },\n    className: styles$a.scroll\n  }));\n};\nvar DEFAULT_TASK_LIST_WIDTH = 450;\nvar MIN_PANE_WIDTH = 150;\nvar SPLIT_HANDLE_WIDTH = 8;\nvar clampTaskListWidth = function clampTaskListWidth(width, containerWidth) {\n  var maxWidth = Math.max(MIN_PANE_WIDTH, containerWidth - MIN_PANE_WIDTH - SPLIT_HANDLE_WIDTH);\n  return Math.min(Math.max(width, MIN_PANE_WIDTH), maxWidth);\n};\nvar Gantt = function Gantt(_ref) {\n  var tasks = _ref.tasks,\n    _ref$headerHeight = _ref.headerHeight,\n    headerHeight = _ref$headerHeight === void 0 ? 50 : _ref$headerHeight,\n    _ref$columnWidth = _ref.columnWidth,\n    columnWidth = _ref$columnWidth === void 0 ? 60 : _ref$columnWidth,\n    _ref$listCellWidth = _ref.listCellWidth,\n    listCellWidth = _ref$listCellWidth === void 0 ? \"155px\" : _ref$listCellWidth,\n    _ref$rowHeight = _ref.rowHeight,\n    rowHeight = _ref$rowHeight === void 0 ? 50 : _ref$rowHeight,\n    _ref$ganttHeight = _ref.ganttHeight,\n    ganttHeight = _ref$ganttHeight === void 0 ? 0 : _ref$ganttHeight,\n    _ref$viewMode = _ref.viewMode,\n    viewMode = _ref$viewMode === void 0 ? ViewMode.Day : _ref$viewMode,\n    _ref$preStepsCount = _ref.preStepsCount,\n    preStepsCount = _ref$preStepsCount === void 0 ? 1 : _ref$preStepsCount,\n    _ref$locale = _ref.locale,\n    locale = _ref$locale === void 0 ? \"en-GB\" : _ref$locale,\n    _ref$barFill = _ref.barFill,\n    barFill = _ref$barFill === void 0 ? 60 : _ref$barFill,\n    _ref$barCornerRadius = _ref.barCornerRadius,\n    barCornerRadius = _ref$barCornerRadius === void 0 ? 3 : _ref$barCornerRadius,\n    _ref$barProgressColor = _ref.barProgressColor,\n    barProgressColor = _ref$barProgressColor === void 0 ? \"#a3a3ff\" : _ref$barProgressColor,\n    _ref$barProgressSelec = _ref.barProgressSelectedColor,\n    barProgressSelectedColor = _ref$barProgressSelec === void 0 ? \"#8282f5\" : _ref$barProgressSelec,\n    _ref$barBackgroundCol = _ref.barBackgroundColor,\n    barBackgroundColor = _ref$barBackgroundCol === void 0 ? \"#b8c2cc\" : _ref$barBackgroundCol,\n    _ref$barBackgroundSel = _ref.barBackgroundSelectedColor,\n    barBackgroundSelectedColor = _ref$barBackgroundSel === void 0 ? \"#aeb8c2\" : _ref$barBackgroundSel,\n    _ref$projectProgressC = _ref.projectProgressColor,\n    projectProgressColor = _ref$projectProgressC === void 0 ? \"#7db59a\" : _ref$projectProgressC,\n    _ref$projectProgressS = _ref.projectProgressSelectedColor,\n    projectProgressSelectedColor = _ref$projectProgressS === void 0 ? \"#59a985\" : _ref$projectProgressS,\n    _ref$projectBackgroun = _ref.projectBackgroundColor,\n    projectBackgroundColor = _ref$projectBackgroun === void 0 ? \"#fac465\" : _ref$projectBackgroun,\n    _ref$projectBackgroun2 = _ref.projectBackgroundSelectedColor,\n    projectBackgroundSelectedColor = _ref$projectBackgroun2 === void 0 ? \"#f7bb53\" : _ref$projectBackgroun2,\n    _ref$milestoneBackgro = _ref.milestoneBackgroundColor,\n    milestoneBackgroundColor = _ref$milestoneBackgro === void 0 ? \"#f1c453\" : _ref$milestoneBackgro,\n    _ref$milestoneBackgro2 = _ref.milestoneBackgroundSelectedColor,\n    milestoneBackgroundSelectedColor = _ref$milestoneBackgro2 === void 0 ? \"#f29e4c\" : _ref$milestoneBackgro2,\n    _ref$rtl = _ref.rtl,\n    rtl = _ref$rtl === void 0 ? false : _ref$rtl,\n    _ref$handleWidth = _ref.handleWidth,\n    handleWidth = _ref$handleWidth === void 0 ? 8 : _ref$handleWidth,\n    _ref$timeStep = _ref.timeStep,\n    timeStep = _ref$timeStep === void 0 ? 300000 : _ref$timeStep,\n    _ref$arrowColor = _ref.arrowColor,\n    arrowColor = _ref$arrowColor === void 0 ? \"grey\" : _ref$arrowColor,\n    _ref$fontFamily = _ref.fontFamily,\n    fontFamily = _ref$fontFamily === void 0 ? \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\" : _ref$fontFamily,\n    _ref$fontSize = _ref.fontSize,\n    fontSize = _ref$fontSize === void 0 ? \"14px\" : _ref$fontSize,\n    _ref$arrowIndent = _ref.arrowIndent,\n    arrowIndent = _ref$arrowIndent === void 0 ? 20 : _ref$arrowIndent,\n    _ref$todayColor = _ref.todayColor,\n    todayColor = _ref$todayColor === void 0 ? \"rgba(252, 248, 227, 0.5)\" : _ref$todayColor,\n    viewDate = _ref.viewDate,\n    _ref$TooltipContent = _ref.TooltipContent,\n    TooltipContent = _ref$TooltipContent === void 0 ? StandardTooltipContent : _ref$TooltipContent,\n    _ref$TaskListHeader = _ref.TaskListHeader,\n    TaskListHeader = _ref$TaskListHeader === void 0 ? TaskListHeaderDefault : _ref$TaskListHeader,\n    _ref$TaskListTable = _ref.TaskListTable,\n    TaskListTable = _ref$TaskListTable === void 0 ? TaskListTableDefault : _ref$TaskListTable,\n    _ref$visibleFields = _ref.visibleFields,\n    visibleFields = _ref$visibleFields === void 0 ? DEFAULT_VISIBLE_FIELDS : _ref$visibleFields,\n    _ref$effortDisplayUni = _ref.effortDisplayUnit,\n    effortDisplayUnit = _ref$effortDisplayUni === void 0 ? \"MH\" : _ref$effortDisplayUni,\n    enableColumnDrag = _ref.enableColumnDrag,\n    onDateChange = _ref.onDateChange,\n    onProgressChange = _ref.onProgressChange,\n    onDoubleClick = _ref.onDoubleClick,\n    onClick = _ref.onClick,\n    onDelete = _ref.onDelete,\n    onSelect = _ref.onSelect,\n    onExpanderClick = _ref.onExpanderClick,\n    onTaskUpdate = _ref.onTaskUpdate,\n    onCellCommit = _ref.onCellCommit;\n  var wrapperRef = useRef(null);\n  var taskListRef = useRef(null);\n  var taskListHeaderRef = useRef(null);\n  var taskListBodyRef = useRef(null);\n  var ganttContainerRef = useRef(null);\n  var splitStartXRef = useRef(null);\n  var splitStartWidthRef = useRef(null);\n  var splitMoveHandlerRef = useRef(null);\n  var splitUpHandlerRef = useRef(null);\n  var supportsPointerEvents = typeof window !== \"undefined\" && \"PointerEvent\" in window;\n  var _useState = useState(function () {\n      var _ganttDateRange = ganttDateRange(tasks, viewMode, preStepsCount),\n        startDate = _ganttDateRange[0],\n        endDate = _ganttDateRange[1];\n      return {\n        viewMode: viewMode,\n        dates: seedDates(startDate, endDate, viewMode)\n      };\n    }),\n    dateSetup = _useState[0],\n    setDateSetup = _useState[1];\n  var _useState2 = useState(undefined),\n    currentViewDate = _useState2[0],\n    setCurrentViewDate = _useState2[1];\n  var _useState3 = useState(DEFAULT_TASK_LIST_WIDTH),\n    taskListWidth = _useState3[0],\n    setTaskListWidth = _useState3[1];\n  var _useState4 = useState(0),\n    wrapperWidth = _useState4[0],\n    setWrapperWidth = _useState4[1];\n  var _useState5 = useState(false),\n    isResizing = _useState5[0],\n    setIsResizing = _useState5[1];\n  var _useState6 = useState(0),\n    svgContainerWidth = _useState6[0],\n    setSvgContainerWidth = _useState6[1];\n  var _useState7 = useState(ganttHeight),\n    svgContainerHeight = _useState7[0],\n    setSvgContainerHeight = _useState7[1];\n  var _useState8 = useState([]),\n    barTasks = _useState8[0],\n    setBarTasks = _useState8[1];\n  var _useState9 = useState({\n      action: \"\"\n    }),\n    ganttEvent = _useState9[0],\n    setGanttEvent = _useState9[1];\n  var taskHeight = useMemo(function () {\n    return rowHeight * barFill / 100;\n  }, [rowHeight, barFill]);\n  var _useState0 = useState(),\n    selectedTask = _useState0[0],\n    setSelectedTask = _useState0[1];\n  var _useState1 = useState(null),\n    failedTask = _useState1[0],\n    setFailedTask = _useState1[1];\n  var svgWidth = dateSetup.dates.length * columnWidth;\n  var ganttFullHeight = barTasks.length * rowHeight;\n  var _useState10 = useState(0),\n    scrollY = _useState10[0],\n    setScrollY = _useState10[1];\n  var _useState11 = useState(0),\n    scrollXLeft = _useState11[0],\n    setScrollXLeft = _useState11[1];\n  var _useState12 = useState(-1),\n    scrollXRight = _useState12[0],\n    setScrollXRight = _useState12[1];\n  var _useState13 = useState(1430),\n    leftScrollerWidth = _useState13[0],\n    setLeftScrollerWidth = _useState13[1];\n  var ignoreScrollLeftRef = useRef(false);\n  var ignoreScrollRightRef = useRef(false);\n  useEffect(function () {\n    var filteredTasks;\n    if (onExpanderClick) {\n      filteredTasks = removeHiddenTasks(tasks);\n    } else {\n      filteredTasks = tasks;\n    }\n    filteredTasks = filteredTasks.sort(sortTasks);\n    var _ganttDateRange2 = ganttDateRange(filteredTasks, viewMode, preStepsCount),\n      startDate = _ganttDateRange2[0],\n      endDate = _ganttDateRange2[1];\n    var newDates = seedDates(startDate, endDate, viewMode);\n    if (rtl) {\n      newDates = newDates.reverse();\n      if (scrollXRight === -1) {\n        setScrollXRight(newDates.length * columnWidth);\n      }\n    }\n    setDateSetup({\n      dates: newDates,\n      viewMode: viewMode\n    });\n    setBarTasks(convertToBarTasks(filteredTasks, newDates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor));\n  }, [tasks, viewMode, preStepsCount, rowHeight, barCornerRadius, columnWidth, taskHeight, handleWidth, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor, rtl, scrollXRight, onExpanderClick]);\n  useEffect(function () {\n    if (viewMode === dateSetup.viewMode && (viewDate && !currentViewDate || viewDate && (currentViewDate === null || currentViewDate === void 0 ? void 0 : currentViewDate.valueOf()) !== viewDate.valueOf())) {\n      var dates = dateSetup.dates;\n      var index = dates.findIndex(function (d, i) {\n        return viewDate.valueOf() >= d.valueOf() && i + 1 !== dates.length && viewDate.valueOf() < dates[i + 1].valueOf();\n      });\n      if (index === -1) {\n        return;\n      }\n      setCurrentViewDate(viewDate);\n      setScrollXRight(columnWidth * index);\n    }\n  }, [viewDate, columnWidth, dateSetup.dates, dateSetup.viewMode, viewMode, currentViewDate, setCurrentViewDate]);\n  useEffect(function () {\n    var changedTask = ganttEvent.changedTask,\n      action = ganttEvent.action;\n    if (changedTask) {\n      if (action === \"delete\") {\n        setGanttEvent({\n          action: \"\"\n        });\n        setBarTasks(barTasks.filter(function (t) {\n          return t.id !== changedTask.id;\n        }));\n      } else if (action === \"move\" || action === \"end\" || action === \"start\" || action === \"progress\") {\n        var prevStateTask = barTasks.find(function (t) {\n          return t.id === changedTask.id;\n        });\n        if (prevStateTask && (prevStateTask.start.getTime() !== changedTask.start.getTime() || prevStateTask.end.getTime() !== changedTask.end.getTime() || prevStateTask.progress !== changedTask.progress)) {\n          var newTaskList = barTasks.map(function (t) {\n            return t.id === changedTask.id ? changedTask : t;\n          });\n          setBarTasks(newTaskList);\n        }\n      }\n    }\n  }, [ganttEvent, barTasks]);\n  useEffect(function () {\n    if (failedTask) {\n      setBarTasks(barTasks.map(function (t) {\n        return t.id !== failedTask.id ? t : failedTask;\n      }));\n      setFailedTask(null);\n    }\n  }, [failedTask, barTasks]);\n  useEffect(function () {\n    var updateWrapperWidth = function updateWrapperWidth() {\n      if (wrapperRef.current) {\n        setWrapperWidth(wrapperRef.current.offsetWidth);\n      }\n    };\n    updateWrapperWidth();\n    window.addEventListener(\"resize\", updateWrapperWidth);\n    return function () {\n      return window.removeEventListener(\"resize\", updateWrapperWidth);\n    };\n  }, []);\n  useEffect(function () {\n    if (!listCellWidth) {\n      setTaskListWidth(0);\n      return;\n    }\n    if (wrapperWidth) {\n      setTaskListWidth(function (prev) {\n        return clampTaskListWidth(prev, wrapperWidth);\n      });\n    }\n  }, [listCellWidth, wrapperWidth]);\n  var taskListOffset = listCellWidth ? taskListWidth + SPLIT_HANDLE_WIDTH : 0;\n  useEffect(function () {\n    if (wrapperWidth) {\n      setSvgContainerWidth(Math.max(wrapperWidth - taskListOffset, 0));\n    }\n  }, [wrapperWidth, taskListOffset]);\n  useEffect(function () {\n    if (ganttHeight) {\n      setSvgContainerHeight(ganttHeight + headerHeight);\n    } else {\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\n    }\n  }, [ganttHeight, tasks, headerHeight, rowHeight]);\n  useEffect(function () {\n    return function () {\n      if (splitMoveHandlerRef.current) {\n        document.removeEventListener(\"mousemove\", splitMoveHandlerRef.current);\n        splitMoveHandlerRef.current = null;\n      }\n      if (splitUpHandlerRef.current) {\n        document.removeEventListener(\"mouseup\", splitUpHandlerRef.current);\n        splitUpHandlerRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(function () {\n    var handleWheel = function handleWheel(event) {\n      if (event.shiftKey || event.deltaX) {\n        var scrollMove = event.deltaX ? event.deltaX : event.deltaY;\n        var newScrollX = scrollXRight + scrollMove;\n        if (newScrollX < 0) {\n          newScrollX = 0;\n        } else if (newScrollX > svgWidth) {\n          newScrollX = svgWidth;\n        }\n        ignoreScrollRightRef.current = true;\n        setScrollXRight(newScrollX);\n        event.preventDefault();\n      } else if (ganttHeight) {\n        var newScrollY = scrollY + event.deltaY;\n        if (newScrollY < 0) {\n          newScrollY = 0;\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\n          newScrollY = ganttFullHeight - ganttHeight;\n        }\n        if (newScrollY !== scrollY) {\n          setScrollY(newScrollY);\n          event.preventDefault();\n        }\n      }\n    };\n    var wrapperEl = wrapperRef.current;\n    wrapperEl === null || wrapperEl === void 0 ? void 0 : wrapperEl.addEventListener(\"wheel\", handleWheel, {\n      passive: false\n    });\n    return function () {\n      wrapperEl === null || wrapperEl === void 0 ? void 0 : wrapperEl.removeEventListener(\"wheel\", handleWheel);\n    };\n  }, [scrollY, scrollXRight, ganttHeight, svgWidth, rtl, ganttFullHeight]);\n  useEffect(function () {\n    var updateLeftScroller = function updateLeftScroller() {\n      var el = taskListBodyRef.current;\n      if (el) {\n        setLeftScrollerWidth(el.scrollWidth || 0);\n      }\n    };\n    updateLeftScroller();\n    var RO = window.ResizeObserver;\n    var ro = RO ? new RO(updateLeftScroller) : null;\n    if (ro && taskListBodyRef.current) {\n      ro.observe(taskListBodyRef.current);\n    }\n    window.addEventListener(\"resize\", updateLeftScroller);\n    return function () {\n      if (ro) {\n        ro.disconnect();\n      }\n      window.removeEventListener(\"resize\", updateLeftScroller);\n    };\n  }, [tasks, fontFamily, fontSize, listCellWidth, taskListBodyRef, visibleFields]);\n  var handleScrollY = function handleScrollY(event) {\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollLeftRef.current) {\n      setScrollY(event.currentTarget.scrollTop);\n      ignoreScrollLeftRef.current = true;\n    } else {\n      ignoreScrollLeftRef.current = false;\n    }\n  };\n  var handleScrollLeft = function handleScrollLeft(event) {\n    if (scrollXLeft !== event.currentTarget.scrollLeft && !ignoreScrollLeftRef.current) {\n      setScrollXLeft(event.currentTarget.scrollLeft);\n      ignoreScrollLeftRef.current = true;\n    } else {\n      ignoreScrollLeftRef.current = false;\n    }\n  };\n  var handleScrollRight = function handleScrollRight(event) {\n    if (scrollXRight !== event.currentTarget.scrollLeft && !ignoreScrollRightRef.current) {\n      setScrollXRight(event.currentTarget.scrollLeft);\n      ignoreScrollRightRef.current = true;\n    } else {\n      ignoreScrollRightRef.current = false;\n    }\n    if (ganttContainerRef.current && ganttContainerRef.current.scrollLeft !== event.currentTarget.scrollLeft) {\n      ganttContainerRef.current.scrollLeft = event.currentTarget.scrollLeft;\n    }\n  };\n  var handleKeyDown = function handleKeyDown(event) {\n    var target = event.target;\n    if (target instanceof HTMLElement) {\n      if (target.isContentEditable || target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\" || target.tagName === \"SELECT\") {\n        return;\n      }\n    }\n    event.preventDefault();\n    var newScrollY = scrollY;\n    var newScrollX = scrollXRight;\n    var isX = true;\n    switch (event.key) {\n      case \"Down\":\n      case \"ArrowDown\":\n        newScrollY += rowHeight;\n        isX = false;\n        break;\n      case \"Up\":\n      case \"ArrowUp\":\n        newScrollY -= rowHeight;\n        isX = false;\n        break;\n      case \"Left\":\n      case \"ArrowLeft\":\n        newScrollX -= columnWidth;\n        break;\n      case \"Right\":\n      case \"ArrowRight\":\n        newScrollX += columnWidth;\n        break;\n    }\n    if (isX) {\n      if (newScrollX < 0) {\n        newScrollX = 0;\n      } else if (newScrollX > svgWidth) {\n        newScrollX = svgWidth;\n      }\n      ignoreScrollRightRef.current = true;\n      setScrollXRight(newScrollX);\n    } else {\n      if (newScrollY < 0) {\n        newScrollY = 0;\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\n        newScrollY = ganttFullHeight - ganttHeight;\n      }\n      setScrollY(newScrollY);\n    }\n  };\n  var handleSelectedTask = function handleSelectedTask(taskId) {\n    var newSelectedTask = barTasks.find(function (t) {\n      return t.id === taskId;\n    });\n    var oldSelectedTask = barTasks.find(function (t) {\n      return !!selectedTask && t.id === selectedTask.id;\n    });\n    if (onSelect) {\n      if (oldSelectedTask) {\n        onSelect(oldSelectedTask, false);\n      }\n      if (newSelectedTask) {\n        onSelect(newSelectedTask, true);\n      }\n    }\n    setSelectedTask(newSelectedTask);\n  };\n  var handleExpanderClick = function handleExpanderClick(task) {\n    if (onExpanderClick && task.hideChildren !== undefined) {\n      onExpanderClick(_extends({}, task, {\n        hideChildren: !task.hideChildren\n      }));\n    }\n  };\n  var updateTaskListWidth = function updateTaskListWidth(clientX) {\n    if (splitStartXRef.current == null || splitStartWidthRef.current == null) {\n      return;\n    }\n    if (!wrapperRef.current) {\n      return;\n    }\n    var delta = clientX - splitStartXRef.current;\n    var nextWidth = clampTaskListWidth(splitStartWidthRef.current + delta, wrapperRef.current.offsetWidth);\n    setTaskListWidth(nextWidth);\n  };\n  var handleSplitPointerDown = function handleSplitPointerDown(event) {\n    event.preventDefault();\n    splitStartXRef.current = event.clientX;\n    splitStartWidthRef.current = taskListWidth;\n    setIsResizing(true);\n    if (event.currentTarget.setPointerCapture) {\n      event.currentTarget.setPointerCapture(event.pointerId);\n    }\n  };\n  var handleSplitPointerMove = function handleSplitPointerMove(event) {\n    updateTaskListWidth(event.clientX);\n  };\n  var handleSplitPointerUp = function handleSplitPointerUp(event) {\n    splitStartXRef.current = null;\n    splitStartWidthRef.current = null;\n    setIsResizing(false);\n    if (event.currentTarget.releasePointerCapture) {\n      event.currentTarget.releasePointerCapture(event.pointerId);\n    }\n  };\n  var handleSplitMouseDown = function handleSplitMouseDown(event) {\n    event.preventDefault();\n    splitStartXRef.current = event.clientX;\n    splitStartWidthRef.current = taskListWidth;\n    setIsResizing(true);\n    if (splitMoveHandlerRef.current) {\n      document.removeEventListener(\"mousemove\", splitMoveHandlerRef.current);\n    }\n    if (splitUpHandlerRef.current) {\n      document.removeEventListener(\"mouseup\", splitUpHandlerRef.current);\n    }\n    var handleMouseMove = function handleMouseMove(moveEvent) {\n      updateTaskListWidth(moveEvent.clientX);\n    };\n    var handleMouseUp = function handleMouseUp() {\n      splitStartXRef.current = null;\n      splitStartWidthRef.current = null;\n      setIsResizing(false);\n      if (splitMoveHandlerRef.current) {\n        document.removeEventListener(\"mousemove\", splitMoveHandlerRef.current);\n        splitMoveHandlerRef.current = null;\n      }\n      if (splitUpHandlerRef.current) {\n        document.removeEventListener(\"mouseup\", splitUpHandlerRef.current);\n        splitUpHandlerRef.current = null;\n      }\n    };\n    splitMoveHandlerRef.current = handleMouseMove;\n    splitUpHandlerRef.current = handleMouseUp;\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n  var gridProps = {\n    columnWidth: columnWidth,\n    svgWidth: svgWidth,\n    tasks: tasks,\n    rowHeight: rowHeight,\n    dates: dateSetup.dates,\n    todayColor: todayColor,\n    rtl: rtl\n  };\n  var calendarProps = {\n    dateSetup: dateSetup,\n    locale: locale,\n    viewMode: viewMode,\n    headerHeight: headerHeight,\n    columnWidth: columnWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    rtl: rtl\n  };\n  var barProps = {\n    tasks: barTasks,\n    dates: dateSetup.dates,\n    ganttEvent: ganttEvent,\n    selectedTask: selectedTask,\n    rowHeight: rowHeight,\n    taskHeight: taskHeight,\n    columnWidth: columnWidth,\n    arrowColor: arrowColor,\n    timeStep: timeStep,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    arrowIndent: arrowIndent,\n    svgWidth: svgWidth,\n    rtl: rtl,\n    setGanttEvent: setGanttEvent,\n    setFailedTask: setFailedTask,\n    setSelectedTask: handleSelectedTask,\n    onDateChange: onDateChange,\n    onProgressChange: onProgressChange,\n    onDoubleClick: onDoubleClick,\n    onClick: onClick,\n    onDelete: onDelete\n  };\n  var tableProps = {\n    rowHeight: rowHeight,\n    rowWidth: listCellWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    tasks: barTasks,\n    headerHeight: headerHeight,\n    scrollY: scrollY,\n    horizontalScroll: scrollXLeft,\n    ganttHeight: ganttHeight,\n    horizontalContainerClass: styles$9.horizontalContainer,\n    headerContainerRef: taskListHeaderRef,\n    bodyContainerRef: taskListBodyRef,\n    onHorizontalScroll: handleScrollLeft,\n    selectedTask: selectedTask,\n    taskListRef: taskListRef,\n    setSelectedTask: handleSelectedTask,\n    onExpanderClick: handleExpanderClick,\n    TaskListHeader: TaskListHeader,\n    TaskListTable: TaskListTable,\n    visibleFields: visibleFields,\n    onUpdateTask: onTaskUpdate,\n    onCellCommit: onCellCommit,\n    effortDisplayUnit: effortDisplayUnit,\n    enableColumnDrag: enableColumnDrag\n  };\n  return React.createElement(\"div\", null, React.createElement(\"div\", {\n    className: styles$9.wrapper,\n    onKeyDown: handleKeyDown,\n    tabIndex: 0,\n    ref: wrapperRef\n  }, listCellWidth && React.createElement(\"div\", {\n    className: styles$9.taskListPanel,\n    style: {\n      width: taskListWidth\n    },\n    \"data-testid\": \"task-list-panel\"\n  }, React.createElement(TaskList, Object.assign({}, tableProps))), listCellWidth && React.createElement(\"div\", {\n    className: styles$9.splitHandle + \" \" + (isResizing ? styles$9.splitHandleActive : \"\"),\n    onPointerDown: supportsPointerEvents ? handleSplitPointerDown : undefined,\n    onPointerMove: supportsPointerEvents ? handleSplitPointerMove : undefined,\n    onPointerUp: supportsPointerEvents ? handleSplitPointerUp : undefined,\n    onPointerCancel: supportsPointerEvents ? handleSplitPointerUp : undefined,\n    onMouseDown: supportsPointerEvents ? undefined : handleSplitMouseDown,\n    role: \"separator\",\n    \"aria-label\": \"Task/Schedule divider\",\n    \"aria-orientation\": \"vertical\",\n    \"data-testid\": \"pane-splitter\"\n  }), React.createElement(\"div\", {\n    className: styles$9.ganttPanel,\n    style: {\n      minWidth: MIN_PANE_WIDTH\n    },\n    \"data-testid\": \"gantt-panel\"\n  }, React.createElement(TaskGantt, {\n    gridProps: gridProps,\n    calendarProps: calendarProps,\n    barProps: barProps,\n    ganttHeight: ganttHeight,\n    scrollY: scrollY,\n    scrollX: scrollXRight,\n    verticalGanttContainerRef: ganttContainerRef\n  })), ganttEvent.changedTask && React.createElement(Tooltip, {\n    arrowIndent: arrowIndent,\n    rowHeight: rowHeight,\n    svgContainerHeight: svgContainerHeight,\n    svgContainerWidth: svgContainerWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    scrollX: scrollXRight,\n    scrollY: scrollY,\n    task: ganttEvent.changedTask,\n    headerHeight: headerHeight,\n    taskListWidth: taskListOffset,\n    TooltipContent: TooltipContent,\n    rtl: rtl,\n    svgWidth: svgWidth,\n    effortDisplayUnit: effortDisplayUnit\n  }), React.createElement(VerticalScroll, {\n    ganttFullHeight: ganttFullHeight,\n    ganttHeight: ganttHeight,\n    headerHeight: headerHeight,\n    scroll: scrollY,\n    onScroll: handleScrollY,\n    rtl: rtl\n  })), React.createElement(\"div\", {\n    className: styles$9.scrollRow,\n    style: {\n      \"--splitter-width\": SPLIT_HANDLE_WIDTH + \"px\"\n    }\n  }, React.createElement(\"div\", {\n    className: styles$9.scrollCellLeft\n  }, listCellWidth && React.createElement(HorizontalScroll, {\n    svgWidth: taskListWidth,\n    scrollerWidth: leftScrollerWidth,\n    scroll: scrollXLeft,\n    rtl: rtl,\n    onScroll: handleScrollLeft\n  })), listCellWidth && React.createElement(\"div\", {\n    className: styles$9.scrollSplitter\n  }), React.createElement(\"div\", {\n    className: styles$9.scrollCellRight\n  }, React.createElement(HorizontalScroll, {\n    svgWidth: svgWidth,\n    scroll: scrollXRight,\n    rtl: rtl,\n    onScroll: handleScrollRight\n  }))));\n};\nexport { DEFAULT_VISIBLE_FIELDS, Gantt, TASK_PROCESS_OPTIONS, TASK_STATUS_BADGE_TEXT, TASK_STATUS_COLORS, TASK_STATUS_OPTIONS, ViewMode, formatDate, formatEffort, getStatusBadgeText, getStatusColor, normalizeProcess, normalizeStatus, parseDateFromInput, resolveVisibleFields, sanitizeEffortInput };","map":{"version":3,"names":["ViewMode","intlDTCache","getCachedDateTimeFormat","locString","opts","key","JSON","stringify","dtf","Intl","DateTimeFormat","addToDate","date","quantity","scale","newDate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","startOfDate","scores","shouldReset","_scale","maxScore","indexOf","ganttDateRange","tasks","viewMode","preStepsCount","newStartDate","start","newEndDate","_iterator","_createForOfIteratorHelperLoose","_step","done","task","value","end","Year","QuarterYear","Month","Week","getMonday","Day","QuarterDay","HalfDay","Hour","seedDates","startDate","endDate","currentDate","dates","push","getLocaleMonth","locale","bottomValue","month","format","replace","toLocaleUpperCase","getLocalDayOfWeek","weekday","day","getDay","diff","setDate","getWeekNumberISO8601","tmpDate","valueOf","dayNumber","firstThursday","setMonth","weekNumber","Math","ceil","toString","length","getDaysInMonth","year","TASK_PROCESS_OPTIONS","TASK_STATUS_OPTIONS","TASK_STATUS_COLORS","未着手","進行中","完了","保留","TASK_STATUS_BADGE_TEXT","DEFAULT_VISIBLE_FIELDS","padTwo","padStart","formatDate","parseDateFromInput","undefined","_value$split$map","split","map","v","parseInt","Number","isNaN","getTime","formatEffort","effort","unit","isFinite","base","converted","rounded","round","sanitizeEffortInput","parsed","DEFAULT_TASK_PROCESS","includes","normalizeProcess","process","normalizeStatus","status","getStatusColor","getStatusBadgeText","resolveVisibleFields","visibleFields","hasOwn","hasOwnProperty","classNames","classes","i","arguments","arg","appendClass","parseValue","Array","isArray","apply","Object","prototype","call","newClass","module","exports","default","window","_iteratorSymbol","Symbol","iterator","_asyncIteratorSymbol","asyncIterator","_catch","body","recover","result","e","then","NULL_CHAR_REGEX","RegExp","String","fromCharCode","ALPHANUMERIC_REGEX","resolveOverlayInputType","columnId","escapeSelectorValue","CSS","escape","sanitized","from","_char","index","codePoint","codePointAt","charCodeAt","test","join","OverlayEditor","_ref","editingState","taskListRef","headerContainerRef","bodyContainerRef","onCommit","onCancel","_useState","useState","rect","setRect","_useState2","targetElement","setTargetElement","inputRef","useRef","defaultValueRef","compositionRef","rafIdRef","inputType","useMemo","selectOptions","portalRoot","document","resolveDefaultValue","useCallback","target","input","querySelector","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","_target$textContent","textContent","trim","findTargetElement","current","rowId","updateRect","mode","nextDefaultValue","nextRect","getBoundingClientRect","top","left","width","height","scheduleRectUpdate","requestAnimationFrame","useEffect","handleScroll","handleResize","addEventListener","capture","passive","scrollTargets","filter","Boolean","forEach","element","ResizeObserverConstructor","ResizeObserver","resizeObserver","observedElements","observe","removeEventListener","disconnect","cancelAnimationFrame","pending","focus","select","handleCommit","Promise","resolve","reject","handleKeyDown","event","preventDefault","handleBlur","handleInput","currentTarget","handleCompositionStart","handleCompositionEnd","handleInputElementRef","createPortal","React","createElement","className","styles$1","overlayEditor","overlayEditorPending","style","taskListSelect","defaultValue","ref","disabled","onKeyDown","onBlur","onInput","onChange","option","taskListInput","type","readOnly","onCompositionStart","onCompositionEnd","errorMessage","overlayEditorError","role","TaskListEditingStateContext","createContext","DEFAULT_MIN_WIDTH","getDefaultWidth","field","rowWidth","TaskList","headerHeight","fontFamily","fontSize","rowHeight","scrollY","_ref$horizontalScroll","horizontalScroll","selectedTask","setSelectedTask","onExpanderClick","ganttHeight","horizontalContainerClass","TaskListHeader","TaskListTable","onUpdateTask","onCellCommit","effortDisplayUnit","_ref$enableColumnDrag","enableColumnDrag","onHorizontalScroll","internalHorizontalRef","internalHeaderRef","horizontalContainerRef","headerRef","scrollTop","scrollLeft","initialColumns","id","label","minWidth","visible","columnsState","setColumnsState","prev","existingMap","Map","column","nextColumns","existing","get","visibleColumns","headerProps","selectedTaskId","tableProps","trigger","setEditingState","previousEditingStateRef","closeEditing","mountedRef","cancelEditing","reason","console","debug","commitEditing","_extends","error","message","Error","selectCell","startEditing","previous","buildLogContext","_editingState$rowId","_editingState$columnI","_editingState$trigger","log","logContext","to","editingContextValue","onScroll","overflowX","assign","Provider","TaskListHeaderDefault","labels","name","assignee","plannedStart","plannedEnd","plannedEffort","actualEffort","fallbackColumns","resolvedColumns","sensors","useSensors","useSensor","PointerSensor","resizingId","setResizingId","onDragEnd","active","over","oldIndex","findIndex","newIndex","moved","arrayMove","idx","headerContent","styles","ganttTable","ganttTable_Header","Fragment","SortableHeaderItem","enableDrag","isResizing","ganttTable_HeaderSeparator","marginTop","DndContext","SortableContext","items","strategy","horizontalListSortingStrategy","_ref2","_useSortable","useSortable","attributes","listeners","setNodeRef","transform","transition","isDragging","startXRef","startWidthRef","moveHandlerRef","upHandlerRef","maxWidth","CSS$1","Transform","onMouseDownResize","stopPropagation","clientX","handleMouseMove","moveEvent","delta","nextWidth","max","item","handleMouseUp","classnames","ganttTable_HeaderItem","_classNames","ganttTable_HeaderItemDragging","ganttTable_DragHandle","_classNames2","ganttTable_DragHandleDisabled","onMouseDown","ganttTable_DragIcon","ganttTable_HeaderLabel","ganttTable_ResizeHandle","_classNames3","ganttTable_ResizeHandleActive","TaskListTableDefault","columns","_columnsState$filter","isCommitEnabled","allowEditing","editingContext","useContext","editableFields","Set","columnIds","resolveColumnId","isCellEditable","tableEditable","columnEditable","has","rowEditable","isDisabled","cellEditableByRule","findCellPosition","rowIndex","columnIndex","resolveSelectedCell","find","row","moveSelection","direction","position","firstColumn","min","shouldIgnoreKeyEvent","HTMLElement","isContentEditable","tagName","handleWrapperKeyDown","defaultPrevented","selectedCell","isPrintableKey","metaKey","ctrlKey","altKey","taskListWrapper","tabIndex","t","expanderSymbol","hideChildren","renderCell","taskListNameWrapper","taskListExpander","taskListEmptyExpander","onClick","statusValue","statusWrapper","statusBadge","backgroundColor","statusText","taskListTableRow","isSelected","handleCellClick","handleCellDoubleClick","handleCellKeyDown","taskListCell","onDoubleClick","title","Tooltip","rtl","svgContainerHeight","svgContainerWidth","scrollX","arrowIndent","taskListWidth","TooltipContent","tooltipRef","relatedY","setRelatedY","relatedX","setRelatedX","tooltipHeight","offsetHeight","tooltipWidth","offsetWidth","newRelatedY","newRelatedX","x1","x2","tooltipLeftmostPoint","_tooltipLeftmostPoint","fullChartWidth","tooltipLowerPoint","styles$2","tooltipDetailsContainer","tooltipDetailsContainerHidden","StandardTooltipContent","_ref2$effortDisplayUn","normalizedStatus","normalizedProcess","dateRange","plannedRange","tooltipDefaultContainer","tooltipTitle","tooltipName","tooltipDate","tooltipRow","tooltipLabel","tooltipValue","tooltipStatus","tooltipStatusText","progress","tooltipDefaultContainerParagraph","VerticalScroll","scroll","ganttFullHeight","scrollRef","right","styles$3","GridBody","svgWidth","columnWidth","todayColor","y","gridRows","rowLines","x","y1","y2","styles$4","gridRowLine","gridRow","now","tickX","ticks","today","gridTick","fill","Grid","props","TopPartOfCalendar","x1Line","y1Line","y2Line","xText","yText","styles$5","calendarTopTick","calendarTopText","Calendar","dateSetup","getCalendarValuesForYear","topValues","bottomValues","topDefaultHeight","calendarBottomText","topValue","getCalendarValuesForQuarterYear","quarter","floor","abs","getCalendarValuesForMonth","getCalendarValuesForWeek","weeksCount","getCalendarValuesForDay","getCalendarValuesForPartOfDay","hour","getCalendarValuesForHour","displayDate","topPosition","_getCalendarValuesFor","_getCalendarValuesFor2","_getCalendarValuesFor3","_getCalendarValuesFor4","_getCalendarValuesFor5","_getCalendarValuesFor6","_getCalendarValuesFor7","calendarHeader","Arrow","taskFrom","taskTo","taskHeight","path","trianglePoints","_drownPathAndTriangle","drownPathAndTriangleRTL","_drownPathAndTriangle2","drownPathAndTriangle","strokeWidth","d","points","indexCompare","taskToEndPosition","taskFromEndPosition","taskFromHorizontalOffsetValue","taskToHorizontalOffsetValue","convertToBarTasks","barCornerRadius","handleWidth","barProgressColor","barProgressSelectedColor","barBackgroundColor","barBackgroundSelectedColor","projectProgressColor","projectProgressSelectedColor","projectBackgroundColor","projectBackgroundSelectedColor","milestoneBackgroundColor","milestoneBackgroundSelectedColor","barTasks","convertToBarTask","dependencies","_loop","j","dependence","barChildren","barTask","convertToMilestone","convertToBar","taskXCoordinateRTL","taskXCoordinate","typeInternal","_progressWithByParams","progressWithByParams","progressWidth","progressX","taskYCoordinate","backgroundSelectedColor","progressColor","progressSelectedColor","rotatedHeight","xDate","remainderMillis","percentOfInterval","taskX1","taskX2","progressByX","barWidth","progressPercent","progressByXRTL","getProgressPoint","taskY","point","startByX","xStep","steps","additionalXValue","newX","endByX","moveByX","newX1","newX2","dateByX","taskX","taskDate","timeStep","getTimezoneOffset","handleTaskBySVGMouseEvent","svgX","action","initEventX1Delta","handleTaskBySVGMouseEventForMilestone","handleTaskBySVGMouseEventForBar","changedTask","isChanged","_progressWithByParams2","_progressWithByParams3","_progressWidth","_progressX","_progressWithByParams4","_progressWidth2","_progressX2","_moveByX","newMoveX1","newMoveX2","_progressWithByParams5","_progressWidth3","_progressX3","_moveByX2","isKeyboardEvent","removeHiddenTasks","groupedTasks","groupedTask","children","getChildren","taskList","project","taskChildren","concat","sortTasks","taskA","taskB","orderA","displayOrder","MAX_VALUE","orderB","BarDisplay","getProcessColor","getBarColor","ry","rx","styles$6","barBackground","BarDateHandle","barHandle","BarProgressHandle","progressPoint","Bar","isProgressChangeable","isDateChangeable","onEventStart","handleHeight","barWrapper","BarSmall","Milestone","styles$7","milestoneWrapper","milestoneBackground","Project","barColor","processColor","projectWith","projectLeftTriangle","projectRightTriangle","styles$8","projectWrapper","projectBackground","projectTop","TaskItem","_props","isDelete","textRef","taskItem","setTaskItem","isTextInside","setIsTextInside","statusColor","statusBadgeText","taskItemProps","getBBoxWidth","getBBox","getX","hasChild","onMouseEnter","onMouseLeave","onFocus","barLabel","barLabelOutside","statusDot","dx","TaskGanttContent","ganttEvent","svg","arrowColor","setGanttEvent","setFailedTask","onDateChange","onProgressChange","onDelete","createSVGPoint","setXStep","setInitEventX1Delta","_useState3","isMoving","setIsMoving","dateDelta","newXStep","cursor","matrixTransform","_svg$current$getScree","getScreenCTM","inverse","_handleTaskBySVGMouse","_handleMouseUp","operationSuccess","originalSelectedTask","_svg$current$getScree2","_handleTaskBySVGMouse2","newChangedTask","isNotLikeOriginal","_temp4","_temp","_temp6","_temp2","_temp5","handleBarEventStart","_temp9","_temp8","_temp7","_svg$current$getScree3","stroke","child","TaskGantt","gridProps","calendarProps","barProps","verticalGanttContainerRef","ganttSVGRef","internalVerticalRef","ganttContainerRef","newBarProps","styles$9","ganttVerticalContainer","dir","xmlns","horizontalContainer","HorizontalScroll","scrollerWidth","dataTestId","containerRef","hidden","wrapperRef","styles$a","scrollWrapper","display","DEFAULT_TASK_LIST_WIDTH","MIN_PANE_WIDTH","SPLIT_HANDLE_WIDTH","clampTaskListWidth","containerWidth","Gantt","_ref$headerHeight","_ref$columnWidth","_ref$listCellWidth","listCellWidth","_ref$rowHeight","_ref$ganttHeight","_ref$viewMode","_ref$preStepsCount","_ref$locale","_ref$barFill","barFill","_ref$barCornerRadius","_ref$barProgressColor","_ref$barProgressSelec","_ref$barBackgroundCol","_ref$barBackgroundSel","_ref$projectProgressC","_ref$projectProgressS","_ref$projectBackgroun","_ref$projectBackgroun2","_ref$milestoneBackgro","_ref$milestoneBackgro2","_ref$rtl","_ref$handleWidth","_ref$timeStep","_ref$arrowColor","_ref$fontFamily","_ref$fontSize","_ref$arrowIndent","_ref$todayColor","viewDate","_ref$TooltipContent","_ref$TaskListHeader","_ref$TaskListTable","_ref$visibleFields","_ref$effortDisplayUni","onSelect","onTaskUpdate","taskListHeaderRef","taskListBodyRef","splitStartXRef","splitStartWidthRef","splitMoveHandlerRef","splitUpHandlerRef","supportsPointerEvents","_ganttDateRange","setDateSetup","currentViewDate","setCurrentViewDate","setTaskListWidth","_useState4","wrapperWidth","setWrapperWidth","_useState5","setIsResizing","_useState6","setSvgContainerWidth","_useState7","setSvgContainerHeight","_useState8","setBarTasks","_useState9","_useState0","_useState1","failedTask","_useState10","setScrollY","_useState11","scrollXLeft","setScrollXLeft","_useState12","scrollXRight","setScrollXRight","_useState13","leftScrollerWidth","setLeftScrollerWidth","ignoreScrollLeftRef","ignoreScrollRightRef","filteredTasks","sort","_ganttDateRange2","newDates","reverse","prevStateTask","newTaskList","updateWrapperWidth","taskListOffset","handleWheel","shiftKey","deltaX","scrollMove","deltaY","newScrollX","newScrollY","wrapperEl","updateLeftScroller","el","scrollWidth","RO","ro","handleScrollY","handleScrollLeft","handleScrollRight","isX","handleSelectedTask","taskId","newSelectedTask","oldSelectedTask","handleExpanderClick","updateTaskListWidth","handleSplitPointerDown","setPointerCapture","pointerId","handleSplitPointerMove","handleSplitPointerUp","releasePointerCapture","handleSplitMouseDown","wrapper","taskListPanel","splitHandle","splitHandleActive","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","ganttPanel","scrollRow","scrollCellLeft","scrollSplitter","scrollCellRight"],"sources":["/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/types/public-types.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/helpers/date-helper.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/constants/taskOptions.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/helpers/task-helper.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/node_modules/classnames/index.js","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/node_modules/babel-plugin-transform-async-to-promises/helpers.mjs","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-list/overlay-editor.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-list/task-list.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-list/task-list-header.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-list/task-list-table.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/other/tooltip.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/other/vertical-scroll.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/grid/grid-body.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/grid/grid.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/calendar/top-part-of-calendar.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/calendar/calendar.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/other/arrow.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/helpers/bar-helper.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/helpers/other-helper.ts","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-item/bar/bar-display.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-item/bar/bar-date-handle.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-item/bar/bar-progress-handle.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-item/bar/bar.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-item/bar/bar-small.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-item/milestone/milestone.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-item/project/project.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/task-item/task-item.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/gantt/task-gantt-content.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/gantt/task-gantt.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/other/horizontal-scroll.tsx","/home/runner/work/gantt-task-react-custom/gantt-task-react-custom/example/node_modules/@levelcaptech/gantt-task-react-custom/src/components/gantt/gantt.tsx"],"sourcesContent":["import { TaskProcessOption, TaskStatusOption } from \"../constants/taskOptions\";\n\nexport type TaskProcess = TaskProcessOption;\nexport type TaskStatus = TaskStatusOption;\nexport type EffortUnit = \"MH\" | \"MD\" | \"MM\";\nexport type VisibleField =\n  | \"name\"\n  | \"start\"\n  | \"end\"\n  | \"process\"\n  | \"assignee\"\n  | \"plannedStart\"\n  | \"plannedEnd\"\n  | \"plannedEffort\"\n  | \"actualEffort\"\n  | \"status\";\n\nexport type CellCommitTrigger = \"enter\";\n\nexport type CellCommitPayload = {\n  rowId: string;\n  columnId: VisibleField;\n  value: string;\n  trigger: CellCommitTrigger;\n};\n\nexport type ColumnState = {\n  id: VisibleField;\n  label: string;\n  width: number;\n  minWidth: number;\n  visible: boolean;\n};\n\nexport type ColumnsState = ColumnState[];\n\nexport enum ViewMode {\n  Hour = \"Hour\",\n  QuarterDay = \"Quarter Day\",\n  HalfDay = \"Half Day\",\n  Day = \"Day\",\n  /** ISO-8601 week */\n  Week = \"Week\",\n  Month = \"Month\",\n  QuarterYear = \"QuarterYear\",\n  Year = \"Year\",\n}\nexport type TaskType = \"task\" | \"milestone\" | \"project\";\nexport interface Task {\n  id: string;\n  type: TaskType;\n  name: string;\n  start: Date;\n  end: Date;\n  /**\n   * From 0 to 100\n   */\n  progress: number;\n  styles?: {\n    backgroundColor?: string;\n    backgroundSelectedColor?: string;\n    progressColor?: string;\n    progressSelectedColor?: string;\n  };\n  isDisabled?: boolean;\n  project?: string;\n  dependencies?: string[];\n  hideChildren?: boolean;\n  displayOrder?: number;\n  process?: TaskProcess;\n  assignee?: string;\n  plannedStart?: Date;\n  plannedEnd?: Date;\n  plannedEffort?: number;\n  actualEffort?: number;\n  status?: TaskStatus;\n}\n\nexport interface EventOption {\n  /**\n   * Time step value for date changes.\n   */\n  timeStep?: number;\n  /**\n   * Invokes on bar select on unselect.\n   */\n  onSelect?: (task: Task, isSelected: boolean) => void;\n  /**\n   * Invokes on bar double click.\n   */\n  onDoubleClick?: (task: Task) => void;\n  /**\n   * Invokes on bar click.\n   */\n  onClick?: (task: Task) => void;\n  /**\n   * Invokes on end and start time change. Chart undoes operation if method return false or error.\n   */\n  onDateChange?: (\n    task: Task,\n    children: Task[]\n  ) => void | boolean | Promise<void> | Promise<boolean>;\n  /**\n   * Invokes on progress change. Chart undoes operation if method return false or error.\n   */\n  onProgressChange?: (\n    task: Task,\n    children: Task[]\n  ) => void | boolean | Promise<void> | Promise<boolean>;\n  /**\n   * Invokes on delete selected task. Chart undoes operation if method return false or error.\n   */\n  onDelete?: (task: Task) => void | boolean | Promise<void> | Promise<boolean>;\n  /**\n   * Invokes on expander on task list\n   */\n  onExpanderClick?: (task: Task) => void;\n  /**\n   * Invokes when task list fields are updated (process, status, planned dates, assignee, effort).\n   */\n  onTaskUpdate?: (taskId: string, updatedFields: Partial<Task>) => void;\n  /**\n   * Invokes when a task list cell edit is committed.\n   * Notification only; the library does not update tasks or UI.\n   * Host must validate/persist, update tasks, and pass new props for rerender.\n   */\n  onCellCommit?: (payload: CellCommitPayload) => Promise<void>;\n}\n\nexport interface DisplayOption {\n  viewMode?: ViewMode;\n  viewDate?: Date;\n  preStepsCount?: number;\n  /**\n   * Specifies the month name language. Able formats: ISO 639-2, Java Locale\n   */\n  locale?: string;\n  rtl?: boolean;\n}\n\nexport interface StylingOption {\n  headerHeight?: number;\n  columnWidth?: number;\n  listCellWidth?: string;\n  rowHeight?: number;\n  ganttHeight?: number;\n  barCornerRadius?: number;\n  handleWidth?: number;\n  fontFamily?: string;\n  fontSize?: string;\n  /**\n   * How many of row width can be taken by task.\n   * From 0 to 100\n   */\n  barFill?: number;\n  barProgressColor?: string;\n  barProgressSelectedColor?: string;\n  barBackgroundColor?: string;\n  barBackgroundSelectedColor?: string;\n  projectProgressColor?: string;\n  projectProgressSelectedColor?: string;\n  projectBackgroundColor?: string;\n  projectBackgroundSelectedColor?: string;\n  milestoneBackgroundColor?: string;\n  milestoneBackgroundSelectedColor?: string;\n  arrowColor?: string;\n  arrowIndent?: number;\n  todayColor?: string;\n  visibleFields?: VisibleField[];\n  effortDisplayUnit?: EffortUnit;\n  enableColumnDrag?: boolean;\n  TooltipContent?: React.FC<{\n    task: Task;\n    fontSize: string;\n    fontFamily: string;\n    effortDisplayUnit?: EffortUnit;\n  }>;\n  TaskListHeader?: React.FC<{\n    headerHeight: number;\n    rowWidth: string;\n    fontFamily: string;\n    fontSize: string;\n    visibleFields: VisibleField[];\n    columnsState?: ColumnsState;\n    setColumnsState?: React.Dispatch<React.SetStateAction<ColumnsState>>;\n    enableColumnDrag?: boolean;\n  }>;\n  TaskListTable?: React.FC<{\n    rowHeight: number;\n    rowWidth: string;\n    fontFamily: string;\n    fontSize: string;\n    locale?: string;\n    tasks: Task[];\n    selectedTaskId: string;\n    /**\n     * Sets selected task by id\n     */\n    setSelectedTask: (taskId: string) => void;\n    onExpanderClick: (task: Task) => void;\n    visibleFields: VisibleField[];\n    onUpdateTask?: (taskId: string, updatedFields: Partial<Task>) => void;\n    effortDisplayUnit: EffortUnit;\n    columnsState?: ColumnsState;\n  }>;\n}\n\nexport interface GanttProps extends EventOption, DisplayOption, StylingOption {\n  tasks: Task[];\n}\n","import { Task, ViewMode } from \"../types/public-types\";\nimport DateTimeFormatOptions = Intl.DateTimeFormatOptions;\nimport DateTimeFormat = Intl.DateTimeFormat;\n\ntype DateHelperScales =\n  | \"year\"\n  | \"month\"\n  | \"day\"\n  | \"hour\"\n  | \"minute\"\n  | \"second\"\n  | \"millisecond\";\n\nconst intlDTCache = {};\nexport const getCachedDateTimeFormat = (\n  locString: string | string[],\n  opts: DateTimeFormatOptions = {}\n): DateTimeFormat => {\n  const key = JSON.stringify([locString, opts]);\n  let dtf = intlDTCache[key];\n  if (!dtf) {\n    dtf = new Intl.DateTimeFormat(locString, opts);\n    intlDTCache[key] = dtf;\n  }\n  return dtf;\n};\n\nexport const addToDate = (\n  date: Date,\n  quantity: number,\n  scale: DateHelperScales\n) => {\n  const newDate = new Date(\n    date.getFullYear() + (scale === \"year\" ? quantity : 0),\n    date.getMonth() + (scale === \"month\" ? quantity : 0),\n    date.getDate() + (scale === \"day\" ? quantity : 0),\n    date.getHours() + (scale === \"hour\" ? quantity : 0),\n    date.getMinutes() + (scale === \"minute\" ? quantity : 0),\n    date.getSeconds() + (scale === \"second\" ? quantity : 0),\n    date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0)\n  );\n  return newDate;\n};\n\nexport const startOfDate = (date: Date, scale: DateHelperScales) => {\n  const scores = [\n    \"millisecond\",\n    \"second\",\n    \"minute\",\n    \"hour\",\n    \"day\",\n    \"month\",\n    \"year\",\n  ];\n\n  const shouldReset = (_scale: DateHelperScales) => {\n    const maxScore = scores.indexOf(scale);\n    return scores.indexOf(_scale) <= maxScore;\n  };\n  const newDate = new Date(\n    date.getFullYear(),\n    shouldReset(\"year\") ? 0 : date.getMonth(),\n    shouldReset(\"month\") ? 1 : date.getDate(),\n    shouldReset(\"day\") ? 0 : date.getHours(),\n    shouldReset(\"hour\") ? 0 : date.getMinutes(),\n    shouldReset(\"minute\") ? 0 : date.getSeconds(),\n    shouldReset(\"second\") ? 0 : date.getMilliseconds()\n  );\n  return newDate;\n};\n\nexport const ganttDateRange = (\n  tasks: Task[],\n  viewMode: ViewMode,\n  preStepsCount: number\n) => {\n  let newStartDate: Date = tasks[0].start;\n  let newEndDate: Date = tasks[0].start;\n  for (const task of tasks) {\n    if (task.start < newStartDate) {\n      newStartDate = task.start;\n    }\n    if (task.end > newEndDate) {\n      newEndDate = task.end;\n    }\n  }\n  switch (viewMode) {\n    case ViewMode.Year:\n      newStartDate = addToDate(newStartDate, -1, \"year\");\n      newStartDate = startOfDate(newStartDate, \"year\");\n      newEndDate = addToDate(newEndDate, 1, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n    case ViewMode.QuarterYear:\n      newStartDate = addToDate(newStartDate, -3, \"month\");\n      newStartDate = startOfDate(newStartDate, \"month\");\n      newEndDate = addToDate(newEndDate, 3, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n    case ViewMode.Month:\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"month\");\n      newStartDate = startOfDate(newStartDate, \"month\");\n      newEndDate = addToDate(newEndDate, 1, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n    case ViewMode.Week:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(\n        getMonday(newStartDate),\n        -7 * preStepsCount,\n        \"day\"\n      );\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\n      break;\n    case ViewMode.Day:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 19, \"day\");\n      break;\n    case ViewMode.QuarterDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 66, \"hour\"); // 24(1 day)*3 - 6\n      break;\n    case ViewMode.HalfDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 108, \"hour\"); // 24(1 day)*5 - 12\n      break;\n    case ViewMode.Hour:\n      newStartDate = startOfDate(newStartDate, \"hour\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"hour\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 1, \"day\");\n      break;\n  }\n  return [newStartDate, newEndDate];\n};\n\nexport const seedDates = (\n  startDate: Date,\n  endDate: Date,\n  viewMode: ViewMode\n) => {\n  let currentDate: Date = new Date(startDate);\n  const dates: Date[] = [currentDate];\n  while (currentDate < endDate) {\n    switch (viewMode) {\n      case ViewMode.Year:\n        currentDate = addToDate(currentDate, 1, \"year\");\n        break;\n      case ViewMode.QuarterYear:\n        currentDate = addToDate(currentDate, 3, \"month\");\n        break;\n      case ViewMode.Month:\n        currentDate = addToDate(currentDate, 1, \"month\");\n        break;\n      case ViewMode.Week:\n        currentDate = addToDate(currentDate, 7, \"day\");\n        break;\n      case ViewMode.Day:\n        currentDate = addToDate(currentDate, 1, \"day\");\n        break;\n      case ViewMode.HalfDay:\n        currentDate = addToDate(currentDate, 12, \"hour\");\n        break;\n      case ViewMode.QuarterDay:\n        currentDate = addToDate(currentDate, 6, \"hour\");\n        break;\n      case ViewMode.Hour:\n        currentDate = addToDate(currentDate, 1, \"hour\");\n        break;\n    }\n    dates.push(currentDate);\n  }\n  return dates;\n};\n\nexport const getLocaleMonth = (date: Date, locale: string) => {\n  let bottomValue = getCachedDateTimeFormat(locale, {\n    month: \"long\",\n  }).format(date);\n  bottomValue = bottomValue.replace(\n    bottomValue[0],\n    bottomValue[0].toLocaleUpperCase()\n  );\n  return bottomValue;\n};\n\nexport const getLocalDayOfWeek = (\n  date: Date,\n  locale: string,\n  format?: \"long\" | \"short\" | \"narrow\" | undefined\n) => {\n  let bottomValue = getCachedDateTimeFormat(locale, {\n    weekday: format,\n  }).format(date);\n  bottomValue = bottomValue.replace(\n    bottomValue[0],\n    bottomValue[0].toLocaleUpperCase()\n  );\n  return bottomValue;\n};\n\n/**\n * Returns monday of current week\n * @param date date for modify\n */\nconst getMonday = (date: Date) => {\n  const day = date.getDay();\n  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\n  return new Date(date.setDate(diff));\n};\n\nexport const getWeekNumberISO8601 = (date: Date) => {\n  const tmpDate = new Date(date.valueOf());\n  const dayNumber = (tmpDate.getDay() + 6) % 7;\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\n  const firstThursday = tmpDate.valueOf();\n  tmpDate.setMonth(0, 1);\n  if (tmpDate.getDay() !== 4) {\n    tmpDate.setMonth(0, 1 + ((4 - tmpDate.getDay() + 7) % 7));\n  }\n  const weekNumber = (\n    1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)\n  ).toString();\n\n  if (weekNumber.length === 1) {\n    return `0${weekNumber}`;\n  } else {\n    return weekNumber;\n  }\n};\n\nexport const getDaysInMonth = (month: number, year: number) => {\n  return new Date(year, month + 1, 0).getDate();\n};\n","export const TASK_PROCESS_OPTIONS = [\n  \"設計\",\n  \"開発\",\n  \"テスト\",\n  \"レビュー\",\n  \"リリース\",\n  \"その他\",\n] as const;\n\nexport const TASK_STATUS_OPTIONS = [\"未着手\", \"進行中\", \"完了\", \"保留\"] as const;\n\nexport type TaskProcessOption = (typeof TASK_PROCESS_OPTIONS)[number];\nexport type TaskStatusOption = (typeof TASK_STATUS_OPTIONS)[number];\n\nexport const TASK_STATUS_COLORS: Record<TaskStatusOption, string> = {\n  未着手: \"#9e9e9e\",\n  進行中: \"#2196f3\",\n  完了: \"#4caf50\",\n  保留: \"#ff9800\",\n};\n\nexport const TASK_STATUS_BADGE_TEXT: Record<TaskStatusOption, string> = {\n  未着手: \"未\",\n  進行中: \"進\",\n  完了: \"完\",\n  保留: \"保\",\n};\n","import {\n  TASK_PROCESS_OPTIONS,\n  TASK_STATUS_BADGE_TEXT,\n  TASK_STATUS_COLORS,\n  TASK_STATUS_OPTIONS,\n} from \"../constants/taskOptions\";\nimport { EffortUnit, TaskProcess, TaskStatus, VisibleField } from \"../types/public-types\";\n\nexport const DEFAULT_VISIBLE_FIELDS: VisibleField[] = [\n  \"name\",\n  \"start\",\n  \"end\",\n  \"process\",\n  \"assignee\",\n  \"plannedStart\",\n  \"plannedEnd\",\n  \"plannedEffort\",\n  \"actualEffort\",\n  \"status\",\n];\n\nconst padTwo = (value: number) => value.toString().padStart(2, \"0\");\n\nexport const formatDate = (date?: Date) => {\n  if (!date) return \"\";\n  return `${date.getFullYear()}-${padTwo(date.getMonth() + 1)}-${padTwo(\n    date.getDate()\n  )}`;\n};\n\nexport const parseDateFromInput = (value: string) => {\n  if (!value) return undefined;\n  const [year, month, day] = value.split(\"-\").map(v => parseInt(v, 10));\n  if (\n    Number.isNaN(year) ||\n    Number.isNaN(month) ||\n    Number.isNaN(day) ||\n    month < 1 ||\n    month > 12 ||\n    day < 1 ||\n    day > 31 /* 31日超を除外し、月ごとの上限（例: 2月30日）はDateコンストラクタの正規化＋ラウンドトリップ比較で検証 */\n  ) {\n    return undefined;\n  }\n  const date = new Date(year, month - 1, day);\n  if (\n    Number.isNaN(date.getTime()) ||\n    date.getFullYear() !== year ||\n    date.getMonth() !== month - 1 ||\n    date.getDate() !== day\n  ) {\n    return undefined;\n  }\n  return date;\n};\n\nexport const formatEffort = (\n  effort?: number,\n  unit: EffortUnit = \"MH\"\n): string => {\n  if (effort === undefined || effort === null || !Number.isFinite(effort) || effort < 0) {\n    return \"\";\n  }\n  const base =\n    unit === \"MD\" ? 8 : unit === \"MM\" ? 160 : 1; /* MD:8h, MM:160h */\n  const converted = effort / base;\n  const rounded =\n    unit === \"MH\" ? effort : Math.round(converted * 10) / 10;\n  return `${rounded}${unit}`;\n};\n\nexport const sanitizeEffortInput = (value: string) => {\n  if (value === \"\") return undefined;\n  const parsed = Number(value);\n  if (!Number.isFinite(parsed) || parsed < 0) return undefined;\n  return parsed;\n};\n\nconst DEFAULT_TASK_PROCESS: TaskProcess = (\n  TASK_PROCESS_OPTIONS.includes(\"その他\")\n    ? \"その他\"\n    : TASK_PROCESS_OPTIONS[0]\n) as TaskProcess;\n\nexport const normalizeProcess = (process?: TaskProcess) =>\n  TASK_PROCESS_OPTIONS.includes(process as TaskProcess)\n    ? (process as TaskProcess)\n    : DEFAULT_TASK_PROCESS;\n\nexport const normalizeStatus = (status?: TaskStatus) =>\n  TASK_STATUS_OPTIONS.includes(status as TaskStatus)\n    ? (status as TaskStatus)\n    : TASK_STATUS_OPTIONS[0];\n\nexport const getStatusColor = (status?: TaskStatus) =>\n  TASK_STATUS_COLORS[normalizeStatus(status)];\n\nexport const getStatusBadgeText = (status?: TaskStatus) =>\n  TASK_STATUS_BADGE_TEXT[normalizeStatus(status)];\n\nexport const resolveVisibleFields = (visibleFields?: VisibleField[]) =>\n  visibleFields && visibleFields.length > 0\n    ? visibleFields\n    : DEFAULT_VISIBLE_FIELDS;\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"./task-list-table.module.css\";\nimport {\n  TASK_PROCESS_OPTIONS,\n  TASK_STATUS_OPTIONS,\n} from \"../../constants/taskOptions\";\nimport { CellCommitTrigger, VisibleField } from \"../../types/public-types\";\n\ntype EditingState = {\n  mode: \"viewing\" | \"selected\" | \"editing\";\n  rowId: string | null;\n  columnId: VisibleField | null;\n  pending: boolean;\n  errorMessage: string | null;\n};\n\ntype OverlayRect = {\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n};\n\ntype OverlayEditorProps = {\n  editingState: EditingState;\n  taskListRef: React.RefObject<HTMLDivElement>;\n  headerContainerRef?: React.RefObject<HTMLDivElement>;\n  bodyContainerRef?: React.RefObject<HTMLDivElement>;\n  onCommit: (value: string, trigger: CellCommitTrigger) => Promise<void>;\n  onCancel: (reason: \"escape\" | \"nochange-blur\" | \"unmounted\") => void;\n};\n\ntype OverlayInputType = \"text\" | \"date\" | \"number\" | \"select\";\n\nconst NULL_CHAR_REGEX = new RegExp(String.fromCharCode(0), \"g\");\nconst ALPHANUMERIC_REGEX = /[a-zA-Z0-9]/;\n\nconst resolveOverlayInputType = (\n  columnId: VisibleField | null\n): OverlayInputType => {\n  switch (columnId) {\n    case \"start\":\n    case \"end\":\n    case \"plannedStart\":\n    case \"plannedEnd\":\n      return \"date\";\n    case \"plannedEffort\":\n    case \"actualEffort\":\n      return \"number\";\n    case \"process\":\n    case \"status\":\n      return \"select\";\n    case \"name\":\n    case \"assignee\":\n    default:\n      return \"text\";\n  }\n};\n\nconst escapeSelectorValue = (value: string) => {\n  if (typeof CSS !== \"undefined\" && typeof CSS.escape === \"function\") {\n    return CSS.escape(value);\n  }\n  const sanitized = value.replace(NULL_CHAR_REGEX, \"\\uFFFD\");\n  return Array.from(sanitized)\n    .map((char, index) => {\n      const codePoint = char.codePointAt(0);\n      if (codePoint === undefined) {\n        return \"\";\n      }\n      if (\n        (codePoint >= 0x1 && codePoint <= 0x1f) ||\n        codePoint === 0x7f ||\n        (index === 0 && codePoint >= 0x30 && codePoint <= 0x39) ||\n        (index === 1 &&\n          codePoint >= 0x30 &&\n          codePoint <= 0x39 &&\n          sanitized.charCodeAt(0) === 0x2d)\n      ) {\n        return `\\\\${codePoint.toString(16)} `;\n      }\n      if (char === \"-\" || char === \"_\" || ALPHANUMERIC_REGEX.test(char)) {\n        return char;\n      }\n      return `\\\\${char}`;\n    })\n    .join(\"\");\n};\n\nexport const OverlayEditor: React.FC<OverlayEditorProps> = ({\n  editingState,\n  taskListRef,\n  headerContainerRef,\n  bodyContainerRef,\n  onCommit,\n  onCancel,\n}) => {\n  const [rect, setRect] = useState<OverlayRect | null>(null);\n  const [targetElement, setTargetElement] = useState<HTMLElement | null>(null);\n  const inputRef = useRef<HTMLInputElement | HTMLSelectElement | null>(null);\n  const defaultValueRef = useRef(\"\");\n  const compositionRef = useRef(false);\n  const rafIdRef = useRef<number | null>(null);\n\n  const inputType = useMemo(\n    () => resolveOverlayInputType(editingState.columnId),\n    [editingState.columnId]\n  );\n  const selectOptions = useMemo<readonly string[]>(() => {\n    if (editingState.columnId === \"process\") {\n      return TASK_PROCESS_OPTIONS;\n    }\n    if (editingState.columnId === \"status\") {\n      return TASK_STATUS_OPTIONS;\n    }\n    return [];\n  }, [editingState.columnId]);\n\n  const portalRoot = useMemo(() => {\n    if (typeof document === \"undefined\") {\n      return null;\n    }\n    return document.body;\n  }, []);\n\n  const resolveDefaultValue = useCallback((target: HTMLElement) => {\n    const input = target.querySelector(\"input, textarea, select\");\n    if (input instanceof HTMLInputElement || input instanceof HTMLTextAreaElement) {\n      return input.value;\n    }\n    if (input instanceof HTMLSelectElement) {\n      return input.value;\n    }\n    return (target.textContent ?? \"\").trim();\n  }, []);\n\n  const findTargetElement = useCallback(() => {\n    if (!taskListRef.current || !editingState.rowId || !editingState.columnId) {\n      return null;\n    }\n    const rowId = escapeSelectorValue(editingState.rowId);\n    const columnId = escapeSelectorValue(editingState.columnId);\n    return taskListRef.current.querySelector<HTMLElement>(\n      `[data-row-id=\"${rowId}\"][data-column-id=\"${columnId}\"]`\n    );\n  }, [editingState.columnId, editingState.rowId, taskListRef]);\n\n  const updateRect = useCallback(() => {\n    if (editingState.mode !== \"editing\") {\n      setRect(null);\n      setTargetElement(null);\n      return;\n    }\n    const target = findTargetElement();\n    if (!target) {\n      setRect(null);\n      setTargetElement(null);\n      onCancel(\"unmounted\");\n      return;\n    }\n    if (targetElement !== target) {\n      const nextDefaultValue = resolveDefaultValue(target);\n      defaultValueRef.current = nextDefaultValue;\n      if (inputRef.current) {\n        inputRef.current.value = nextDefaultValue;\n      }\n      setTargetElement(target);\n    }\n    const nextRect = target.getBoundingClientRect();\n    setRect({\n      top: Math.round(nextRect.top),\n      left: Math.round(nextRect.left),\n      width: Math.round(nextRect.width),\n      height: Math.round(nextRect.height),\n    });\n  }, [\n    editingState.mode,\n    findTargetElement,\n    onCancel,\n    resolveDefaultValue,\n    targetElement,\n  ]);\n\n  const scheduleRectUpdate = useCallback(() => {\n    if (rafIdRef.current !== null) {\n      return;\n    }\n    rafIdRef.current = window.requestAnimationFrame(() => {\n      rafIdRef.current = null;\n      updateRect();\n    });\n  }, [updateRect]);\n\n  useEffect(() => {\n    if (editingState.mode !== \"editing\") {\n      defaultValueRef.current = \"\";\n      compositionRef.current = false;\n      setRect(null);\n      setTargetElement(null);\n      return;\n    }\n    scheduleRectUpdate();\n  }, [editingState.mode, scheduleRectUpdate]);\n\n  useEffect(() => {\n    if (editingState.mode !== \"editing\") {\n      return undefined;\n    }\n    const handleScroll = () => scheduleRectUpdate();\n    const handleResize = () => scheduleRectUpdate();\n    window.addEventListener(\"scroll\", handleScroll, {\n      capture: true,\n      passive: true,\n    });\n    window.addEventListener(\"resize\", handleResize, { capture: true });\n    document.addEventListener(\"scroll\", handleScroll, {\n      capture: true,\n      passive: true,\n    });\n    const scrollTargets = [\n      taskListRef.current,\n      bodyContainerRef?.current,\n      headerContainerRef?.current,\n    ].filter(Boolean);\n    scrollTargets.forEach(element =>\n      (element as HTMLElement).addEventListener(\"scroll\", handleScroll, {\n        capture: true,\n        passive: true,\n      })\n    );\n    const ResizeObserverConstructor =\n      typeof window !== \"undefined\"\n        ? (\n            window as typeof window & {\n              ResizeObserver?: new (callback: (entries: Array<{ target: Element }>) => void) => {\n                observe: (target: Element) => void;\n                disconnect: () => void;\n              };\n            }\n          ).ResizeObserver\n        : undefined;\n    const resizeObserver = ResizeObserverConstructor\n      ? new ResizeObserverConstructor(() => scheduleRectUpdate())\n      : null;\n    const observedElements = [\n      targetElement,\n      taskListRef.current,\n      bodyContainerRef?.current,\n      headerContainerRef?.current,\n    ].filter(Boolean);\n    observedElements.forEach(element =>\n      resizeObserver?.observe(element as HTMLElement)\n    );\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll, { capture: true });\n      window.removeEventListener(\"resize\", handleResize, { capture: true });\n      document.removeEventListener(\"scroll\", handleScroll, { capture: true });\n      scrollTargets.forEach(element =>\n        (element as HTMLElement).removeEventListener(\"scroll\", handleScroll, {\n          capture: true,\n        })\n      );\n      resizeObserver?.disconnect();\n    };\n  }, [\n    bodyContainerRef,\n    editingState.mode,\n    headerContainerRef,\n    scheduleRectUpdate,\n    targetElement,\n    taskListRef,\n  ]);\n\n  useEffect(() => {\n    return () => {\n      if (rafIdRef.current !== null) {\n        window.cancelAnimationFrame(rafIdRef.current);\n        rafIdRef.current = null;\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (editingState.mode !== \"editing\") {\n      return;\n    }\n    const input = inputRef.current;\n    if (!input) {\n      return;\n    }\n    if (editingState.pending) {\n      input.focus();\n      return;\n    }\n    input.focus();\n    if (input instanceof HTMLInputElement) {\n      input.select();\n    }\n  }, [editingState.mode, editingState.pending, targetElement]);\n\n  const handleCommit = useCallback(async () => {\n    if (editingState.pending) {\n      return;\n    }\n    const input = inputRef.current;\n    if (!input) {\n      return;\n    }\n    await onCommit(input.value, \"enter\");\n  }, [editingState.pending, onCommit]);\n\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent<HTMLInputElement | HTMLSelectElement>) => {\n      if (editingState.pending) {\n        if (event.key === \"Escape\" || event.key === \"Enter\") {\n          event.preventDefault();\n        }\n        return;\n      }\n      if (event.key === \"Enter\") {\n        event.preventDefault();\n        void handleCommit();\n        return;\n      }\n      if (event.key === \"Escape\") {\n        event.preventDefault();\n        onCancel(\"escape\");\n      }\n    },\n    [editingState.pending, handleCommit, onCancel]\n  );\n\n  const handleBlur = useCallback(() => {\n    if (editingState.pending || compositionRef.current) {\n      return;\n    }\n    const input = inputRef.current;\n    if (!input) {\n      return;\n    }\n    if (input.value === defaultValueRef.current) {\n      onCancel(\"nochange-blur\");\n    }\n  }, [editingState.pending, onCancel]);\n\n  const handleInput = useCallback(\n    (event: React.FormEvent<HTMLInputElement | HTMLSelectElement>) => {\n      if (!editingState.pending) {\n        return;\n      }\n      const input = event.currentTarget;\n      input.value = defaultValueRef.current;\n    },\n    [editingState.pending]\n  );\n\n  const handleCompositionStart = () => {\n    compositionRef.current = true;\n  };\n\n  const handleCompositionEnd = () => {\n    compositionRef.current = false;\n  };\n\n  const handleInputElementRef = useCallback(\n    (element: HTMLInputElement | HTMLSelectElement | null) => {\n      inputRef.current = element;\n    },\n    []\n  );\n\n  if (editingState.mode !== \"editing\" || !rect || !portalRoot) {\n    return null;\n  }\n\n  return createPortal(\n    <div\n      className={`${styles.overlayEditor} ${\n        editingState.pending ? styles.overlayEditorPending : \"\"\n      }`}\n      data-testid=\"overlay-editor\"\n      style={{\n        top: rect.top,\n        left: rect.left,\n        width: rect.width,\n        height: rect.height,\n      }}\n    >\n      {inputType === \"select\" ? (\n        <select\n          className={styles.taskListSelect}\n          data-testid=\"overlay-editor-input\"\n          aria-label=\"セル編集\"\n          defaultValue={defaultValueRef.current}\n          style={{ height: \"100%\" }}\n          ref={handleInputElementRef}\n          disabled={editingState.pending}\n          onKeyDown={handleKeyDown}\n          onBlur={handleBlur}\n          onInput={handleInput}\n          onChange={handleInput}\n        >\n          {selectOptions.map(option => (\n            <option key={option} value={option}>\n              {option}\n            </option>\n          ))}\n        </select>\n      ) : (\n        <input\n          className={styles.taskListInput}\n          data-testid=\"overlay-editor-input\"\n          type={inputType}\n          aria-label=\"セル編集\"\n          defaultValue={defaultValueRef.current}\n          style={{ height: \"100%\" }}\n          ref={handleInputElementRef}\n          readOnly={editingState.pending}\n          onKeyDown={handleKeyDown}\n          onBlur={handleBlur}\n          onInput={handleInput}\n          onChange={handleInput}\n          onCompositionStart={handleCompositionStart}\n          onCompositionEnd={handleCompositionEnd}\n        />\n      )}\n      {editingState.errorMessage && (\n        <div className={styles.overlayEditorError} role=\"alert\">\n          {editingState.errorMessage}\n        </div>\n      )}\n    </div>,\n    portalRoot\n  );\n};\n","import React, {\n  SyntheticEvent,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { BarTask } from \"../../types/bar-task\";\nimport {\n  CellCommitPayload,\n  ColumnState,\n  ColumnsState,\n  EffortUnit,\n  Task,\n  VisibleField,\n} from \"../../types/public-types\";\nimport { OverlayEditor } from \"./overlay-editor\";\n\nexport type EditingTrigger = \"dblclick\" | \"enter\" | \"key\";\ntype CommitTrigger = CellCommitPayload[\"trigger\"];\ntype EditingMode = \"viewing\" | \"selected\" | \"editing\";\ntype EditingState = {\n  mode: EditingMode;\n  rowId: string | null;\n  columnId: VisibleField | null;\n  trigger: EditingTrigger | null;\n  pending: boolean;\n  errorMessage: string | null;\n};\n\ntype EditingStateContextValue = {\n  editingState: EditingState;\n  selectCell: (rowId: string, columnId: VisibleField) => void;\n  startEditing: (rowId: string, columnId: VisibleField, trigger: EditingTrigger) => void;\n};\n\nexport const TaskListEditingStateContext =\n  React.createContext<EditingStateContextValue | null>(null);\n\nexport type TaskListProps = {\n  headerHeight: number;\n  rowWidth: string;\n  fontFamily: string;\n  fontSize: string;\n  rowHeight: number;\n  ganttHeight: number;\n  scrollY: number;\n  horizontalScroll?: number;\n  visibleFields: VisibleField[];\n  effortDisplayUnit: EffortUnit;\n  tasks: Task[];\n  taskListRef: React.RefObject<HTMLDivElement>;\n  headerContainerRef?: React.RefObject<HTMLDivElement>;\n  bodyContainerRef?: React.RefObject<HTMLDivElement>;\n  horizontalContainerClass?: string;\n  selectedTask: BarTask | undefined;\n  setSelectedTask: (task: string) => void;\n  onExpanderClick: (task: Task) => void;\n  onHorizontalScroll?: (event: SyntheticEvent<HTMLDivElement>) => void;\n  onUpdateTask?: (taskId: string, updatedFields: Partial<Task>) => void;\n  onCellCommit?: (payload: CellCommitPayload) => Promise<void>;\n  TaskListHeader: React.FC<{\n    headerHeight: number;\n    rowWidth: string;\n    fontFamily: string;\n    fontSize: string;\n    visibleFields: VisibleField[];\n    columnsState?: ColumnsState;\n    setColumnsState?: React.Dispatch<React.SetStateAction<ColumnsState>>;\n    enableColumnDrag?: boolean;\n  }>;\n  TaskListTable: React.FC<{\n    rowHeight: number;\n    rowWidth: string;\n    fontFamily: string;\n    fontSize: string;\n    locale?: string;\n    tasks: Task[];\n    selectedTaskId: string;\n    setSelectedTask: (taskId: string) => void;\n    onExpanderClick: (task: Task) => void;\n    visibleFields: VisibleField[];\n    onUpdateTask?: (taskId: string, updatedFields: Partial<Task>) => void;\n    onCellCommit?: (payload: CellCommitPayload) => Promise<void>;\n    effortDisplayUnit: EffortUnit;\n    columnsState?: ColumnsState;\n  }>;\n  enableColumnDrag?: boolean;\n};\n\nexport const DEFAULT_MIN_WIDTH = 32;\nexport const getDefaultWidth = (field: VisibleField, rowWidth: string): number =>\n  field === \"name\" ? 140 : Number.parseInt(rowWidth, 10) || 155;\n\nexport const TaskList: React.FC<TaskListProps> = ({\n  headerHeight,\n  fontFamily,\n  fontSize,\n  rowWidth,\n  rowHeight,\n  scrollY,\n  horizontalScroll = 0,\n  tasks,\n  selectedTask,\n  setSelectedTask,\n  onExpanderClick,\n  ganttHeight,\n  taskListRef,\n  headerContainerRef,\n  bodyContainerRef,\n  horizontalContainerClass,\n  TaskListHeader,\n  TaskListTable,\n  visibleFields,\n  onUpdateTask,\n  onCellCommit,\n  effortDisplayUnit,\n  enableColumnDrag = true,\n  onHorizontalScroll,\n}) => {\n  const internalHorizontalRef = useRef<HTMLDivElement>(null);\n  const internalHeaderRef = useRef<HTMLDivElement>(null);\n  const horizontalContainerRef = bodyContainerRef ?? internalHorizontalRef;\n  const headerRef = headerContainerRef ?? internalHeaderRef;\n  useEffect(() => {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY, horizontalContainerRef]);\n\n  useEffect(() => {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollLeft = horizontalScroll;\n    }\n    if (headerRef.current) {\n      headerRef.current.scrollLeft = horizontalScroll;\n    }\n  }, [horizontalScroll, horizontalContainerRef, headerRef]);\n\n  const initialColumns = useMemo<ColumnsState>(\n    () =>\n      visibleFields.map(\n        (field): ColumnState => ({\n          id: field,\n          label: field,\n          width: getDefaultWidth(field, rowWidth),\n          minWidth: DEFAULT_MIN_WIDTH,\n          visible: true,\n        })\n      ),\n    [visibleFields, rowWidth]\n  );\n\n  const [columnsState, setColumnsState] = useState<ColumnsState>(initialColumns);\n\n  useEffect(() => {\n    setColumnsState(prev => {\n      const existingMap = new Map(prev.map(column => [column.id, column]));\n      const nextColumns: ColumnsState = visibleFields.map(field => {\n        const existing = existingMap.get(field);\n        if (existing) {\n          return existing;\n        }\n        return {\n          id: field,\n          label: field,\n          width: getDefaultWidth(field, rowWidth),\n          minWidth: DEFAULT_MIN_WIDTH,\n          visible: true,\n        };\n      });\n      return nextColumns;\n    });\n  }, [visibleFields, rowWidth]);\n  const visibleColumns = useMemo(\n    () => columnsState.filter(column => column.visible),\n    [columnsState]\n  );\n\n  const headerProps = {\n    headerHeight,\n    fontFamily,\n    fontSize,\n    rowWidth,\n    visibleFields,\n    columnsState,\n    setColumnsState,\n    enableColumnDrag,\n  };\n  const selectedTaskId = selectedTask ? selectedTask.id : \"\";\n  const tableProps = {\n    rowHeight,\n    rowWidth,\n    fontFamily,\n    fontSize,\n    tasks,\n    selectedTaskId: selectedTaskId,\n    setSelectedTask,\n    onExpanderClick,\n    visibleFields,\n    onUpdateTask,\n    onCellCommit,\n    effortDisplayUnit,\n    columnsState: visibleColumns,\n  };\n\n  const [editingState, setEditingState] = useState<EditingState>({\n    mode: \"viewing\",\n    rowId: null,\n    columnId: null,\n    trigger: null,\n    pending: false,\n    errorMessage: null,\n  });\n  const previousEditingStateRef = useRef<EditingState | null>(null);\n\n  const closeEditing = useCallback(() => {\n    setEditingState(prev => {\n      if (prev.mode === \"viewing\") {\n        return prev;\n      }\n      return {\n        mode: \"viewing\",\n        rowId: null,\n        columnId: null,\n        trigger: null,\n        pending: false,\n        errorMessage: null,\n      };\n    });\n  }, []);\n  const mountedRef = useRef(true);\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  const cancelEditing = useCallback(\n    (reason: \"escape\" | \"nochange-blur\" | \"unmounted\") => {\n      if (editingState.mode !== \"editing\") {\n        return;\n      }\n      console.debug(\"[edit:cancel]\", {\n        rowId: editingState.rowId,\n        columnId: editingState.columnId,\n        reason,\n      });\n      closeEditing();\n    },\n    [closeEditing, editingState.columnId, editingState.mode, editingState.rowId]\n  );\n\n  const commitEditing = useCallback(\n    async (value: string, trigger: CommitTrigger) => {\n      if (!onCellCommit) {\n        return;\n      }\n      if (editingState.mode !== \"editing\" || editingState.pending) {\n        return;\n      }\n      if (!editingState.rowId || !editingState.columnId) {\n        return;\n      }\n      const rowId = editingState.rowId;\n      const columnId = editingState.columnId;\n      setEditingState(prev => {\n        if (\n          prev.mode !== \"editing\" ||\n          prev.pending ||\n          prev.rowId !== rowId ||\n          prev.columnId !== columnId\n        ) {\n          return prev;\n        }\n        return { ...prev, pending: true, errorMessage: null };\n      });\n      try {\n        await onCellCommit({ rowId, columnId, value, trigger });\n        if (!mountedRef.current) {\n          return;\n        }\n        setEditingState(prev => {\n          if (\n            prev.mode !== \"editing\" ||\n            prev.rowId !== rowId ||\n            prev.columnId !== columnId\n          ) {\n            return prev;\n          }\n          return {\n            mode: \"viewing\",\n            rowId: null,\n            columnId: null,\n            trigger: null,\n            pending: false,\n            errorMessage: null,\n          };\n        });\n      } catch (error) {\n        console.error(\"[commit:error]\", {\n          rowId,\n          columnId,\n          trigger,\n          message: error instanceof Error ? error.message : \"unknown\",\n        });\n        if (!mountedRef.current) {\n          return;\n        }\n        setEditingState(prev => {\n          if (\n            prev.mode !== \"editing\" ||\n            prev.rowId !== rowId ||\n            prev.columnId !== columnId\n          ) {\n            return prev;\n          }\n          return {\n            ...prev,\n            pending: false,\n            errorMessage: \"Commit failed. Please retry.\",\n          };\n        });\n      }\n    },\n    [editingState, onCellCommit]\n  );\n\n  const selectCell = useCallback((rowId: string, columnId: VisibleField) => {\n    console.debug(\"[TaskList] select cell\", { rowId, columnId });\n    setEditingState({\n      mode: \"selected\",\n      rowId,\n      columnId,\n      trigger: null,\n      pending: false,\n      errorMessage: null,\n    });\n  }, []);\n\n  const startEditing = useCallback(\n    (rowId: string, columnId: VisibleField, trigger: EditingTrigger) => {\n      if (editingState.pending) {\n        console.debug(\"[TaskList] ignore enter editing\", {\n          reason: \"pending\",\n          rowId,\n          columnId,\n        });\n        return;\n      }\n      console.debug(\"[TaskList] enter editing\", { rowId, columnId, trigger });\n      setEditingState({\n        mode: \"editing\",\n        rowId,\n        columnId,\n        trigger,\n        pending: false,\n        errorMessage: null,\n      });\n    },\n    [editingState.pending]\n  );\n\n  useEffect(() => {\n    const previous = previousEditingStateRef.current;\n    if (previous) {\n      const buildLogContext = () => ({\n        rowId: editingState.rowId ?? previous.rowId,\n        columnId: editingState.columnId ?? previous.columnId,\n        trigger: editingState.trigger ?? previous.trigger,\n      });\n      if (previous.mode !== \"editing\" && editingState.mode === \"editing\") {\n        console.log(\"[edit:start]\", buildLogContext());\n      }\n      if (!previous.pending && editingState.pending) {\n        console.log(\"[commit:start]\", buildLogContext());\n      }\n      if (previous.pending && !editingState.pending) {\n        const logContext = buildLogContext();\n        if (editingState.mode === \"editing\") {\n          console.log(\"[commit:reject]\", logContext);\n        } else {\n          console.log(\"[commit:resolve]\", logContext);\n        }\n      }\n      if (previous.mode === \"editing\" && editingState.mode !== \"editing\") {\n        console.log(\"[edit:end]\", { ...buildLogContext(), to: editingState.mode });\n      }\n    }\n    previousEditingStateRef.current = editingState;\n  }, [editingState]);\n\n  const editingContextValue = useMemo(\n    () => ({\n      editingState,\n      selectCell,\n      startEditing,\n    }),\n    [editingState, selectCell, startEditing]\n  );\n\n  return (\n    <div ref={taskListRef}>\n      <OverlayEditor\n        editingState={editingState}\n        taskListRef={taskListRef}\n        headerContainerRef={headerRef}\n        bodyContainerRef={horizontalContainerRef}\n        onCommit={commitEditing}\n        onCancel={cancelEditing}\n      />\n      <div\n        ref={headerRef}\n        onScroll={onHorizontalScroll}\n        style={{ width: \"100%\", overflowX: \"hidden\" }}\n      >\n        <TaskListHeader {...headerProps} />\n      </div>\n      <div\n        ref={horizontalContainerRef}\n        className={horizontalContainerClass}\n        style={ganttHeight ? { height: ganttHeight } : {}}\n        onScroll={onHorizontalScroll}\n      >\n        <TaskListEditingStateContext.Provider value={editingContextValue}>\n          <TaskListTable {...tableProps} />\n        </TaskListEditingStateContext.Provider>\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { resolveVisibleFields } from \"../../helpers/task-helper\";\nimport {\n  ColumnState,\n  ColumnsState,\n  VisibleField,\n} from \"../../types/public-types\";\nimport styles from \"./task-list-header.module.css\";\nimport classNames from \"classnames\";\nimport { getDefaultWidth, DEFAULT_MIN_WIDTH } from \"./task-list\";\nimport {\n  DndContext,\n  DragEndEvent,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\nimport {\n  SortableContext,\n  arrayMove,\n  useSortable,\n  horizontalListSortingStrategy,\n} from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\n\nexport const TaskListHeaderDefault: React.FC<{\n  headerHeight: number;\n  rowWidth: string;\n  fontFamily: string;\n  fontSize: string;\n  visibleFields: VisibleField[];\n  columnsState?: ColumnsState;\n  setColumnsState?: React.Dispatch<React.SetStateAction<ColumnsState>>;\n  enableColumnDrag?: boolean;\n}> = ({\n  headerHeight,\n  fontFamily,\n  fontSize,\n  rowWidth,\n  visibleFields,\n  columnsState,\n  setColumnsState,\n  enableColumnDrag = true,\n}) => {\n  const labels: Record<VisibleField, string> = {\n    name: \"タスク名\",\n    start: \"開始日\",\n    end: \"終了日\",\n    process: \"工程\",\n    assignee: \"担当者\",\n    plannedStart: \"予定開始\",\n    plannedEnd: \"予定終了\",\n    plannedEffort: \"予定工数\",\n    actualEffort: \"実績工数\",\n    status: \"ステータス\",\n  };\n  const fallbackColumns = resolveVisibleFields(visibleFields).map(\n    (field): ColumnState => ({\n      id: field,\n      label: labels[field],\n      width: getDefaultWidth(field, rowWidth),\n      minWidth: DEFAULT_MIN_WIDTH,\n      visible: true,\n    })\n  );\n  const resolvedColumns = useMemo(\n    () =>\n      (columnsState || fallbackColumns).filter(column => column.visible !== false),\n    [columnsState, fallbackColumns]\n  );\n  const sensors = useSensors(useSensor(PointerSensor));\n  const [resizingId, setResizingId] = useState<string | null>(null);\n  const onDragEnd = (event: DragEndEvent) => {\n    if (!setColumnsState || !enableColumnDrag) return;\n    const { active, over } = event;\n    if (!over || active.id === over.id) return;\n    setColumnsState(prev => {\n      const visible = prev.filter(column => column.visible !== false);\n      const oldIndex = visible.findIndex(column => column.id === active.id);\n      const newIndex = visible.findIndex(column => column.id === over.id);\n      if (oldIndex < 0 || newIndex < 0) return prev;\n      const moved = arrayMove(visible, oldIndex, newIndex);\n      let idx = 0;\n      return prev.map(column =>\n        column.visible !== false ? moved[idx++] : column\n      );\n    });\n  };\n  const headerContent = (\n    <div\n      className={styles.ganttTable}\n      style={{\n        fontFamily: fontFamily,\n        fontSize: fontSize,\n      }}\n    >\n      <div\n        className={styles.ganttTable_Header}\n        style={{\n          height: headerHeight - 2,\n        }}\n      >\n        {resolvedColumns.map((column, index) => (\n          <React.Fragment key={column.id}>\n            <SortableHeaderItem\n              column={column}\n              labels={labels}\n              setColumnsState={setColumnsState}\n              enableDrag={enableColumnDrag && !!setColumnsState}\n              setResizingId={setResizingId}\n              isResizing={resizingId === column.id}\n            />\n            {index !== resolvedColumns.length - 1 && (\n              <div\n                className={styles.ganttTable_HeaderSeparator}\n                style={{\n                  height: headerHeight * 0.5,\n                  marginTop: headerHeight * 0.2,\n                }}\n              />\n            )}\n          </React.Fragment>\n        ))}\n      </div>\n    </div>\n  );\n\n  return (\n    <DndContext sensors={sensors} onDragEnd={enableColumnDrag ? onDragEnd : undefined}>\n      <SortableContext\n        items={resolvedColumns.map(column => column.id)}\n        strategy={horizontalListSortingStrategy}\n      >\n        {headerContent}\n      </SortableContext>\n    </DndContext>\n  );\n};\n\nconst SortableHeaderItem: React.FC<{\n  column: ColumnState;\n  labels: Record<VisibleField, string>;\n  setColumnsState?: React.Dispatch<React.SetStateAction<ColumnsState>>;\n  enableDrag: boolean;\n  setResizingId: (id: string | null) => void;\n  isResizing: boolean;\n}> = ({ column, labels, setColumnsState, enableDrag, setResizingId, isResizing }) => {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({\n    id: column.id,\n    disabled: !enableDrag,\n  });\n  const startXRef = useRef<number | null>(null);\n  const startWidthRef = useRef<number | null>(null);\n  const moveHandlerRef = useRef<((event: MouseEvent) => void) | null>(null);\n  const upHandlerRef = useRef<(() => void) | null>(null);\n\n  useEffect(() => {\n    return () => {\n      if (moveHandlerRef.current) {\n        document.removeEventListener(\"mousemove\", moveHandlerRef.current);\n        moveHandlerRef.current = null;\n      }\n      if (upHandlerRef.current) {\n        document.removeEventListener(\"mouseup\", upHandlerRef.current);\n        upHandlerRef.current = null;\n      }\n    };\n  }, []);\n\n  const style: React.CSSProperties = {\n    minWidth: column.width,\n    maxWidth: column.width,\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n\n  const onMouseDownResize: React.MouseEventHandler<HTMLDivElement> = event => {\n    event.stopPropagation();\n    event.preventDefault();\n    startXRef.current = event.clientX;\n    startWidthRef.current = column.width;\n    setResizingId(column.id);\n\n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      if (startXRef.current == null || startWidthRef.current == null) return;\n      const delta = moveEvent.clientX - startXRef.current;\n      const nextWidth = Math.max(column.minWidth, startWidthRef.current + delta);\n      setColumnsState?.(prev =>\n        prev.map(item =>\n          item.id === column.id ? { ...item, width: nextWidth } : item\n        )\n      );\n    };\n\n    const handleMouseUp = () => {\n      startXRef.current = null;\n      startWidthRef.current = null;\n      setResizingId(null);\n      if (moveHandlerRef.current) {\n        document.removeEventListener(\"mousemove\", moveHandlerRef.current);\n        moveHandlerRef.current = null;\n      }\n      if (upHandlerRef.current) {\n        document.removeEventListener(\"mouseup\", upHandlerRef.current);\n        upHandlerRef.current = null;\n      }\n    };\n\n    moveHandlerRef.current = handleMouseMove;\n    upHandlerRef.current = handleMouseUp;\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n\n  return (\n    <div\n      ref={setNodeRef}\n      className={classNames(styles.ganttTable_HeaderItem, {\n        [styles.ganttTable_HeaderItemDragging]: isDragging,\n      })}\n      style={style}\n    >\n      <div\n        className={classNames(styles.ganttTable_DragHandle, {\n          [styles.ganttTable_DragHandleDisabled]: !enableDrag,\n        })}\n        {...attributes}\n        {...listeners}\n        aria-label=\"Drag column\"\n        onMouseDown={event => event.stopPropagation()}\n      >\n        <span className={styles.ganttTable_DragIcon} aria-hidden=\"true\">\n          ⋮⋮\n        </span>\n      </div>\n      <div className={styles.ganttTable_HeaderLabel}>{labels[column.id]}</div>\n      <div\n        className={classNames(styles.ganttTable_ResizeHandle, {\n          [styles.ganttTable_ResizeHandleActive]: isResizing,\n        })}\n        onMouseDown={onMouseDownResize}\n        aria-label=\"Resize column\"\n        role=\"separator\"\n        aria-orientation=\"vertical\"\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport styles from \"./task-list-table.module.css\";\nimport { ColumnsState, EffortUnit, Task, VisibleField } from \"../../types/public-types\";\nimport { getDefaultWidth, TaskListEditingStateContext } from \"./task-list\";\nimport {\n  formatDate,\n  formatEffort,\n  getStatusBadgeText,\n  getStatusColor,\n  normalizeProcess,\n  normalizeStatus,\n  resolveVisibleFields,\n} from \"../../helpers/task-helper\";\n\nexport const TaskListTableDefault: React.FC<{\n  rowHeight: number;\n  rowWidth: string;\n  fontFamily: string;\n  fontSize: string;\n  tasks: Task[];\n  selectedTaskId: string;\n  setSelectedTask: (taskId: string) => void;\n  onExpanderClick: (task: Task) => void;\n  visibleFields: VisibleField[];\n  onUpdateTask?: (taskId: string, updatedFields: Partial<Task>) => void;\n  onCellCommit?: (payload: {\n    rowId: string;\n    columnId: VisibleField;\n    value: string;\n    trigger: \"enter\";\n  }) => Promise<void>;\n  effortDisplayUnit: EffortUnit;\n  columnsState?: ColumnsState;\n}> = ({\n  rowHeight,\n  rowWidth,\n  tasks,\n  fontFamily,\n  fontSize,\n  onExpanderClick,\n  visibleFields,\n  onCellCommit,\n  effortDisplayUnit,\n  columnsState,\n}) => {\n  const columns =\n    columnsState?.filter(column => column.visible !== false) ??\n    resolveVisibleFields(visibleFields).map(field => ({\n      id: field,\n      width: getDefaultWidth(field, rowWidth),\n    }));\n  const isCommitEnabled = !!onCellCommit;\n  const allowEditing = isCommitEnabled;\n  const editingContext = React.useContext(TaskListEditingStateContext);\n  const editingState = editingContext?.editingState;\n  const editableFields = new Set<VisibleField>([\n    \"name\",\n    \"start\",\n    \"end\",\n    \"process\",\n    \"assignee\",\n    \"plannedStart\",\n    \"plannedEnd\",\n    \"plannedEffort\",\n    \"actualEffort\",\n    \"status\",\n  ]);\n  const columnIds = columns.map(column =>\n    typeof column === \"string\" ? column : column.id\n  );\n\n  const resolveColumnId = (column: (typeof columns)[number]) =>\n    (typeof column === \"string\" ? column : column.id) as VisibleField;\n\n  const isCellEditable = (task: Task, columnId: VisibleField) => {\n    const tableEditable = allowEditing;\n    const columnEditable = editableFields.has(columnId);\n    const rowEditable = task.isDisabled !== true;\n    const cellEditableByRule = true;\n    return tableEditable && columnEditable && rowEditable && cellEditableByRule;\n  };\n\n  const selectCell = editingContext?.selectCell;\n  const startEditing = editingContext?.startEditing;\n\n  const findCellPosition = () => {\n    if (!editingState || editingState.mode === \"viewing\") {\n      return null;\n    }\n    const rowIndex = tasks.findIndex(task => task.id === editingState.rowId);\n    const columnIndex = columnIds.indexOf(editingState.columnId as VisibleField);\n    if (rowIndex < 0 || columnIndex < 0) {\n      return null;\n    }\n    return { rowIndex, columnIndex };\n  };\n\n  const resolveSelectedCell = () => {\n    if (!editingState || editingState.mode !== \"selected\") {\n      return null;\n    }\n    const columnId = editingState.columnId as VisibleField | null;\n    if (!columnId || !columnIds.includes(columnId)) {\n      return null;\n    }\n    const task = tasks.find(row => row.id === editingState.rowId);\n    if (!task) {\n      return null;\n    }\n    return { task, columnId };\n  };\n\n  const moveSelection = (direction: \"up\" | \"down\" | \"left\" | \"right\") => {\n    if (!selectCell || tasks.length === 0 || columnIds.length === 0) {\n      return;\n    }\n    const position = findCellPosition();\n    if (!position) {\n      const firstColumn = columnIds[0];\n      selectCell(tasks[0].id, firstColumn);\n      return;\n    }\n    let { rowIndex, columnIndex } = position;\n    switch (direction) {\n      case \"up\":\n        rowIndex = Math.max(0, rowIndex - 1);\n        break;\n      case \"down\":\n        rowIndex = Math.min(tasks.length - 1, rowIndex + 1);\n        break;\n      case \"left\":\n        columnIndex = Math.max(0, columnIndex - 1);\n        break;\n      case \"right\":\n        columnIndex = Math.min(columnIds.length - 1, columnIndex + 1);\n        break;\n      default:\n        break;\n    }\n    selectCell(tasks[rowIndex].id, columnIds[columnIndex]);\n  };\n\n  const shouldIgnoreKeyEvent = (target: EventTarget) => {\n    if (!(target instanceof HTMLElement)) {\n      return false;\n    }\n    if (target.isContentEditable) {\n      return true;\n    }\n    const tagName = target.tagName;\n    return tagName === \"INPUT\" || tagName === \"TEXTAREA\" || tagName === \"SELECT\";\n  };\n\n  const handleWrapperKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    if (event.defaultPrevented) {\n      return;\n    }\n    if (shouldIgnoreKeyEvent(event.target)) {\n      return;\n    }\n    if (editingState?.mode === \"editing\") {\n      return;\n    }\n    switch (event.key) {\n      case \"ArrowUp\":\n        event.preventDefault();\n        moveSelection(\"up\");\n        return;\n      case \"ArrowDown\":\n        event.preventDefault();\n        moveSelection(\"down\");\n        return;\n      case \"ArrowLeft\":\n        event.preventDefault();\n        moveSelection(\"left\");\n        return;\n      case \"ArrowRight\":\n        event.preventDefault();\n        moveSelection(\"right\");\n        return;\n      default:\n        break;\n    }\n    if (editingState?.mode !== \"selected\") {\n      return;\n    }\n    const selectedCell = resolveSelectedCell();\n    if (!selectedCell || !startEditing) {\n      return;\n    }\n    if (event.key === \"Enter\") {\n      if (!isCellEditable(selectedCell.task, selectedCell.columnId)) {\n        console.debug(\"[TaskList] ignore enter editing\", {\n          reason: \"not-editable\",\n          rowId: selectedCell.task.id,\n          columnId: selectedCell.columnId,\n        });\n        return;\n      }\n      event.preventDefault();\n      startEditing(\n        selectedCell.task.id,\n        selectedCell.columnId,\n        \"enter\"\n      );\n      return;\n    }\n    if (event.key === \"Escape\") {\n      return;\n    }\n    const isPrintableKey =\n      event.key.length === 1 &&\n      !event.metaKey &&\n      !event.ctrlKey &&\n      !event.altKey;\n    if (isPrintableKey) {\n      if (!isCellEditable(selectedCell.task, selectedCell.columnId)) {\n        console.debug(\"[TaskList] ignore enter editing\", {\n          reason: \"not-editable\",\n          rowId: selectedCell.task.id,\n          columnId: selectedCell.columnId,\n        });\n        return;\n      }\n      event.preventDefault();\n      startEditing(selectedCell.task.id, selectedCell.columnId, \"key\");\n    }\n  };\n\n  return (\n    <div\n      className={styles.taskListWrapper}\n      tabIndex={0}\n      onKeyDown={handleWrapperKeyDown}\n      style={{\n        fontFamily: fontFamily,\n        fontSize: fontSize,\n      }}\n    >\n      {tasks.map(t => {\n        let expanderSymbol = \"\";\n        if (t.hideChildren === false) {\n          expanderSymbol = \"▼\";\n        } else if (t.hideChildren === true) {\n          expanderSymbol = \"▶\";\n        }\n\n        const renderCell = (field: VisibleField) => {\n          switch (field) {\n            case \"name\":\n              return (\n                <div className={styles.taskListNameWrapper}>\n                  <div\n                    className={\n                      expanderSymbol\n                        ? styles.taskListExpander\n                        : styles.taskListEmptyExpander\n                    }\n                    onClick={() => onExpanderClick(t)}\n                  >\n                    {expanderSymbol}\n                  </div>\n                  <div>{t.name}</div>\n                </div>\n              );\n            case \"start\":\n              return <span>{formatDate(t.start)}</span>;\n            case \"end\":\n              return <span>{formatDate(t.end)}</span>;\n            case \"process\":\n              return <span>{normalizeProcess(t.process)}</span>;\n            case \"assignee\":\n              return <span>{t.assignee || \"\"}</span>;\n            case \"plannedStart\":\n              return <span>{formatDate(t.plannedStart)}</span>;\n            case \"plannedEnd\":\n              return <span>{formatDate(t.plannedEnd)}</span>;\n            case \"plannedEffort\":\n              return (\n                <span>{formatEffort(t.plannedEffort, effortDisplayUnit)}</span>\n              );\n            case \"actualEffort\":\n              return (\n                <span>{formatEffort(t.actualEffort, effortDisplayUnit)}</span>\n              );\n            case \"status\":\n              {\n                const statusValue = normalizeStatus(t.status);\n              return (\n                <div className={styles.statusWrapper}>\n                  <span\n                    className={styles.statusBadge}\n                    style={{ backgroundColor: getStatusColor(statusValue) }}\n                  >\n                    {getStatusBadgeText(statusValue)}\n                  </span>\n                  <span className={styles.statusText}>{statusValue}</span>\n                </div>\n              );\n              }\n            default:\n              return null;\n          }\n        };\n        return (\n          <div\n            className={styles.taskListTableRow}\n            style={{ height: rowHeight }}\n            key={`${t.id}row`}\n          >\n            {columns.map(column => {\n              const columnId = resolveColumnId(column);\n              const isSelected =\n                editingState?.mode !== \"viewing\" &&\n                editingState?.rowId === t.id &&\n                editingState?.columnId === columnId;\n              const handleCellClick = (\n                event: React.MouseEvent<HTMLDivElement>\n              ) => {\n                if (editingState?.mode === \"editing\") {\n                  const pending = editingState.pending;\n                  console.log(\"[edit:select]\", { rowId: t.id, columnId, pending });\n                  if (pending) {\n                    return;\n                  }\n                }\n                if (selectCell) {\n                  selectCell(t.id, columnId);\n                }\n                event.currentTarget.focus();\n              };\n\n              const handleCellDoubleClick = () => {\n                if (!startEditing) {\n                  return;\n                }\n                if (!isCellEditable(t, columnId)) {\n                  console.debug(\"[TaskList] ignore enter editing\", {\n                    reason: \"not-editable\",\n                    rowId: t.id,\n                    columnId,\n                  });\n                  return;\n                }\n                startEditing(t.id, columnId, \"dblclick\");\n              };\n\n              const handleCellKeyDown = (\n                event: React.KeyboardEvent<HTMLDivElement>\n              ) => {\n                if (shouldIgnoreKeyEvent(event.target)) {\n                  return;\n                }\n                if (!isSelected || editingState?.mode !== \"selected\") {\n                  return;\n                }\n                if (event.key === \"Enter\") {\n                  if (!startEditing) {\n                    return;\n                  }\n                  if (!isCellEditable(t, columnId)) {\n                    console.debug(\"[TaskList] ignore enter editing\", {\n                      reason: \"not-editable\",\n                      rowId: t.id,\n                      columnId,\n                    });\n                    return;\n                  }\n                  event.preventDefault();\n                  startEditing(t.id, columnId, \"enter\");\n                  return;\n                }\n                if (event.key === \"Escape\") {\n                  return;\n                }\n                const isPrintableKey =\n                  event.key.length === 1 &&\n                  !event.metaKey &&\n                  !event.ctrlKey &&\n                  !event.altKey;\n                if (isPrintableKey) {\n                  if (!startEditing) {\n                    return;\n                  }\n                  if (!isCellEditable(t, columnId)) {\n                    console.debug(\"[TaskList] ignore enter editing\", {\n                      reason: \"not-editable\",\n                      rowId: t.id,\n                      columnId,\n                    });\n                    return;\n                  }\n                  event.preventDefault();\n                  startEditing(t.id, columnId, \"key\");\n                }\n              };\n\n              return (\n                <div\n                  key={`${t.id}-${columnId}`}\n                  className={styles.taskListCell}\n                  data-row-id={t.id}\n                  data-column-id={columnId}\n                  aria-selected={isSelected || undefined}\n                  tabIndex={isSelected ? 0 : -1}\n                  onClick={handleCellClick}\n                  onDoubleClick={handleCellDoubleClick}\n                  onKeyDown={handleCellKeyDown}\n                  style={{\n                    minWidth:\n                      typeof column === \"string\"\n                        ? rowWidth\n                        : `${column.width}px`,\n                    maxWidth:\n                      typeof column === \"string\"\n                        ? rowWidth\n                        : `${column.width}px`,\n                  }}\n                  title={columnId === \"name\" ? t.name : undefined}\n                >\n                  {renderCell(columnId)}\n                </div>\n              );\n            })}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { EffortUnit, Task } from \"../../types/public-types\";\nimport { BarTask } from \"../../types/bar-task\";\nimport {\n  formatDate,\n  formatEffort,\n  getStatusBadgeText,\n  getStatusColor,\n  normalizeProcess,\n  normalizeStatus,\n} from \"../../helpers/task-helper\";\nimport styles from \"./tooltip.module.css\";\n\nexport type TooltipProps = {\n  task: BarTask;\n  arrowIndent: number;\n  rtl: boolean;\n  svgContainerHeight: number;\n  svgContainerWidth: number;\n  svgWidth: number;\n  headerHeight: number;\n  taskListWidth: number;\n  scrollX: number;\n  scrollY: number;\n  rowHeight: number;\n  fontSize: string;\n  fontFamily: string;\n  TooltipContent: React.FC<{\n    task: Task;\n    fontSize: string;\n    fontFamily: string;\n    effortDisplayUnit?: EffortUnit;\n  }>;\n  effortDisplayUnit: EffortUnit;\n};\nexport const Tooltip: React.FC<TooltipProps> = ({\n  task,\n  rowHeight,\n  rtl,\n  svgContainerHeight,\n  svgContainerWidth,\n  scrollX,\n  scrollY,\n  arrowIndent,\n  fontSize,\n  fontFamily,\n  headerHeight,\n  taskListWidth,\n  TooltipContent,\n  effortDisplayUnit,\n}) => {\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n  const [relatedY, setRelatedY] = useState(0);\n  const [relatedX, setRelatedX] = useState(0);\n  useEffect(() => {\n    if (tooltipRef.current) {\n      const tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\n      const tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\n\n      let newRelatedY = task.index * rowHeight - scrollY + headerHeight;\n      let newRelatedX: number;\n      if (rtl) {\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\n        if (newRelatedX < 0) {\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\n        }\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n        if (tooltipLeftmostPoint > svgContainerWidth) {\n          newRelatedX = svgContainerWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      } else {\n        newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n        const fullChartWidth = taskListWidth + svgContainerWidth;\n        if (tooltipLeftmostPoint > fullChartWidth) {\n          newRelatedX =\n            task.x1 +\n            taskListWidth -\n            arrowIndent * 1.5 -\n            scrollX -\n            tooltipWidth;\n        }\n        if (newRelatedX < taskListWidth) {\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      }\n\n      const tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\n        newRelatedY = svgContainerHeight - tooltipHeight;\n      }\n      setRelatedY(newRelatedY);\n      setRelatedX(newRelatedX);\n    }\n  }, [\n    tooltipRef,\n    task,\n    arrowIndent,\n    scrollX,\n    scrollY,\n    headerHeight,\n    taskListWidth,\n    rowHeight,\n    svgContainerHeight,\n    svgContainerWidth,\n    rtl,\n  ]);\n\n  return (\n    <div\n      ref={tooltipRef}\n      className={\n        relatedX\n          ? styles.tooltipDetailsContainer\n          : styles.tooltipDetailsContainerHidden\n      }\n      style={{ left: relatedX, top: relatedY }}\n    >\n      <TooltipContent\n        task={task}\n        fontSize={fontSize}\n        fontFamily={fontFamily}\n        effortDisplayUnit={effortDisplayUnit}\n      />\n    </div>\n  );\n};\n\nexport const StandardTooltipContent: React.FC<{\n  task: Task;\n  fontSize: string;\n  fontFamily: string;\n  effortDisplayUnit?: EffortUnit;\n}> = ({ task, fontSize, fontFamily, effortDisplayUnit = \"MH\" }) => {\n  const style = {\n    fontSize,\n    fontFamily,\n  };\n  const normalizedStatus = normalizeStatus(task.status);\n  const normalizedProcess = normalizeProcess(task.process);\n  const dateRange = `${formatDate(task.start)} 〜 ${formatDate(task.end)}`;\n  const plannedRange =\n    task.plannedStart || task.plannedEnd\n      ? `${formatDate(task.plannedStart)} 〜 ${formatDate(task.plannedEnd)}`\n      : \"\";\n  const plannedEffort = formatEffort(task.plannedEffort, effortDisplayUnit);\n  const actualEffort = formatEffort(task.actualEffort, effortDisplayUnit);\n  return (\n    <div className={styles.tooltipDefaultContainer} style={style}>\n      <div className={styles.tooltipTitle}>\n        <b className={styles.tooltipName}>{task.name}</b>\n        <span className={styles.tooltipDate}>{dateRange}</span>\n      </div>\n      <div className={styles.tooltipRow}>\n        <span className={styles.tooltipLabel}>工程</span>\n        <span className={styles.tooltipValue}>{normalizedProcess}</span>\n      </div>\n      <div className={styles.tooltipRow}>\n        <span className={styles.tooltipLabel}>担当</span>\n        <span className={styles.tooltipValue}>{task.assignee || \"-\"}</span>\n      </div>\n      {plannedRange && (\n        <div className={styles.tooltipRow}>\n          <span className={styles.tooltipLabel}>予定</span>\n          <span className={styles.tooltipValue}>{plannedRange}</span>\n        </div>\n      )}\n      {plannedEffort && (\n        <div className={styles.tooltipRow}>\n          <span className={styles.tooltipLabel}>予定工数</span>\n          <span className={styles.tooltipValue}>{plannedEffort}</span>\n        </div>\n      )}\n      {actualEffort && (\n        <div className={styles.tooltipRow}>\n          <span className={styles.tooltipLabel}>実績工数</span>\n          <span className={styles.tooltipValue}>{actualEffort}</span>\n        </div>\n      )}\n      <div className={styles.tooltipRow}>\n        <span className={styles.tooltipLabel}>ステータス</span>\n        <span className={styles.tooltipValue}>\n          <span\n            className={styles.tooltipStatus}\n            style={{ backgroundColor: getStatusColor(normalizedStatus) }}\n          >\n            {getStatusBadgeText(normalizedStatus)}\n          </span>\n          <span className={styles.tooltipStatusText}>{normalizedStatus}</span>\n        </span>\n      </div>\n      {!!task.progress && (\n        <p className={styles.tooltipDefaultContainerParagraph}>\n          進捗率: {task.progress} %\n        </p>\n      )}\n    </div>\n  );\n};\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\nimport styles from \"./vertical-scroll.module.css\";\n\nexport const VerticalScroll: React.FC<{\n  scroll: number;\n  ganttHeight: number;\n  ganttFullHeight: number;\n  headerHeight: number;\n  rtl: boolean;\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\n}> = ({\n  scroll,\n  ganttHeight,\n  ganttFullHeight,\n  headerHeight,\n  rtl,\n  onScroll,\n}) => {\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scroll;\n    }\n  }, [scroll]);\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: headerHeight,\n        height: ganttHeight,\n        right: rtl ? undefined : 0,\n        left: rtl ? 0 : undefined,\n      }}\n      className={styles.scroll}\n      onScroll={onScroll}\n      ref={scrollRef}\n    >\n      <div style={{ height: ganttFullHeight, width: 1 }} />\n    </div>\n  );\n};\n","import React, { ReactChild } from \"react\";\nimport { Task } from \"../../types/public-types\";\nimport { addToDate } from \"../../helpers/date-helper\";\nimport styles from \"./grid.module.css\";\n\nexport type GridBodyProps = {\n  tasks: Task[];\n  dates: Date[];\n  svgWidth: number;\n  rowHeight: number;\n  columnWidth: number;\n  todayColor: string;\n  rtl: boolean;\n};\nexport const GridBody: React.FC<GridBodyProps> = ({\n  tasks,\n  dates,\n  rowHeight,\n  svgWidth,\n  columnWidth,\n  todayColor,\n  rtl,\n}) => {\n  let y = 0;\n  const gridRows: ReactChild[] = [];\n  const rowLines: ReactChild[] = [\n    <line\n      key=\"RowLineFirst\"\n      x=\"0\"\n      y1={0}\n      x2={svgWidth}\n      y2={0}\n      className={styles.gridRowLine}\n    />,\n  ];\n  for (const task of tasks) {\n    gridRows.push(\n      <rect\n        key={\"Row\" + task.id}\n        x=\"0\"\n        y={y}\n        width={svgWidth}\n        height={rowHeight}\n        className={styles.gridRow}\n      />\n    );\n    rowLines.push(\n      <line\n        key={\"RowLine\" + task.id}\n        x=\"0\"\n        y1={y + rowHeight}\n        x2={svgWidth}\n        y2={y + rowHeight}\n        className={styles.gridRowLine}\n      />\n    );\n    y += rowHeight;\n  }\n\n  const now = new Date();\n  let tickX = 0;\n  const ticks: ReactChild[] = [];\n  let today: ReactChild = <rect />;\n  for (let i = 0; i < dates.length; i++) {\n    const date = dates[i];\n    ticks.push(\n      <line\n        key={date.getTime()}\n        x1={tickX}\n        y1={0}\n        x2={tickX}\n        y2={y}\n        className={styles.gridTick}\n      />\n    );\n    if (\n      (i + 1 !== dates.length &&\n        date.getTime() < now.getTime() &&\n        dates[i + 1].getTime() >= now.getTime()) ||\n      // if current date is last\n      (i !== 0 &&\n        i + 1 === dates.length &&\n        date.getTime() < now.getTime() &&\n        addToDate(\n          date,\n          date.getTime() - dates[i - 1].getTime(),\n          \"millisecond\"\n        ).getTime() >= now.getTime())\n    ) {\n      today = (\n        <rect\n          x={tickX}\n          y={0}\n          width={columnWidth}\n          height={y}\n          fill={todayColor}\n        />\n      );\n    }\n    // rtl for today\n    if (\n      rtl &&\n      i + 1 !== dates.length &&\n      date.getTime() >= now.getTime() &&\n      dates[i + 1].getTime() < now.getTime()\n    ) {\n      today = (\n        <rect\n          x={tickX + columnWidth}\n          y={0}\n          width={columnWidth}\n          height={y}\n          fill={todayColor}\n        />\n      );\n    }\n    tickX += columnWidth;\n  }\n  return (\n    <g className=\"gridBody\">\n      <g className=\"rows\">{gridRows}</g>\n      <g className=\"rowLines\">{rowLines}</g>\n      <g className=\"ticks\">{ticks}</g>\n      <g className=\"today\">{today}</g>\n    </g>\n  );\n};\n","import React from \"react\";\nimport { GridBody, GridBodyProps } from \"./grid-body\";\n\nexport type GridProps = GridBodyProps;\nexport const Grid: React.FC<GridProps> = props => {\n  return (\n    <g className=\"grid\">\n      <GridBody {...props} />\n    </g>\n  );\n};\n","import React from \"react\";\nimport styles from \"./calendar.module.css\";\n\ntype TopPartOfCalendarProps = {\n  value: string;\n  x1Line: number;\n  y1Line: number;\n  y2Line: number;\n  xText: number;\n  yText: number;\n};\n\nexport const TopPartOfCalendar: React.FC<TopPartOfCalendarProps> = ({\n  value,\n  x1Line,\n  y1Line,\n  y2Line,\n  xText,\n  yText,\n}) => {\n  return (\n    <g className=\"calendarTop\">\n      <line\n        x1={x1Line}\n        y1={y1Line}\n        x2={x1Line}\n        y2={y2Line}\n        className={styles.calendarTopTick}\n        key={value + \"line\"}\n      />\n      <text\n        key={value + \"text\"}\n        y={yText}\n        x={xText}\n        className={styles.calendarTopText}\n      >\n        {value}\n      </text>\n    </g>\n  );\n};\n","import React, { ReactChild } from \"react\";\nimport { ViewMode } from \"../../types/public-types\";\nimport { TopPartOfCalendar } from \"./top-part-of-calendar\";\nimport {\n  getCachedDateTimeFormat,\n  getDaysInMonth,\n  getLocalDayOfWeek,\n  getLocaleMonth,\n  getWeekNumberISO8601,\n} from \"../../helpers/date-helper\";\nimport { DateSetup } from \"../../types/date-setup\";\nimport styles from \"./calendar.module.css\";\n\nexport type CalendarProps = {\n  dateSetup: DateSetup;\n  locale: string;\n  viewMode: ViewMode;\n  rtl: boolean;\n  headerHeight: number;\n  columnWidth: number;\n  fontFamily: string;\n  fontSize: string;\n};\n\nexport const Calendar: React.FC<CalendarProps> = ({\n  dateSetup,\n  locale,\n  viewMode,\n  rtl,\n  headerHeight,\n  columnWidth,\n  fontFamily,\n  fontSize,\n}) => {\n  const getCalendarValuesForYear = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    for (let i = 0; i < dateSetup.dates.length; i++) {\n      const date = dateSetup.dates[i];\n      const bottomValue = date.getFullYear();\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (\n        i === 0 ||\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\n      ) {\n        const topValue = date.getFullYear().toString();\n        let xText: number;\n        if (rtl) {\n          xText = (6 + i + date.getFullYear() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getFullYear()) * columnWidth;\n        }\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue}\n            value={topValue}\n            x1Line={columnWidth * i}\n            y1Line={0}\n            y2Line={headerHeight}\n            xText={xText}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForQuarterYear = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    for (let i = 0; i < dateSetup.dates.length; i++) {\n      const date = dateSetup.dates[i];\n      // const bottomValue = getLocaleMonth(date, locale);\n      const quarter = \"Q\" + Math.floor((date.getMonth() + 3) / 3);\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {quarter}\n        </text>\n      );\n      if (\n        i === 0 ||\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\n      ) {\n        const topValue = date.getFullYear().toString();\n        let xText: number;\n        if (rtl) {\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getMonth()) * columnWidth;\n        }\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue}\n            value={topValue}\n            x1Line={columnWidth * i}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={Math.abs(xText)}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForMonth = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    for (let i = 0; i < dateSetup.dates.length; i++) {\n      const date = dateSetup.dates[i];\n      const bottomValue = getLocaleMonth(date, locale);\n      bottomValues.push(\n        <text\n          key={bottomValue + date.getFullYear()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (\n        i === 0 ||\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\n      ) {\n        const topValue = date.getFullYear().toString();\n        let xText: number;\n        if (rtl) {\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getMonth()) * columnWidth;\n        }\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue}\n            value={topValue}\n            x1Line={columnWidth * i}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={xText}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForWeek = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    let weeksCount: number = 1;\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = dates.length - 1; i >= 0; i--) {\n      const date = dates[i];\n      let topValue = \"\";\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\n        // top\n        topValue = `${getLocaleMonth(date, locale)}, ${date.getFullYear()}`;\n      }\n      // bottom\n      const bottomValue = `W${getWeekNumberISO8601(date)}`;\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * (i + +rtl)}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n\n      if (topValue) {\n        // if last day is new month\n        if (i !== dates.length - 1) {\n          topValues.push(\n            <TopPartOfCalendar\n              key={topValue}\n              value={topValue}\n              x1Line={columnWidth * i + weeksCount * columnWidth}\n              y1Line={0}\n              y2Line={topDefaultHeight}\n              xText={columnWidth * i + columnWidth * weeksCount * 0.5}\n              yText={topDefaultHeight * 0.9}\n            />\n          );\n        }\n        weeksCount = 0;\n      }\n      weeksCount++;\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForDay = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = 0; i < dates.length; i++) {\n      const date = dates[i];\n      const bottomValue = `${getLocalDayOfWeek(date, locale, \"short\")}, ${date\n        .getDate()\n        .toString()}`;\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (\n        i + 1 !== dates.length &&\n        date.getMonth() !== dates[i + 1].getMonth()\n      ) {\n        const topValue = getLocaleMonth(date, locale);\n\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue + date.getFullYear()}\n            value={topValue}\n            x1Line={columnWidth * (i + 1)}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={\n              columnWidth * (i + 1) -\n              getDaysInMonth(date.getMonth(), date.getFullYear()) *\n                columnWidth *\n                0.5\n            }\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForPartOfDay = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = 0; i < dates.length; i++) {\n      const date = dates[i];\n      const bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\",\n      }).format(date);\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * (i + +rtl)}\n          className={styles.calendarBottomText}\n          fontFamily={fontFamily}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\n        const topValue = `${getLocalDayOfWeek(\n          date,\n          locale,\n          \"short\"\n        )}, ${date.getDate()} ${getLocaleMonth(date, locale)}`;\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue + date.getFullYear()}\n            value={topValue}\n            x1Line={columnWidth * i + ticks * columnWidth}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={columnWidth * i + ticks * columnWidth * 0.5}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForHour = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = 0; i < dates.length; i++) {\n      const date = dates[i];\n      const bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\",\n      }).format(date);\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * (i + +rtl)}\n          className={styles.calendarBottomText}\n          fontFamily={fontFamily}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (i !== 0 && date.getDate() !== dates[i - 1].getDate()) {\n        const displayDate = dates[i - 1];\n        const topValue = `${getLocalDayOfWeek(\n          displayDate,\n          locale,\n          \"long\"\n        )}, ${displayDate.getDate()} ${getLocaleMonth(displayDate, locale)}`;\n        const topPosition = (date.getHours() - 24) / 2;\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue + displayDate.getFullYear()}\n            value={topValue}\n            x1Line={columnWidth * i}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={columnWidth * (i + topPosition)}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  let topValues: ReactChild[] = [];\n  let bottomValues: ReactChild[] = [];\n  switch (dateSetup.viewMode) {\n    case ViewMode.Year:\n      [topValues, bottomValues] = getCalendarValuesForYear();\n      break;\n    case ViewMode.QuarterYear:\n      [topValues, bottomValues] = getCalendarValuesForQuarterYear();\n      break;\n    case ViewMode.Month:\n      [topValues, bottomValues] = getCalendarValuesForMonth();\n      break;\n    case ViewMode.Week:\n      [topValues, bottomValues] = getCalendarValuesForWeek();\n      break;\n    case ViewMode.Day:\n      [topValues, bottomValues] = getCalendarValuesForDay();\n      break;\n    case ViewMode.QuarterDay:\n    case ViewMode.HalfDay:\n      [topValues, bottomValues] = getCalendarValuesForPartOfDay();\n      break;\n    case ViewMode.Hour:\n      [topValues, bottomValues] = getCalendarValuesForHour();\n  }\n  return (\n    <g className=\"calendar\" fontSize={fontSize} fontFamily={fontFamily}>\n      <rect\n        x={0}\n        y={0}\n        width={columnWidth * dateSetup.dates.length}\n        height={headerHeight}\n        className={styles.calendarHeader}\n      />\n      {bottomValues} {topValues}\n    </g>\n  );\n};\n","import React from \"react\";\nimport { BarTask } from \"../../types/bar-task\";\n\ntype ArrowProps = {\n  taskFrom: BarTask;\n  taskTo: BarTask;\n  rowHeight: number;\n  taskHeight: number;\n  arrowIndent: number;\n  rtl: boolean;\n};\nexport const Arrow: React.FC<ArrowProps> = ({\n  taskFrom,\n  taskTo,\n  rowHeight,\n  taskHeight,\n  arrowIndent,\n  rtl,\n}) => {\n  let path: string;\n  let trianglePoints: string;\n  if (rtl) {\n    [path, trianglePoints] = drownPathAndTriangleRTL(\n      taskFrom,\n      taskTo,\n      rowHeight,\n      taskHeight,\n      arrowIndent\n    );\n  } else {\n    [path, trianglePoints] = drownPathAndTriangle(\n      taskFrom,\n      taskTo,\n      rowHeight,\n      taskHeight,\n      arrowIndent\n    );\n  }\n\n  return (\n    <g className=\"arrow\">\n      <path strokeWidth=\"1.5\" d={path} fill=\"none\" />\n      <polygon points={trianglePoints} />\n    </g>\n  );\n};\n\nconst drownPathAndTriangle = (\n  taskFrom: BarTask,\n  taskTo: BarTask,\n  rowHeight: number,\n  taskHeight: number,\n  arrowIndent: number\n) => {\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\n  const taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\n  const taskFromHorizontalOffsetValue =\n    taskFromEndPosition < taskTo.x1 ? \"\" : `H ${taskTo.x1 - arrowIndent}`;\n  const taskToHorizontalOffsetValue =\n    taskFromEndPosition > taskTo.x1\n      ? arrowIndent\n      : taskTo.x1 - taskFrom.x2 - arrowIndent;\n\n  const path = `M ${taskFrom.x2} ${taskFrom.y + taskHeight / 2} \n  h ${arrowIndent} \n  v ${(indexCompare * rowHeight) / 2} \n  ${taskFromHorizontalOffsetValue}\n  V ${taskToEndPosition} \n  h ${taskToHorizontalOffsetValue}`;\n\n  const trianglePoints = `${taskTo.x1},${taskToEndPosition} \n  ${taskTo.x1 - 5},${taskToEndPosition - 5} \n  ${taskTo.x1 - 5},${taskToEndPosition + 5}`;\n  return [path, trianglePoints];\n};\n\nconst drownPathAndTriangleRTL = (\n  taskFrom: BarTask,\n  taskTo: BarTask,\n  rowHeight: number,\n  taskHeight: number,\n  arrowIndent: number\n) => {\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\n  const taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\n  const taskFromHorizontalOffsetValue =\n    taskFromEndPosition > taskTo.x2 ? \"\" : `H ${taskTo.x2 + arrowIndent}`;\n  const taskToHorizontalOffsetValue =\n    taskFromEndPosition < taskTo.x2\n      ? -arrowIndent\n      : taskTo.x2 - taskFrom.x1 + arrowIndent;\n\n  const path = `M ${taskFrom.x1} ${taskFrom.y + taskHeight / 2} \n  h ${-arrowIndent} \n  v ${(indexCompare * rowHeight) / 2} \n  ${taskFromHorizontalOffsetValue}\n  V ${taskToEndPosition} \n  h ${taskToHorizontalOffsetValue}`;\n\n  const trianglePoints = `${taskTo.x2},${taskToEndPosition} \n  ${taskTo.x2 + 5},${taskToEndPosition + 5} \n  ${taskTo.x2 + 5},${taskToEndPosition - 5}`;\n  return [path, trianglePoints];\n};\n","import { Task } from \"../types/public-types\";\nimport { BarTask, TaskTypeInternal } from \"../types/bar-task\";\nimport { BarMoveAction } from \"../types/gantt-task-actions\";\n\nexport const convertToBarTasks = (\n  tasks: Task[],\n  dates: Date[],\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  rtl: boolean,\n  barProgressColor: string,\n  barProgressSelectedColor: string,\n  barBackgroundColor: string,\n  barBackgroundSelectedColor: string,\n  projectProgressColor: string,\n  projectProgressSelectedColor: string,\n  projectBackgroundColor: string,\n  projectBackgroundSelectedColor: string,\n  milestoneBackgroundColor: string,\n  milestoneBackgroundSelectedColor: string\n) => {\n  let barTasks = tasks.map((t, i) => {\n    return convertToBarTask(\n      t,\n      i,\n      dates,\n      columnWidth,\n      rowHeight,\n      taskHeight,\n      barCornerRadius,\n      handleWidth,\n      rtl,\n      barProgressColor,\n      barProgressSelectedColor,\n      barBackgroundColor,\n      barBackgroundSelectedColor,\n      projectProgressColor,\n      projectProgressSelectedColor,\n      projectBackgroundColor,\n      projectBackgroundSelectedColor,\n      milestoneBackgroundColor,\n      milestoneBackgroundSelectedColor\n    );\n  });\n\n  // set dependencies\n  barTasks = barTasks.map(task => {\n    const dependencies = task.dependencies || [];\n    for (let j = 0; j < dependencies.length; j++) {\n      const dependence = barTasks.findIndex(\n        value => value.id === dependencies[j]\n      );\n      if (dependence !== -1) barTasks[dependence].barChildren.push(task);\n    }\n    return task;\n  });\n\n  return barTasks;\n};\n\nconst convertToBarTask = (\n  task: Task,\n  index: number,\n  dates: Date[],\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  rtl: boolean,\n  barProgressColor: string,\n  barProgressSelectedColor: string,\n  barBackgroundColor: string,\n  barBackgroundSelectedColor: string,\n  projectProgressColor: string,\n  projectProgressSelectedColor: string,\n  projectBackgroundColor: string,\n  projectBackgroundSelectedColor: string,\n  milestoneBackgroundColor: string,\n  milestoneBackgroundSelectedColor: string\n): BarTask => {\n  let barTask: BarTask;\n  switch (task.type) {\n    case \"milestone\":\n      barTask = convertToMilestone(\n        task,\n        index,\n        dates,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        milestoneBackgroundColor,\n        milestoneBackgroundSelectedColor\n      );\n      break;\n    case \"project\":\n      barTask = convertToBar(\n        task,\n        index,\n        dates,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        rtl,\n        projectProgressColor,\n        projectProgressSelectedColor,\n        projectBackgroundColor,\n        projectBackgroundSelectedColor\n      );\n      break;\n    default:\n      barTask = convertToBar(\n        task,\n        index,\n        dates,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        rtl,\n        barProgressColor,\n        barProgressSelectedColor,\n        barBackgroundColor,\n        barBackgroundSelectedColor\n      );\n      break;\n  }\n  return barTask;\n};\n\nconst convertToBar = (\n  task: Task,\n  index: number,\n  dates: Date[],\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  rtl: boolean,\n  barProgressColor: string,\n  barProgressSelectedColor: string,\n  barBackgroundColor: string,\n  barBackgroundSelectedColor: string\n): BarTask => {\n  let x1: number;\n  let x2: number;\n  if (rtl) {\n    x2 = taskXCoordinateRTL(task.start, dates, columnWidth);\n    x1 = taskXCoordinateRTL(task.end, dates, columnWidth);\n  } else {\n    x1 = taskXCoordinate(task.start, dates, columnWidth);\n    x2 = taskXCoordinate(task.end, dates, columnWidth);\n  }\n  let typeInternal: TaskTypeInternal = task.type;\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\n    typeInternal = \"smalltask\";\n    x2 = x1 + handleWidth * 2;\n  }\n\n  const [progressWidth, progressX] = progressWithByParams(\n    x1,\n    x2,\n    task.progress,\n    rtl\n  );\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\n  const hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\n\n  const styles = {\n    backgroundColor: barBackgroundColor,\n    backgroundSelectedColor: barBackgroundSelectedColor,\n    progressColor: barProgressColor,\n    progressSelectedColor: barProgressSelectedColor,\n    ...task.styles,\n  };\n  return {\n    ...task,\n    typeInternal,\n    x1,\n    x2,\n    y,\n    index,\n    progressX,\n    progressWidth,\n    barCornerRadius,\n    handleWidth,\n    hideChildren,\n    height: taskHeight,\n    barChildren: [],\n    styles,\n  };\n};\n\nconst convertToMilestone = (\n  task: Task,\n  index: number,\n  dates: Date[],\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  milestoneBackgroundColor: string,\n  milestoneBackgroundSelectedColor: string\n): BarTask => {\n  const x = taskXCoordinate(task.start, dates, columnWidth);\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\n\n  const x1 = x - taskHeight * 0.5;\n  const x2 = x + taskHeight * 0.5;\n\n  const rotatedHeight = taskHeight / 1.414;\n  const styles = {\n    backgroundColor: milestoneBackgroundColor,\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\n    progressColor: \"\",\n    progressSelectedColor: \"\",\n    ...task.styles,\n  };\n  return {\n    ...task,\n    end: task.start,\n    x1,\n    x2,\n    y,\n    index,\n    progressX: 0,\n    progressWidth: 0,\n    barCornerRadius,\n    handleWidth,\n    typeInternal: task.type,\n    progress: 0,\n    height: rotatedHeight,\n    hideChildren: undefined,\n    barChildren: [],\n    styles,\n  };\n};\n\nconst taskXCoordinate = (xDate: Date, dates: Date[], columnWidth: number) => {\n  const index = dates.findIndex(d => d.getTime() >= xDate.getTime()) - 1;\n\n  const remainderMillis = xDate.getTime() - dates[index].getTime();\n  const percentOfInterval =\n    remainderMillis / (dates[index + 1].getTime() - dates[index].getTime());\n  const x = index * columnWidth + percentOfInterval * columnWidth;\n  return x;\n};\nconst taskXCoordinateRTL = (\n  xDate: Date,\n  dates: Date[],\n  columnWidth: number\n) => {\n  let x = taskXCoordinate(xDate, dates, columnWidth);\n  x += columnWidth;\n  return x;\n};\nconst taskYCoordinate = (\n  index: number,\n  rowHeight: number,\n  taskHeight: number\n) => {\n  const y = index * rowHeight + (rowHeight - taskHeight) / 2;\n  return y;\n};\n\nexport const progressWithByParams = (\n  taskX1: number,\n  taskX2: number,\n  progress: number,\n  rtl: boolean\n) => {\n  const progressWidth = (taskX2 - taskX1) * progress * 0.01;\n  let progressX: number;\n  if (rtl) {\n    progressX = taskX2 - progressWidth;\n  } else {\n    progressX = taskX1;\n  }\n  return [progressWidth, progressX];\n};\n\nexport const progressByProgressWidth = (\n  progressWidth: number,\n  barTask: BarTask\n) => {\n  const barWidth = barTask.x2 - barTask.x1;\n  const progressPercent = Math.round((progressWidth * 100) / barWidth);\n  if (progressPercent >= 100) return 100;\n  else if (progressPercent <= 0) return 0;\n  else return progressPercent;\n};\n\nconst progressByX = (x: number, task: BarTask) => {\n  if (x >= task.x2) return 100;\n  else if (x <= task.x1) return 0;\n  else {\n    const barWidth = task.x2 - task.x1;\n    const progressPercent = Math.round(((x - task.x1) * 100) / barWidth);\n    return progressPercent;\n  }\n};\nconst progressByXRTL = (x: number, task: BarTask) => {\n  if (x >= task.x2) return 0;\n  else if (x <= task.x1) return 100;\n  else {\n    const barWidth = task.x2 - task.x1;\n    const progressPercent = Math.round(((task.x2 - x) * 100) / barWidth);\n    return progressPercent;\n  }\n};\n\nexport const getProgressPoint = (\n  progressX: number,\n  taskY: number,\n  taskHeight: number\n) => {\n  const point = [\n    progressX - 5,\n    taskY + taskHeight,\n    progressX + 5,\n    taskY + taskHeight,\n    progressX,\n    taskY + taskHeight - 8.66,\n  ];\n  return point.join(\",\");\n};\n\nconst startByX = (x: number, xStep: number, task: BarTask) => {\n  if (x >= task.x2 - task.handleWidth * 2) {\n    x = task.x2 - task.handleWidth * 2;\n  }\n  const steps = Math.round((x - task.x1) / xStep);\n  const additionalXValue = steps * xStep;\n  const newX = task.x1 + additionalXValue;\n  return newX;\n};\n\nconst endByX = (x: number, xStep: number, task: BarTask) => {\n  if (x <= task.x1 + task.handleWidth * 2) {\n    x = task.x1 + task.handleWidth * 2;\n  }\n  const steps = Math.round((x - task.x2) / xStep);\n  const additionalXValue = steps * xStep;\n  const newX = task.x2 + additionalXValue;\n  return newX;\n};\n\nconst moveByX = (x: number, xStep: number, task: BarTask) => {\n  const steps = Math.round((x - task.x1) / xStep);\n  const additionalXValue = steps * xStep;\n  const newX1 = task.x1 + additionalXValue;\n  const newX2 = newX1 + task.x2 - task.x1;\n  return [newX1, newX2];\n};\n\nconst dateByX = (\n  x: number,\n  taskX: number,\n  taskDate: Date,\n  xStep: number,\n  timeStep: number\n) => {\n  let newDate = new Date(((x - taskX) / xStep) * timeStep + taskDate.getTime());\n  newDate = new Date(\n    newDate.getTime() +\n      (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000\n  );\n  return newDate;\n};\n\n/**\n * Method handles event in real time(mousemove) and on finish(mouseup)\n */\nexport const handleTaskBySVGMouseEvent = (\n  svgX: number,\n  action: BarMoveAction,\n  selectedTask: BarTask,\n  xStep: number,\n  timeStep: number,\n  initEventX1Delta: number,\n  rtl: boolean\n): { isChanged: boolean; changedTask: BarTask } => {\n  let result: { isChanged: boolean; changedTask: BarTask };\n  switch (selectedTask.type) {\n    case \"milestone\":\n      result = handleTaskBySVGMouseEventForMilestone(\n        svgX,\n        action,\n        selectedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta\n      );\n      break;\n    default:\n      result = handleTaskBySVGMouseEventForBar(\n        svgX,\n        action,\n        selectedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta,\n        rtl\n      );\n      break;\n  }\n  return result;\n};\n\nconst handleTaskBySVGMouseEventForBar = (\n  svgX: number,\n  action: BarMoveAction,\n  selectedTask: BarTask,\n  xStep: number,\n  timeStep: number,\n  initEventX1Delta: number,\n  rtl: boolean\n): { isChanged: boolean; changedTask: BarTask } => {\n  const changedTask: BarTask = { ...selectedTask };\n  let isChanged = false;\n  switch (action) {\n    case \"progress\":\n      if (rtl) {\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\n      } else {\n        changedTask.progress = progressByX(svgX, selectedTask);\n      }\n      isChanged = changedTask.progress !== selectedTask.progress;\n      if (isChanged) {\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    case \"start\": {\n      const newX1 = startByX(svgX, xStep, selectedTask);\n      changedTask.x1 = newX1;\n      isChanged = changedTask.x1 !== selectedTask.x1;\n      if (isChanged) {\n        if (rtl) {\n          changedTask.end = dateByX(\n            newX1,\n            selectedTask.x1,\n            selectedTask.end,\n            xStep,\n            timeStep\n          );\n        } else {\n          changedTask.start = dateByX(\n            newX1,\n            selectedTask.x1,\n            selectedTask.start,\n            xStep,\n            timeStep\n          );\n        }\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    }\n    case \"end\": {\n      const newX2 = endByX(svgX, xStep, selectedTask);\n      changedTask.x2 = newX2;\n      isChanged = changedTask.x2 !== selectedTask.x2;\n      if (isChanged) {\n        if (rtl) {\n          changedTask.start = dateByX(\n            newX2,\n            selectedTask.x2,\n            selectedTask.start,\n            xStep,\n            timeStep\n          );\n        } else {\n          changedTask.end = dateByX(\n            newX2,\n            selectedTask.x2,\n            selectedTask.end,\n            xStep,\n            timeStep\n          );\n        }\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    }\n    case \"move\": {\n      const [newMoveX1, newMoveX2] = moveByX(\n        svgX - initEventX1Delta,\n        xStep,\n        selectedTask\n      );\n      isChanged = newMoveX1 !== selectedTask.x1;\n      if (isChanged) {\n        changedTask.start = dateByX(\n          newMoveX1,\n          selectedTask.x1,\n          selectedTask.start,\n          xStep,\n          timeStep\n        );\n        changedTask.end = dateByX(\n          newMoveX2,\n          selectedTask.x2,\n          selectedTask.end,\n          xStep,\n          timeStep\n        );\n        changedTask.x1 = newMoveX1;\n        changedTask.x2 = newMoveX2;\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    }\n  }\n  return { isChanged, changedTask };\n};\n\nconst handleTaskBySVGMouseEventForMilestone = (\n  svgX: number,\n  action: BarMoveAction,\n  selectedTask: BarTask,\n  xStep: number,\n  timeStep: number,\n  initEventX1Delta: number\n): { isChanged: boolean; changedTask: BarTask } => {\n  const changedTask: BarTask = { ...selectedTask };\n  let isChanged = false;\n  switch (action) {\n    case \"move\": {\n      const [newMoveX1, newMoveX2] = moveByX(\n        svgX - initEventX1Delta,\n        xStep,\n        selectedTask\n      );\n      isChanged = newMoveX1 !== selectedTask.x1;\n      if (isChanged) {\n        changedTask.start = dateByX(\n          newMoveX1,\n          selectedTask.x1,\n          selectedTask.start,\n          xStep,\n          timeStep\n        );\n        changedTask.end = changedTask.start;\n        changedTask.x1 = newMoveX1;\n        changedTask.x2 = newMoveX2;\n      }\n      break;\n    }\n  }\n  return { isChanged, changedTask };\n};\n","import { BarTask } from \"../types/bar-task\";\nimport { Task } from \"../types/public-types\";\n\nexport function isKeyboardEvent(\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\n): event is React.KeyboardEvent {\n  return (event as React.KeyboardEvent).key !== undefined;\n}\n\nexport function isMouseEvent(\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\n): event is React.MouseEvent {\n  return (event as React.MouseEvent).clientX !== undefined;\n}\n\nexport function isBarTask(task: Task | BarTask): task is BarTask {\n  return (task as BarTask).x1 !== undefined;\n}\n\nexport function removeHiddenTasks(tasks: Task[]) {\n  const groupedTasks = tasks.filter(\n    t => t.hideChildren && t.type === \"project\"\n  );\n  if (groupedTasks.length > 0) {\n    for (let i = 0; groupedTasks.length > i; i++) {\n      const groupedTask = groupedTasks[i];\n      const children = getChildren(tasks, groupedTask);\n      tasks = tasks.filter(t => children.indexOf(t) === -1);\n    }\n  }\n  return tasks;\n}\n\nfunction getChildren(taskList: Task[], task: Task) {\n  let tasks: Task[] = [];\n  if (task.type !== \"project\") {\n    tasks = taskList.filter(\n      t => t.dependencies && t.dependencies.indexOf(task.id) !== -1\n    );\n  } else {\n    tasks = taskList.filter(t => t.project && t.project === task.id);\n  }\n  var taskChildren: Task[] = [];\n  tasks.forEach(t => {\n    taskChildren.push(...getChildren(taskList, t));\n  })\n  tasks = tasks.concat(tasks, taskChildren);\n  return tasks;\n}\n\nexport const sortTasks = (taskA: Task, taskB: Task) => {\n  const orderA = taskA.displayOrder || Number.MAX_VALUE;\n  const orderB = taskB.displayOrder || Number.MAX_VALUE;\n  if (orderA > orderB) {\n    return 1;\n  } else if (orderA < orderB) {\n    return -1;\n  } else {\n    return 0;\n  }\n};\n","import React from \"react\";\nimport style from \"./bar.module.css\";\n\ntype BarDisplayProps = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  isSelected: boolean;\n  /* progress start point */\n  progressX: number;\n  progressWidth: number;\n  barCornerRadius: number;\n  styles: {\n    backgroundColor: string;\n    backgroundSelectedColor: string;\n    progressColor: string;\n    progressSelectedColor: string;\n  };\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\n};\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\n  x,\n  y,\n  width,\n  height,\n  isSelected,\n  progressX,\n  progressWidth,\n  barCornerRadius,\n  styles,\n  onMouseDown,\n}) => {\n  const getProcessColor = () => {\n    return isSelected ? styles.progressSelectedColor : styles.progressColor;\n  };\n\n  const getBarColor = () => {\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\n  };\n\n  return (\n    <g onMouseDown={onMouseDown}>\n      <rect\n        x={x}\n        width={width}\n        y={y}\n        height={height}\n        ry={barCornerRadius}\n        rx={barCornerRadius}\n        fill={getBarColor()}\n        className={style.barBackground}\n      />\n      <rect\n        x={progressX}\n        width={progressWidth}\n        y={y}\n        height={height}\n        ry={barCornerRadius}\n        rx={barCornerRadius}\n        fill={getProcessColor()}\n      />\n    </g>\n  );\n};\n","import React from \"react\";\nimport styles from \"./bar.module.css\";\n\ntype BarDateHandleProps = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  barCornerRadius: number;\n  onMouseDown: (event: React.MouseEvent<SVGRectElement, MouseEvent>) => void;\n};\nexport const BarDateHandle: React.FC<BarDateHandleProps> = ({\n  x,\n  y,\n  width,\n  height,\n  barCornerRadius,\n  onMouseDown,\n}) => {\n  return (\n    <rect\n      x={x}\n      y={y}\n      width={width}\n      height={height}\n      className={styles.barHandle}\n      ry={barCornerRadius}\n      rx={barCornerRadius}\n      onMouseDown={onMouseDown}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./bar.module.css\";\n\ntype BarProgressHandleProps = {\n  progressPoint: string;\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\n};\nexport const BarProgressHandle: React.FC<BarProgressHandleProps> = ({\n  progressPoint,\n  onMouseDown,\n}) => {\n  return (\n    <polygon\n      className={styles.barHandle}\n      points={progressPoint}\n      onMouseDown={onMouseDown}\n    />\n  );\n};\n","import React from \"react\";\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\nimport { BarDisplay } from \"./bar-display\";\nimport { BarDateHandle } from \"./bar-date-handle\";\nimport { BarProgressHandle } from \"./bar-progress-handle\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./bar.module.css\";\n\nexport const Bar: React.FC<TaskItemProps> = ({\n  task,\n  isProgressChangeable,\n  isDateChangeable,\n  rtl,\n  onEventStart,\n  isSelected,\n}) => {\n  const progressPoint = getProgressPoint(\n    +!rtl * task.progressWidth + task.progressX,\n    task.y,\n    task.height\n  );\n  const handleHeight = task.height - 2;\n  return (\n    <g className={styles.barWrapper} tabIndex={0}>\n      <BarDisplay\n        x={task.x1}\n        y={task.y}\n        width={task.x2 - task.x1}\n        height={task.height}\n        progressX={task.progressX}\n        progressWidth={task.progressWidth}\n        barCornerRadius={task.barCornerRadius}\n        styles={task.styles}\n        isSelected={isSelected}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n      <g className=\"handleGroup\">\n        {isDateChangeable && (\n          <g>\n            {/* left */}\n            <BarDateHandle\n              x={task.x1 + 1}\n              y={task.y + 1}\n              width={task.handleWidth}\n              height={handleHeight}\n              barCornerRadius={task.barCornerRadius}\n              onMouseDown={e => {\n                onEventStart(\"start\", task, e);\n              }}\n            />\n            {/* right */}\n            <BarDateHandle\n              x={task.x2 - task.handleWidth - 1}\n              y={task.y + 1}\n              width={task.handleWidth}\n              height={handleHeight}\n              barCornerRadius={task.barCornerRadius}\n              onMouseDown={e => {\n                onEventStart(\"end\", task, e);\n              }}\n            />\n          </g>\n        )}\n        {isProgressChangeable && (\n          <BarProgressHandle\n            progressPoint={progressPoint}\n            onMouseDown={e => {\n              onEventStart(\"progress\", task, e);\n            }}\n          />\n        )}\n      </g>\n    </g>\n  );\n};\n","import React from \"react\";\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\nimport { BarDisplay } from \"./bar-display\";\nimport { BarProgressHandle } from \"./bar-progress-handle\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./bar.module.css\";\n\nexport const BarSmall: React.FC<TaskItemProps> = ({\n  task,\n  isProgressChangeable,\n  isDateChangeable,\n  onEventStart,\n  isSelected,\n}) => {\n  const progressPoint = getProgressPoint(\n    task.progressWidth + task.x1,\n    task.y,\n    task.height\n  );\n  return (\n    <g className={styles.barWrapper} tabIndex={0}>\n      <BarDisplay\n        x={task.x1}\n        y={task.y}\n        width={task.x2 - task.x1}\n        height={task.height}\n        progressX={task.progressX}\n        progressWidth={task.progressWidth}\n        barCornerRadius={task.barCornerRadius}\n        styles={task.styles}\n        isSelected={isSelected}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n      <g className=\"handleGroup\">\n        {isProgressChangeable && (\n          <BarProgressHandle\n            progressPoint={progressPoint}\n            onMouseDown={e => {\n              onEventStart(\"progress\", task, e);\n            }}\n          />\n        )}\n      </g>\n    </g>\n  );\n};\n","import React from \"react\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./milestone.module.css\";\n\nexport const Milestone: React.FC<TaskItemProps> = ({\n  task,\n  isDateChangeable,\n  onEventStart,\n  isSelected,\n}) => {\n  const transform = `rotate(45 ${task.x1 + task.height * 0.356} \n    ${task.y + task.height * 0.85})`;\n  const getBarColor = () => {\n    return isSelected\n      ? task.styles.backgroundSelectedColor\n      : task.styles.backgroundColor;\n  };\n\n  return (\n    <g tabIndex={0} className={styles.milestoneWrapper}>\n      <rect\n        fill={getBarColor()}\n        x={task.x1}\n        width={task.height}\n        y={task.y}\n        height={task.height}\n        rx={task.barCornerRadius}\n        ry={task.barCornerRadius}\n        transform={transform}\n        className={styles.milestoneBackground}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n    </g>\n  );\n};\n","import React from \"react\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./project.module.css\";\n\nexport const Project: React.FC<TaskItemProps> = ({ task, isSelected }) => {\n  const barColor = isSelected\n    ? task.styles.backgroundSelectedColor\n    : task.styles.backgroundColor;\n  const processColor = isSelected\n    ? task.styles.progressSelectedColor\n    : task.styles.progressColor;\n  const projectWith = task.x2 - task.x1;\n\n  const projectLeftTriangle = [\n    task.x1,\n    task.y + task.height / 2 - 1,\n    task.x1,\n    task.y + task.height,\n    task.x1 + 15,\n    task.y + task.height / 2 - 1,\n  ].join(\",\");\n  const projectRightTriangle = [\n    task.x2,\n    task.y + task.height / 2 - 1,\n    task.x2,\n    task.y + task.height,\n    task.x2 - 15,\n    task.y + task.height / 2 - 1,\n  ].join(\",\");\n\n  return (\n    <g tabIndex={0} className={styles.projectWrapper}>\n      <rect\n        fill={barColor}\n        x={task.x1}\n        width={projectWith}\n        y={task.y}\n        height={task.height}\n        rx={task.barCornerRadius}\n        ry={task.barCornerRadius}\n        className={styles.projectBackground}\n      />\n      <rect\n        x={task.progressX}\n        width={task.progressWidth}\n        y={task.y}\n        height={task.height}\n        ry={task.barCornerRadius}\n        rx={task.barCornerRadius}\n        fill={processColor}\n      />\n      <rect\n        fill={barColor}\n        x={task.x1}\n        width={projectWith}\n        y={task.y}\n        height={task.height / 2}\n        rx={task.barCornerRadius}\n        ry={task.barCornerRadius}\n        className={styles.projectTop}\n      />\n      <polygon\n        className={styles.projectTop}\n        points={projectLeftTriangle}\n        fill={barColor}\n      />\n      <polygon\n        className={styles.projectTop}\n        points={projectRightTriangle}\n        fill={barColor}\n      />\n    </g>\n  );\n};\n","import React, { useEffect, useRef, useState, useMemo } from \"react\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { GanttContentMoveAction } from \"../../types/gantt-task-actions\";\nimport {\n  getStatusBadgeText,\n  getStatusColor,\n  normalizeStatus,\n} from \"../../helpers/task-helper\";\nimport { Bar } from \"./bar/bar\";\nimport { BarSmall } from \"./bar/bar-small\";\nimport { Milestone } from \"./milestone/milestone\";\nimport { Project } from \"./project/project\";\nimport style from \"./task-list.module.css\";\n\nexport type TaskItemProps = {\n  task: BarTask;\n  arrowIndent: number;\n  taskHeight: number;\n  isProgressChangeable: boolean;\n  isDateChangeable: boolean;\n  isDelete: boolean;\n  isSelected: boolean;\n  rtl: boolean;\n  onEventStart: (\n    action: GanttContentMoveAction,\n    selectedTask: BarTask,\n    event?: React.MouseEvent | React.KeyboardEvent\n  ) => any;\n};\n\nexport const TaskItem: React.FC<TaskItemProps> = props => {\n  const {\n    task,\n    arrowIndent,\n    isDelete,\n    taskHeight,\n    isSelected,\n    rtl,\n    onEventStart,\n    isProgressChangeable,\n    isDateChangeable,\n  } = {\n    ...props,\n  };\n  const textRef = useRef<SVGTextElement>(null);\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\n  const [isTextInside, setIsTextInside] = useState(true);\n  const normalizedStatus = normalizeStatus(task.status);\n  const statusColor = getStatusColor(normalizedStatus);\n  const statusBadgeText = getStatusBadgeText(normalizedStatus);\n\n  const taskItemProps = useMemo(\n    () => ({\n      task,\n      arrowIndent,\n      taskHeight,\n      isProgressChangeable,\n      isDateChangeable,\n      isDelete,\n      isSelected,\n      rtl,\n      onEventStart,\n    }),\n    [\n      task,\n      arrowIndent,\n      taskHeight,\n      isProgressChangeable,\n      isDateChangeable,\n      isDelete,\n      isSelected,\n      rtl,\n      onEventStart,\n    ]\n  );\n\n  useEffect(() => {\n    switch (task.typeInternal) {\n      case \"milestone\":\n        setTaskItem(<Milestone {...taskItemProps} />);\n        break;\n      case \"project\":\n        setTaskItem(<Project {...taskItemProps} />);\n        break;\n      case \"smalltask\":\n        setTaskItem(<BarSmall {...taskItemProps} />);\n        break;\n      default:\n        setTaskItem(<Bar {...taskItemProps} />);\n        break;\n    }\n  }, [\n    task,\n    taskItemProps,\n  ]);\n\n  const getBBoxWidth = () => {\n    if (!textRef.current || typeof textRef.current.getBBox !== \"function\") {\n      return 0;\n    }\n    return textRef.current.getBBox().width;\n  };\n\n  useEffect(() => {\n    setIsTextInside(getBBoxWidth() < task.x2 - task.x1);\n  }, [textRef, task]);\n\n  const getX = () => {\n    const width = task.x2 - task.x1;\n    const hasChild = task.barChildren.length > 0;\n    if (isTextInside) {\n      return task.x1 + width * 0.5;\n    }\n    if (rtl && textRef.current) {\n      return (\n        task.x1 -\n        getBBoxWidth() -\n        arrowIndent * +hasChild -\n        arrowIndent * 0.2\n      );\n    } else {\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\n    }\n  };\n\n  return (\n    <g\n      onKeyDown={e => {\n        switch (e.key) {\n          case \"Delete\": {\n            if (isDelete) onEventStart(\"delete\", task, e);\n            break;\n          }\n        }\n        e.stopPropagation();\n      }}\n      onMouseEnter={e => {\n        onEventStart(\"mouseenter\", task, e);\n      }}\n      onMouseLeave={e => {\n        onEventStart(\"mouseleave\", task, e);\n      }}\n      onDoubleClick={e => {\n        onEventStart(\"dblclick\", task, e);\n      }}\n      onClick={e => {\n        onEventStart(\"click\", task, e);\n      }}\n      onFocus={() => {\n        onEventStart(\"select\", task);\n      }}\n    >\n      {taskItem}\n      <text\n        x={getX()}\n        y={task.y + taskHeight * 0.5}\n        className={\n          isTextInside\n            ? style.barLabel\n            : style.barLabel && style.barLabelOutside\n        }\n        ref={textRef}\n      >\n        {!!statusBadgeText && (\n          <tspan className={style.statusDot} fill={statusColor}>\n            ●\n          </tspan>\n        )}\n        <tspan dx={statusBadgeText ? 4 : 0}>{task.name}</tspan>\n      </text>\n    </g>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { EventOption } from \"../../types/public-types\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { Arrow } from \"../other/arrow\";\nimport { handleTaskBySVGMouseEvent } from \"../../helpers/bar-helper\";\nimport { isKeyboardEvent } from \"../../helpers/other-helper\";\nimport { TaskItem } from \"../task-item/task-item\";\nimport {\n  BarMoveAction,\n  GanttContentMoveAction,\n  GanttEvent,\n} from \"../../types/gantt-task-actions\";\n\nexport type TaskGanttContentProps = {\n  tasks: BarTask[];\n  dates: Date[];\n  ganttEvent: GanttEvent;\n  selectedTask: BarTask | undefined;\n  rowHeight: number;\n  columnWidth: number;\n  timeStep: number;\n  svg?: React.RefObject<SVGSVGElement>;\n  svgWidth: number;\n  taskHeight: number;\n  arrowColor: string;\n  arrowIndent: number;\n  fontSize: string;\n  fontFamily: string;\n  rtl: boolean;\n  setGanttEvent: (value: GanttEvent) => void;\n  setFailedTask: (value: BarTask | null) => void;\n  setSelectedTask: (taskId: string) => void;\n} & EventOption;\n\nexport const TaskGanttContent: React.FC<TaskGanttContentProps> = ({\n  tasks,\n  dates,\n  ganttEvent,\n  selectedTask,\n  rowHeight,\n  columnWidth,\n  timeStep,\n  svg,\n  taskHeight,\n  arrowColor,\n  arrowIndent,\n  fontFamily,\n  fontSize,\n  rtl,\n  setGanttEvent,\n  setFailedTask,\n  setSelectedTask,\n  onDateChange,\n  onProgressChange,\n  onDoubleClick,\n  onClick,\n  onDelete,\n}) => {\n  const point =\n    svg?.current && \"createSVGPoint\" in svg.current\n      ? svg.current.createSVGPoint()\n      : undefined;\n  const [xStep, setXStep] = useState(0);\n  const [initEventX1Delta, setInitEventX1Delta] = useState(0);\n  const [isMoving, setIsMoving] = useState(false);\n\n  // create xStep\n  useEffect(() => {\n    const dateDelta =\n      dates[1].getTime() -\n      dates[0].getTime() -\n      dates[1].getTimezoneOffset() * 60 * 1000 +\n      dates[0].getTimezoneOffset() * 60 * 1000;\n    const newXStep = (timeStep * columnWidth) / dateDelta;\n    setXStep(newXStep);\n  }, [columnWidth, dates, timeStep]);\n\n  useEffect(() => {\n    const handleMouseMove = async (event: MouseEvent) => {\n      if (!ganttEvent.changedTask || !point || !svg?.current) return;\n      event.preventDefault();\n\n      point.x = event.clientX;\n      const cursor = point.matrixTransform(\n        svg?.current.getScreenCTM()?.inverse()\n      );\n\n      const { isChanged, changedTask } = handleTaskBySVGMouseEvent(\n        cursor.x,\n        ganttEvent.action as BarMoveAction,\n        ganttEvent.changedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta,\n        rtl\n      );\n      if (isChanged) {\n        setGanttEvent({ action: ganttEvent.action, changedTask });\n      }\n    };\n\n    const handleMouseUp = async (event: MouseEvent) => {\n      const { action, originalSelectedTask, changedTask } = ganttEvent;\n      if (!changedTask || !point || !svg?.current || !originalSelectedTask)\n        return;\n      event.preventDefault();\n\n      point.x = event.clientX;\n      const cursor = point.matrixTransform(\n        svg?.current.getScreenCTM()?.inverse()\n      );\n      const { changedTask: newChangedTask } = handleTaskBySVGMouseEvent(\n        cursor.x,\n        action as BarMoveAction,\n        changedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta,\n        rtl\n      );\n\n      const isNotLikeOriginal =\n        originalSelectedTask.start !== newChangedTask.start ||\n        originalSelectedTask.end !== newChangedTask.end ||\n        originalSelectedTask.progress !== newChangedTask.progress;\n\n      // remove listeners\n      svg.current.removeEventListener(\"mousemove\", handleMouseMove);\n      svg.current.removeEventListener(\"mouseup\", handleMouseUp);\n      setGanttEvent({ action: \"\" });\n      setIsMoving(false);\n\n      // custom operation start\n      let operationSuccess = true;\n      if (\n        (action === \"move\" || action === \"end\" || action === \"start\") &&\n        onDateChange &&\n        isNotLikeOriginal\n      ) {\n        try {\n          const result = await onDateChange(\n            newChangedTask,\n            newChangedTask.barChildren\n          );\n          if (result !== undefined) {\n            operationSuccess = result;\n          }\n        } catch (error) {\n          operationSuccess = false;\n        }\n      } else if (onProgressChange && isNotLikeOriginal) {\n        try {\n          const result = await onProgressChange(\n            newChangedTask,\n            newChangedTask.barChildren\n          );\n          if (result !== undefined) {\n            operationSuccess = result;\n          }\n        } catch (error) {\n          operationSuccess = false;\n        }\n      }\n\n      // If operation is failed - return old state\n      if (!operationSuccess) {\n        setFailedTask(originalSelectedTask);\n      }\n    };\n\n    if (\n      !isMoving &&\n      (ganttEvent.action === \"move\" ||\n        ganttEvent.action === \"end\" ||\n        ganttEvent.action === \"start\" ||\n        ganttEvent.action === \"progress\") &&\n      svg?.current\n    ) {\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\n      svg.current.addEventListener(\"mouseup\", handleMouseUp);\n      setIsMoving(true);\n    }\n  }, [\n    ganttEvent,\n    xStep,\n    initEventX1Delta,\n    onProgressChange,\n    timeStep,\n    onDateChange,\n    svg,\n    isMoving,\n    point,\n    rtl,\n    setFailedTask,\n    setGanttEvent,\n  ]);\n\n  /**\n   * Method is Start point of task change\n   */\n  const handleBarEventStart = async (\n    action: GanttContentMoveAction,\n    task: BarTask,\n    event?: React.MouseEvent | React.KeyboardEvent\n  ) => {\n    if (!event) {\n      if (action === \"select\") {\n        setSelectedTask(task.id);\n      }\n    }\n    // Keyboard events\n    else if (isKeyboardEvent(event)) {\n      if (action === \"delete\") {\n        if (onDelete) {\n          try {\n            const result = await onDelete(task);\n            if (result !== undefined && result) {\n              setGanttEvent({ action, changedTask: task });\n            }\n          } catch (error) {\n            console.error(\"Error on Delete. \" + error);\n          }\n        }\n      }\n    }\n    // Mouse Events\n    else if (action === \"mouseenter\") {\n      if (!ganttEvent.action) {\n        setGanttEvent({\n          action,\n          changedTask: task,\n          originalSelectedTask: task,\n        });\n      }\n    } else if (action === \"mouseleave\") {\n      if (ganttEvent.action === \"mouseenter\") {\n        setGanttEvent({ action: \"\" });\n      }\n    } else if (action === \"dblclick\") {\n      !!onDoubleClick && onDoubleClick(task);\n    } else if (action === \"click\") {\n      !!onClick && onClick(task);\n    }\n    // Change task event start\n    else if (action === \"move\") {\n      if (!svg?.current || !point) return;\n      point.x = event.clientX;\n      const cursor = point.matrixTransform(\n        svg.current.getScreenCTM()?.inverse()\n      );\n      setInitEventX1Delta(cursor.x - task.x1);\n      setGanttEvent({\n        action,\n        changedTask: task,\n        originalSelectedTask: task,\n      });\n    } else {\n      setGanttEvent({\n        action,\n        changedTask: task,\n        originalSelectedTask: task,\n      });\n    }\n  };\n\n  return (\n    <g className=\"content\">\n      <g className=\"arrows\" fill={arrowColor} stroke={arrowColor}>\n        {tasks.map(task => {\n          return task.barChildren.map(child => {\n            return (\n              <Arrow\n                key={`Arrow from ${task.id} to ${tasks[child.index].id}`}\n                taskFrom={task}\n                taskTo={tasks[child.index]}\n                rowHeight={rowHeight}\n                taskHeight={taskHeight}\n                arrowIndent={arrowIndent}\n                rtl={rtl}\n              />\n            );\n          });\n        })}\n      </g>\n      <g className=\"bar\" fontFamily={fontFamily} fontSize={fontSize}>\n        {tasks.map(task => {\n          return (\n            <TaskItem\n              task={task}\n              arrowIndent={arrowIndent}\n              taskHeight={taskHeight}\n              isProgressChangeable={!!onProgressChange && !task.isDisabled}\n              isDateChangeable={!!onDateChange && !task.isDisabled}\n              isDelete={!task.isDisabled}\n              onEventStart={handleBarEventStart}\n              key={task.id}\n              isSelected={!!selectedTask && task.id === selectedTask.id}\n              rtl={rtl}\n            />\n          );\n        })}\n      </g>\n    </g>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { GridProps, Grid } from \"../grid/grid\";\nimport { CalendarProps, Calendar } from \"../calendar/calendar\";\nimport { TaskGanttContentProps, TaskGanttContent } from \"./task-gantt-content\";\nimport styles from \"./gantt.module.css\";\n\nexport type TaskGanttProps = {\n  gridProps: GridProps;\n  calendarProps: CalendarProps;\n  barProps: TaskGanttContentProps;\n  ganttHeight: number;\n  scrollY: number;\n  scrollX: number;\n  verticalGanttContainerRef?: React.RefObject<HTMLDivElement>;\n};\nexport const TaskGantt: React.FC<TaskGanttProps> = ({\n  gridProps,\n  calendarProps,\n  barProps,\n  ganttHeight,\n  scrollY,\n  scrollX,\n  verticalGanttContainerRef,\n}) => {\n  const ganttSVGRef = useRef<SVGSVGElement>(null);\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\n  const internalVerticalRef = useRef<HTMLDivElement>(null);\n  const ganttContainerRef = verticalGanttContainerRef || internalVerticalRef;\n  const newBarProps = { ...barProps, svg: ganttSVGRef };\n\n  useEffect(() => {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n\n  useEffect(() => {\n    if (ganttContainerRef.current) {\n      ganttContainerRef.current.scrollLeft = scrollX;\n    }\n  }, [scrollX, ganttContainerRef]);\n\n  return (\n    <div\n      className={styles.ganttVerticalContainer}\n      ref={ganttContainerRef}\n      dir=\"ltr\"\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width={gridProps.svgWidth}\n        height={calendarProps.headerHeight}\n        fontFamily={barProps.fontFamily}\n      >\n        <Calendar {...calendarProps} />\n      </svg>\n      <div\n        ref={horizontalContainerRef}\n        className={styles.horizontalContainer}\n        style={\n          ganttHeight\n            ? { height: ganttHeight, width: gridProps.svgWidth }\n            : { width: gridProps.svgWidth }\n        }\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width={gridProps.svgWidth}\n          height={barProps.rowHeight * barProps.tasks.length}\n          fontFamily={barProps.fontFamily}\n          ref={ganttSVGRef}\n        >\n          <Grid {...gridProps} />\n          <TaskGanttContent {...newBarProps} />\n        </svg>\n      </div>\n    </div>\n  );\n};\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\nimport styles from \"./horizontal-scroll.module.css\";\n\nexport type HorizontalScrollProps = {\n  scroll: number;\n  svgWidth: number;\n  scrollerWidth?: number;\n  rtl: boolean;\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\n  \"data-testid\"?: string;\n  containerRef?: React.RefObject<HTMLDivElement>;\n  hidden?: boolean;\n};\n\nexport const HorizontalScroll: React.FC<HorizontalScrollProps> = ({\n  scroll,\n  svgWidth,\n  scrollerWidth,\n  rtl,\n  onScroll,\n  \"data-testid\": dataTestId,\n  containerRef,\n  hidden,\n}) => {\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const wrapperRef = containerRef ?? scrollRef;\n\n  useEffect(() => {\n    if (wrapperRef.current) {\n      wrapperRef.current.scrollLeft = scroll;\n    }\n  }, [scroll, wrapperRef]);\n\n  return (\n    <div\n      dir={rtl ? \"rtl\" : \"ltr\"}\n      className={styles.scrollWrapper}\n      onScroll={onScroll}\n      ref={wrapperRef}\n      data-testid={dataTestId}\n      style={hidden ? { display: \"none\" } : { width: svgWidth }}\n    >\n      <div style={{ width: scrollerWidth ?? svgWidth }} className={styles.scroll} />\n    </div>\n  );\n};\n","import React, {\n  useState,\n  SyntheticEvent,\n  useRef,\n  useEffect,\n  useMemo,\n} from \"react\";\nimport { ViewMode, GanttProps, Task } from \"../../types/public-types\";\nimport { GridProps } from \"../grid/grid\";\nimport { ganttDateRange, seedDates } from \"../../helpers/date-helper\";\nimport { CalendarProps } from \"../calendar/calendar\";\nimport { TaskGanttContentProps } from \"./task-gantt-content\";\nimport { TaskListHeaderDefault } from \"../task-list/task-list-header\";\nimport { TaskListTableDefault } from \"../task-list/task-list-table\";\nimport { StandardTooltipContent, Tooltip } from \"../other/tooltip\";\nimport { VerticalScroll } from \"../other/vertical-scroll\";\nimport { TaskListProps, TaskList } from \"../task-list/task-list\";\nimport { TaskGantt } from \"./task-gantt\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { convertToBarTasks } from \"../../helpers/bar-helper\";\nimport { GanttEvent } from \"../../types/gantt-task-actions\";\nimport { DateSetup } from \"../../types/date-setup\";\nimport { HorizontalScroll } from \"../other/horizontal-scroll\";\nimport { removeHiddenTasks, sortTasks } from \"../../helpers/other-helper\";\nimport { DEFAULT_VISIBLE_FIELDS } from \"../../helpers/task-helper\";\nimport styles from \"./gantt.module.css\";\n\nconst DEFAULT_TASK_LIST_WIDTH = 450;\nconst MIN_PANE_WIDTH = 150;\nconst SPLIT_HANDLE_WIDTH = 8;\n\nconst clampTaskListWidth = (width: number, containerWidth: number) => {\n  const maxWidth = Math.max(\n    MIN_PANE_WIDTH,\n    containerWidth - MIN_PANE_WIDTH - SPLIT_HANDLE_WIDTH\n  );\n  return Math.min(Math.max(width, MIN_PANE_WIDTH), maxWidth);\n};\n\nexport const Gantt: React.FunctionComponent<GanttProps> = ({\n  tasks,\n  headerHeight = 50,\n  columnWidth = 60,\n  listCellWidth = \"155px\",\n  rowHeight = 50,\n  ganttHeight = 0,\n  viewMode = ViewMode.Day,\n  preStepsCount = 1,\n  locale = \"en-GB\",\n  barFill = 60,\n  barCornerRadius = 3,\n  barProgressColor = \"#a3a3ff\",\n  barProgressSelectedColor = \"#8282f5\",\n  barBackgroundColor = \"#b8c2cc\",\n  barBackgroundSelectedColor = \"#aeb8c2\",\n  projectProgressColor = \"#7db59a\",\n  projectProgressSelectedColor = \"#59a985\",\n  projectBackgroundColor = \"#fac465\",\n  projectBackgroundSelectedColor = \"#f7bb53\",\n  milestoneBackgroundColor = \"#f1c453\",\n  milestoneBackgroundSelectedColor = \"#f29e4c\",\n  rtl = false,\n  handleWidth = 8,\n  timeStep = 300000,\n  arrowColor = \"grey\",\n  fontFamily = \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\",\n  fontSize = \"14px\",\n  arrowIndent = 20,\n  todayColor = \"rgba(252, 248, 227, 0.5)\",\n  viewDate,\n  TooltipContent = StandardTooltipContent,\n  TaskListHeader = TaskListHeaderDefault,\n  TaskListTable = TaskListTableDefault,\n  visibleFields = DEFAULT_VISIBLE_FIELDS,\n  effortDisplayUnit = \"MH\",\n  enableColumnDrag,\n  onDateChange,\n  onProgressChange,\n  onDoubleClick,\n  onClick,\n  onDelete,\n  onSelect,\n  onExpanderClick,\n  onTaskUpdate,\n  onCellCommit,\n}) => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const taskListRef = useRef<HTMLDivElement>(null);\n  const taskListHeaderRef = useRef<HTMLDivElement>(null);\n  const taskListBodyRef = useRef<HTMLDivElement>(null);\n  const ganttContainerRef = useRef<HTMLDivElement>(null);\n  const splitStartXRef = useRef<number | null>(null);\n  const splitStartWidthRef = useRef<number | null>(null);\n  const splitMoveHandlerRef = useRef<((event: MouseEvent) => void) | null>(null);\n  const splitUpHandlerRef = useRef<(() => void) | null>(null);\n  const supportsPointerEvents =\n    typeof window !== \"undefined\" && \"PointerEvent\" in window;\n  const [dateSetup, setDateSetup] = useState<DateSetup>(() => {\n    const [startDate, endDate] = ganttDateRange(tasks, viewMode, preStepsCount);\n    return { viewMode, dates: seedDates(startDate, endDate, viewMode) };\n  });\n  const [currentViewDate, setCurrentViewDate] = useState<Date | undefined>(\n    undefined\n  );\n\n  const [taskListWidth, setTaskListWidth] = useState(DEFAULT_TASK_LIST_WIDTH);\n  const [wrapperWidth, setWrapperWidth] = useState(0);\n  const [isResizing, setIsResizing] = useState(false);\n  const [svgContainerWidth, setSvgContainerWidth] = useState(0);\n  const [svgContainerHeight, setSvgContainerHeight] = useState(ganttHeight);\n  const [barTasks, setBarTasks] = useState<BarTask[]>([]);\n  const [ganttEvent, setGanttEvent] = useState<GanttEvent>({\n    action: \"\",\n  });\n  const taskHeight = useMemo(\n    () => (rowHeight * barFill) / 100,\n    [rowHeight, barFill]\n  );\n\n  const [selectedTask, setSelectedTask] = useState<BarTask>();\n  const [failedTask, setFailedTask] = useState<BarTask | null>(null);\n\n  const svgWidth = dateSetup.dates.length * columnWidth;\n  const ganttFullHeight = barTasks.length * rowHeight;\n\n  const [scrollY, setScrollY] = useState(0);\n  const [scrollXLeft, setScrollXLeft] = useState(0);\n  const [scrollXRight, setScrollXRight] = useState(-1);\n  const [leftScrollerWidth, setLeftScrollerWidth] = useState(1430);\n  const ignoreScrollLeftRef = useRef(false);\n  const ignoreScrollRightRef = useRef(false);\n\n  // task change events\n  useEffect(() => {\n    let filteredTasks: Task[];\n    if (onExpanderClick) {\n      filteredTasks = removeHiddenTasks(tasks);\n    } else {\n      filteredTasks = tasks;\n    }\n    filteredTasks = filteredTasks.sort(sortTasks);\n    const [startDate, endDate] = ganttDateRange(\n      filteredTasks,\n      viewMode,\n      preStepsCount\n    );\n    let newDates = seedDates(startDate, endDate, viewMode);\n    if (rtl) {\n      newDates = newDates.reverse();\n      if (scrollXRight === -1) {\n        setScrollXRight(newDates.length * columnWidth);\n      }\n    }\n    setDateSetup({ dates: newDates, viewMode });\n    setBarTasks(\n      convertToBarTasks(\n        filteredTasks,\n        newDates,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        rtl,\n        barProgressColor,\n        barProgressSelectedColor,\n        barBackgroundColor,\n        barBackgroundSelectedColor,\n        projectProgressColor,\n        projectProgressSelectedColor,\n        projectBackgroundColor,\n        projectBackgroundSelectedColor,\n        milestoneBackgroundColor,\n        milestoneBackgroundSelectedColor\n      )\n    );\n  }, [\n    tasks,\n    viewMode,\n    preStepsCount,\n    rowHeight,\n    barCornerRadius,\n    columnWidth,\n    taskHeight,\n    handleWidth,\n    barProgressColor,\n    barProgressSelectedColor,\n    barBackgroundColor,\n    barBackgroundSelectedColor,\n    projectProgressColor,\n    projectProgressSelectedColor,\n    projectBackgroundColor,\n    projectBackgroundSelectedColor,\n    milestoneBackgroundColor,\n    milestoneBackgroundSelectedColor,\n    rtl,\n    scrollXRight,\n    onExpanderClick,\n  ]);\n\n  useEffect(() => {\n    if (\n      viewMode === dateSetup.viewMode &&\n      ((viewDate && !currentViewDate) ||\n        (viewDate && currentViewDate?.valueOf() !== viewDate.valueOf()))\n    ) {\n      const dates = dateSetup.dates;\n      const index = dates.findIndex(\n        (d, i) =>\n          viewDate.valueOf() >= d.valueOf() &&\n          i + 1 !== dates.length &&\n          viewDate.valueOf() < dates[i + 1].valueOf()\n      );\n      if (index === -1) {\n        return;\n      }\n      setCurrentViewDate(viewDate);\n      setScrollXRight(columnWidth * index);\n    }\n  }, [\n    viewDate,\n    columnWidth,\n    dateSetup.dates,\n    dateSetup.viewMode,\n    viewMode,\n    currentViewDate,\n    setCurrentViewDate,\n  ]);\n\n  useEffect(() => {\n    const { changedTask, action } = ganttEvent;\n    if (changedTask) {\n      if (action === \"delete\") {\n        setGanttEvent({ action: \"\" });\n        setBarTasks(barTasks.filter(t => t.id !== changedTask.id));\n      } else if (\n        action === \"move\" ||\n        action === \"end\" ||\n        action === \"start\" ||\n        action === \"progress\"\n      ) {\n        const prevStateTask = barTasks.find(t => t.id === changedTask.id);\n        if (\n          prevStateTask &&\n          (prevStateTask.start.getTime() !== changedTask.start.getTime() ||\n            prevStateTask.end.getTime() !== changedTask.end.getTime() ||\n            prevStateTask.progress !== changedTask.progress)\n        ) {\n          // actions for change\n          const newTaskList = barTasks.map(t =>\n            t.id === changedTask.id ? changedTask : t\n          );\n          setBarTasks(newTaskList);\n        }\n      }\n    }\n  }, [ganttEvent, barTasks]);\n\n  useEffect(() => {\n    if (failedTask) {\n      setBarTasks(barTasks.map(t => (t.id !== failedTask.id ? t : failedTask)));\n      setFailedTask(null);\n    }\n  }, [failedTask, barTasks]);\n\n  useEffect(() => {\n    const updateWrapperWidth = () => {\n      if (wrapperRef.current) {\n        setWrapperWidth(wrapperRef.current.offsetWidth);\n      }\n    };\n    updateWrapperWidth();\n    window.addEventListener(\"resize\", updateWrapperWidth);\n    return () => window.removeEventListener(\"resize\", updateWrapperWidth);\n  }, []);\n\n  useEffect(() => {\n    if (!listCellWidth) {\n      setTaskListWidth(0);\n      return;\n    }\n    if (wrapperWidth) {\n      setTaskListWidth(prev => clampTaskListWidth(prev, wrapperWidth));\n    }\n  }, [listCellWidth, wrapperWidth]);\n\n  const taskListOffset = listCellWidth\n    ? taskListWidth + SPLIT_HANDLE_WIDTH\n    : 0;\n\n  useEffect(() => {\n    if (wrapperWidth) {\n      setSvgContainerWidth(Math.max(wrapperWidth - taskListOffset, 0));\n    }\n  }, [wrapperWidth, taskListOffset]);\n\n  useEffect(() => {\n    if (ganttHeight) {\n      setSvgContainerHeight(ganttHeight + headerHeight);\n    } else {\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\n    }\n  }, [ganttHeight, tasks, headerHeight, rowHeight]);\n\n  useEffect(() => {\n    return () => {\n      if (splitMoveHandlerRef.current) {\n        document.removeEventListener(\"mousemove\", splitMoveHandlerRef.current);\n        splitMoveHandlerRef.current = null;\n      }\n      if (splitUpHandlerRef.current) {\n        document.removeEventListener(\"mouseup\", splitUpHandlerRef.current);\n        splitUpHandlerRef.current = null;\n      }\n    };\n  }, []);\n\n  // scroll events\n  useEffect(() => {\n    const handleWheel = (event: WheelEvent) => {\n      if (event.shiftKey || event.deltaX) {\n        const scrollMove = event.deltaX ? event.deltaX : event.deltaY;\n        let newScrollX = scrollXRight + scrollMove;\n        if (newScrollX < 0) {\n          newScrollX = 0;\n        } else if (newScrollX > svgWidth) {\n          newScrollX = svgWidth;\n        }\n        ignoreScrollRightRef.current = true;\n        setScrollXRight(newScrollX);\n        event.preventDefault();\n      } else if (ganttHeight) {\n        let newScrollY = scrollY + event.deltaY;\n        if (newScrollY < 0) {\n          newScrollY = 0;\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\n          newScrollY = ganttFullHeight - ganttHeight;\n        }\n        if (newScrollY !== scrollY) {\n          setScrollY(newScrollY);\n          event.preventDefault();\n        }\n      }\n    };\n\n    // subscribe if scroll is necessary\n    const wrapperEl = wrapperRef.current;\n    wrapperEl?.addEventListener(\"wheel\", handleWheel, {\n      passive: false,\n    });\n    return () => {\n      wrapperEl?.removeEventListener(\"wheel\", handleWheel);\n    };\n  }, [\n    scrollY,\n    scrollXRight,\n    ganttHeight,\n    svgWidth,\n    rtl,\n    ganttFullHeight,\n  ]);\n\n  // update left scroller width from the task list body content\n  useEffect(() => {\n    const updateLeftScroller = () => {\n      const el = taskListBodyRef.current;\n      if (el) {\n        setLeftScrollerWidth(el.scrollWidth || 0);\n      }\n    };\n    updateLeftScroller();\n    const RO = (window as any).ResizeObserver;\n    const ro = RO ? new RO(updateLeftScroller) : null;\n    if (ro && taskListBodyRef.current) {\n      ro.observe(taskListBodyRef.current);\n    }\n    window.addEventListener(\"resize\", updateLeftScroller);\n    return () => {\n      if (ro) {\n        ro.disconnect();\n      }\n      window.removeEventListener(\"resize\", updateLeftScroller);\n    };\n  }, [tasks, fontFamily, fontSize, listCellWidth, taskListBodyRef, visibleFields]);\n\n  const handleScrollY = (event: SyntheticEvent<HTMLDivElement>) => {\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollLeftRef.current) {\n      setScrollY(event.currentTarget.scrollTop);\n      ignoreScrollLeftRef.current = true;\n    } else {\n      ignoreScrollLeftRef.current = false;\n    }\n  };\n\n  const handleScrollLeft = (event: SyntheticEvent<HTMLDivElement>) => {\n    if (\n      scrollXLeft !== event.currentTarget.scrollLeft &&\n      !ignoreScrollLeftRef.current\n    ) {\n      setScrollXLeft(event.currentTarget.scrollLeft);\n      ignoreScrollLeftRef.current = true;\n    } else {\n      ignoreScrollLeftRef.current = false;\n    }\n  };\n\n  const handleScrollRight = (event: SyntheticEvent<HTMLDivElement>) => {\n    if (\n      scrollXRight !== event.currentTarget.scrollLeft &&\n      !ignoreScrollRightRef.current\n    ) {\n      setScrollXRight(event.currentTarget.scrollLeft);\n      ignoreScrollRightRef.current = true;\n    } else {\n      ignoreScrollRightRef.current = false;\n    }\n    if (ganttContainerRef.current && ganttContainerRef.current.scrollLeft !== event.currentTarget.scrollLeft) {\n      ganttContainerRef.current.scrollLeft = event.currentTarget.scrollLeft;\n    }\n  };\n\n  /**\n   * Handles arrow keys events and transform it to new scroll\n   */\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    const target = event.target;\n    if (target instanceof HTMLElement) {\n      if (\n        target.isContentEditable ||\n        target.tagName === \"INPUT\" ||\n        target.tagName === \"TEXTAREA\" ||\n        target.tagName === \"SELECT\"\n      ) {\n        return;\n      }\n    }\n    event.preventDefault();\n    let newScrollY = scrollY;\n    let newScrollX = scrollXRight;\n    let isX = true;\n    switch (event.key) {\n      case \"Down\": // IE/Edge specific value\n      case \"ArrowDown\":\n        newScrollY += rowHeight;\n        isX = false;\n        break;\n      case \"Up\": // IE/Edge specific value\n      case \"ArrowUp\":\n        newScrollY -= rowHeight;\n        isX = false;\n        break;\n      case \"Left\":\n      case \"ArrowLeft\":\n        newScrollX -= columnWidth;\n        break;\n      case \"Right\": // IE/Edge specific value\n      case \"ArrowRight\":\n        newScrollX += columnWidth;\n        break;\n    }\n    if (isX) {\n      if (newScrollX < 0) {\n        newScrollX = 0;\n      } else if (newScrollX > svgWidth) {\n        newScrollX = svgWidth;\n      }\n      ignoreScrollRightRef.current = true;\n      setScrollXRight(newScrollX);\n    } else {\n      if (newScrollY < 0) {\n        newScrollY = 0;\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\n        newScrollY = ganttFullHeight - ganttHeight;\n      }\n      setScrollY(newScrollY);\n    }\n  };\n\n  /**\n   * Task select event\n   */\n  const handleSelectedTask = (taskId: string) => {\n    const newSelectedTask = barTasks.find(t => t.id === taskId);\n    const oldSelectedTask = barTasks.find(\n      t => !!selectedTask && t.id === selectedTask.id\n    );\n    if (onSelect) {\n      if (oldSelectedTask) {\n        onSelect(oldSelectedTask, false);\n      }\n      if (newSelectedTask) {\n        onSelect(newSelectedTask, true);\n      }\n    }\n    setSelectedTask(newSelectedTask);\n  };\n  const handleExpanderClick = (task: Task) => {\n    if (onExpanderClick && task.hideChildren !== undefined) {\n      onExpanderClick({ ...task, hideChildren: !task.hideChildren });\n    }\n  };\n\n  const updateTaskListWidth = (clientX: number) => {\n    if (splitStartXRef.current == null || splitStartWidthRef.current == null) {\n      return;\n    }\n    if (!wrapperRef.current) {\n      return;\n    }\n    const delta = clientX - splitStartXRef.current;\n    const nextWidth = clampTaskListWidth(\n      splitStartWidthRef.current + delta,\n      wrapperRef.current.offsetWidth\n    );\n    setTaskListWidth(nextWidth);\n  };\n\n  const handleSplitPointerDown: React.PointerEventHandler<HTMLDivElement> =\n    event => {\n      event.preventDefault();\n      splitStartXRef.current = event.clientX;\n      splitStartWidthRef.current = taskListWidth;\n      setIsResizing(true);\n      if (event.currentTarget.setPointerCapture) {\n        event.currentTarget.setPointerCapture(event.pointerId);\n      }\n    };\n\n  const handleSplitPointerMove: React.PointerEventHandler<HTMLDivElement> =\n    event => {\n      updateTaskListWidth(event.clientX);\n    };\n\n  const handleSplitPointerUp: React.PointerEventHandler<HTMLDivElement> = event => {\n    splitStartXRef.current = null;\n    splitStartWidthRef.current = null;\n    setIsResizing(false);\n    if (event.currentTarget.releasePointerCapture) {\n      event.currentTarget.releasePointerCapture(event.pointerId);\n    }\n  };\n\n  const handleSplitMouseDown: React.MouseEventHandler<HTMLDivElement> = event => {\n    event.preventDefault();\n    splitStartXRef.current = event.clientX;\n    splitStartWidthRef.current = taskListWidth;\n    setIsResizing(true);\n    if (splitMoveHandlerRef.current) {\n      document.removeEventListener(\"mousemove\", splitMoveHandlerRef.current);\n    }\n    if (splitUpHandlerRef.current) {\n      document.removeEventListener(\"mouseup\", splitUpHandlerRef.current);\n    }\n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      updateTaskListWidth(moveEvent.clientX);\n    };\n    const handleMouseUp = () => {\n      splitStartXRef.current = null;\n      splitStartWidthRef.current = null;\n      setIsResizing(false);\n      if (splitMoveHandlerRef.current) {\n        document.removeEventListener(\"mousemove\", splitMoveHandlerRef.current);\n        splitMoveHandlerRef.current = null;\n      }\n      if (splitUpHandlerRef.current) {\n        document.removeEventListener(\"mouseup\", splitUpHandlerRef.current);\n        splitUpHandlerRef.current = null;\n      }\n    };\n    splitMoveHandlerRef.current = handleMouseMove;\n    splitUpHandlerRef.current = handleMouseUp;\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n  const gridProps: GridProps = {\n    columnWidth,\n    svgWidth,\n    tasks: tasks,\n    rowHeight,\n    dates: dateSetup.dates,\n    todayColor,\n    rtl,\n  };\n  const calendarProps: CalendarProps = {\n    dateSetup,\n    locale,\n    viewMode,\n    headerHeight,\n    columnWidth,\n    fontFamily,\n    fontSize,\n    rtl,\n  };\n  const barProps: TaskGanttContentProps = {\n    tasks: barTasks,\n    dates: dateSetup.dates,\n    ganttEvent,\n    selectedTask,\n    rowHeight,\n    taskHeight,\n    columnWidth,\n    arrowColor,\n    timeStep,\n    fontFamily,\n    fontSize,\n    arrowIndent,\n    svgWidth,\n    rtl,\n    setGanttEvent,\n    setFailedTask,\n    setSelectedTask: handleSelectedTask,\n    onDateChange,\n    onProgressChange,\n    onDoubleClick,\n    onClick,\n    onDelete,\n  };\n\n  const tableProps: TaskListProps = {\n    rowHeight,\n    rowWidth: listCellWidth,\n    fontFamily,\n    fontSize,\n    tasks: barTasks,\n    headerHeight,\n    scrollY,\n    horizontalScroll: scrollXLeft,\n    ganttHeight,\n    horizontalContainerClass: styles.horizontalContainer,\n    headerContainerRef: taskListHeaderRef,\n    bodyContainerRef: taskListBodyRef,\n    onHorizontalScroll: handleScrollLeft,\n    selectedTask,\n    taskListRef,\n    setSelectedTask: handleSelectedTask,\n    onExpanderClick: handleExpanderClick,\n    TaskListHeader,\n    TaskListTable,\n    visibleFields,\n    onUpdateTask: onTaskUpdate,\n    onCellCommit,\n    effortDisplayUnit,\n    enableColumnDrag,\n  };\n  return (\n    <div>\n      <div\n        className={styles.wrapper}\n        onKeyDown={handleKeyDown}\n        tabIndex={0}\n        ref={wrapperRef}\n      >\n        {listCellWidth && (\n          <div\n            className={styles.taskListPanel}\n            style={{ width: taskListWidth }}\n            data-testid=\"task-list-panel\"\n          >\n            <TaskList {...tableProps} />\n          </div>\n        )}\n        {listCellWidth && (\n          <div\n            className={`${styles.splitHandle} ${\n              isResizing ? styles.splitHandleActive : \"\"\n            }`}\n            onPointerDown={supportsPointerEvents ? handleSplitPointerDown : undefined}\n            onPointerMove={supportsPointerEvents ? handleSplitPointerMove : undefined}\n            onPointerUp={supportsPointerEvents ? handleSplitPointerUp : undefined}\n            onPointerCancel={supportsPointerEvents ? handleSplitPointerUp : undefined}\n            onMouseDown={supportsPointerEvents ? undefined : handleSplitMouseDown}\n            role=\"separator\"\n            aria-label=\"Task/Schedule divider\"\n            aria-orientation=\"vertical\"\n            data-testid=\"pane-splitter\"\n          />\n        )}\n        <div\n          className={styles.ganttPanel}\n          style={{ minWidth: MIN_PANE_WIDTH }}\n          data-testid=\"gantt-panel\"\n        >\n          <TaskGantt\n            gridProps={gridProps}\n            calendarProps={calendarProps}\n            barProps={barProps}\n            ganttHeight={ganttHeight}\n            scrollY={scrollY}\n            scrollX={scrollXRight}\n            verticalGanttContainerRef={ganttContainerRef}\n          />\n        </div>\n        {ganttEvent.changedTask && (\n          <Tooltip\n            arrowIndent={arrowIndent}\n            rowHeight={rowHeight}\n            svgContainerHeight={svgContainerHeight}\n            svgContainerWidth={svgContainerWidth}\n            fontFamily={fontFamily}\n            fontSize={fontSize}\n             scrollX={scrollXRight}\n            scrollY={scrollY}\n            task={ganttEvent.changedTask}\n            headerHeight={headerHeight}\n            taskListWidth={taskListOffset}\n            TooltipContent={TooltipContent}\n            rtl={rtl}\n            svgWidth={svgWidth}\n            effortDisplayUnit={effortDisplayUnit}\n          />\n        )}\n        <VerticalScroll\n          ganttFullHeight={ganttFullHeight}\n          ganttHeight={ganttHeight}\n          headerHeight={headerHeight}\n          scroll={scrollY}\n          onScroll={handleScrollY}\n          rtl={rtl}\n        />\n      </div>\n      <div className={styles.scrollRow} style={{ \"--splitter-width\": `${SPLIT_HANDLE_WIDTH}px` } as React.CSSProperties}>\n        <div className={styles.scrollCellLeft}>\n          {listCellWidth && (\n            <HorizontalScroll\n              svgWidth={taskListWidth}\n              scrollerWidth={leftScrollerWidth}\n              scroll={scrollXLeft}\n              rtl={rtl}\n              onScroll={handleScrollLeft}\n            />\n          )}\n        </div>\n        {listCellWidth && <div className={styles.scrollSplitter} />}\n        <div className={styles.scrollCellRight}>\n          <HorizontalScroll\n            svgWidth={svgWidth}\n            scroll={scrollXRight}\n            rtl={rtl}\n            onScroll={handleScrollRight}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAoCYA,QAAA;AAAZ,WAAYA,QAAQ;EAClBA,QAAA,iBAAa;EACbA,QAAA,8BAA0B;EAC1BA,QAAA,wBAAoB;EACpBA,QAAA,eAAW;EAEXA,QAAA,iBAAa;EACbA,QAAA,mBAAe;EACfA,QAAA,+BAA2B;EAC3BA,QAAA,iBAAa;AACf,CAAC,EAVWA,QAAQ,KAARA,QAAQ;ACvBpB,IAAMC,WAAW,GAAG,EAAE;AACtB,IAAaC,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAClCC,SAA4B,EAC5BC,IAAA;MAAAA,IAAA;IAAAA,IAAA,GAA8B,EAAE;;EAEhC,IAAMC,GAAG,GAAGC,IAAI,CAACC,SAAS,CAAC,CAACJ,SAAS,EAAEC,IAAI,CAAC,CAAC;EAC7C,IAAII,GAAG,GAAGP,WAAW,CAACI,GAAG,CAAC;EAC1B,IAAI,CAACG,GAAG,EAAE;IACRA,GAAG,GAAG,IAAIC,IAAI,CAACC,cAAc,CAACP,SAAS,EAAEC,IAAI,CAAC;IAC9CH,WAAW,CAACI,GAAG,CAAC,GAAGG,GAAG;;EAExB,OAAOA,GAAG;AACZ,CAAC;AAED,IAAaG,SAAS,GAAG,SAAZA,SAASA,CACpBC,IAAU,EACVC,QAAgB,EAChBC,KAAuB;EAEvB,IAAMC,OAAO,GAAG,IAAIC,IAAI,CACtBJ,IAAI,CAACK,WAAW,EAAE,IAAIH,KAAK,KAAK,MAAM,GAAGD,QAAQ,GAAG,CAAC,CAAC,EACtDD,IAAI,CAACM,QAAQ,EAAE,IAAIJ,KAAK,KAAK,OAAO,GAAGD,QAAQ,GAAG,CAAC,CAAC,EACpDD,IAAI,CAACO,OAAO,EAAE,IAAIL,KAAK,KAAK,KAAK,GAAGD,QAAQ,GAAG,CAAC,CAAC,EACjDD,IAAI,CAACQ,QAAQ,EAAE,IAAIN,KAAK,KAAK,MAAM,GAAGD,QAAQ,GAAG,CAAC,CAAC,EACnDD,IAAI,CAACS,UAAU,EAAE,IAAIP,KAAK,KAAK,QAAQ,GAAGD,QAAQ,GAAG,CAAC,CAAC,EACvDD,IAAI,CAACU,UAAU,EAAE,IAAIR,KAAK,KAAK,QAAQ,GAAGD,QAAQ,GAAG,CAAC,CAAC,EACvDD,IAAI,CAACW,eAAe,EAAE,IAAIT,KAAK,KAAK,aAAa,GAAGD,QAAQ,GAAG,CAAC,CAAC,CAClE;EACD,OAAOE,OAAO;AAChB,CAAC;AAED,IAAaS,WAAW,GAAG,SAAdA,WAAWA,CAAIZ,IAAU,EAAEE,KAAuB;EAC7D,IAAMW,MAAM,GAAG,CACb,aAAa,EACb,QAAQ,EACR,QAAQ,EACR,MAAM,EACN,KAAK,EACL,OAAO,EACP,MAAM,CACP;EAED,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,MAAwB;IAC3C,IAAMC,QAAQ,GAAGH,MAAM,CAACI,OAAO,CAACf,KAAK,CAAC;IACtC,OAAOW,MAAM,CAACI,OAAO,CAACF,MAAM,CAAC,IAAIC,QAAQ;GAC1C;EACD,IAAMb,OAAO,GAAG,IAAIC,IAAI,CACtBJ,IAAI,CAACK,WAAW,EAAE,EAClBS,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,GAAGd,IAAI,CAACM,QAAQ,EAAE,EACzCQ,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,GAAGd,IAAI,CAACO,OAAO,EAAE,EACzCO,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,GAAGd,IAAI,CAACQ,QAAQ,EAAE,EACxCM,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,GAAGd,IAAI,CAACS,UAAU,EAAE,EAC3CK,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAGd,IAAI,CAACU,UAAU,EAAE,EAC7CI,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAGd,IAAI,CAACW,eAAe,EAAE,CACnD;EACD,OAAOR,OAAO;AAChB,CAAC;AAED,IAAae,cAAc,GAAG,SAAjBA,cAAcA,CACzBC,KAAa,EACbC,QAAkB,EAClBC,aAAqB;EAErB,IAAIC,YAAY,GAASH,KAAK,CAAC,CAAC,CAAC,CAACI,KAAK;EACvC,IAAIC,UAAU,GAASL,KAAK,CAAC,CAAC,CAAC,CAACI,KAAK;EACrC,SAAAE,SAAA,GAAAC,+BAAA,CAAmBP,KAAK,GAAAQ,KAAA,IAAAA,KAAA,GAAAF,SAAA,IAAAG,IAAA,GAAE;IAAA,IAAfC,IAAI,GAAAF,KAAA,CAAAG,KAAA;IACb,IAAID,IAAI,CAACN,KAAK,GAAGD,YAAY,EAAE;MAC7BA,YAAY,GAAGO,IAAI,CAACN,KAAK;;IAE3B,IAAIM,IAAI,CAACE,GAAG,GAAGP,UAAU,EAAE;MACzBA,UAAU,GAAGK,IAAI,CAACE,GAAG;;;EAGzB,QAAQX,QAAQ;IACd,KAAKhC,QAAQ,CAAC4C,IAAI;MAChBV,YAAY,GAAGvB,SAAS,CAACuB,YAAY,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC;MAClDA,YAAY,GAAGV,WAAW,CAACU,YAAY,EAAE,MAAM,CAAC;MAChDE,UAAU,GAAGzB,SAAS,CAACyB,UAAU,EAAE,CAAC,EAAE,MAAM,CAAC;MAC7CA,UAAU,GAAGZ,WAAW,CAACY,UAAU,EAAE,MAAM,CAAC;MAC5C;IACF,KAAKpC,QAAQ,CAAC6C,WAAW;MACvBX,YAAY,GAAGvB,SAAS,CAACuB,YAAY,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC;MACnDA,YAAY,GAAGV,WAAW,CAACU,YAAY,EAAE,OAAO,CAAC;MACjDE,UAAU,GAAGzB,SAAS,CAACyB,UAAU,EAAE,CAAC,EAAE,MAAM,CAAC;MAC7CA,UAAU,GAAGZ,WAAW,CAACY,UAAU,EAAE,MAAM,CAAC;MAC5C;IACF,KAAKpC,QAAQ,CAAC8C,KAAK;MACjBZ,YAAY,GAAGvB,SAAS,CAACuB,YAAY,EAAE,CAAC,CAAC,GAAGD,aAAa,EAAE,OAAO,CAAC;MACnEC,YAAY,GAAGV,WAAW,CAACU,YAAY,EAAE,OAAO,CAAC;MACjDE,UAAU,GAAGzB,SAAS,CAACyB,UAAU,EAAE,CAAC,EAAE,MAAM,CAAC;MAC7CA,UAAU,GAAGZ,WAAW,CAACY,UAAU,EAAE,MAAM,CAAC;MAC5C;IACF,KAAKpC,QAAQ,CAAC+C,IAAI;MAChBb,YAAY,GAAGV,WAAW,CAACU,YAAY,EAAE,KAAK,CAAC;MAC/CA,YAAY,GAAGvB,SAAS,CACtBqC,SAAS,CAACd,YAAY,CAAC,EACvB,CAAC,CAAC,GAAGD,aAAa,EAClB,KAAK,CACN;MACDG,UAAU,GAAGZ,WAAW,CAACY,UAAU,EAAE,KAAK,CAAC;MAC3CA,UAAU,GAAGzB,SAAS,CAACyB,UAAU,EAAE,GAAG,EAAE,OAAO,CAAC;MAChD;IACF,KAAKpC,QAAQ,CAACiD,GAAG;MACff,YAAY,GAAGV,WAAW,CAACU,YAAY,EAAE,KAAK,CAAC;MAC/CA,YAAY,GAAGvB,SAAS,CAACuB,YAAY,EAAE,CAAC,CAAC,GAAGD,aAAa,EAAE,KAAK,CAAC;MACjEG,UAAU,GAAGZ,WAAW,CAACY,UAAU,EAAE,KAAK,CAAC;MAC3CA,UAAU,GAAGzB,SAAS,CAACyB,UAAU,EAAE,EAAE,EAAE,KAAK,CAAC;MAC7C;IACF,KAAKpC,QAAQ,CAACkD,UAAU;MACtBhB,YAAY,GAAGV,WAAW,CAACU,YAAY,EAAE,KAAK,CAAC;MAC/CA,YAAY,GAAGvB,SAAS,CAACuB,YAAY,EAAE,CAAC,CAAC,GAAGD,aAAa,EAAE,KAAK,CAAC;MACjEG,UAAU,GAAGZ,WAAW,CAACY,UAAU,EAAE,KAAK,CAAC;MAC3CA,UAAU,GAAGzB,SAAS,CAACyB,UAAU,EAAE,EAAE,EAAE,MAAM,CAAC;MAC9C;IACF,KAAKpC,QAAQ,CAACmD,OAAO;MACnBjB,YAAY,GAAGV,WAAW,CAACU,YAAY,EAAE,KAAK,CAAC;MAC/CA,YAAY,GAAGvB,SAAS,CAACuB,YAAY,EAAE,CAAC,CAAC,GAAGD,aAAa,EAAE,KAAK,CAAC;MACjEG,UAAU,GAAGZ,WAAW,CAACY,UAAU,EAAE,KAAK,CAAC;MAC3CA,UAAU,GAAGzB,SAAS,CAACyB,UAAU,EAAE,GAAG,EAAE,MAAM,CAAC;MAC/C;IACF,KAAKpC,QAAQ,CAACoD,IAAI;MAChBlB,YAAY,GAAGV,WAAW,CAACU,YAAY,EAAE,MAAM,CAAC;MAChDA,YAAY,GAAGvB,SAAS,CAACuB,YAAY,EAAE,CAAC,CAAC,GAAGD,aAAa,EAAE,MAAM,CAAC;MAClEG,UAAU,GAAGZ,WAAW,CAACY,UAAU,EAAE,KAAK,CAAC;MAC3CA,UAAU,GAAGzB,SAAS,CAACyB,UAAU,EAAE,CAAC,EAAE,KAAK,CAAC;MAC5C;;EAEJ,OAAO,CAACF,YAAY,EAAEE,UAAU,CAAC;AACnC,CAAC;AAED,IAAaiB,SAAS,GAAG,SAAZA,SAASA,CACpBC,SAAe,EACfC,OAAa,EACbvB,QAAkB;EAElB,IAAIwB,WAAW,GAAS,IAAIxC,IAAI,CAACsC,SAAS,CAAC;EAC3C,IAAMG,KAAK,GAAW,CAACD,WAAW,CAAC;EACnC,OAAOA,WAAW,GAAGD,OAAO,EAAE;IAC5B,QAAQvB,QAAQ;MACd,KAAKhC,QAAQ,CAAC4C,IAAI;QAChBY,WAAW,GAAG7C,SAAS,CAAC6C,WAAW,EAAE,CAAC,EAAE,MAAM,CAAC;QAC/C;MACF,KAAKxD,QAAQ,CAAC6C,WAAW;QACvBW,WAAW,GAAG7C,SAAS,CAAC6C,WAAW,EAAE,CAAC,EAAE,OAAO,CAAC;QAChD;MACF,KAAKxD,QAAQ,CAAC8C,KAAK;QACjBU,WAAW,GAAG7C,SAAS,CAAC6C,WAAW,EAAE,CAAC,EAAE,OAAO,CAAC;QAChD;MACF,KAAKxD,QAAQ,CAAC+C,IAAI;QAChBS,WAAW,GAAG7C,SAAS,CAAC6C,WAAW,EAAE,CAAC,EAAE,KAAK,CAAC;QAC9C;MACF,KAAKxD,QAAQ,CAACiD,GAAG;QACfO,WAAW,GAAG7C,SAAS,CAAC6C,WAAW,EAAE,CAAC,EAAE,KAAK,CAAC;QAC9C;MACF,KAAKxD,QAAQ,CAACmD,OAAO;QACnBK,WAAW,GAAG7C,SAAS,CAAC6C,WAAW,EAAE,EAAE,EAAE,MAAM,CAAC;QAChD;MACF,KAAKxD,QAAQ,CAACkD,UAAU;QACtBM,WAAW,GAAG7C,SAAS,CAAC6C,WAAW,EAAE,CAAC,EAAE,MAAM,CAAC;QAC/C;MACF,KAAKxD,QAAQ,CAACoD,IAAI;QAChBI,WAAW,GAAG7C,SAAS,CAAC6C,WAAW,EAAE,CAAC,EAAE,MAAM,CAAC;QAC/C;;IAEJC,KAAK,CAACC,IAAI,CAACF,WAAW,CAAC;;EAEzB,OAAOC,KAAK;AACd,CAAC;AAED,IAAaE,cAAc,GAAG,SAAjBA,cAAcA,CAAI/C,IAAU,EAAEgD,MAAc;EACvD,IAAIC,WAAW,GAAG3D,uBAAuB,CAAC0D,MAAM,EAAE;IAChDE,KAAK,EAAE;GACR,CAAC,CAACC,MAAM,CAACnD,IAAI,CAAC;EACfiD,WAAW,GAAGA,WAAW,CAACG,OAAO,CAC/BH,WAAW,CAAC,CAAC,CAAC,EACdA,WAAW,CAAC,CAAC,CAAC,CAACI,iBAAiB,EAAE,CACnC;EACD,OAAOJ,WAAW;AACpB,CAAC;AAED,IAAaK,iBAAiB,GAAG,SAApBA,iBAAiBA,CAC5BtD,IAAU,EACVgD,MAAc,EACdG,MAAgD;EAEhD,IAAIF,WAAW,GAAG3D,uBAAuB,CAAC0D,MAAM,EAAE;IAChDO,OAAO,EAAEJ;GACV,CAAC,CAACA,MAAM,CAACnD,IAAI,CAAC;EACfiD,WAAW,GAAGA,WAAW,CAACG,OAAO,CAC/BH,WAAW,CAAC,CAAC,CAAC,EACdA,WAAW,CAAC,CAAC,CAAC,CAACI,iBAAiB,EAAE,CACnC;EACD,OAAOJ,WAAW;AACpB,CAAC;AAMD,IAAMb,SAAS,GAAG,SAAZA,SAASA,CAAIpC,IAAU;EAC3B,IAAMwD,GAAG,GAAGxD,IAAI,CAACyD,MAAM,EAAE;EACzB,IAAMC,IAAI,GAAG1D,IAAI,CAACO,OAAO,EAAE,GAAGiD,GAAG,IAAIA,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;EACxD,OAAO,IAAIpD,IAAI,CAACJ,IAAI,CAAC2D,OAAO,CAACD,IAAI,CAAC,CAAC;AACrC,CAAC;AAED,IAAaE,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAI5D,IAAU;EAC7C,IAAM6D,OAAO,GAAG,IAAIzD,IAAI,CAACJ,IAAI,CAAC8D,OAAO,EAAE,CAAC;EACxC,IAAMC,SAAS,GAAG,CAACF,OAAO,CAACJ,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC;EAC5CI,OAAO,CAACF,OAAO,CAACE,OAAO,CAACtD,OAAO,EAAE,GAAGwD,SAAS,GAAG,CAAC,CAAC;EAClD,IAAMC,aAAa,GAAGH,OAAO,CAACC,OAAO,EAAE;EACvCD,OAAO,CAACI,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EACtB,IAAIJ,OAAO,CAACJ,MAAM,EAAE,KAAK,CAAC,EAAE;IAC1BI,OAAO,CAACI,QAAQ,CAAC,CAAC,EAAE,CAAC,GAAI,CAAC,CAAC,GAAGJ,OAAO,CAACJ,MAAM,EAAE,GAAG,CAAC,IAAI,CAAE,CAAC;;EAE3D,IAAMS,UAAU,GAAG,CACjB,CAAC,GAAGC,IAAI,CAACC,IAAI,CAAC,CAACJ,aAAa,GAAGH,OAAO,CAACC,OAAO,EAAE,IAAI,SAAS,CAAC,EAC9DO,QAAQ,EAAE;EAEZ,IAAIH,UAAU,CAACI,MAAM,KAAK,CAAC,EAAE;IAC3B,aAAWJ,UAAU;GACtB,MAAM;IACL,OAAOA,UAAU;;AAErB,CAAC;AAED,IAAaK,cAAc,GAAG,SAAjBA,cAAcA,CAAIrB,KAAa,EAAEsB,IAAY;EACxD,OAAO,IAAIpE,IAAI,CAACoE,IAAI,EAAEtB,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC3C,OAAO,EAAE;AAC/C,CAAC;IChPYkE,oBAAoB,GAAG,CAClC,IAAI,EACJ,IAAI,EACJ,KAAK,EACL,MAAM,EACN,MAAM,EACN,KAAK,CACG;AAEV,IAAaC,mBAAmB,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAU;AAKtE,IAAaC,kBAAkB,GAAqC;EAClEC,GAAG,EAAE,SAAS;EACdC,GAAG,EAAE,SAAS;EACdC,EAAE,EAAE,SAAS;EACbC,EAAE,EAAE;CACL;AAED,IAAaC,sBAAsB,GAAqC;EACtEJ,GAAG,EAAE,GAAG;EACRC,GAAG,EAAE,GAAG;EACRC,EAAE,EAAE,GAAG;EACPC,EAAE,EAAE;CACL;IClBYE,sBAAsB,GAAmB,CACpD,MAAM,EACN,OAAO,EACP,KAAK,EACL,SAAS,EACT,UAAU,EACV,cAAc,EACd,YAAY,EACZ,eAAe,EACf,cAAc,EACd,QAAQ,CACT;AAED,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAIpD,KAAa;EAAA,OAAKA,KAAK,CAACuC,QAAQ,EAAE,CAACc,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;AAAA;AAEnE,IAAaC,UAAU,GAAG,SAAbA,UAAUA,CAAIpF,IAAW;EACpC,IAAI,CAACA,IAAI,EAAE,OAAO,EAAE;EACpB,OAAUA,IAAI,CAACK,WAAW,EAAE,SAAI6E,MAAM,CAAClF,IAAI,CAACM,QAAQ,EAAE,GAAG,CAAC,CAAC,SAAI4E,MAAM,CACnElF,IAAI,CAACO,OAAO,EAAE,CACf;AACH,CAAC;AAED,IAAa8E,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIvD,KAAa;EAC9C,IAAI,CAACA,KAAK,EAAE,OAAOwD,SAAS;EAC5B,IAAAC,gBAAA,GAA2BzD,KAAK,CAAC0D,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,UAAAC,CAAC;MAAA,OAAIC,QAAQ,CAACD,CAAC,EAAE,EAAE,CAAC;MAAC;IAA9DlB,IAAI,GAAAe,gBAAA;IAAErC,KAAK,GAAAqC,gBAAA;IAAE/B,GAAG,GAAA+B,gBAAA;EACvB,IACEK,MAAM,CAACC,KAAK,CAACrB,IAAI,CAAC,IAClBoB,MAAM,CAACC,KAAK,CAAC3C,KAAK,CAAC,IACnB0C,MAAM,CAACC,KAAK,CAACrC,GAAG,CAAC,IACjBN,KAAK,GAAG,CAAC,IACTA,KAAK,GAAG,EAAE,IACVM,GAAG,GAAG,CAAC,IACPA,GAAG,GAAG,EAAE,EACR;IACA,OAAO8B,SAAS;;EAElB,IAAMtF,IAAI,GAAG,IAAII,IAAI,CAACoE,IAAI,EAAEtB,KAAK,GAAG,CAAC,EAAEM,GAAG,CAAC;EAC3C,IACEoC,MAAM,CAACC,KAAK,CAAC7F,IAAI,CAAC8F,OAAO,EAAE,CAAC,IAC5B9F,IAAI,CAACK,WAAW,EAAE,KAAKmE,IAAI,IAC3BxE,IAAI,CAACM,QAAQ,EAAE,KAAK4C,KAAK,GAAG,CAAC,IAC7BlD,IAAI,CAACO,OAAO,EAAE,KAAKiD,GAAG,EACtB;IACA,OAAO8B,SAAS;;EAElB,OAAOtF,IAAI;AACb,CAAC;AAED,IAAa+F,YAAY,GAAG,SAAfA,YAAYA,CACvBC,MAAe,EACfC,IAAA;MAAAA,IAAA;IAAAA,IAAA,GAAmB,IAAI;;EAEvB,IAAID,MAAM,KAAKV,SAAS,IAAIU,MAAM,KAAK,IAAI,IAAI,CAACJ,MAAM,CAACM,QAAQ,CAACF,MAAM,CAAC,IAAIA,MAAM,GAAG,CAAC,EAAE;IACrF,OAAO,EAAE;;EAEX,IAAMG,IAAI,GACRF,IAAI,KAAK,IAAI,GAAG,CAAC,GAAGA,IAAI,KAAK,IAAI,GAAG,GAAG,GAAG,CAAC;EAC7C,IAAMG,SAAS,GAAGJ,MAAM,GAAGG,IAAI;EAC/B,IAAME,OAAO,GACXJ,IAAI,KAAK,IAAI,GAAGD,MAAM,GAAG7B,IAAI,CAACmC,KAAK,CAACF,SAAS,GAAG,EAAE,CAAC,GAAG,EAAE;EAC1D,YAAUC,OAAO,GAAGJ,IAAI;AAC1B,CAAC;AAED,IAAaM,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIzE,KAAa;EAC/C,IAAIA,KAAK,KAAK,EAAE,EAAE,OAAOwD,SAAS;EAClC,IAAMkB,MAAM,GAAGZ,MAAM,CAAC9D,KAAK,CAAC;EAC5B,IAAI,CAAC8D,MAAM,CAACM,QAAQ,CAACM,MAAM,CAAC,IAAIA,MAAM,GAAG,CAAC,EAAE,OAAOlB,SAAS;EAC5D,OAAOkB,MAAM;AACf,CAAC;AAED,IAAMC,oBAAoB,GACxBhC,oBAAoB,CAACiC,QAAQ,CAAC,KAAK,CAAC,GAChC,KAAK,GACLjC,oBAAoB,CAAC,CAAC,CACZ;AAEhB,IAAakC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,OAAqB;EAAA,OACpDnC,oBAAoB,CAACiC,QAAQ,CAACE,OAAsB,CAAC,GAChDA,OAAuB,GACxBH,oBAAoB;AAAA;AAE1B,IAAaI,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,MAAmB;EAAA,OACjDpC,mBAAmB,CAACgC,QAAQ,CAACI,MAAoB,CAAC,GAC7CA,MAAqB,GACtBpC,mBAAmB,CAAC,CAAC,CAAC;AAAA;AAE5B,IAAaqC,cAAc,GAAG,SAAjBA,cAAcA,CAAID,MAAmB;EAAA,OAChDnC,kBAAkB,CAACkC,eAAe,CAACC,MAAM,CAAC,CAAC;AAAA;AAE7C,IAAaE,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIF,MAAmB;EAAA,OACpD9B,sBAAsB,CAAC6B,eAAe,CAACC,MAAM,CAAC,CAAC;AAAA;AAEjD,IAAaG,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIC,aAA8B;EAAA,OACjEA,aAAa,IAAIA,aAAa,CAAC5C,MAAM,GAAG,CAAC,GACrC4C,aAAa,GACbjC,sBAAsB;AAAA;;;;;;;;;;;;;;;;;;;;ECvG5B;AACA;AACA;AACA;AACA;EACA;;EAEC,aAAY;IAGZ,IAAIkC,MAAM,GAAG,EAAE,CAACC,cAAc;IAE9B,SAASC,UAAUA,CAAA,EAAI;MACtB,IAAIC,OAAO,GAAG,EAAE;MAEhB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAAClD,MAAM,EAAEiD,CAAC,EAAE,EAAE;QAC1C,IAAIE,GAAG,GAAGD,SAAS,CAACD,CAAC,CAAC;QACtB,IAAIE,GAAG,EAAE;UACRH,OAAO,GAAGI,WAAW,CAACJ,OAAO,EAAEK,UAAU,CAACF,GAAG,CAAC,CAAC;QACnD;MACA;MAEE,OAAOH,OAAO;IAChB;IAEC,SAASK,UAAUA,CAAEF,GAAG,EAAE;MACzB,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;QACvD,OAAOA,GAAG;MACb;MAEE,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;QAC5B,OAAO,EAAE;MACZ;MAEE,IAAIG,KAAK,CAACC,OAAO,CAACJ,GAAG,CAAC,EAAE;QACvB,OAAOJ,UAAU,CAACS,KAAK,CAAC,IAAI,EAAEL,GAAG,CAAC;MACrC;MAEE,IAAIA,GAAG,CAACpD,QAAQ,KAAK0D,MAAM,CAACC,SAAS,CAAC3D,QAAQ,IAAI,CAACoD,GAAG,CAACpD,QAAQ,CAACA,QAAQ,EAAE,CAACqC,QAAQ,CAAC,eAAe,CAAC,EAAE;QACrG,OAAOe,GAAG,CAACpD,QAAQ,EAAE;MACxB;MAEE,IAAIiD,OAAO,GAAG,EAAE;MAEhB,KAAK,IAAI7H,GAAG,IAAIgI,GAAG,EAAE;QACpB,IAAIN,MAAM,CAACc,IAAI,CAACR,GAAG,EAAEhI,GAAG,CAAC,IAAIgI,GAAG,CAAChI,GAAG,CAAC,EAAE;UACtC6H,OAAO,GAAGI,WAAW,CAACJ,OAAO,EAAE7H,GAAG,CAAC;QACvC;MACA;MAEE,OAAO6H,OAAO;IAChB;IAEC,SAASI,WAAWA,CAAE5F,KAAK,EAAEoG,QAAQ,EAAE;MACtC,IAAI,CAACA,QAAQ,EAAE;QACd,OAAOpG,KAAK;MACf;MAEE,IAAIA,KAAK,EAAE;QACV,OAAOA,KAAK,GAAG,GAAG,GAAGoG,QAAQ;MAChC;MAEE,OAAOpG,KAAK,GAAGoG,QAAQ;IACzB;IAEC,IAAqCC,MAAM,CAACC,OAAO,EAAE;MACpDf,UAAU,CAACgB,OAAO,GAAGhB,UAAU;MAC/Bc,MAAA,CAAAC,OAAc,GAAGf,UAAU;IAC7B,CAAE,MAAM;MAMNiB,MAAM,CAACjB,UAAU,GAAGA,UAAU;IAChC;EACA,CAAC,GAAE;;;AC5EH;;AAoKA,MAAakB,eAAe,gBAAiB,OAAOC,MAAM,KAAK,WAAW,GAAIA,MAAM,CAACC,QAAQ,KAAKD,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAAC,iBAAiB,CAAC,CAAC,GAAI,YAAY;AA6D9J,MAAaE,oBAAoB,gBAAiB,OAAOF,MAAM,KAAK,WAAW,GAAIA,MAAM,CAACG,aAAa,KAAKH,MAAM,CAACG,aAAa,GAAGH,MAAM,CAAC,sBAAsB,CAAC,CAAC,GAAI,iBAAiB;;AAgVvL;AACA,SAAgBI,MAAMA,CAACC,IAAI,EAAEC,OAAO,EAAE;EACrC,IAAI;IACH,IAAIC,MAAM,GAAGF,IAAI,EAAE;EACrB,CAAE,CAAC,OAAMG,CAAC,EAAE;IACV,OAAOF,OAAO,CAACE,CAAC,CAAC;EACnB;EACC,IAAID,MAAM,IAAIA,MAAM,CAACE,IAAI,EAAE;IAC1B,OAAOF,MAAM,CAACE,IAAI,CAAC,KAAK,CAAC,EAAEH,OAAO,CAAC;EACrC;EACC,OAAOC,MAAM;AACd;;;;;;;;;;;;;;;;;ACzhBA,IAAMG,eAAe,GAAG,IAAIC,MAAM,CAACC,MAAM,CAACC,YAAY,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC;AAC/D,IAAMC,kBAAkB,GAAG,aAAa;AAExC,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAC3BC,QAA6B;EAE7B,QAAQA,QAAQ;IACd,KAAK,OAAO;IACZ,KAAK,KAAK;IACV,KAAK,cAAc;IACnB,KAAK,YAAY;MACf,OAAO,MAAM;IACf,KAAK,eAAe;IACpB,KAAK,cAAc;MACjB,OAAO,QAAQ;IACjB,KAAK,SAAS;IACd,KAAK,QAAQ;MACX,OAAO,QAAQ;IACjB,KAAK,MAAM;IACX,KAAK,UAAU;IACf;MACE,OAAO,MAAM;;AAEnB,CAAC;AAED,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAI3H,KAAa;EACxC,IAAI,OAAO4H,GAAG,KAAK,WAAW,IAAI,OAAOA,GAAG,CAACC,MAAM,KAAK,UAAU,EAAE;IAClE,OAAOD,GAAG,CAACC,MAAM,CAAC7H,KAAK,CAAC;;EAE1B,IAAM8H,SAAS,GAAG9H,KAAK,CAACsB,OAAO,CAAC8F,eAAe,EAAE,QAAQ,CAAC;EAC1D,OAAOtB,KAAK,CAACiC,IAAI,CAACD,SAAS,CAAC,CACzBnE,GAAG,CAAC,UAACqE,KAAI,EAAEC,KAAK;IACf,IAAMC,SAAS,GAAGF,KAAI,CAACG,WAAW,CAAC,CAAC,CAAC;IACrC,IAAID,SAAS,KAAK1E,SAAS,EAAE;MAC3B,OAAO,EAAE;;IAEX,IACG0E,SAAS,IAAI,GAAG,IAAIA,SAAS,IAAI,IAAI,IACtCA,SAAS,KAAK,IAAI,IACjBD,KAAK,KAAK,CAAC,IAAIC,SAAS,IAAI,IAAI,IAAIA,SAAS,IAAI,IAAK,IACtDD,KAAK,KAAK,CAAC,IACVC,SAAS,IAAI,IAAI,IACjBA,SAAS,IAAI,IAAI,IACjBJ,SAAS,CAACM,UAAU,CAAC,CAAC,CAAC,KAAK,IAAK,EACnC;MACA,cAAYF,SAAS,CAAC3F,QAAQ,CAAC,EAAE,CAAC;;IAEpC,IAAIyF,KAAI,KAAK,GAAG,IAAIA,KAAI,KAAK,GAAG,IAAIR,kBAAkB,CAACa,IAAI,CAACL,KAAI,CAAC,EAAE;MACjE,OAAOA,KAAI;;IAEb,cAAYA,KAAI;GACjB,CAAC,CACDM,IAAI,CAAC,EAAE,CAAC;AACb,CAAC;AAED,IAAaC,aAAa,GAAiC,SAA9CA,aAAaA,CAAAC,IAAA;MACxBC,YAAY,GAAAD,IAAA,CAAZC,YAAY;IACZC,WAAW,GAAAF,IAAA,CAAXE,WAAW;IACXC,kBAAkB,GAAAH,IAAA,CAAlBG,kBAAkB;IAClBC,gBAAgB,GAAAJ,IAAA,CAAhBI,gBAAgB;IAChBC,QAAQ,GAAAL,IAAA,CAARK,QAAQ;IACRC,QAAQ,GAAAN,IAAA,CAARM,QAAQ;EAER,IAAAC,SAAA,GAAwBC,QAAQ,CAAqB,IAAI,CAAC;IAAnDC,IAAI,GAAAF,SAAA;IAAEG,OAAO,GAAAH,SAAA;EACpB,IAAAI,UAAA,GAA0CH,QAAQ,CAAqB,IAAI,CAAC;IAArEI,aAAa,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;EACtC,IAAMG,QAAQ,GAAGC,MAAM,CAA8C,IAAI,CAAC;EAC1E,IAAMC,eAAe,GAAGD,MAAM,CAAC,EAAE,CAAC;EAClC,IAAME,cAAc,GAAGF,MAAM,CAAC,KAAK,CAAC;EACpC,IAAMG,QAAQ,GAAGH,MAAM,CAAgB,IAAI,CAAC;EAE5C,IAAMI,SAAS,GAAGC,OAAO,CACvB;IAAA,OAAMnC,uBAAuB,CAACgB,YAAY,CAACf,QAAQ,CAAC;KACpD,CAACe,YAAY,CAACf,QAAQ,CAAC,CACxB;EACD,IAAMmC,aAAa,GAAGD,OAAO,CAAoB;IAC/C,IAAInB,YAAY,CAACf,QAAQ,KAAK,SAAS,EAAE;MACvC,OAAO/E,oBAAoB;;IAE7B,IAAI8F,YAAY,CAACf,QAAQ,KAAK,QAAQ,EAAE;MACtC,OAAO9E,mBAAmB;;IAE5B,OAAO,EAAE;GACV,EAAE,CAAC6F,YAAY,CAACf,QAAQ,CAAC,CAAC;EAE3B,IAAMoC,UAAU,GAAGF,OAAO,CAAC;IACzB,IAAI,OAAOG,QAAQ,KAAK,WAAW,EAAE;MACnC,OAAO,IAAI;;IAEb,OAAOA,QAAQ,CAAChD,IAAI;GACrB,EAAE,EAAE,CAAC;EAEN,IAAMiD,mBAAmB,GAAGC,WAAW,CAAC,UAACC,MAAmB;;IAC1D,IAAMC,KAAK,GAAGD,MAAM,CAACE,aAAa,CAAC,yBAAyB,CAAC;IAC7D,IAAID,KAAK,YAAYE,gBAAgB,IAAIF,KAAK,YAAYG,mBAAmB,EAAE;MAC7E,OAAOH,KAAK,CAACnK,KAAK;;IAEpB,IAAImK,KAAK,YAAYI,iBAAiB,EAAE;MACtC,OAAOJ,KAAK,CAACnK,KAAK;;IAEpB,OAAO,EAAAwK,mBAAA,GAACN,MAAM,CAACO,WAAW,YAAAD,mBAAA,GAAI,EAAE,EAAEE,IAAI,EAAE;GACzC,EAAE,EAAE,CAAC;EAEN,IAAMC,iBAAiB,GAAGV,WAAW,CAAC;IACpC,IAAI,CAACvB,WAAW,CAACkC,OAAO,IAAI,CAACnC,YAAY,CAACoC,KAAK,IAAI,CAACpC,YAAY,CAACf,QAAQ,EAAE;MACzE,OAAO,IAAI;;IAEb,IAAMmD,KAAK,GAAGlD,mBAAmB,CAACc,YAAY,CAACoC,KAAK,CAAC;IACrD,IAAMnD,QAAQ,GAAGC,mBAAmB,CAACc,YAAY,CAACf,QAAQ,CAAC;IAC3D,OAAOgB,WAAW,CAACkC,OAAO,CAACR,aAAa,qBACrBS,KAAK,6BAAsBnD,QAAQ,QAAI,CACzD;GACF,EAAE,CAACe,YAAY,CAACf,QAAQ,EAAEe,YAAY,CAACoC,KAAK,EAAEnC,WAAW,CAAC,CAAC;EAE5D,IAAMoC,UAAU,GAAGb,WAAW,CAAC;IAC7B,IAAIxB,YAAY,CAACsC,IAAI,KAAK,SAAS,EAAE;MACnC7B,OAAO,CAAC,IAAI,CAAC;MACbG,gBAAgB,CAAC,IAAI,CAAC;MACtB;;IAEF,IAAMa,MAAM,GAAGS,iBAAiB,EAAE;IAClC,IAAI,CAACT,MAAM,EAAE;MACXhB,OAAO,CAAC,IAAI,CAAC;MACbG,gBAAgB,CAAC,IAAI,CAAC;MACtBP,QAAQ,CAAC,WAAW,CAAC;MACrB;;IAEF,IAAIM,aAAa,KAAKc,MAAM,EAAE;MAC5B,IAAMc,gBAAgB,GAAGhB,mBAAmB,CAACE,MAAM,CAAC;MACpDV,eAAe,CAACoB,OAAO,GAAGI,gBAAgB;MAC1C,IAAI1B,QAAQ,CAACsB,OAAO,EAAE;QACpBtB,QAAQ,CAACsB,OAAO,CAAC5K,KAAK,GAAGgL,gBAAgB;;MAE3C3B,gBAAgB,CAACa,MAAM,CAAC;;IAE1B,IAAMe,QAAQ,GAAGf,MAAM,CAACgB,qBAAqB,EAAE;IAC/ChC,OAAO,CAAC;MACNiC,GAAG,EAAE9I,IAAI,CAACmC,KAAK,CAACyG,QAAQ,CAACE,GAAG,CAAC;MAC7BC,IAAI,EAAE/I,IAAI,CAACmC,KAAK,CAACyG,QAAQ,CAACG,IAAI,CAAC;MAC/BC,KAAK,EAAEhJ,IAAI,CAACmC,KAAK,CAACyG,QAAQ,CAACI,KAAK,CAAC;MACjCC,MAAM,EAAEjJ,IAAI,CAACmC,KAAK,CAACyG,QAAQ,CAACK,MAAM;KACnC,CAAC;GACH,EAAE,CACD7C,YAAY,CAACsC,IAAI,EACjBJ,iBAAiB,EACjB7B,QAAQ,EACRkB,mBAAmB,EACnBZ,aAAa,CACd,CAAC;EAEF,IAAMmC,kBAAkB,GAAGtB,WAAW,CAAC;IACrC,IAAIP,QAAQ,CAACkB,OAAO,KAAK,IAAI,EAAE;MAC7B;;IAEFlB,QAAQ,CAACkB,OAAO,GAAGpE,MAAM,CAACgF,qBAAqB,CAAC;MAC9C9B,QAAQ,CAACkB,OAAO,GAAG,IAAI;MACvBE,UAAU,EAAE;KACb,CAAC;GACH,EAAE,CAACA,UAAU,CAAC,CAAC;EAEhBW,SAAS,CAAC;IACR,IAAIhD,YAAY,CAACsC,IAAI,KAAK,SAAS,EAAE;MACnCvB,eAAe,CAACoB,OAAO,GAAG,EAAE;MAC5BnB,cAAc,CAACmB,OAAO,GAAG,KAAK;MAC9B1B,OAAO,CAAC,IAAI,CAAC;MACbG,gBAAgB,CAAC,IAAI,CAAC;MACtB;;IAEFkC,kBAAkB,EAAE;GACrB,EAAE,CAAC9C,YAAY,CAACsC,IAAI,EAAEQ,kBAAkB,CAAC,CAAC;EAE3CE,SAAS,CAAC;IACR,IAAIhD,YAAY,CAACsC,IAAI,KAAK,SAAS,EAAE;MACnC,OAAOvH,SAAS;;IAElB,IAAMkI,YAAY,GAAG,SAAfA,YAAYA,CAAA;MAAA,OAASH,kBAAkB,EAAE;;IAC/C,IAAMI,YAAY,GAAG,SAAfA,YAAYA,CAAA;MAAA,OAASJ,kBAAkB,EAAE;;IAC/C/E,MAAM,CAACoF,gBAAgB,CAAC,QAAQ,EAAEF,YAAY,EAAE;MAC9CG,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE;KACV,CAAC;IACFtF,MAAM,CAACoF,gBAAgB,CAAC,QAAQ,EAAED,YAAY,EAAE;MAAEE,OAAO,EAAE;KAAM,CAAC;IAClE9B,QAAQ,CAAC6B,gBAAgB,CAAC,QAAQ,EAAEF,YAAY,EAAE;MAChDG,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE;KACV,CAAC;IACF,IAAMC,aAAa,GAAG,CACpBrD,WAAW,CAACkC,OAAO,EACnBhC,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEgC,OAAO,EACzBjC,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAEiC,OAAO,CAC5B,CAACoB,MAAM,CAACC,OAAO,CAAC;IACjBF,aAAa,CAACG,OAAO,CAAC,UAAAC,OAAO;MAAA,OAC1BA,OAAuB,CAACP,gBAAgB,CAAC,QAAQ,EAAEF,YAAY,EAAE;QAChEG,OAAO,EAAE,IAAI;QACbC,OAAO,EAAE;OACV,CAAC;MACH;IACD,IAAMM,yBAAyB,GAC7B,OAAO5F,MAAM,KAAK,WAAW,GAEvBA,MAMD,CAAC6F,cAAc,GAChB7I,SAAS;IACf,IAAM8I,cAAc,GAAGF,yBAAyB,GAC5C,IAAIA,yBAAyB,CAAC;MAAA,OAAMb,kBAAkB,EAAE;MAAC,GACzD,IAAI;IACR,IAAMgB,gBAAgB,GAAG,CACvBnD,aAAa,EACbV,WAAW,CAACkC,OAAO,EACnBhC,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEgC,OAAO,EACzBjC,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAEiC,OAAO,CAC5B,CAACoB,MAAM,CAACC,OAAO,CAAC;IACjBM,gBAAgB,CAACL,OAAO,CAAC,UAAAC,OAAO;MAAA,OAC9BG,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEE,OAAO,CAACL,OAAsB,CAAC;MAChD;IACD,OAAO;MACL3F,MAAM,CAACiG,mBAAmB,CAAC,QAAQ,EAAEf,YAAY,EAAE;QAAEG,OAAO,EAAE;OAAM,CAAC;MACrErF,MAAM,CAACiG,mBAAmB,CAAC,QAAQ,EAAEd,YAAY,EAAE;QAAEE,OAAO,EAAE;OAAM,CAAC;MACrE9B,QAAQ,CAAC0C,mBAAmB,CAAC,QAAQ,EAAEf,YAAY,EAAE;QAAEG,OAAO,EAAE;OAAM,CAAC;MACvEE,aAAa,CAACG,OAAO,CAAC,UAAAC,OAAO;QAAA,OAC1BA,OAAuB,CAACM,mBAAmB,CAAC,QAAQ,EAAEf,YAAY,EAAE;UACnEG,OAAO,EAAE;SACV,CAAC;QACH;MACDS,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEI,UAAU,EAAE;KAC7B;GACF,EAAE,CACD9D,gBAAgB,EAChBH,YAAY,CAACsC,IAAI,EACjBpC,kBAAkB,EAClB4C,kBAAkB,EAClBnC,aAAa,EACbV,WAAW,CACZ,CAAC;EAEF+C,SAAS,CAAC;IACR,OAAO;MACL,IAAI/B,QAAQ,CAACkB,OAAO,KAAK,IAAI,EAAE;QAC7BpE,MAAM,CAACmG,oBAAoB,CAACjD,QAAQ,CAACkB,OAAO,CAAC;QAC7ClB,QAAQ,CAACkB,OAAO,GAAG,IAAI;;KAE1B;GACF,EAAE,EAAE,CAAC;EAENa,SAAS,CAAC;IACR,IAAIhD,YAAY,CAACsC,IAAI,KAAK,SAAS,EAAE;MACnC;;IAEF,IAAMZ,KAAK,GAAGb,QAAQ,CAACsB,OAAO;IAC9B,IAAI,CAACT,KAAK,EAAE;MACV;;IAEF,IAAI1B,YAAY,CAACmE,OAAO,EAAE;MACxBzC,KAAK,CAAC0C,KAAK,EAAE;MACb;;IAEF1C,KAAK,CAAC0C,KAAK,EAAE;IACb,IAAI1C,KAAK,YAAYE,gBAAgB,EAAE;MACrCF,KAAK,CAAC2C,MAAM,EAAE;;GAEjB,EAAE,CAACrE,YAAY,CAACsC,IAAI,EAAEtC,YAAY,CAACmE,OAAO,EAAExD,aAAa,CAAC,CAAC;EAE5D,IAAM2D,YAAY,GAAG9C,WAAW;IAAA;MAC9B,IAAIxB,YAAY,CAACmE,OAAO,EAAE;QACxB,OAAAI,OAAA,CAAAC,OAAA;;MAEF,IAAM9C,KAAK,GAAGb,QAAQ,CAACsB,OAAO;MAC9B,IAAI,CAACT,KAAK,EAAE;QACV,OAAA6C,OAAA,CAAAC,OAAA;;MACD,OAAAD,OAAA,CAAAC,OAAA,CACKpE,QAAQ,CAACsB,KAAK,CAACnK,KAAK,EAAE,OAAO,CAAC,EAAAmH,IAAA;KACrC,QAAAD,CAAA;MAAA,OAAA8F,OAAA,CAAAE,MAAA,CAAAhG,CAAA;;KAAE,CAACuB,YAAY,CAACmE,OAAO,EAAE/D,QAAQ,CAAC,CAAC;EAEpC,IAAMsE,aAAa,GAAGlD,WAAW,CAC/B,UAACmD,KAAgE;IAC/D,IAAI3E,YAAY,CAACmE,OAAO,EAAE;MACxB,IAAIQ,KAAK,CAACzP,GAAG,KAAK,QAAQ,IAAIyP,KAAK,CAACzP,GAAG,KAAK,OAAO,EAAE;QACnDyP,KAAK,CAACC,cAAc,EAAE;;MAExB;;IAEF,IAAID,KAAK,CAACzP,GAAG,KAAK,OAAO,EAAE;MACzByP,KAAK,CAACC,cAAc,EAAE;MACtB,KAAKN,YAAY,EAAE;MACnB;;IAEF,IAAIK,KAAK,CAACzP,GAAG,KAAK,QAAQ,EAAE;MAC1ByP,KAAK,CAACC,cAAc,EAAE;MACtBvE,QAAQ,CAAC,QAAQ,CAAC;;GAErB,EACD,CAACL,YAAY,CAACmE,OAAO,EAAEG,YAAY,EAAEjE,QAAQ,CAAC,CAC/C;EAED,IAAMwE,UAAU,GAAGrD,WAAW,CAAC;IAC7B,IAAIxB,YAAY,CAACmE,OAAO,IAAInD,cAAc,CAACmB,OAAO,EAAE;MAClD;;IAEF,IAAMT,KAAK,GAAGb,QAAQ,CAACsB,OAAO;IAC9B,IAAI,CAACT,KAAK,EAAE;MACV;;IAEF,IAAIA,KAAK,CAACnK,KAAK,KAAKwJ,eAAe,CAACoB,OAAO,EAAE;MAC3C9B,QAAQ,CAAC,eAAe,CAAC;;GAE5B,EAAE,CAACL,YAAY,CAACmE,OAAO,EAAE9D,QAAQ,CAAC,CAAC;EAEpC,IAAMyE,WAAW,GAAGtD,WAAW,CAC7B,UAACmD,KAA4D;IAC3D,IAAI,CAAC3E,YAAY,CAACmE,OAAO,EAAE;MACzB;;IAEF,IAAMzC,KAAK,GAAGiD,KAAK,CAACI,aAAa;IACjCrD,KAAK,CAACnK,KAAK,GAAGwJ,eAAe,CAACoB,OAAO;GACtC,EACD,CAACnC,YAAY,CAACmE,OAAO,CAAC,CACvB;EAED,IAAMa,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAA;IAC1BhE,cAAc,CAACmB,OAAO,GAAG,IAAI;GAC9B;EAED,IAAM8C,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAA;IACxBjE,cAAc,CAACmB,OAAO,GAAG,KAAK;GAC/B;EAED,IAAM+C,qBAAqB,GAAG1D,WAAW,CACvC,UAACkC,OAAoD;IACnD7C,QAAQ,CAACsB,OAAO,GAAGuB,OAAO;GAC3B,EACD,EAAE,CACH;EAED,IAAI1D,YAAY,CAACsC,IAAI,KAAK,SAAS,IAAI,CAAC9B,IAAI,IAAI,CAACa,UAAU,EAAE;IAC3D,OAAO,IAAI;;EAGb,OAAO8D,YAAY,CACjBC,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAKC,QAAM,CAACC,aAAa,UAChCxF,YAAY,CAACmE,OAAO,GAAGoB,QAAM,CAACE,oBAAoB,GAAG,EACvD,CAAE;mBACU,gBAAgB;IAC5BC,KAAK,EAAE;MACLhD,GAAG,EAAElC,IAAI,CAACkC,GAAG;MACbC,IAAI,EAAEnC,IAAI,CAACmC,IAAI;MACfC,KAAK,EAAEpC,IAAI,CAACoC,KAAK;MACjBC,MAAM,EAAErC,IAAI,CAACqC;;KAGd3B,SAAS,KAAK,QAAQ,GACrBkE,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEC,QAAM,CAACI,cAAc;mBACpB,sBAAsB;kBACvB,0BAAM;IACjBC,YAAY,EAAE7E,eAAe,CAACoB,OAAO;IACrCuD,KAAK,EAAE;MAAE7C,MAAM,EAAE;KAAQ;IACzBgD,GAAG,EAAEX,qBAAqB;IAC1BY,QAAQ,EAAE9F,YAAY,CAACmE,OAAO;IAC9B4B,SAAS,EAAErB,aAAa;IACxBsB,MAAM,EAAEnB,UAAU;IAClBoB,OAAO,EAAEnB,WAAW;IACpBoB,QAAQ,EAAEpB;KAET1D,aAAa,CAAClG,GAAG,CAAC,UAAAiL,MAAM;IAAA,OACvBf,KAAA,CAAAC,aAAA;MAAQnQ,GAAG,EAAEiR,MAAM;MAAE5O,KAAK,EAAE4O;OACzBA,MAAM,CACA;GACV,CAAC,CACK,GAETf,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEC,QAAM,CAACa,aAAa;mBACnB,sBAAsB;IAClCC,IAAI,EAAEnF,SAAS;kBACJ,0BAAM;IACjB0E,YAAY,EAAE7E,eAAe,CAACoB,OAAO;IACrCuD,KAAK,EAAE;MAAE7C,MAAM,EAAE;KAAQ;IACzBgD,GAAG,EAAEX,qBAAqB;IAC1BoB,QAAQ,EAAEtG,YAAY,CAACmE,OAAO;IAC9B4B,SAAS,EAAErB,aAAa;IACxBsB,MAAM,EAAEnB,UAAU;IAClBoB,OAAO,EAAEnB,WAAW;IACpBoB,QAAQ,EAAEpB,WAAW;IACrByB,kBAAkB,EAAEvB,sBAAsB;IAC1CwB,gBAAgB,EAAEvB;IAErB,EACAjF,YAAY,CAACyG,YAAY,IACxBrB,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAEC,QAAM,CAACmB,kBAAkB;IAAEC,IAAI,EAAC;KAC7C3G,YAAY,CAACyG,YAAY,CAE7B,CACG,EACNpF,UAAU,CACX;AACH,CAAC;AC9YM,IAAMuF,2BAA2B,GACtCxB,KAAK,CAACyB,aAAa,CAAkC,IAAI,CAAC;AAqD5D,IAAaC,iBAAiB,GAAG,EAAE;AACnC,IAAaC,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,KAAmB,EAAEC,QAAgB;EAAA,OACnED,KAAK,KAAK,MAAM,GAAG,GAAG,GAAG3L,MAAM,CAACD,QAAQ,CAAC6L,QAAQ,EAAE,EAAE,CAAC,IAAI,GAAG;AAAA;AAE/D,IAAaC,QAAQ,GAA4B,SAApCA,QAAQA,CAAAnH,IAAA;MACnBoH,YAAY,GAAApH,IAAA,CAAZoH,YAAY;IACZC,UAAU,GAAArH,IAAA,CAAVqH,UAAU;IACVC,QAAQ,GAAAtH,IAAA,CAARsH,QAAQ;IACRJ,QAAQ,GAAAlH,IAAA,CAARkH,QAAQ;IACRK,SAAS,GAAAvH,IAAA,CAATuH,SAAS;IACTC,OAAO,GAAAxH,IAAA,CAAPwH,OAAO;IAAAC,qBAAA,GAAAzH,IAAA,CACP0H,gBAAgB;IAAhBA,gBAAgB,GAAAD,qBAAA,cAAG,CAAC,GAAAA,qBAAA;IACpB5Q,KAAK,GAAAmJ,IAAA,CAALnJ,KAAK;IACL8Q,YAAY,GAAA3H,IAAA,CAAZ2H,YAAY;IACZC,eAAe,GAAA5H,IAAA,CAAf4H,eAAe;IACfC,eAAe,GAAA7H,IAAA,CAAf6H,eAAe;IACfC,WAAW,GAAA9H,IAAA,CAAX8H,WAAW;IACX5H,WAAW,GAAAF,IAAA,CAAXE,WAAW;IACXC,kBAAkB,GAAAH,IAAA,CAAlBG,kBAAkB;IAClBC,gBAAgB,GAAAJ,IAAA,CAAhBI,gBAAgB;IAChB2H,wBAAwB,GAAA/H,IAAA,CAAxB+H,wBAAwB;IACxBC,cAAc,GAAAhI,IAAA,CAAdgI,cAAc;IACdC,aAAa,GAAAjI,IAAA,CAAbiI,aAAa;IACbrL,aAAa,GAAAoD,IAAA,CAAbpD,aAAa;IACbsL,YAAY,GAAAlI,IAAA,CAAZkI,YAAY;IACZC,YAAY,GAAAnI,IAAA,CAAZmI,YAAY;IACZC,iBAAiB,GAAApI,IAAA,CAAjBoI,iBAAiB;IAAAC,qBAAA,GAAArI,IAAA,CACjBsI,gBAAgB;IAAhBA,gBAAgB,GAAAD,qBAAA,cAAG,IAAI,GAAAA,qBAAA;IACvBE,kBAAkB,GAAAvI,IAAA,CAAlBuI,kBAAkB;EAElB,IAAMC,qBAAqB,GAAGzH,MAAM,CAAiB,IAAI,CAAC;EAC1D,IAAM0H,iBAAiB,GAAG1H,MAAM,CAAiB,IAAI,CAAC;EACtD,IAAM2H,sBAAsB,GAAGtI,gBAAgB,WAAhBA,gBAAgB,GAAIoI,qBAAqB;EACxE,IAAMG,SAAS,GAAGxI,kBAAkB,WAAlBA,kBAAkB,GAAIsI,iBAAiB;EACzDxF,SAAS,CAAC;IACR,IAAIyF,sBAAsB,CAACtG,OAAO,EAAE;MAClCsG,sBAAsB,CAACtG,OAAO,CAACwG,SAAS,GAAGpB,OAAO;;GAErD,EAAE,CAACA,OAAO,EAAEkB,sBAAsB,CAAC,CAAC;EAErCzF,SAAS,CAAC;IACR,IAAIyF,sBAAsB,CAACtG,OAAO,EAAE;MAClCsG,sBAAsB,CAACtG,OAAO,CAACyG,UAAU,GAAGnB,gBAAgB;;IAE9D,IAAIiB,SAAS,CAACvG,OAAO,EAAE;MACrBuG,SAAS,CAACvG,OAAO,CAACyG,UAAU,GAAGnB,gBAAgB;;GAElD,EAAE,CAACA,gBAAgB,EAAEgB,sBAAsB,EAAEC,SAAS,CAAC,CAAC;EAEzD,IAAMG,cAAc,GAAG1H,OAAO,CAC5B;IAAA,OACExE,aAAa,CAACzB,GAAG,CACf,UAAC8L,KAAK;MAAA,OAAmB;QACvB8B,EAAE,EAAE9B,KAAK;QACT+B,KAAK,EAAE/B,KAAK;QACZpE,KAAK,EAAEmE,eAAe,CAACC,KAAK,EAAEC,QAAQ,CAAC;QACvC+B,QAAQ,EAAElC,iBAAiB;QAC3BmC,OAAO,EAAE;OACV;KAAC,CACH;KACH,CAACtM,aAAa,EAAEsK,QAAQ,CAAC,CAC1B;EAED,IAAA3G,SAAA,GAAwCC,QAAQ,CAAesI,cAAc,CAAC;IAAvEK,YAAY,GAAA5I,SAAA;IAAE6I,eAAe,GAAA7I,SAAA;EAEpC0C,SAAS,CAAC;IACRmG,eAAe,CAAC,UAAAC,IAAI;MAClB,IAAMC,WAAW,GAAG,IAAIC,GAAG,CAACF,IAAI,CAAClO,GAAG,CAAC,UAAAqO,MAAM;QAAA,OAAI,CAACA,MAAM,CAACT,EAAE,EAAES,MAAM,CAAC;QAAC,CAAC;MACpE,IAAMC,WAAW,GAAiB7M,aAAa,CAACzB,GAAG,CAAC,UAAA8L,KAAK;QACvD,IAAMyC,QAAQ,GAAGJ,WAAW,CAACK,GAAG,CAAC1C,KAAK,CAAC;QACvC,IAAIyC,QAAQ,EAAE;UACZ,OAAOA,QAAQ;;QAEjB,OAAO;UACLX,EAAE,EAAE9B,KAAK;UACT+B,KAAK,EAAE/B,KAAK;UACZpE,KAAK,EAAEmE,eAAe,CAACC,KAAK,EAAEC,QAAQ,CAAC;UACvC+B,QAAQ,EAAElC,iBAAiB;UAC3BmC,OAAO,EAAE;SACV;OACF,CAAC;MACF,OAAOO,WAAW;KACnB,CAAC;GACH,EAAE,CAAC7M,aAAa,EAAEsK,QAAQ,CAAC,CAAC;EAC7B,IAAM0C,cAAc,GAAGxI,OAAO,CAC5B;IAAA,OAAM+H,YAAY,CAAC3F,MAAM,CAAC,UAAAgG,MAAM;MAAA,OAAIA,MAAM,CAACN,OAAO;MAAC;KACnD,CAACC,YAAY,CAAC,CACf;EAED,IAAMU,WAAW,GAAG;IAClBzC,YAAY,EAAZA,YAAY;IACZC,UAAU,EAAVA,UAAU;IACVC,QAAQ,EAARA,QAAQ;IACRJ,QAAQ,EAARA,QAAQ;IACRtK,aAAa,EAAbA,aAAa;IACbuM,YAAY,EAAZA,YAAY;IACZC,eAAe,EAAfA,eAAe;IACfd,gBAAgB,EAAhBA;GACD;EACD,IAAMwB,cAAc,GAAGnC,YAAY,GAAGA,YAAY,CAACoB,EAAE,GAAG,EAAE;EAC1D,IAAMgB,UAAU,GAAG;IACjBxC,SAAS,EAATA,SAAS;IACTL,QAAQ,EAARA,QAAQ;IACRG,UAAU,EAAVA,UAAU;IACVC,QAAQ,EAARA,QAAQ;IACRzQ,KAAK,EAALA,KAAK;IACLiT,cAAc,EAAEA,cAAc;IAC9BlC,eAAe,EAAfA,eAAe;IACfC,eAAe,EAAfA,eAAe;IACfjL,aAAa,EAAbA,aAAa;IACbsL,YAAY,EAAZA,YAAY;IACZC,YAAY,EAAZA,YAAY;IACZC,iBAAiB,EAAjBA,iBAAiB;IACjBe,YAAY,EAAES;GACf;EAED,IAAAjJ,UAAA,GAAwCH,QAAQ,CAAe;MAC7D+B,IAAI,EAAE,SAAS;MACfF,KAAK,EAAE,IAAI;MACXnD,QAAQ,EAAE,IAAI;MACd8K,OAAO,EAAE,IAAI;MACb5F,OAAO,EAAE,KAAK;MACdsC,YAAY,EAAE;KACf,CAAC;IAPKzG,YAAY,GAAAU,UAAA;IAAEsJ,eAAe,GAAAtJ,UAAA;EAQpC,IAAMuJ,uBAAuB,GAAGnJ,MAAM,CAAsB,IAAI,CAAC;EAEjE,IAAMoJ,YAAY,GAAG1I,WAAW,CAAC;IAC/BwI,eAAe,CAAC,UAAAZ,IAAI;MAClB,IAAIA,IAAI,CAAC9G,IAAI,KAAK,SAAS,EAAE;QAC3B,OAAO8G,IAAI;;MAEb,OAAO;QACL9G,IAAI,EAAE,SAAS;QACfF,KAAK,EAAE,IAAI;QACXnD,QAAQ,EAAE,IAAI;QACd8K,OAAO,EAAE,IAAI;QACb5F,OAAO,EAAE,KAAK;QACdsC,YAAY,EAAE;OACf;KACF,CAAC;GACH,EAAE,EAAE,CAAC;EACN,IAAM0D,UAAU,GAAGrJ,MAAM,CAAC,IAAI,CAAC;EAC/BkC,SAAS,CAAC;IACR,OAAO;MACLmH,UAAU,CAAChI,OAAO,GAAG,KAAK;KAC3B;GACF,EAAE,EAAE,CAAC;EAEN,IAAMiI,aAAa,GAAG5I,WAAW,CAC/B,UAAC6I,MAAgD;IAC/C,IAAIrK,YAAY,CAACsC,IAAI,KAAK,SAAS,EAAE;MACnC;;IAEFgI,OAAO,CAACC,KAAK,CAAC,eAAe,EAAE;MAC7BnI,KAAK,EAAEpC,YAAY,CAACoC,KAAK;MACzBnD,QAAQ,EAAEe,YAAY,CAACf,QAAQ;MAC/BoL,MAAM,EAANA;KACD,CAAC;IACFH,YAAY,EAAE;GACf,EACD,CAACA,YAAY,EAAElK,YAAY,CAACf,QAAQ,EAAEe,YAAY,CAACsC,IAAI,EAAEtC,YAAY,CAACoC,KAAK,CAAC,CAC7E;EAED,IAAMoI,aAAa,GAAGhJ,WAAW,WACxBjK,KAAa,EAAEwS,OAAsB;IAAA;MAC1C,IAAI,CAAC7B,YAAY,EAAE;QACjB,OAAA3D,OAAA,CAAAC,OAAA;;MAEF,IAAIxE,YAAY,CAACsC,IAAI,KAAK,SAAS,IAAItC,YAAY,CAACmE,OAAO,EAAE;QAC3D,OAAAI,OAAA,CAAAC,OAAA;;MAEF,IAAI,CAACxE,YAAY,CAACoC,KAAK,IAAI,CAACpC,YAAY,CAACf,QAAQ,EAAE;QACjD,OAAAsF,OAAA,CAAAC,OAAA;;MAEF,IAAMpC,KAAK,GAAGpC,YAAY,CAACoC,KAAK;MAChC,IAAMnD,QAAQ,GAAGe,YAAY,CAACf,QAAQ;MACtC+K,eAAe,CAAC,UAAAZ,IAAI;QAClB,IACEA,IAAI,CAAC9G,IAAI,KAAK,SAAS,IACvB8G,IAAI,CAACjF,OAAO,IACZiF,IAAI,CAAChH,KAAK,KAAKA,KAAK,IACpBgH,IAAI,CAACnK,QAAQ,KAAKA,QAAQ,EAC1B;UACA,OAAOmK,IAAI;;QAEb,OAAAqB,QAAA,KAAYrB,IAAI;UAAEjF,OAAO,EAAE,IAAI;UAAEsC,YAAY,EAAE;;OAChD,CAAC;MAAC,OAAAlC,OAAA,CAAAC,OAAA,CAAAnG,MAAA,aACC;QAAA,OAAAkG,OAAA,CAAAC,OAAA,CACI0D,YAAY,CAAC;UAAE9F,KAAK,EAALA,KAAK;UAAEnD,QAAQ,EAARA,QAAQ;UAAE1H,KAAK,EAALA,KAAK;UAAEwS,OAAO,EAAPA;SAAS,CAAC,EAAArL,IAAA;UACvD,IAAI,CAACyL,UAAU,CAAChI,OAAO,EAAE;YACvB;;UAEF6H,eAAe,CAAC,UAAAZ,IAAI;YAClB,IACEA,IAAI,CAAC9G,IAAI,KAAK,SAAS,IACvB8G,IAAI,CAAChH,KAAK,KAAKA,KAAK,IACpBgH,IAAI,CAACnK,QAAQ,KAAKA,QAAQ,EAC1B;cACA,OAAOmK,IAAI;;YAEb,OAAO;cACL9G,IAAI,EAAE,SAAS;cACfF,KAAK,EAAE,IAAI;cACXnD,QAAQ,EAAE,IAAI;cACd8K,OAAO,EAAE,IAAI;cACb5F,OAAO,EAAE,KAAK;cACdsC,YAAY,EAAE;aACf;WACF,CAAC;;OACH,YAAQiE,KAAK,EAAE;QACdJ,OAAO,CAACI,KAAK,CAAC,gBAAgB,EAAE;UAC9BtI,KAAK,EAALA,KAAK;UACLnD,QAAQ,EAARA,QAAQ;UACR8K,OAAO,EAAPA,OAAO;UACPY,OAAO,EAAED,KAAK,YAAYE,KAAK,GAAGF,KAAK,CAACC,OAAO,GAAG;SACnD,CAAC;QACF,IAAI,CAACR,UAAU,CAAChI,OAAO,EAAE;UACvB;;QAEF6H,eAAe,CAAC,UAAAZ,IAAI;UAClB,IACEA,IAAI,CAAC9G,IAAI,KAAK,SAAS,IACvB8G,IAAI,CAAChH,KAAK,KAAKA,KAAK,IACpBgH,IAAI,CAACnK,QAAQ,KAAKA,QAAQ,EAC1B;YACA,OAAOmK,IAAI;;UAEb,OAAAqB,QAAA,KACKrB,IAAI;YACPjF,OAAO,EAAE,KAAK;YACdsC,YAAY,EAAE;;SAEjB,CAAC;OACH;KACF,QAAAhI,CAAA;MAAA,OAAA8F,OAAA,CAAAE,MAAA,CAAAhG,CAAA;;KACD,CAACuB,YAAY,EAAEkI,YAAY,CAAC,CAC7B;EAED,IAAM2C,UAAU,GAAGrJ,WAAW,CAAC,UAACY,KAAa,EAAEnD,QAAsB;IACnEqL,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAE;MAAEnI,KAAK,EAALA,KAAK;MAAEnD,QAAQ,EAARA;KAAU,CAAC;IAC5D+K,eAAe,CAAC;MACd1H,IAAI,EAAE,UAAU;MAChBF,KAAK,EAALA,KAAK;MACLnD,QAAQ,EAARA,QAAQ;MACR8K,OAAO,EAAE,IAAI;MACb5F,OAAO,EAAE,KAAK;MACdsC,YAAY,EAAE;KACf,CAAC;GACH,EAAE,EAAE,CAAC;EAEN,IAAMqE,YAAY,GAAGtJ,WAAW,CAC9B,UAACY,KAAa,EAAEnD,QAAsB,EAAE8K,OAAuB;IAC7D,IAAI/J,YAAY,CAACmE,OAAO,EAAE;MACxBmG,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAE;QAC/CF,MAAM,EAAE,SAAS;QACjBjI,KAAK,EAALA,KAAK;QACLnD,QAAQ,EAARA;OACD,CAAC;MACF;;IAEFqL,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAE;MAAEnI,KAAK,EAALA,KAAK;MAAEnD,QAAQ,EAARA,QAAQ;MAAE8K,OAAO,EAAPA;KAAS,CAAC;IACvEC,eAAe,CAAC;MACd1H,IAAI,EAAE,SAAS;MACfF,KAAK,EAALA,KAAK;MACLnD,QAAQ,EAARA,QAAQ;MACR8K,OAAO,EAAPA,OAAO;MACP5F,OAAO,EAAE,KAAK;MACdsC,YAAY,EAAE;KACf,CAAC;GACH,EACD,CAACzG,YAAY,CAACmE,OAAO,CAAC,CACvB;EAEDnB,SAAS,CAAC;IACR,IAAM+H,QAAQ,GAAGd,uBAAuB,CAAC9H,OAAO;IAChD,IAAI4I,QAAQ,EAAE;MACZ,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAA;QAAA,IAAAC,mBAAA,EAAAC,qBAAA,EAAAC,qBAAA;QAAA,OAAU;UAC7B/I,KAAK,GAAA6I,mBAAA,GAAEjL,YAAY,CAACoC,KAAK,YAAA6I,mBAAA,GAAIF,QAAQ,CAAC3I,KAAK;UAC3CnD,QAAQ,GAAAiM,qBAAA,GAAElL,YAAY,CAACf,QAAQ,YAAAiM,qBAAA,GAAIH,QAAQ,CAAC9L,QAAQ;UACpD8K,OAAO,GAAAoB,qBAAA,GAAEnL,YAAY,CAAC+J,OAAO,YAAAoB,qBAAA,GAAIJ,QAAQ,CAAChB;SAC3C;OAAC;MACF,IAAIgB,QAAQ,CAACzI,IAAI,KAAK,SAAS,IAAItC,YAAY,CAACsC,IAAI,KAAK,SAAS,EAAE;QAClEgI,OAAO,CAACc,GAAG,CAAC,cAAc,EAAEJ,eAAe,EAAE,CAAC;;MAEhD,IAAI,CAACD,QAAQ,CAAC5G,OAAO,IAAInE,YAAY,CAACmE,OAAO,EAAE;QAC7CmG,OAAO,CAACc,GAAG,CAAC,gBAAgB,EAAEJ,eAAe,EAAE,CAAC;;MAElD,IAAID,QAAQ,CAAC5G,OAAO,IAAI,CAACnE,YAAY,CAACmE,OAAO,EAAE;QAC7C,IAAMkH,UAAU,GAAGL,eAAe,EAAE;QACpC,IAAIhL,YAAY,CAACsC,IAAI,KAAK,SAAS,EAAE;UACnCgI,OAAO,CAACc,GAAG,CAAC,iBAAiB,EAAEC,UAAU,CAAC;SAC3C,MAAM;UACLf,OAAO,CAACc,GAAG,CAAC,kBAAkB,EAAEC,UAAU,CAAC;;;MAG/C,IAAIN,QAAQ,CAACzI,IAAI,KAAK,SAAS,IAAItC,YAAY,CAACsC,IAAI,KAAK,SAAS,EAAE;QAClEgI,OAAO,CAACc,GAAG,CAAC,YAAY,EAAAX,QAAA,KAAOO,eAAe,EAAE;UAAEM,EAAE,EAAEtL,YAAY,CAACsC;UAAM,CAAC;;;IAG9E2H,uBAAuB,CAAC9H,OAAO,GAAGnC,YAAY;GAC/C,EAAE,CAACA,YAAY,CAAC,CAAC;EAElB,IAAMuL,mBAAmB,GAAGpK,OAAO,CACjC;IAAA,OAAO;MACLnB,YAAY,EAAZA,YAAY;MACZ6K,UAAU,EAAVA,UAAU;MACVC,YAAY,EAAZA;KACD;GAAC,EACF,CAAC9K,YAAY,EAAE6K,UAAU,EAAEC,YAAY,CAAC,CACzC;EAED,OACE1F,KAAA,CAAAC,aAAA;IAAKQ,GAAG,EAAE5F;KACRmF,KAAA,CAAAC,aAAA,CAACvF,aAAa;IACZE,YAAY,EAAEA,YAAY;IAC1BC,WAAW,EAAEA,WAAW;IACxBC,kBAAkB,EAAEwI,SAAS;IAC7BvI,gBAAgB,EAAEsI,sBAAsB;IACxCrI,QAAQ,EAAEoK,aAAa;IACvBnK,QAAQ,EAAE+J;IACV,EACFhF,KAAA,CAAAC,aAAA;IACEQ,GAAG,EAAE6C,SAAS;IACd8C,QAAQ,EAAElD,kBAAkB;IAC5B5C,KAAK,EAAE;MAAE9C,KAAK,EAAE,MAAM;MAAE6I,SAAS,EAAE;;KAEnCrG,KAAA,CAAAC,aAAA,CAAC0C,cAAc,EAAAvK,MAAA,CAAAkO,MAAA,KAAK9B,WAAW,EAAI,CAC/B,EACNxE,KAAA,CAAAC,aAAA;IACEQ,GAAG,EAAE4C,sBAAsB;IAC3BnD,SAAS,EAAEwC,wBAAwB;IACnCpC,KAAK,EAAEmC,WAAW,GAAG;MAAEhF,MAAM,EAAEgF;KAAa,GAAG,EAAE;IACjD2D,QAAQ,EAAElD;KAEVlD,KAAA,CAAAC,aAAA,CAACuB,2BAA2B,CAAC+E,QAAQ;IAACpU,KAAK,EAAEgU;KAC3CnG,KAAA,CAAAC,aAAA,CAAC2C,aAAa,EAAAxK,MAAA,CAAAkO,MAAA,KAAK5B,UAAU,EAAI,CACI,CACnC,CACF;AAEV,CAAC;ACtZM,IAAM8B,qBAAqB,GAS7B,SATQA,qBAAqBA,CAAA7L,IAAA;MAUhCoH,YAAY,GAAApH,IAAA,CAAZoH,YAAY;IACZC,UAAU,GAAArH,IAAA,CAAVqH,UAAU;IACVC,QAAQ,GAAAtH,IAAA,CAARsH,QAAQ;IACRJ,QAAQ,GAAAlH,IAAA,CAARkH,QAAQ;IACRtK,aAAa,GAAAoD,IAAA,CAAbpD,aAAa;IACbuM,YAAY,GAAAnJ,IAAA,CAAZmJ,YAAY;IACZC,eAAe,GAAApJ,IAAA,CAAfoJ,eAAe;IAAAf,qBAAA,GAAArI,IAAA,CACfsI,gBAAgB;IAAhBA,gBAAgB,GAAAD,qBAAA,cAAG,IAAI,GAAAA,qBAAA;EAEvB,IAAMyD,MAAM,GAAiC;IAC3CC,IAAI,EAAE,MAAM;IACZ9U,KAAK,EAAE,KAAK;IACZQ,GAAG,EAAE,KAAK;IACV6E,OAAO,EAAE,IAAI;IACb0P,QAAQ,EAAE,KAAK;IACfC,YAAY,EAAE,MAAM;IACpBC,UAAU,EAAE,MAAM;IAClBC,aAAa,EAAE,MAAM;IACrBC,YAAY,EAAE,MAAM;IACpB5P,MAAM,EAAE;GACT;EACD,IAAM6P,eAAe,GAAG1P,oBAAoB,CAACC,aAAa,CAAC,CAACzB,GAAG,CAC7D,UAAC8L,KAAK;IAAA,OAAmB;MACvB8B,EAAE,EAAE9B,KAAK;MACT+B,KAAK,EAAE8C,MAAM,CAAC7E,KAAK,CAAC;MACpBpE,KAAK,EAAEmE,eAAe,CAACC,KAAK,EAAEC,QAAQ,CAAC;MACvC+B,QAAQ,EAAElC,iBAAiB;MAC3BmC,OAAO,EAAE;KACV;GAAC,CACH;EACD,IAAMoD,eAAe,GAAGlL,OAAO,CAC7B;IAAA,OACE,CAAC+H,YAAY,IAAIkD,eAAe,EAAE7I,MAAM,CAAC,UAAAgG,MAAM;MAAA,OAAIA,MAAM,CAACN,OAAO,KAAK,KAAK;MAAC;KAC9E,CAACC,YAAY,EAAEkD,eAAe,CAAC,CAChC;EACD,IAAME,OAAO,GAAGC,UAAU,CAACC,SAAS,CAACC,aAAa,CAAC,CAAC;EACpD,IAAAnM,SAAA,GAAoCC,QAAQ,CAAgB,IAAI,CAAC;IAA1DmM,UAAU,GAAApM,SAAA;IAAEqM,aAAa,GAAArM,SAAA;EAChC,IAAMsM,SAAS,GAAG,SAAZA,SAASA,CAAIjI,KAAmB;IACpC,IAAI,CAACwE,eAAe,IAAI,CAACd,gBAAgB,EAAE;IAC3C,IAAQwE,MAAM,GAAWlI,KAAK,CAAtBkI,MAAM;MAAEC,IAAI,GAAKnI,KAAK,CAAdmI,IAAI;IACpB,IAAI,CAACA,IAAI,IAAID,MAAM,CAAC/D,EAAE,KAAKgE,IAAI,CAAChE,EAAE,EAAE;IACpCK,eAAe,CAAC,UAAAC,IAAI;MAClB,IAAMH,OAAO,GAAGG,IAAI,CAAC7F,MAAM,CAAC,UAAAgG,MAAM;QAAA,OAAIA,MAAM,CAACN,OAAO,KAAK,KAAK;QAAC;MAC/D,IAAM8D,QAAQ,GAAG9D,OAAO,CAAC+D,SAAS,CAAC,UAAAzD,MAAM;QAAA,OAAIA,MAAM,CAACT,EAAE,KAAK+D,MAAM,CAAC/D,EAAE;QAAC;MACrE,IAAMmE,QAAQ,GAAGhE,OAAO,CAAC+D,SAAS,CAAC,UAAAzD,MAAM;QAAA,OAAIA,MAAM,CAACT,EAAE,KAAKgE,IAAI,CAAChE,EAAE;QAAC;MACnE,IAAIiE,QAAQ,GAAG,CAAC,IAAIE,QAAQ,GAAG,CAAC,EAAE,OAAO7D,IAAI;MAC7C,IAAM8D,KAAK,GAAGC,SAAS,CAAClE,OAAO,EAAE8D,QAAQ,EAAEE,QAAQ,CAAC;MACpD,IAAIG,GAAG,GAAG,CAAC;MACX,OAAOhE,IAAI,CAAClO,GAAG,CAAC,UAAAqO,MAAM;QAAA,OACpBA,MAAM,CAACN,OAAO,KAAK,KAAK,GAAGiE,KAAK,CAACE,GAAG,EAAE,CAAC,GAAG7D,MAAM;QACjD;KACF,CAAC;GACH;EACD,IAAM8D,aAAa,GACjBjI,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEgI,MAAM,CAACC,UAAU;IAC5B7H,KAAK,EAAE;MACL0B,UAAU,EAAEA,UAAU;MACtBC,QAAQ,EAAEA;;KAGZjC,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEgI,MAAM,CAACE,iBAAiB;IACnC9H,KAAK,EAAE;MACL7C,MAAM,EAAEsE,YAAY,GAAG;;KAGxBkF,eAAe,CAACnR,GAAG,CAAC,UAACqO,MAAM,EAAE/J,KAAK;IAAA,OACjC4F,KAAA,CAAAC,aAAA,CAACD,KAAK,CAACqI,QAAQ;MAACvY,GAAG,EAAEqU,MAAM,CAACT;OAC1B1D,KAAA,CAAAC,aAAA,CAACqI,kBAAkB;MACjBnE,MAAM,EAAEA,MAAM;MACdsC,MAAM,EAAEA,MAAM;MACd1C,eAAe,EAAEA,eAAe;MAChCwE,UAAU,EAAEtF,gBAAgB,IAAI,CAAC,CAACc,eAAe;MACjDwD,aAAa,EAAEA,aAAa;MAC5BiB,UAAU,EAAElB,UAAU,KAAKnD,MAAM,CAACT;MAClC,EACDtJ,KAAK,KAAK6M,eAAe,CAACtS,MAAM,GAAG,CAAC,IACnCqL,KAAA,CAAAC,aAAA;MACEC,SAAS,EAAEgI,MAAM,CAACO,0BAA0B;MAC5CnI,KAAK,EAAE;QACL7C,MAAM,EAAEsE,YAAY,GAAG,GAAG;QAC1B2G,SAAS,EAAE3G,YAAY,GAAG;;MAG/B,CACc;GAClB,CAAC,CACE,CAET;EAED,OACE/B,KAAA,CAAAC,aAAA,CAAC0I,UAAU;IAACzB,OAAO,EAAEA,OAAO;IAAEM,SAAS,EAAEvE,gBAAgB,GAAGuE,SAAS,GAAG7R;KACtEqK,KAAA,CAAAC,aAAA,CAAC2I,eAAe;IACdC,KAAK,EAAE5B,eAAe,CAACnR,GAAG,CAAC,UAAAqO,MAAM;MAAA,OAAIA,MAAM,CAACT,EAAE;MAAC;IAC/CoF,QAAQ,EAAEC;KAETd,aAAa,CACE,CACP;AAEjB,CAAC;AAED,IAAMK,kBAAkB,GAOnB,SAPCA,kBAAkBA,CAAAU,KAAA;;MAOhB7E,MAAM,GAAA6E,KAAA,CAAN7E,MAAM;IAAEsC,MAAM,GAAAuC,KAAA,CAANvC,MAAM;IAAE1C,eAAe,GAAAiF,KAAA,CAAfjF,eAAe;IAAEwE,UAAU,GAAAS,KAAA,CAAVT,UAAU;IAAEhB,aAAa,GAAAyB,KAAA,CAAbzB,aAAa;IAAEiB,UAAU,GAAAQ,KAAA,CAAVR,UAAU;EAC5E,IAAAS,YAAA,GAOIC,WAAW,CAAC;MACdxF,EAAE,EAAES,MAAM,CAACT,EAAE;MACbhD,QAAQ,EAAE,CAAC6H;KACZ,CAAC;IATAY,UAAU,GAAAF,YAAA,CAAVE,UAAU;IACVC,SAAS,GAAAH,YAAA,CAATG,SAAS;IACTC,UAAU,GAAAJ,YAAA,CAAVI,UAAU;IACVC,SAAS,GAAAL,YAAA,CAATK,SAAS;IACTC,UAAU,GAAAN,YAAA,CAAVM,UAAU;IACVC,UAAU,GAAAP,YAAA,CAAVO,UAAU;EAKZ,IAAMC,SAAS,GAAG/N,MAAM,CAAgB,IAAI,CAAC;EAC7C,IAAMgO,aAAa,GAAGhO,MAAM,CAAgB,IAAI,CAAC;EACjD,IAAMiO,cAAc,GAAGjO,MAAM,CAAuC,IAAI,CAAC;EACzE,IAAMkO,YAAY,GAAGlO,MAAM,CAAsB,IAAI,CAAC;EAEtDkC,SAAS,CAAC;IACR,OAAO;MACL,IAAI+L,cAAc,CAAC5M,OAAO,EAAE;QAC1Bb,QAAQ,CAAC0C,mBAAmB,CAAC,WAAW,EAAE+K,cAAc,CAAC5M,OAAO,CAAC;QACjE4M,cAAc,CAAC5M,OAAO,GAAG,IAAI;;MAE/B,IAAI6M,YAAY,CAAC7M,OAAO,EAAE;QACxBb,QAAQ,CAAC0C,mBAAmB,CAAC,SAAS,EAAEgL,YAAY,CAAC7M,OAAO,CAAC;QAC7D6M,YAAY,CAAC7M,OAAO,GAAG,IAAI;;KAE9B;GACF,EAAE,EAAE,CAAC;EAEN,IAAMuD,KAAK,GAAwB;IACjCsD,QAAQ,EAAEO,MAAM,CAAC3G,KAAK;IACtBqM,QAAQ,EAAE1F,MAAM,CAAC3G,KAAK;IACtB8L,SAAS,EAAEQ,KAAG,CAACC,SAAS,CAACrV,QAAQ,CAAC4U,SAAS,CAAC;IAC5CC,UAAU,EAAVA;GACD;EAED,IAAMS,iBAAiB,GAA4C,SAA7DA,iBAAiBA,CAA4CzK,KAAK;IACtEA,KAAK,CAAC0K,eAAe,EAAE;IACvB1K,KAAK,CAACC,cAAc,EAAE;IACtBiK,SAAS,CAAC1M,OAAO,GAAGwC,KAAK,CAAC2K,OAAO;IACjCR,aAAa,CAAC3M,OAAO,GAAGoH,MAAM,CAAC3G,KAAK;IACpC+J,aAAa,CAACpD,MAAM,CAACT,EAAE,CAAC;IAExB,IAAMyG,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,SAAqB;MAC5C,IAAIX,SAAS,CAAC1M,OAAO,IAAI,IAAI,IAAI2M,aAAa,CAAC3M,OAAO,IAAI,IAAI,EAAE;MAChE,IAAMsN,KAAK,GAAGD,SAAS,CAACF,OAAO,GAAGT,SAAS,CAAC1M,OAAO;MACnD,IAAMuN,SAAS,GAAG9V,IAAI,CAAC+V,GAAG,CAACpG,MAAM,CAACP,QAAQ,EAAE8F,aAAa,CAAC3M,OAAO,GAAGsN,KAAK,CAAC;MAC1EtG,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAG,UAAAC,IAAI;QAAA,OACpBA,IAAI,CAAClO,GAAG,CAAC,UAAA0U,IAAI;UAAA,OACXA,IAAI,CAAC9G,EAAE,KAAKS,MAAM,CAACT,EAAE,GAAA2B,QAAA,KAAQmF,IAAI;YAAEhN,KAAK,EAAE8M;eAAcE,IAAI;UAC7D;QACF;KACF;IAED,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA;MACjBhB,SAAS,CAAC1M,OAAO,GAAG,IAAI;MACxB2M,aAAa,CAAC3M,OAAO,GAAG,IAAI;MAC5BwK,aAAa,CAAC,IAAI,CAAC;MACnB,IAAIoC,cAAc,CAAC5M,OAAO,EAAE;QAC1Bb,QAAQ,CAAC0C,mBAAmB,CAAC,WAAW,EAAE+K,cAAc,CAAC5M,OAAO,CAAC;QACjE4M,cAAc,CAAC5M,OAAO,GAAG,IAAI;;MAE/B,IAAI6M,YAAY,CAAC7M,OAAO,EAAE;QACxBb,QAAQ,CAAC0C,mBAAmB,CAAC,SAAS,EAAEgL,YAAY,CAAC7M,OAAO,CAAC;QAC7D6M,YAAY,CAAC7M,OAAO,GAAG,IAAI;;KAE9B;IAED4M,cAAc,CAAC5M,OAAO,GAAGoN,eAAe;IACxCP,YAAY,CAAC7M,OAAO,GAAG0N,aAAa;IACpCvO,QAAQ,CAAC6B,gBAAgB,CAAC,WAAW,EAAEoM,eAAe,CAAC;IACvDjO,QAAQ,CAAC6B,gBAAgB,CAAC,SAAS,EAAE0M,aAAa,CAAC;GACpD;EAED,OACEzK,KAAA,CAAAC,aAAA;IACEQ,GAAG,EAAE4I,UAAU;IACfnJ,SAAS,EAAEwK,UAAU,CAACxC,MAAM,CAACyC,qBAAqB,GAAAC,WAAA,OAAAA,WAAA,CAC/C1C,MAAM,CAAC2C,6BAA6B,IAAGrB,UAAU,EAAAoB,WAAA,EAClD;IACFtK,KAAK,EAAEA;KAEPN,KAAA,CAAAC,aAAA,QAAA7H,MAAA,CAAAkO,MAAA;IACEpG,SAAS,EAAEwK,UAAU,CAACxC,MAAM,CAAC4C,qBAAqB,GAAAC,YAAA,OAAAA,YAAA,CAC/C7C,MAAM,CAAC8C,6BAA6B,IAAG,CAACzC,UAAU,EAAAwC,YAAA;KAEjD5B,UAAU,EACVC,SAAS;kBACF,aAAa;IACxB6B,WAAW,EAAE,SAAbA,WAAWA,CAAE1L,KAAK;MAAA,OAAIA,KAAK,CAAC0K,eAAe,EAAE;;MAE7CjK,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAEgI,MAAM,CAACgD,mBAAmB;mBAAc;oBAElD,CACH,EACNlL,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAEgI,MAAM,CAACiD;KAAyB1E,MAAM,CAACtC,MAAM,CAACT,EAAE,CAAC,CAAO,EACxE1D,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEwK,UAAU,CAACxC,MAAM,CAACkD,uBAAuB,GAAAC,YAAA,OAAAA,YAAA,CACjDnD,MAAM,CAACoD,6BAA6B,IAAG9C,UAAU,EAAA6C,YAAA,EAClD;IACFJ,WAAW,EAAEjB,iBAAiB;kBACnB,eAAe;IAC1BzI,IAAI,EAAC,WAAW;wBACC;IACjB,CACE;AAEV,CAAC;AChPM,IAAMgK,oBAAoB,GAmB5B,SAnBQA,oBAAoBA,CAAA5Q,IAAA;;MAoB/BuH,SAAS,GAAAvH,IAAA,CAATuH,SAAS;IACTL,QAAQ,GAAAlH,IAAA,CAARkH,QAAQ;IACRrQ,KAAK,GAAAmJ,IAAA,CAALnJ,KAAK;IACLwQ,UAAU,GAAArH,IAAA,CAAVqH,UAAU;IACVC,QAAQ,GAAAtH,IAAA,CAARsH,QAAQ;IACRO,eAAe,GAAA7H,IAAA,CAAf6H,eAAe;IACfjL,aAAa,GAAAoD,IAAA,CAAbpD,aAAa;IACbuL,YAAY,GAAAnI,IAAA,CAAZmI,YAAY;IACZC,iBAAiB,GAAApI,IAAA,CAAjBoI,iBAAiB;IACjBe,YAAY,GAAAnJ,IAAA,CAAZmJ,YAAY;EAEZ,IAAM0H,OAAO,IAAAC,oBAAA,GACX3H,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAE3F,MAAM,CAAC,UAAAgG,MAAM;IAAA,OAAIA,MAAM,CAACN,OAAO,KAAK,KAAK;IAAC,YAAA4H,oBAAA,GACxDnU,oBAAoB,CAACC,aAAa,CAAC,CAACzB,GAAG,CAAC,UAAA8L,KAAK;IAAA,OAAK;MAChD8B,EAAE,EAAE9B,KAAK;MACTpE,KAAK,EAAEmE,eAAe,CAACC,KAAK,EAAEC,QAAQ;KACvC;GAAC,CAAC;EACL,IAAM6J,eAAe,GAAG,CAAC,CAAC5I,YAAY;EACtC,IAAM6I,YAAY,GAAGD,eAAe;EACpC,IAAME,cAAc,GAAG5L,KAAK,CAAC6L,UAAU,CAACrK,2BAA2B,CAAC;EACpE,IAAM5G,YAAY,GAAGgR,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEhR,YAAY;EACjD,IAAMkR,cAAc,GAAG,IAAIC,GAAG,CAAe,CAC3C,MAAM,EACN,OAAO,EACP,KAAK,EACL,SAAS,EACT,UAAU,EACV,cAAc,EACd,YAAY,EACZ,eAAe,EACf,cAAc,EACd,QAAQ,CACT,CAAC;EACF,IAAMC,SAAS,GAAGR,OAAO,CAAC1V,GAAG,CAAC,UAAAqO,MAAM;IAAA,OAClC,OAAOA,MAAM,KAAK,QAAQ,GAAGA,MAAM,GAAGA,MAAM,CAACT,EAAE;IAChD;EAED,IAAMuI,eAAe,GAAG,SAAlBA,eAAeA,CAAI9H,MAAgC;IAAA,OACtD,OAAOA,MAAM,KAAK,QAAQ,GAAGA,MAAM,GAAGA,MAAM,CAACT,EAAE;GAAiB;EAEnE,IAAMwI,cAAc,GAAG,SAAjBA,cAAcA,CAAIha,IAAU,EAAE2H,QAAsB;IACxD,IAAMsS,aAAa,GAAGR,YAAY;IAClC,IAAMS,cAAc,GAAGN,cAAc,CAACO,GAAG,CAACxS,QAAQ,CAAC;IACnD,IAAMyS,WAAW,GAAGpa,IAAI,CAACqa,UAAU,KAAK,IAAI;IAC5C,IAAMC,kBAAkB,GAAG,IAAI;IAC/B,OAAOL,aAAa,IAAIC,cAAc,IAAIE,WAAW,IAAIE,kBAAkB;GAC5E;EAED,IAAM/G,UAAU,GAAGmG,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEnG,UAAU;EAC7C,IAAMC,YAAY,GAAGkG,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAElG,YAAY;EAEjD,IAAM+G,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA;IACpB,IAAI,CAAC7R,YAAY,IAAIA,YAAY,CAACsC,IAAI,KAAK,SAAS,EAAE;MACpD,OAAO,IAAI;;IAEb,IAAMwP,QAAQ,GAAGlb,KAAK,CAACoW,SAAS,CAAC,UAAA1V,IAAI;MAAA,OAAIA,IAAI,CAACwR,EAAE,KAAK9I,YAAY,CAACoC,KAAK;MAAC;IACxE,IAAM2P,WAAW,GAAGX,SAAS,CAAC1a,OAAO,CAACsJ,YAAY,CAACf,QAAwB,CAAC;IAC5E,IAAI6S,QAAQ,GAAG,CAAC,IAAIC,WAAW,GAAG,CAAC,EAAE;MACnC,OAAO,IAAI;;IAEb,OAAO;MAAED,QAAQ,EAARA,QAAQ;MAAEC,WAAW,EAAXA;KAAa;GACjC;EAED,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA;IACvB,IAAI,CAAChS,YAAY,IAAIA,YAAY,CAACsC,IAAI,KAAK,UAAU,EAAE;MACrD,OAAO,IAAI;;IAEb,IAAMrD,QAAQ,GAAGe,YAAY,CAACf,QAA+B;IAC7D,IAAI,CAACA,QAAQ,IAAI,CAACmS,SAAS,CAACjV,QAAQ,CAAC8C,QAAQ,CAAC,EAAE;MAC9C,OAAO,IAAI;;IAEb,IAAM3H,IAAI,GAAGV,KAAK,CAACqb,IAAI,CAAC,UAAAC,GAAG;MAAA,OAAIA,GAAG,CAACpJ,EAAE,KAAK9I,YAAY,CAACoC,KAAK;MAAC;IAC7D,IAAI,CAAC9K,IAAI,EAAE;MACT,OAAO,IAAI;;IAEb,OAAO;MAAEA,IAAI,EAAJA,IAAI;MAAE2H,QAAQ,EAARA;KAAU;GAC1B;EAED,IAAMkT,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,SAA2C;IAChE,IAAI,CAACvH,UAAU,IAAIjU,KAAK,CAACmD,MAAM,KAAK,CAAC,IAAIqX,SAAS,CAACrX,MAAM,KAAK,CAAC,EAAE;MAC/D;;IAEF,IAAMsY,QAAQ,GAAGR,gBAAgB,EAAE;IACnC,IAAI,CAACQ,QAAQ,EAAE;MACb,IAAMC,WAAW,GAAGlB,SAAS,CAAC,CAAC,CAAC;MAChCvG,UAAU,CAACjU,KAAK,CAAC,CAAC,CAAC,CAACkS,EAAE,EAAEwJ,WAAW,CAAC;MACpC;;IAEF,IAAMR,QAAQ,GAAkBO,QAAQ,CAAlCP,QAAQ;MAAEC,WAAW,GAAKM,QAAQ,CAAxBN,WAAW;IAC3B,QAAQK,SAAS;MACf,KAAK,IAAI;QACPN,QAAQ,GAAGlY,IAAI,CAAC+V,GAAG,CAAC,CAAC,EAAEmC,QAAQ,GAAG,CAAC,CAAC;QACpC;MACF,KAAK,MAAM;QACTA,QAAQ,GAAGlY,IAAI,CAAC2Y,GAAG,CAAC3b,KAAK,CAACmD,MAAM,GAAG,CAAC,EAAE+X,QAAQ,GAAG,CAAC,CAAC;QACnD;MACF,KAAK,MAAM;QACTC,WAAW,GAAGnY,IAAI,CAAC+V,GAAG,CAAC,CAAC,EAAEoC,WAAW,GAAG,CAAC,CAAC;QAC1C;MACF,KAAK,OAAO;QACVA,WAAW,GAAGnY,IAAI,CAAC2Y,GAAG,CAACnB,SAAS,CAACrX,MAAM,GAAG,CAAC,EAAEgY,WAAW,GAAG,CAAC,CAAC;QAC7D;;IAIJlH,UAAU,CAACjU,KAAK,CAACkb,QAAQ,CAAC,CAAChJ,EAAE,EAAEsI,SAAS,CAACW,WAAW,CAAC,CAAC;GACvD;EAED,IAAMS,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAI/Q,MAAmB;IAC/C,IAAI,EAAEA,MAAM,YAAYgR,WAAW,CAAC,EAAE;MACpC,OAAO,KAAK;;IAEd,IAAIhR,MAAM,CAACiR,iBAAiB,EAAE;MAC5B,OAAO,IAAI;;IAEb,IAAMC,OAAO,GAAGlR,MAAM,CAACkR,OAAO;IAC9B,OAAOA,OAAO,KAAK,OAAO,IAAIA,OAAO,KAAK,UAAU,IAAIA,OAAO,KAAK,QAAQ;GAC7E;EAED,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIjO,KAA0C;IACtE,IAAIA,KAAK,CAACkO,gBAAgB,EAAE;MAC1B;;IAEF,IAAIL,oBAAoB,CAAC7N,KAAK,CAAClD,MAAM,CAAC,EAAE;MACtC;;IAEF,IAAI,CAAAzB,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEsC,IAAI,MAAK,SAAS,EAAE;MACpC;;IAEF,QAAQqC,KAAK,CAACzP,GAAG;MACf,KAAK,SAAS;QACZyP,KAAK,CAACC,cAAc,EAAE;QACtBuN,aAAa,CAAC,IAAI,CAAC;QACnB;MACF,KAAK,WAAW;QACdxN,KAAK,CAACC,cAAc,EAAE;QACtBuN,aAAa,CAAC,MAAM,CAAC;QACrB;MACF,KAAK,WAAW;QACdxN,KAAK,CAACC,cAAc,EAAE;QACtBuN,aAAa,CAAC,MAAM,CAAC;QACrB;MACF,KAAK,YAAY;QACfxN,KAAK,CAACC,cAAc,EAAE;QACtBuN,aAAa,CAAC,OAAO,CAAC;QACtB;;IAIJ,IAAI,CAAAnS,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEsC,IAAI,MAAK,UAAU,EAAE;MACrC;;IAEF,IAAMwQ,YAAY,GAAGd,mBAAmB,EAAE;IAC1C,IAAI,CAACc,YAAY,IAAI,CAAChI,YAAY,EAAE;MAClC;;IAEF,IAAInG,KAAK,CAACzP,GAAG,KAAK,OAAO,EAAE;MACzB,IAAI,CAACoc,cAAc,CAACwB,YAAY,CAACxb,IAAI,EAAEwb,YAAY,CAAC7T,QAAQ,CAAC,EAAE;QAC7DqL,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAE;UAC/CF,MAAM,EAAE,cAAc;UACtBjI,KAAK,EAAE0Q,YAAY,CAACxb,IAAI,CAACwR,EAAE;UAC3B7J,QAAQ,EAAE6T,YAAY,CAAC7T;SACxB,CAAC;QACF;;MAEF0F,KAAK,CAACC,cAAc,EAAE;MACtBkG,YAAY,CACVgI,YAAY,CAACxb,IAAI,CAACwR,EAAE,EACpBgK,YAAY,CAAC7T,QAAQ,EACrB,OAAO,CACR;MACD;;IAEF,IAAI0F,KAAK,CAACzP,GAAG,KAAK,QAAQ,EAAE;MAC1B;;IAEF,IAAM6d,cAAc,GAClBpO,KAAK,CAACzP,GAAG,CAAC6E,MAAM,KAAK,CAAC,IACtB,CAAC4K,KAAK,CAACqO,OAAO,IACd,CAACrO,KAAK,CAACsO,OAAO,IACd,CAACtO,KAAK,CAACuO,MAAM;IACf,IAAIH,cAAc,EAAE;MAClB,IAAI,CAACzB,cAAc,CAACwB,YAAY,CAACxb,IAAI,EAAEwb,YAAY,CAAC7T,QAAQ,CAAC,EAAE;QAC7DqL,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAE;UAC/CF,MAAM,EAAE,cAAc;UACtBjI,KAAK,EAAE0Q,YAAY,CAACxb,IAAI,CAACwR,EAAE;UAC3B7J,QAAQ,EAAE6T,YAAY,CAAC7T;SACxB,CAAC;QACF;;MAEF0F,KAAK,CAACC,cAAc,EAAE;MACtBkG,YAAY,CAACgI,YAAY,CAACxb,IAAI,CAACwR,EAAE,EAAEgK,YAAY,CAAC7T,QAAQ,EAAE,KAAK,CAAC;;GAEnE;EAED,OACEmG,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEC,QAAM,CAAC4N,eAAe;IACjCC,QAAQ,EAAE,CAAC;IACXrN,SAAS,EAAE6M,oBAAoB;IAC/BlN,KAAK,EAAE;MACL0B,UAAU,EAAEA,UAAU;MACtBC,QAAQ,EAAEA;;KAGXzQ,KAAK,CAACsE,GAAG,CAAC,UAAAmY,CAAC;IACV,IAAIC,cAAc,GAAG,EAAE;IACvB,IAAID,CAAC,CAACE,YAAY,KAAK,KAAK,EAAE;MAC5BD,cAAc,GAAG,GAAG;KACrB,MAAM,IAAID,CAAC,CAACE,YAAY,KAAK,IAAI,EAAE;MAClCD,cAAc,GAAG,GAAG;;IAGtB,IAAME,UAAU,GAAG,SAAbA,UAAUA,CAAIxM,KAAmB;MACrC,QAAQA,KAAK;QACX,KAAK,MAAM;UACT,OACE5B,KAAA,CAAAC,aAAA;YAAKC,SAAS,EAAEC,QAAM,CAACkO;aACrBrO,KAAA,CAAAC,aAAA;YACEC,SAAS,EACPgO,cAAc,GACV/N,QAAM,CAACmO,gBAAgB,GACvBnO,QAAM,CAACoO,qBAAqB;YAElCC,OAAO,EAAE,SAATA,OAAOA,CAAA;cAAA,OAAQhM,eAAe,CAACyL,CAAC,CAAC;;aAEhCC,cAAc,CACX,EACNlO,KAAA,CAAAC,aAAA,cAAMgO,CAAC,CAACvH,IAAI,CAAO,CACf;QAEV,KAAK,OAAO;UACV,OAAO1G,KAAA,CAAAC,aAAA,eAAOxK,UAAU,CAACwY,CAAC,CAACrc,KAAK,CAAC,CAAQ;QAC3C,KAAK,KAAK;UACR,OAAOoO,KAAA,CAAAC,aAAA,eAAOxK,UAAU,CAACwY,CAAC,CAAC7b,GAAG,CAAC,CAAQ;QACzC,KAAK,SAAS;UACZ,OAAO4N,KAAA,CAAAC,aAAA,eAAOjJ,gBAAgB,CAACiX,CAAC,CAAChX,OAAO,CAAC,CAAQ;QACnD,KAAK,UAAU;UACb,OAAO+I,KAAA,CAAAC,aAAA,eAAOgO,CAAC,CAACtH,QAAQ,IAAI,EAAE,CAAQ;QACxC,KAAK,cAAc;UACjB,OAAO3G,KAAA,CAAAC,aAAA,eAAOxK,UAAU,CAACwY,CAAC,CAACrH,YAAY,CAAC,CAAQ;QAClD,KAAK,YAAY;UACf,OAAO5G,KAAA,CAAAC,aAAA,eAAOxK,UAAU,CAACwY,CAAC,CAACpH,UAAU,CAAC,CAAQ;QAChD,KAAK,eAAe;UAClB,OACE7G,KAAA,CAAAC,aAAA,eAAO7J,YAAY,CAAC6X,CAAC,CAACnH,aAAa,EAAE/D,iBAAiB,CAAC,CAAQ;QAEnE,KAAK,cAAc;UACjB,OACE/C,KAAA,CAAAC,aAAA,eAAO7J,YAAY,CAAC6X,CAAC,CAAClH,YAAY,EAAEhE,iBAAiB,CAAC,CAAQ;QAElE,KAAK,QAAQ;UACX;YACE,IAAM0L,WAAW,GAAGvX,eAAe,CAAC+W,CAAC,CAAC9W,MAAM,CAAC;YAC/C,OACE6I,KAAA,CAAAC,aAAA;cAAKC,SAAS,EAAEC,QAAM,CAACuO;eACrB1O,KAAA,CAAAC,aAAA;cACEC,SAAS,EAAEC,QAAM,CAACwO,WAAW;cAC7BrO,KAAK,EAAE;gBAAEsO,eAAe,EAAExX,cAAc,CAACqX,WAAW;;eAEnDpX,kBAAkB,CAACoX,WAAW,CAAC,CAC3B,EACPzO,KAAA,CAAAC,aAAA;cAAMC,SAAS,EAAEC,QAAM,CAAC0O;eAAaJ,WAAW,CAAQ,CACpD;;QAGV;UACE,OAAO,IAAI;;KAEhB;IACD,OACEzO,KAAA,CAAAC,aAAA;MACEC,SAAS,EAAEC,QAAM,CAAC2O,gBAAgB;MAClCxO,KAAK,EAAE;QAAE7C,MAAM,EAAEyE;OAAW;MAC5BpS,GAAG,EAAKme,CAAC,CAACvK,EAAE;OAEX8H,OAAO,CAAC1V,GAAG,CAAC,UAAAqO,MAAM;MACjB,IAAMtK,QAAQ,GAAGoS,eAAe,CAAC9H,MAAM,CAAC;MACxC,IAAM4K,UAAU,GACd,CAAAnU,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEsC,IAAI,MAAK,SAAS,IAChC,CAAAtC,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEoC,KAAK,MAAKiR,CAAC,CAACvK,EAAE,IAC5B,CAAA9I,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEf,QAAQ,MAAKA,QAAQ;MACrC,IAAMmV,eAAe,GAAG,SAAlBA,eAAeA,CACnBzP,KAAuC;QAEvC,IAAI,CAAA3E,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEsC,IAAI,MAAK,SAAS,EAAE;UACpC,IAAM6B,OAAO,GAAGnE,YAAY,CAACmE,OAAO;UACpCmG,OAAO,CAACc,GAAG,CAAC,eAAe,EAAE;YAAEhJ,KAAK,EAAEiR,CAAC,CAACvK,EAAE;YAAE7J,QAAQ,EAARA,QAAQ;YAAEkF,OAAO,EAAPA;WAAS,CAAC;UAChE,IAAIA,OAAO,EAAE;YACX;;;QAGJ,IAAI0G,UAAU,EAAE;UACdA,UAAU,CAACwI,CAAC,CAACvK,EAAE,EAAE7J,QAAQ,CAAC;;QAE5B0F,KAAK,CAACI,aAAa,CAACX,KAAK,EAAE;OAC5B;MAED,IAAMiQ,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAA;QACzB,IAAI,CAACvJ,YAAY,EAAE;UACjB;;QAEF,IAAI,CAACwG,cAAc,CAAC+B,CAAC,EAAEpU,QAAQ,CAAC,EAAE;UAChCqL,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAE;YAC/CF,MAAM,EAAE,cAAc;YACtBjI,KAAK,EAAEiR,CAAC,CAACvK,EAAE;YACX7J,QAAQ,EAARA;WACD,CAAC;UACF;;QAEF6L,YAAY,CAACuI,CAAC,CAACvK,EAAE,EAAE7J,QAAQ,EAAE,UAAU,CAAC;OACzC;MAED,IAAMqV,iBAAiB,GAAG,SAApBA,iBAAiBA,CACrB3P,KAA0C;QAE1C,IAAI6N,oBAAoB,CAAC7N,KAAK,CAAClD,MAAM,CAAC,EAAE;UACtC;;QAEF,IAAI,CAAC0S,UAAU,IAAI,CAAAnU,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEsC,IAAI,MAAK,UAAU,EAAE;UACpD;;QAEF,IAAIqC,KAAK,CAACzP,GAAG,KAAK,OAAO,EAAE;UACzB,IAAI,CAAC4V,YAAY,EAAE;YACjB;;UAEF,IAAI,CAACwG,cAAc,CAAC+B,CAAC,EAAEpU,QAAQ,CAAC,EAAE;YAChCqL,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAE;cAC/CF,MAAM,EAAE,cAAc;cACtBjI,KAAK,EAAEiR,CAAC,CAACvK,EAAE;cACX7J,QAAQ,EAARA;aACD,CAAC;YACF;;UAEF0F,KAAK,CAACC,cAAc,EAAE;UACtBkG,YAAY,CAACuI,CAAC,CAACvK,EAAE,EAAE7J,QAAQ,EAAE,OAAO,CAAC;UACrC;;QAEF,IAAI0F,KAAK,CAACzP,GAAG,KAAK,QAAQ,EAAE;UAC1B;;QAEF,IAAM6d,cAAc,GAClBpO,KAAK,CAACzP,GAAG,CAAC6E,MAAM,KAAK,CAAC,IACtB,CAAC4K,KAAK,CAACqO,OAAO,IACd,CAACrO,KAAK,CAACsO,OAAO,IACd,CAACtO,KAAK,CAACuO,MAAM;QACf,IAAIH,cAAc,EAAE;UAClB,IAAI,CAACjI,YAAY,EAAE;YACjB;;UAEF,IAAI,CAACwG,cAAc,CAAC+B,CAAC,EAAEpU,QAAQ,CAAC,EAAE;YAChCqL,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAE;cAC/CF,MAAM,EAAE,cAAc;cACtBjI,KAAK,EAAEiR,CAAC,CAACvK,EAAE;cACX7J,QAAQ,EAARA;aACD,CAAC;YACF;;UAEF0F,KAAK,CAACC,cAAc,EAAE;UACtBkG,YAAY,CAACuI,CAAC,CAACvK,EAAE,EAAE7J,QAAQ,EAAE,KAAK,CAAC;;OAEtC;MAED,OACEmG,KAAA,CAAAC,aAAA;QACEnQ,GAAG,EAAKme,CAAC,CAACvK,EAAE,SAAI7J,QAAU;QAC1BqG,SAAS,EAAEC,QAAM,CAACgP,YAAY;uBACjBlB,CAAC,CAACvK,EAAE;0BACD7J,QAAQ;yBACTkV,UAAU,IAAIpZ,SAAS;QACtCqY,QAAQ,EAAEe,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC;QAC7BP,OAAO,EAAEQ,eAAe;QACxBI,aAAa,EAAEH,qBAAqB;QACpCtO,SAAS,EAAEuO,iBAAiB;QAC5B5O,KAAK,EAAE;UACLsD,QAAQ,EACN,OAAOO,MAAM,KAAK,QAAQ,GACtBtC,QAAQ,GACLsC,MAAM,CAAC3G,KAAK,OAAI;UACzBqM,QAAQ,EACN,OAAO1F,MAAM,KAAK,QAAQ,GACtBtC,QAAQ,GACLsC,MAAM,CAAC3G,KAAK;SACtB;QACD6R,KAAK,EAAExV,QAAQ,KAAK,MAAM,GAAGoU,CAAC,CAACvH,IAAI,GAAG/Q;SAErCyY,UAAU,CAACvU,QAAQ,CAAC,CACjB;KAET,CAAC,CACE;GAET,CAAC,CACE;AAEV,CAAC;;;;;;;;;;;;;;;AC1YM,IAAMyV,OAAO,GAA2B,SAAlCA,OAAOA,CAAA3U,IAAA;MAClBzI,IAAI,GAAAyI,IAAA,CAAJzI,IAAI;IACJgQ,SAAS,GAAAvH,IAAA,CAATuH,SAAS;IACTqN,GAAG,GAAA5U,IAAA,CAAH4U,GAAG;IACHC,kBAAkB,GAAA7U,IAAA,CAAlB6U,kBAAkB;IAClBC,iBAAiB,GAAA9U,IAAA,CAAjB8U,iBAAiB;IACjBC,OAAO,GAAA/U,IAAA,CAAP+U,OAAO;IACPvN,OAAO,GAAAxH,IAAA,CAAPwH,OAAO;IACPwN,WAAW,GAAAhV,IAAA,CAAXgV,WAAW;IACX1N,QAAQ,GAAAtH,IAAA,CAARsH,QAAQ;IACRD,UAAU,GAAArH,IAAA,CAAVqH,UAAU;IACVD,YAAY,GAAApH,IAAA,CAAZoH,YAAY;IACZ6N,aAAa,GAAAjV,IAAA,CAAbiV,aAAa;IACbC,cAAc,GAAAlV,IAAA,CAAdkV,cAAc;IACd9M,iBAAiB,GAAApI,IAAA,CAAjBoI,iBAAiB;EAEjB,IAAM+M,UAAU,GAAGpU,MAAM,CAAwB,IAAI,CAAC;EACtD,IAAAR,SAAA,GAAgCC,QAAQ,CAAC,CAAC,CAAC;IAApC4U,QAAQ,GAAA7U,SAAA;IAAE8U,WAAW,GAAA9U,SAAA;EAC5B,IAAAI,UAAA,GAAgCH,QAAQ,CAAC,CAAC,CAAC;IAApC8U,QAAQ,GAAA3U,UAAA;IAAE4U,WAAW,GAAA5U,UAAA;EAC5BsC,SAAS,CAAC;IACR,IAAIkS,UAAU,CAAC/S,OAAO,EAAE;MACtB,IAAMoT,aAAa,GAAGL,UAAU,CAAC/S,OAAO,CAACqT,YAAY,GAAG,GAAG;MAC3D,IAAMC,YAAY,GAAGP,UAAU,CAAC/S,OAAO,CAACuT,WAAW,GAAG,GAAG;MAEzD,IAAIC,WAAW,GAAGre,IAAI,CAACkI,KAAK,GAAG8H,SAAS,GAAGC,OAAO,GAAGJ,YAAY;MACjE,IAAIyO,WAAmB;MACvB,IAAIjB,GAAG,EAAE;QACPiB,WAAW,GAAGte,IAAI,CAACue,EAAE,GAAGd,WAAW,GAAG,GAAG,GAAGU,YAAY,GAAGX,OAAO;QAClE,IAAIc,WAAW,GAAG,CAAC,EAAE;UACnBA,WAAW,GAAGte,IAAI,CAACwe,EAAE,GAAGf,WAAW,GAAG,GAAG,GAAGD,OAAO;;QAErD,IAAMiB,oBAAoB,GAAGN,YAAY,GAAGG,WAAW;QACvD,IAAIG,oBAAoB,GAAGlB,iBAAiB,EAAE;UAC5Ce,WAAW,GAAGf,iBAAiB,GAAGY,YAAY;UAC9CE,WAAW,IAAIrO,SAAS;;OAE3B,MAAM;QACLsO,WAAW,GAAGte,IAAI,CAACwe,EAAE,GAAGf,WAAW,GAAG,GAAG,GAAGC,aAAa,GAAGF,OAAO;QACnE,IAAMkB,qBAAoB,GAAGP,YAAY,GAAGG,WAAW;QACvD,IAAMK,cAAc,GAAGjB,aAAa,GAAGH,iBAAiB;QACxD,IAAImB,qBAAoB,GAAGC,cAAc,EAAE;UACzCL,WAAW,GACTte,IAAI,CAACue,EAAE,GACPb,aAAa,GACbD,WAAW,GAAG,GAAG,GACjBD,OAAO,GACPW,YAAY;;QAEhB,IAAIG,WAAW,GAAGZ,aAAa,EAAE;UAC/BY,WAAW,GAAGf,iBAAiB,GAAGG,aAAa,GAAGS,YAAY;UAC9DE,WAAW,IAAIrO,SAAS;;;MAI5B,IAAM4O,iBAAiB,GAAGX,aAAa,GAAGI,WAAW,GAAGpO,OAAO;MAC/D,IAAI2O,iBAAiB,GAAGtB,kBAAkB,GAAGrN,OAAO,EAAE;QACpDoO,WAAW,GAAGf,kBAAkB,GAAGW,aAAa;;MAElDH,WAAW,CAACO,WAAW,CAAC;MACxBL,WAAW,CAACM,WAAW,CAAC;;GAE3B,EAAE,CACDV,UAAU,EACV5d,IAAI,EACJyd,WAAW,EACXD,OAAO,EACPvN,OAAO,EACPJ,YAAY,EACZ6N,aAAa,EACb1N,SAAS,EACTsN,kBAAkB,EAClBC,iBAAiB,EACjBF,GAAG,CACJ,CAAC;EAEF,OACEvP,KAAA,CAAAC,aAAA;IACEQ,GAAG,EAAEqP,UAAU;IACf5P,SAAS,EACP+P,QAAQ,GACJc,QAAM,CAACC,uBAAuB,GAC9BD,QAAM,CAACE,6BAA6B;IAE1C3Q,KAAK,EAAE;MAAE/C,IAAI,EAAE0S,QAAQ;MAAE3S,GAAG,EAAEyS;;KAE9B/P,KAAA,CAAAC,aAAA,CAAC4P,cAAc;IACb3d,IAAI,EAAEA,IAAI;IACV+P,QAAQ,EAAEA,QAAQ;IAClBD,UAAU,EAAEA,UAAU;IACtBe,iBAAiB,EAAEA;IACnB,CACE;AAEV,CAAC;AAED,IAAamO,sBAAsB,GAK9B,SALQA,sBAAsBA,CAAAlI,KAAA;MAK3B9W,IAAI,GAAA8W,KAAA,CAAJ9W,IAAI;IAAE+P,QAAQ,GAAA+G,KAAA,CAAR/G,QAAQ;IAAED,UAAU,GAAAgH,KAAA,CAAVhH,UAAU;IAAAmP,qBAAA,GAAAnI,KAAA,CAAEjG,iBAAiB;IAAjBA,iBAAiB,GAAAoO,qBAAA,cAAG,IAAI,GAAAA,qBAAA;EAC1D,IAAM7Q,KAAK,GAAG;IACZ2B,QAAQ,EAARA,QAAQ;IACRD,UAAU,EAAVA;GACD;EACD,IAAMoP,gBAAgB,GAAGla,eAAe,CAAChF,IAAI,CAACiF,MAAM,CAAC;EACrD,IAAMka,iBAAiB,GAAGra,gBAAgB,CAAC9E,IAAI,CAAC+E,OAAO,CAAC;EACxD,IAAMqa,SAAS,GAAM7b,UAAU,CAACvD,IAAI,CAACN,KAAK,CAAC,gBAAM6D,UAAU,CAACvD,IAAI,CAACE,GAAG,CAAG;EACvE,IAAMmf,YAAY,GAChBrf,IAAI,CAAC0U,YAAY,IAAI1U,IAAI,CAAC2U,UAAU,GAC7BpR,UAAU,CAACvD,IAAI,CAAC0U,YAAY,CAAC,gBAAMnR,UAAU,CAACvD,IAAI,CAAC2U,UAAU,CAAC,GACjE,EAAE;EACR,IAAMC,aAAa,GAAG1Q,YAAY,CAAClE,IAAI,CAAC4U,aAAa,EAAE/D,iBAAiB,CAAC;EACzE,IAAMgE,YAAY,GAAG3Q,YAAY,CAAClE,IAAI,CAAC6U,YAAY,EAAEhE,iBAAiB,CAAC;EACvE,OACE/C,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAE6Q,QAAM,CAACS,uBAAuB;IAAElR,KAAK,EAAEA;KACrDN,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAE6Q,QAAM,CAACU;KACrBzR,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAE6Q,QAAM,CAACW;KAAcxf,IAAI,CAACwU,IAAI,CAAK,EACjD1G,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACY;KAAcL,SAAS,CAAQ,CACnD,EACNtR,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAE6Q,QAAM,CAACa;KACrB5R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACc;oBAAuB,EAC/C7R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACe;KAAeT,iBAAiB,CAAQ,CAC5D,EACNrR,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAE6Q,QAAM,CAACa;KACrB5R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACc;oBAAuB,EAC/C7R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACe;KAAe5f,IAAI,CAACyU,QAAQ,IAAI,GAAG,CAAQ,CAC/D,EACL4K,YAAY,IACXvR,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAE6Q,QAAM,CAACa;KACrB5R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACc;oBAAuB,EAC/C7R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACe;KAAeP,YAAY,CAAQ,CAE9D,EACAzK,aAAa,IACZ9G,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAE6Q,QAAM,CAACa;KACrB5R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACc;gCAAyB,EACjD7R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACe;KAAehL,aAAa,CAAQ,CAE/D,EACAC,YAAY,IACX/G,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAE6Q,QAAM,CAACa;KACrB5R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACc;gCAAyB,EACjD7R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACe;KAAe/K,YAAY,CAAQ,CAE9D,EACD/G,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAE6Q,QAAM,CAACa;KACrB5R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACc;sCAA0B,EAClD7R,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACe;KACtB9R,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAE6Q,QAAM,CAACgB,aAAa;IAC/BzR,KAAK,EAAE;MAAEsO,eAAe,EAAExX,cAAc,CAACga,gBAAgB;;KAExD/Z,kBAAkB,CAAC+Z,gBAAgB,CAAC,CAChC,EACPpR,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAE6Q,QAAM,CAACiB;KAAoBZ,gBAAgB,CAAQ,CAC/D,CACH,EACL,CAAC,CAAClf,IAAI,CAAC+f,QAAQ,IACdjS,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAE6Q,QAAM,CAACmB;6BACbhgB,IAAI,CAAC+f,QAAQ,OAEtB,CACG;AAEV,CAAC;;;;ACrMM,IAAME,cAAc,GAOtB,SAPQA,cAAcA,CAAAxX,IAAA;MAQzByX,MAAM,GAAAzX,IAAA,CAANyX,MAAM;IACN3P,WAAW,GAAA9H,IAAA,CAAX8H,WAAW;IACX4P,eAAe,GAAA1X,IAAA,CAAf0X,eAAe;IACftQ,YAAY,GAAApH,IAAA,CAAZoH,YAAY;IACZwN,GAAG,GAAA5U,IAAA,CAAH4U,GAAG;IACHnJ,QAAQ,GAAAzL,IAAA,CAARyL,QAAQ;EAER,IAAMkM,SAAS,GAAG5W,MAAM,CAAiB,IAAI,CAAC;EAE9CkC,SAAS,CAAC;IACR,IAAI0U,SAAS,CAACvV,OAAO,EAAE;MACrBuV,SAAS,CAACvV,OAAO,CAACwG,SAAS,GAAG6O,MAAM;;GAEvC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZ,OACEpS,KAAA,CAAAC,aAAA;IACEK,KAAK,EAAE;MACL2M,QAAQ,EAAE,UAAU;MACpB3P,GAAG,EAAEyE,YAAY;MACjBtE,MAAM,EAAEgF,WAAW;MACnB8P,KAAK,EAAEhD,GAAG,GAAG5Z,SAAS,GAAG,CAAC;MAC1B4H,IAAI,EAAEgS,GAAG,GAAG,CAAC,GAAG5Z;KACjB;IACDuK,SAAS,EAAEsS,QAAM,CAACJ,MAAM;IACxBhM,QAAQ,EAAEA,QAAQ;IAClB3F,GAAG,EAAE6R;KAELtS,KAAA,CAAAC,aAAA;IAAKK,KAAK,EAAE;MAAE7C,MAAM,EAAE4U,eAAe;MAAE7U,KAAK,EAAE;;IAAO,CACjD;AAEV,CAAC;;;;;;AC5BM,IAAMiV,QAAQ,GAA4B,SAApCA,QAAQA,CAAA9X,IAAA;MACnBnJ,KAAK,GAAAmJ,IAAA,CAALnJ,KAAK;IACL0B,KAAK,GAAAyH,IAAA,CAALzH,KAAK;IACLgP,SAAS,GAAAvH,IAAA,CAATuH,SAAS;IACTwQ,QAAQ,GAAA/X,IAAA,CAAR+X,QAAQ;IACRC,WAAW,GAAAhY,IAAA,CAAXgY,WAAW;IACXC,UAAU,GAAAjY,IAAA,CAAViY,UAAU;IACVrD,GAAG,GAAA5U,IAAA,CAAH4U,GAAG;EAEH,IAAIsD,CAAC,GAAG,CAAC;EACT,IAAMC,QAAQ,GAAiB,EAAE;EACjC,IAAMC,QAAQ,GAAiB,CAC7B/S,KAAA,CAAAC,aAAA;IACEnQ,GAAG,EAAC,cAAc;IAClBkjB,CAAC,EAAC,GAAG;IACLC,EAAE,EAAE,CAAC;IACLvC,EAAE,EAAEgC,QAAQ;IACZQ,EAAE,EAAE,CAAC;IACLhT,SAAS,EAAEiT,QAAM,CAACC;IAClB,CACH;EACD,SAAAthB,SAAA,GAAAC,+BAAA,CAAmBP,KAAK,GAAAQ,KAAA,IAAAA,KAAA,GAAAF,SAAA,IAAAG,IAAA,GAAE;IAAA,IAAfC,IAAI,GAAAF,KAAA,CAAAG,KAAA;IACb2gB,QAAQ,CAAC3f,IAAI,CACX6M,KAAA,CAAAC,aAAA;MACEnQ,GAAG,EAAE,KAAK,GAAGoC,IAAI,CAACwR,EAAE;MACpBsP,CAAC,EAAC,GAAG;MACLH,CAAC,EAAEA,CAAC;MACJrV,KAAK,EAAEkV,QAAQ;MACfjV,MAAM,EAAEyE,SAAS;MACjBhC,SAAS,EAAEiT,QAAM,CAACE;MAClB,CACH;IACDN,QAAQ,CAAC5f,IAAI,CACX6M,KAAA,CAAAC,aAAA;MACEnQ,GAAG,EAAE,SAAS,GAAGoC,IAAI,CAACwR,EAAE;MACxBsP,CAAC,EAAC,GAAG;MACLC,EAAE,EAAEJ,CAAC,GAAG3Q,SAAS;MACjBwO,EAAE,EAAEgC,QAAQ;MACZQ,EAAE,EAAEL,CAAC,GAAG3Q,SAAS;MACjBhC,SAAS,EAAEiT,QAAM,CAACC;MAClB,CACH;IACDP,CAAC,IAAI3Q,SAAS;;EAGhB,IAAMoR,GAAG,GAAG,IAAI7iB,IAAI,EAAE;EACtB,IAAI8iB,KAAK,GAAG,CAAC;EACb,IAAMC,KAAK,GAAiB,EAAE;EAC9B,IAAIC,KAAK,GAAezT,KAAA,CAAAC,aAAA,cAAQ;EAChC,KAAK,IAAIrI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG1E,KAAK,CAACyB,MAAM,EAAEiD,CAAC,EAAE,EAAE;IACrC,IAAMvH,IAAI,GAAG6C,KAAK,CAAC0E,CAAC,CAAC;IACrB4b,KAAK,CAACrgB,IAAI,CACR6M,KAAA,CAAAC,aAAA;MACEnQ,GAAG,EAAEO,IAAI,CAAC8F,OAAO,EAAE;MACnBsa,EAAE,EAAE8C,KAAK;MACTN,EAAE,EAAE,CAAC;MACLvC,EAAE,EAAE6C,KAAK;MACTL,EAAE,EAAEL,CAAC;MACL3S,SAAS,EAAEiT,QAAM,CAACO;MAClB,CACH;IACD,IACG9b,CAAC,GAAG,CAAC,KAAK1E,KAAK,CAACyB,MAAM,IACrBtE,IAAI,CAAC8F,OAAO,EAAE,GAAGmd,GAAG,CAACnd,OAAO,EAAE,IAC9BjD,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAACzB,OAAO,EAAE,IAAImd,GAAG,CAACnd,OAAO,EAAE,IAExCyB,CAAC,KAAK,CAAC,IACNA,CAAC,GAAG,CAAC,KAAK1E,KAAK,CAACyB,MAAM,IACtBtE,IAAI,CAAC8F,OAAO,EAAE,GAAGmd,GAAG,CAACnd,OAAO,EAAE,IAC9B/F,SAAS,CACPC,IAAI,EACJA,IAAI,CAAC8F,OAAO,EAAE,GAAGjD,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAACzB,OAAO,EAAE,EACvC,aAAa,CACd,CAACA,OAAO,EAAE,IAAImd,GAAG,CAACnd,OAAO,EAAG,EAC/B;MACAsd,KAAK,GACHzT,KAAA,CAAAC,aAAA;QACE+S,CAAC,EAAEO,KAAK;QACRV,CAAC,EAAE,CAAC;QACJrV,KAAK,EAAEmV,WAAW;QAClBlV,MAAM,EAAEoV,CAAC;QACTc,IAAI,EAAEf;QAET;;IAGH,IACErD,GAAG,IACH3X,CAAC,GAAG,CAAC,KAAK1E,KAAK,CAACyB,MAAM,IACtBtE,IAAI,CAAC8F,OAAO,EAAE,IAAImd,GAAG,CAACnd,OAAO,EAAE,IAC/BjD,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAACzB,OAAO,EAAE,GAAGmd,GAAG,CAACnd,OAAO,EAAE,EACtC;MACAsd,KAAK,GACHzT,KAAA,CAAAC,aAAA;QACE+S,CAAC,EAAEO,KAAK,GAAGZ,WAAW;QACtBE,CAAC,EAAE,CAAC;QACJrV,KAAK,EAAEmV,WAAW;QAClBlV,MAAM,EAAEoV,CAAC;QACTc,IAAI,EAAEf;QAET;;IAEHW,KAAK,IAAIZ,WAAW;;EAEtB,OACE3S,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KACXF,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KAAQ4S,QAAQ,CAAK,EAClC9S,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KAAY6S,QAAQ,CAAK,EACtC/S,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KAASsT,KAAK,CAAK,EAChCxT,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KAASuT,KAAK,CAAK,CAC9B;AAER,CAAC;AC1HM,IAAMG,IAAI,GAAwB,SAA5BA,IAAIA,CAAwBC,KAAK;EAC5C,OACE7T,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KACXF,KAAA,CAAAC,aAAA,CAACwS,QAAQ,EAAAra,MAAA,CAAAkO,MAAA,KAAKuN,KAAK,EAAI,CACrB;AAER,CAAC;;;;;;;ACEM,IAAMC,iBAAiB,GAAqC,SAAtDA,iBAAiBA,CAAAnZ,IAAA;MAC5BxI,KAAK,GAAAwI,IAAA,CAALxI,KAAK;IACL4hB,MAAM,GAAApZ,IAAA,CAANoZ,MAAM;IACNC,MAAM,GAAArZ,IAAA,CAANqZ,MAAM;IACNC,MAAM,GAAAtZ,IAAA,CAANsZ,MAAM;IACNC,KAAK,GAAAvZ,IAAA,CAALuZ,KAAK;IACLC,KAAK,GAAAxZ,IAAA,CAALwZ,KAAK;EAEL,OACEnU,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KACXF,KAAA,CAAAC,aAAA;IACEwQ,EAAE,EAAEsD,MAAM;IACVd,EAAE,EAAEe,MAAM;IACVtD,EAAE,EAAEqD,MAAM;IACVb,EAAE,EAAEe,MAAM;IACV/T,SAAS,EAAEkU,QAAM,CAACC,eAAe;IACjCvkB,GAAG,EAAEqC,KAAK,GAAG;IACb,EACF6N,KAAA,CAAAC,aAAA;IACEnQ,GAAG,EAAEqC,KAAK,GAAG,MAAM;IACnB0gB,CAAC,EAAEsB,KAAK;IACRnB,CAAC,EAAEkB,KAAK;IACRhU,SAAS,EAAEkU,QAAM,CAACE;KAEjBniB,KAAK,CACD,CACL;AAER,CAAC;AChBM,IAAMoiB,QAAQ,GAA4B,SAApCA,QAAQA,CAAA5Z,IAAA;MACnB6Z,SAAS,GAAA7Z,IAAA,CAAT6Z,SAAS;IACTnhB,MAAM,GAAAsH,IAAA,CAANtH,MAAM;IACN5B,QAAQ,GAAAkJ,IAAA,CAARlJ,QAAQ;IACR8d,GAAG,GAAA5U,IAAA,CAAH4U,GAAG;IACHxN,YAAY,GAAApH,IAAA,CAAZoH,YAAY;IACZ4Q,WAAW,GAAAhY,IAAA,CAAXgY,WAAW;IACX3Q,UAAU,GAAArH,IAAA,CAAVqH,UAAU;IACVC,QAAQ,GAAAtH,IAAA,CAARsH,QAAQ;EAER,IAAMwS,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAAA;IAC5B,IAAMC,SAAS,GAAiB,EAAE;IAClC,IAAMC,YAAY,GAAiB,EAAE;IACrC,IAAMC,gBAAgB,GAAG7S,YAAY,GAAG,GAAG;IAC3C,KAAK,IAAInK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4c,SAAS,CAACthB,KAAK,CAACyB,MAAM,EAAEiD,CAAC,EAAE,EAAE;MAC/C,IAAMvH,IAAI,GAAGmkB,SAAS,CAACthB,KAAK,CAAC0E,CAAC,CAAC;MAC/B,IAAMtE,WAAW,GAAGjD,IAAI,CAACK,WAAW,EAAE;MACtCikB,YAAY,CAACxhB,IAAI,CACf6M,KAAA,CAAAC,aAAA;QACEnQ,GAAG,EAAEO,IAAI,CAAC8F,OAAO,EAAE;QACnB0c,CAAC,EAAE9Q,YAAY,GAAG,GAAG;QACrBiR,CAAC,EAAEL,WAAW,GAAG/a,CAAC,GAAG+a,WAAW,GAAG,GAAG;QACtCzS,SAAS,EAAEkU,QAAM,CAACS;SAEjBvhB,WAAW,CACP,CACR;MACD,IACEsE,CAAC,KAAK,CAAC,IACPvH,IAAI,CAACK,WAAW,EAAE,KAAK8jB,SAAS,CAACthB,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAAClH,WAAW,EAAE,EAC3D;QACA,IAAMokB,QAAQ,GAAGzkB,IAAI,CAACK,WAAW,EAAE,CAACgE,QAAQ,EAAE;QAC9C,IAAIwf,KAAa;QACjB,IAAI3E,GAAG,EAAE;UACP2E,KAAK,GAAG,CAAC,CAAC,GAAGtc,CAAC,GAAGvH,IAAI,CAACK,WAAW,EAAE,GAAG,CAAC,IAAIiiB,WAAW;SACvD,MAAM;UACLuB,KAAK,GAAG,CAAC,CAAC,GAAGtc,CAAC,GAAGvH,IAAI,CAACK,WAAW,EAAE,IAAIiiB,WAAW;;QAEpD+B,SAAS,CAACvhB,IAAI,CACZ6M,KAAA,CAAAC,aAAA,CAAC6T,iBAAiB;UAChBhkB,GAAG,EAAEglB,QAAQ;UACb3iB,KAAK,EAAE2iB,QAAQ;UACff,MAAM,EAAEpB,WAAW,GAAG/a,CAAC;UACvBoc,MAAM,EAAE,CAAC;UACTC,MAAM,EAAElS,YAAY;UACpBmS,KAAK,EAAEA,KAAK;UACZC,KAAK,EAAES,gBAAgB,GAAG;UAC1B,CACH;;;IAGL,OAAO,CAACF,SAAS,EAAEC,YAAY,CAAC;GACjC;EAED,IAAMI,+BAA+B,GAAG,SAAlCA,+BAA+BA,CAAA;IACnC,IAAML,SAAS,GAAiB,EAAE;IAClC,IAAMC,YAAY,GAAiB,EAAE;IACrC,IAAMC,gBAAgB,GAAG7S,YAAY,GAAG,GAAG;IAC3C,KAAK,IAAInK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4c,SAAS,CAACthB,KAAK,CAACyB,MAAM,EAAEiD,CAAC,EAAE,EAAE;MAC/C,IAAMvH,IAAI,GAAGmkB,SAAS,CAACthB,KAAK,CAAC0E,CAAC,CAAC;MAE/B,IAAMod,OAAO,GAAG,GAAG,GAAGxgB,IAAI,CAACygB,KAAK,CAAC,CAAC5kB,IAAI,CAACM,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;MAC3DgkB,YAAY,CAACxhB,IAAI,CACf6M,KAAA,CAAAC,aAAA;QACEnQ,GAAG,EAAEO,IAAI,CAAC8F,OAAO,EAAE;QACnB0c,CAAC,EAAE9Q,YAAY,GAAG,GAAG;QACrBiR,CAAC,EAAEL,WAAW,GAAG/a,CAAC,GAAG+a,WAAW,GAAG,GAAG;QACtCzS,SAAS,EAAEkU,QAAM,CAACS;SAEjBG,OAAO,CACH,CACR;MACD,IACEpd,CAAC,KAAK,CAAC,IACPvH,IAAI,CAACK,WAAW,EAAE,KAAK8jB,SAAS,CAACthB,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAAClH,WAAW,EAAE,EAC3D;QACA,IAAMokB,QAAQ,GAAGzkB,IAAI,CAACK,WAAW,EAAE,CAACgE,QAAQ,EAAE;QAC9C,IAAIwf,KAAa;QACjB,IAAI3E,GAAG,EAAE;UACP2E,KAAK,GAAG,CAAC,CAAC,GAAGtc,CAAC,GAAGvH,IAAI,CAACM,QAAQ,EAAE,GAAG,CAAC,IAAIgiB,WAAW;SACpD,MAAM;UACLuB,KAAK,GAAG,CAAC,CAAC,GAAGtc,CAAC,GAAGvH,IAAI,CAACM,QAAQ,EAAE,IAAIgiB,WAAW;;QAEjD+B,SAAS,CAACvhB,IAAI,CACZ6M,KAAA,CAAAC,aAAA,CAAC6T,iBAAiB;UAChBhkB,GAAG,EAAEglB,QAAQ;UACb3iB,KAAK,EAAE2iB,QAAQ;UACff,MAAM,EAAEpB,WAAW,GAAG/a,CAAC;UACvBoc,MAAM,EAAE,CAAC;UACTC,MAAM,EAAEW,gBAAgB;UACxBV,KAAK,EAAE1f,IAAI,CAAC0gB,GAAG,CAAChB,KAAK,CAAC;UACtBC,KAAK,EAAES,gBAAgB,GAAG;UAC1B,CACH;;;IAGL,OAAO,CAACF,SAAS,EAAEC,YAAY,CAAC;GACjC;EAED,IAAMQ,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAAA;IAC7B,IAAMT,SAAS,GAAiB,EAAE;IAClC,IAAMC,YAAY,GAAiB,EAAE;IACrC,IAAMC,gBAAgB,GAAG7S,YAAY,GAAG,GAAG;IAC3C,KAAK,IAAInK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4c,SAAS,CAACthB,KAAK,CAACyB,MAAM,EAAEiD,CAAC,EAAE,EAAE;MAC/C,IAAMvH,IAAI,GAAGmkB,SAAS,CAACthB,KAAK,CAAC0E,CAAC,CAAC;MAC/B,IAAMtE,WAAW,GAAGF,cAAc,CAAC/C,IAAI,EAAEgD,MAAM,CAAC;MAChDshB,YAAY,CAACxhB,IAAI,CACf6M,KAAA,CAAAC,aAAA;QACEnQ,GAAG,EAAEwD,WAAW,GAAGjD,IAAI,CAACK,WAAW,EAAE;QACrCmiB,CAAC,EAAE9Q,YAAY,GAAG,GAAG;QACrBiR,CAAC,EAAEL,WAAW,GAAG/a,CAAC,GAAG+a,WAAW,GAAG,GAAG;QACtCzS,SAAS,EAAEkU,QAAM,CAACS;SAEjBvhB,WAAW,CACP,CACR;MACD,IACEsE,CAAC,KAAK,CAAC,IACPvH,IAAI,CAACK,WAAW,EAAE,KAAK8jB,SAAS,CAACthB,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAAClH,WAAW,EAAE,EAC3D;QACA,IAAMokB,QAAQ,GAAGzkB,IAAI,CAACK,WAAW,EAAE,CAACgE,QAAQ,EAAE;QAC9C,IAAIwf,KAAa;QACjB,IAAI3E,GAAG,EAAE;UACP2E,KAAK,GAAG,CAAC,CAAC,GAAGtc,CAAC,GAAGvH,IAAI,CAACM,QAAQ,EAAE,GAAG,CAAC,IAAIgiB,WAAW;SACpD,MAAM;UACLuB,KAAK,GAAG,CAAC,CAAC,GAAGtc,CAAC,GAAGvH,IAAI,CAACM,QAAQ,EAAE,IAAIgiB,WAAW;;QAEjD+B,SAAS,CAACvhB,IAAI,CACZ6M,KAAA,CAAAC,aAAA,CAAC6T,iBAAiB;UAChBhkB,GAAG,EAAEglB,QAAQ;UACb3iB,KAAK,EAAE2iB,QAAQ;UACff,MAAM,EAAEpB,WAAW,GAAG/a,CAAC;UACvBoc,MAAM,EAAE,CAAC;UACTC,MAAM,EAAEW,gBAAgB;UACxBV,KAAK,EAAEA,KAAK;UACZC,KAAK,EAAES,gBAAgB,GAAG;UAC1B,CACH;;;IAGL,OAAO,CAACF,SAAS,EAAEC,YAAY,CAAC;GACjC;EAED,IAAMS,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAAA;IAC5B,IAAMV,SAAS,GAAiB,EAAE;IAClC,IAAMC,YAAY,GAAiB,EAAE;IACrC,IAAIU,UAAU,GAAW,CAAC;IAC1B,IAAMT,gBAAgB,GAAG7S,YAAY,GAAG,GAAG;IAC3C,IAAM7O,KAAK,GAAGshB,SAAS,CAACthB,KAAK;IAC7B,KAAK,IAAI0E,CAAC,GAAG1E,KAAK,CAACyB,MAAM,GAAG,CAAC,EAAEiD,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1C,IAAMvH,IAAI,GAAG6C,KAAK,CAAC0E,CAAC,CAAC;MACrB,IAAIkd,QAAQ,GAAG,EAAE;MACjB,IAAIld,CAAC,KAAK,CAAC,IAAIvH,IAAI,CAACM,QAAQ,EAAE,KAAKuC,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAACjH,QAAQ,EAAE,EAAE;QAE1DmkB,QAAQ,GAAM1hB,cAAc,CAAC/C,IAAI,EAAEgD,MAAM,CAAC,UAAKhD,IAAI,CAACK,WAAW,EAAI;;MAGrE,IAAM4C,WAAW,SAAOW,oBAAoB,CAAC5D,IAAI,CAAG;MAEpDskB,YAAY,CAACxhB,IAAI,CACf6M,KAAA,CAAAC,aAAA;QACEnQ,GAAG,EAAEO,IAAI,CAAC8F,OAAO,EAAE;QACnB0c,CAAC,EAAE9Q,YAAY,GAAG,GAAG;QACrBiR,CAAC,EAAEL,WAAW,IAAI/a,CAAC,GAAG,CAAC2X,GAAG,CAAC;QAC3BrP,SAAS,EAAEkU,QAAM,CAACS;SAEjBvhB,WAAW,CACP,CACR;MAED,IAAIwhB,QAAQ,EAAE;QAEZ,IAAIld,CAAC,KAAK1E,KAAK,CAACyB,MAAM,GAAG,CAAC,EAAE;UAC1B+f,SAAS,CAACvhB,IAAI,CACZ6M,KAAA,CAAAC,aAAA,CAAC6T,iBAAiB;YAChBhkB,GAAG,EAAEglB,QAAQ;YACb3iB,KAAK,EAAE2iB,QAAQ;YACff,MAAM,EAAEpB,WAAW,GAAG/a,CAAC,GAAGyd,UAAU,GAAG1C,WAAW;YAClDqB,MAAM,EAAE,CAAC;YACTC,MAAM,EAAEW,gBAAgB;YACxBV,KAAK,EAAEvB,WAAW,GAAG/a,CAAC,GAAG+a,WAAW,GAAG0C,UAAU,GAAG,GAAG;YACvDlB,KAAK,EAAES,gBAAgB,GAAG;YAC1B,CACH;;QAEHS,UAAU,GAAG,CAAC;;MAEhBA,UAAU,EAAE;;IAEd,OAAO,CAACX,SAAS,EAAEC,YAAY,CAAC;GACjC;EAED,IAAMW,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA;IAC3B,IAAMZ,SAAS,GAAiB,EAAE;IAClC,IAAMC,YAAY,GAAiB,EAAE;IACrC,IAAMC,gBAAgB,GAAG7S,YAAY,GAAG,GAAG;IAC3C,IAAM7O,KAAK,GAAGshB,SAAS,CAACthB,KAAK;IAC7B,KAAK,IAAI0E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG1E,KAAK,CAACyB,MAAM,EAAEiD,CAAC,EAAE,EAAE;MACrC,IAAMvH,IAAI,GAAG6C,KAAK,CAAC0E,CAAC,CAAC;MACrB,IAAMtE,WAAW,GAAMK,iBAAiB,CAACtD,IAAI,EAAEgD,MAAM,EAAE,OAAO,CAAC,UAAKhD,IAAI,CACrEO,OAAO,EAAE,CACT8D,QAAQ,EAAI;MAEfigB,YAAY,CAACxhB,IAAI,CACf6M,KAAA,CAAAC,aAAA;QACEnQ,GAAG,EAAEO,IAAI,CAAC8F,OAAO,EAAE;QACnB0c,CAAC,EAAE9Q,YAAY,GAAG,GAAG;QACrBiR,CAAC,EAAEL,WAAW,GAAG/a,CAAC,GAAG+a,WAAW,GAAG,GAAG;QACtCzS,SAAS,EAAEkU,QAAM,CAACS;SAEjBvhB,WAAW,CACP,CACR;MACD,IACEsE,CAAC,GAAG,CAAC,KAAK1E,KAAK,CAACyB,MAAM,IACtBtE,IAAI,CAACM,QAAQ,EAAE,KAAKuC,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAACjH,QAAQ,EAAE,EAC3C;QACA,IAAMmkB,QAAQ,GAAG1hB,cAAc,CAAC/C,IAAI,EAAEgD,MAAM,CAAC;QAE7CqhB,SAAS,CAACvhB,IAAI,CACZ6M,KAAA,CAAAC,aAAA,CAAC6T,iBAAiB;UAChBhkB,GAAG,EAAEglB,QAAQ,GAAGzkB,IAAI,CAACK,WAAW,EAAE;UAClCyB,KAAK,EAAE2iB,QAAQ;UACff,MAAM,EAAEpB,WAAW,IAAI/a,CAAC,GAAG,CAAC,CAAC;UAC7Boc,MAAM,EAAE,CAAC;UACTC,MAAM,EAAEW,gBAAgB;UACxBV,KAAK,EACHvB,WAAW,IAAI/a,CAAC,GAAG,CAAC,CAAC,GACrBhD,cAAc,CAACvE,IAAI,CAACM,QAAQ,EAAE,EAAEN,IAAI,CAACK,WAAW,EAAE,CAAC,GACjDiiB,WAAW,GACX,GAAG;UAEPwB,KAAK,EAAES,gBAAgB,GAAG;UAC1B,CACH;;;IAGL,OAAO,CAACF,SAAS,EAAEC,YAAY,CAAC;GACjC;EAED,IAAMY,6BAA6B,GAAG,SAAhCA,6BAA6BA,CAAA;IACjC,IAAMb,SAAS,GAAiB,EAAE;IAClC,IAAMC,YAAY,GAAiB,EAAE;IACrC,IAAMnB,KAAK,GAAG/hB,QAAQ,KAAKhC,QAAQ,CAACmD,OAAO,GAAG,CAAC,GAAG,CAAC;IACnD,IAAMgiB,gBAAgB,GAAG7S,YAAY,GAAG,GAAG;IAC3C,IAAM7O,KAAK,GAAGshB,SAAS,CAACthB,KAAK;IAC7B,KAAK,IAAI0E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG1E,KAAK,CAACyB,MAAM,EAAEiD,CAAC,EAAE,EAAE;MACrC,IAAMvH,IAAI,GAAG6C,KAAK,CAAC0E,CAAC,CAAC;MACrB,IAAMtE,WAAW,GAAG3D,uBAAuB,CAAC0D,MAAM,EAAE;QAClDmiB,IAAI,EAAE;OACP,CAAC,CAAChiB,MAAM,CAACnD,IAAI,CAAC;MAEfskB,YAAY,CAACxhB,IAAI,CACf6M,KAAA,CAAAC,aAAA;QACEnQ,GAAG,EAAEO,IAAI,CAAC8F,OAAO,EAAE;QACnB0c,CAAC,EAAE9Q,YAAY,GAAG,GAAG;QACrBiR,CAAC,EAAEL,WAAW,IAAI/a,CAAC,GAAG,CAAC2X,GAAG,CAAC;QAC3BrP,SAAS,EAAEkU,QAAM,CAACS,kBAAkB;QACpC7S,UAAU,EAAEA;SAEX1O,WAAW,CACP,CACR;MACD,IAAIsE,CAAC,KAAK,CAAC,IAAIvH,IAAI,CAACO,OAAO,EAAE,KAAKsC,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAAChH,OAAO,EAAE,EAAE;QACxD,IAAMkkB,QAAQ,GAAMnhB,iBAAiB,CACnCtD,IAAI,EACJgD,MAAM,EACN,OAAO,CACR,UAAKhD,IAAI,CAACO,OAAO,EAAE,SAAIwC,cAAc,CAAC/C,IAAI,EAAEgD,MAAM,CAAG;QACtDqhB,SAAS,CAACvhB,IAAI,CACZ6M,KAAA,CAAAC,aAAA,CAAC6T,iBAAiB;UAChBhkB,GAAG,EAAEglB,QAAQ,GAAGzkB,IAAI,CAACK,WAAW,EAAE;UAClCyB,KAAK,EAAE2iB,QAAQ;UACff,MAAM,EAAEpB,WAAW,GAAG/a,CAAC,GAAG4b,KAAK,GAAGb,WAAW;UAC7CqB,MAAM,EAAE,CAAC;UACTC,MAAM,EAAEW,gBAAgB;UACxBV,KAAK,EAAEvB,WAAW,GAAG/a,CAAC,GAAG4b,KAAK,GAAGb,WAAW,GAAG,GAAG;UAClDwB,KAAK,EAAES,gBAAgB,GAAG;UAC1B,CACH;;;IAIL,OAAO,CAACF,SAAS,EAAEC,YAAY,CAAC;GACjC;EAED,IAAMc,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAAA;IAC5B,IAAMf,SAAS,GAAiB,EAAE;IAClC,IAAMC,YAAY,GAAiB,EAAE;IACrC,IAAMC,gBAAgB,GAAG7S,YAAY,GAAG,GAAG;IAC3C,IAAM7O,KAAK,GAAGshB,SAAS,CAACthB,KAAK;IAC7B,KAAK,IAAI0E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG1E,KAAK,CAACyB,MAAM,EAAEiD,CAAC,EAAE,EAAE;MACrC,IAAMvH,IAAI,GAAG6C,KAAK,CAAC0E,CAAC,CAAC;MACrB,IAAMtE,WAAW,GAAG3D,uBAAuB,CAAC0D,MAAM,EAAE;QAClDmiB,IAAI,EAAE;OACP,CAAC,CAAChiB,MAAM,CAACnD,IAAI,CAAC;MAEfskB,YAAY,CAACxhB,IAAI,CACf6M,KAAA,CAAAC,aAAA;QACEnQ,GAAG,EAAEO,IAAI,CAAC8F,OAAO,EAAE;QACnB0c,CAAC,EAAE9Q,YAAY,GAAG,GAAG;QACrBiR,CAAC,EAAEL,WAAW,IAAI/a,CAAC,GAAG,CAAC2X,GAAG,CAAC;QAC3BrP,SAAS,EAAEkU,QAAM,CAACS,kBAAkB;QACpC7S,UAAU,EAAEA;SAEX1O,WAAW,CACP,CACR;MACD,IAAIsE,CAAC,KAAK,CAAC,IAAIvH,IAAI,CAACO,OAAO,EAAE,KAAKsC,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAAChH,OAAO,EAAE,EAAE;QACxD,IAAM8kB,WAAW,GAAGxiB,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC;QAChC,IAAMkd,QAAQ,GAAMnhB,iBAAiB,CACnC+hB,WAAW,EACXriB,MAAM,EACN,MAAM,CACP,UAAKqiB,WAAW,CAAC9kB,OAAO,EAAE,SAAIwC,cAAc,CAACsiB,WAAW,EAAEriB,MAAM,CAAG;QACpE,IAAMsiB,WAAW,GAAG,CAACtlB,IAAI,CAACQ,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC;QAC9C6jB,SAAS,CAACvhB,IAAI,CACZ6M,KAAA,CAAAC,aAAA,CAAC6T,iBAAiB;UAChBhkB,GAAG,EAAEglB,QAAQ,GAAGY,WAAW,CAAChlB,WAAW,EAAE;UACzCyB,KAAK,EAAE2iB,QAAQ;UACff,MAAM,EAAEpB,WAAW,GAAG/a,CAAC;UACvBoc,MAAM,EAAE,CAAC;UACTC,MAAM,EAAEW,gBAAgB;UACxBV,KAAK,EAAEvB,WAAW,IAAI/a,CAAC,GAAG+d,WAAW,CAAC;UACtCxB,KAAK,EAAES,gBAAgB,GAAG;UAC1B,CACH;;;IAIL,OAAO,CAACF,SAAS,EAAEC,YAAY,CAAC;GACjC;EAED,IAAID,SAAS,GAAiB,EAAE;EAChC,IAAIC,YAAY,GAAiB,EAAE;EACnC,QAAQH,SAAS,CAAC/iB,QAAQ;IACxB,KAAKhC,QAAQ,CAAC4C,IAAI;MAAA,IAAAujB,qBAAA,GACYnB,wBAAwB,EAAE;MAArDC,SAAS,GAAAkB,qBAAA;MAAEjB,YAAY,GAAAiB,qBAAA;MACxB;IACF,KAAKnmB,QAAQ,CAAC6C,WAAW;MAAA,IAAAujB,sBAAA,GACKd,+BAA+B,EAAE;MAA5DL,SAAS,GAAAmB,sBAAA;MAAElB,YAAY,GAAAkB,sBAAA;MACxB;IACF,KAAKpmB,QAAQ,CAAC8C,KAAK;MAAA,IAAAujB,sBAAA,GACWX,yBAAyB,EAAE;MAAtDT,SAAS,GAAAoB,sBAAA;MAAEnB,YAAY,GAAAmB,sBAAA;MACxB;IACF,KAAKrmB,QAAQ,CAAC+C,IAAI;MAAA,IAAAujB,sBAAA,GACYX,wBAAwB,EAAE;MAArDV,SAAS,GAAAqB,sBAAA;MAAEpB,YAAY,GAAAoB,sBAAA;MACxB;IACF,KAAKtmB,QAAQ,CAACiD,GAAG;MAAA,IAAAsjB,sBAAA,GACaV,uBAAuB,EAAE;MAApDZ,SAAS,GAAAsB,sBAAA;MAAErB,YAAY,GAAAqB,sBAAA;MACxB;IACF,KAAKvmB,QAAQ,CAACkD,UAAU;IACxB,KAAKlD,QAAQ,CAACmD,OAAO;MAAA,IAAAqjB,sBAAA,GACSV,6BAA6B,EAAE;MAA1Db,SAAS,GAAAuB,sBAAA;MAAEtB,YAAY,GAAAsB,sBAAA;MACxB;IACF,KAAKxmB,QAAQ,CAACoD,IAAI;MAAA,IAAAqjB,sBAAA,GACYT,wBAAwB,EAAE;MAArDf,SAAS,GAAAwB,sBAAA;MAAEvB,YAAY,GAAAuB,sBAAA;;EAE5B,OACElW,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC,UAAU;IAAC+B,QAAQ,EAAEA,QAAQ;IAAED,UAAU,EAAEA;KACtDhC,KAAA,CAAAC,aAAA;IACE+S,CAAC,EAAE,CAAC;IACJH,CAAC,EAAE,CAAC;IACJrV,KAAK,EAAEmV,WAAW,GAAG6B,SAAS,CAACthB,KAAK,CAACyB,MAAM;IAC3C8I,MAAM,EAAEsE,YAAY;IACpB7B,SAAS,EAAEkU,QAAM,CAAC+B;IAClB,EACDxB,YAAY,OAAGD,SAAS,CACvB;AAER,CAAC;AC/XM,IAAM0B,KAAK,GAAyB,SAA9BA,KAAKA,CAAAzb,IAAA;MAChB0b,QAAQ,GAAA1b,IAAA,CAAR0b,QAAQ;IACRC,MAAM,GAAA3b,IAAA,CAAN2b,MAAM;IACNpU,SAAS,GAAAvH,IAAA,CAATuH,SAAS;IACTqU,UAAU,GAAA5b,IAAA,CAAV4b,UAAU;IACV5G,WAAW,GAAAhV,IAAA,CAAXgV,WAAW;IACXJ,GAAG,GAAA5U,IAAA,CAAH4U,GAAG;EAEH,IAAIiH,IAAY;EAChB,IAAIC,cAAsB;EAC1B,IAAIlH,GAAG,EAAE;IAAA,IAAAmH,qBAAA,GACkBC,uBAAuB,CAC9CN,QAAQ,EACRC,MAAM,EACNpU,SAAS,EACTqU,UAAU,EACV5G,WAAW,CACZ;IANA6G,IAAI,GAAAE,qBAAA;IAAED,cAAc,GAAAC,qBAAA;GAOtB,MAAM;IAAA,IAAAE,sBAAA,GACoBC,oBAAoB,CAC3CR,QAAQ,EACRC,MAAM,EACNpU,SAAS,EACTqU,UAAU,EACV5G,WAAW,CACZ;IANA6G,IAAI,GAAAI,sBAAA;IAAEH,cAAc,GAAAG,sBAAA;;EASvB,OACE5W,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KACXF,KAAA,CAAAC,aAAA;IAAM6W,WAAW,EAAC,KAAK;IAACC,CAAC,EAAEP,IAAI;IAAE7C,IAAI,EAAC;IAAS,EAC/C3T,KAAA,CAAAC,aAAA;IAAS+W,MAAM,EAAEP;IAAkB,CACjC;AAER,CAAC;AAED,IAAMI,oBAAoB,GAAG,SAAvBA,oBAAoBA,CACxBR,QAAiB,EACjBC,MAAe,EACfpU,SAAiB,EACjBqU,UAAkB,EAClB5G,WAAmB;EAEnB,IAAMsH,YAAY,GAAGZ,QAAQ,CAACjc,KAAK,GAAGkc,MAAM,CAAClc,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC;EAC3D,IAAM8c,iBAAiB,GAAGZ,MAAM,CAACzD,CAAC,GAAG0D,UAAU,GAAG,CAAC;EACnD,IAAMY,mBAAmB,GAAGd,QAAQ,CAAC3F,EAAE,GAAGf,WAAW,GAAG,CAAC;EACzD,IAAMyH,6BAA6B,GACjCD,mBAAmB,GAAGb,MAAM,CAAC7F,EAAE,GAAG,EAAE,WAAQ6F,MAAM,CAAC7F,EAAE,GAAGd,WAAW,CAAE;EACvE,IAAM0H,2BAA2B,GAC/BF,mBAAmB,GAAGb,MAAM,CAAC7F,EAAE,GAC3Bd,WAAW,GACX2G,MAAM,CAAC7F,EAAE,GAAG4F,QAAQ,CAAC3F,EAAE,GAAGf,WAAW;EAE3C,IAAM6G,IAAI,UAAQH,QAAQ,CAAC3F,EAAE,UAAI2F,QAAQ,CAACxD,CAAC,GAAG0D,UAAU,GAAG,CAAC,gBACxD5G,WAAW,eACVsH,YAAY,GAAG/U,SAAS,GAAI,CAAC,aAChCkV,6BAA6B,cAC3BF,iBAAiB,eACjBG,2BAA6B;EAEjC,IAAMZ,cAAc,GAAMH,MAAM,CAAC7F,EAAE,SAAIyG,iBAAiB,cACtDZ,MAAM,CAAC7F,EAAE,GAAG,CAAC,WAAIyG,iBAAiB,GAAG,CAAC,eACtCZ,MAAM,CAAC7F,EAAE,GAAG,CAAC,WAAIyG,iBAAiB,GAAG,CAAC,CAAE;EAC1C,OAAO,CAACV,IAAI,EAAEC,cAAc,CAAC;AAC/B,CAAC;AAED,IAAME,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAC3BN,QAAiB,EACjBC,MAAe,EACfpU,SAAiB,EACjBqU,UAAkB,EAClB5G,WAAmB;EAEnB,IAAMsH,YAAY,GAAGZ,QAAQ,CAACjc,KAAK,GAAGkc,MAAM,CAAClc,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC;EAC3D,IAAM8c,iBAAiB,GAAGZ,MAAM,CAACzD,CAAC,GAAG0D,UAAU,GAAG,CAAC;EACnD,IAAMY,mBAAmB,GAAGd,QAAQ,CAAC5F,EAAE,GAAGd,WAAW,GAAG,CAAC;EACzD,IAAMyH,6BAA6B,GACjCD,mBAAmB,GAAGb,MAAM,CAAC5F,EAAE,GAAG,EAAE,WAAQ4F,MAAM,CAAC5F,EAAE,GAAGf,WAAW,CAAE;EACvE,IAAM0H,2BAA2B,GAC/BF,mBAAmB,GAAGb,MAAM,CAAC5F,EAAE,GAC3B,CAACf,WAAW,GACZ2G,MAAM,CAAC5F,EAAE,GAAG2F,QAAQ,CAAC5F,EAAE,GAAGd,WAAW;EAE3C,IAAM6G,IAAI,UAAQH,QAAQ,CAAC5F,EAAE,UAAI4F,QAAQ,CAACxD,CAAC,GAAG0D,UAAU,GAAG,CAAC,gBACxD,CAAC5G,WAAW,eACXsH,YAAY,GAAG/U,SAAS,GAAI,CAAC,aAChCkV,6BAA6B,cAC3BF,iBAAiB,eACjBG,2BAA6B;EAEjC,IAAMZ,cAAc,GAAMH,MAAM,CAAC5F,EAAE,SAAIwG,iBAAiB,cACtDZ,MAAM,CAAC5F,EAAE,GAAG,CAAC,WAAIwG,iBAAiB,GAAG,CAAC,eACtCZ,MAAM,CAAC5F,EAAE,GAAG,CAAC,WAAIwG,iBAAiB,GAAG,CAAC,CAAE;EAC1C,OAAO,CAACV,IAAI,EAAEC,cAAc,CAAC;AAC/B,CAAC;ACrGM,IAAMa,iBAAiB,GAAG,SAApBA,iBAAiBA,CAC5B9lB,KAAa,EACb0B,KAAa,EACbyf,WAAmB,EACnBzQ,SAAiB,EACjBqU,UAAkB,EAClBgB,eAAuB,EACvBC,WAAmB,EACnBjI,GAAY,EACZkI,gBAAwB,EACxBC,wBAAgC,EAChCC,kBAA0B,EAC1BC,0BAAkC,EAClCC,oBAA4B,EAC5BC,4BAAoC,EACpCC,sBAA8B,EAC9BC,8BAAsC,EACtCC,wBAAgC,EAChCC,gCAAwC;EAExC,IAAIC,QAAQ,GAAG3mB,KAAK,CAACsE,GAAG,CAAC,UAACmY,CAAC,EAAErW,CAAC;IAC5B,OAAOwgB,gBAAgB,CACrBnK,CAAC,EACDrW,CAAC,EACD1E,KAAK,EACLyf,WAAW,EACXzQ,SAAS,EACTqU,UAAU,EACVgB,eAAe,EACfC,WAAW,EACXjI,GAAG,EACHkI,gBAAgB,EAChBC,wBAAwB,EACxBC,kBAAkB,EAClBC,0BAA0B,EAC1BC,oBAAoB,EACpBC,4BAA4B,EAC5BC,sBAAsB,EACtBC,8BAA8B,EAC9BC,wBAAwB,EACxBC,gCAAgC,CACjC;GACF,CAAC;EAGFC,QAAQ,GAAGA,QAAQ,CAACriB,GAAG,CAAC,UAAA5D,IAAI;IAC1B,IAAMmmB,YAAY,GAAGnmB,IAAI,CAACmmB,YAAY,IAAI,EAAE;IAAC,IAAAC,KAAA,YAAAA,MAAAC,CAAA,EACC;MAC5C,IAAMC,UAAU,GAAGL,QAAQ,CAACvQ,SAAS,CACnC,UAAAzV,KAAK;QAAA,OAAIA,KAAK,CAACuR,EAAE,KAAK2U,YAAY,CAACE,CAAC,CAAC;QACtC;MACD,IAAIC,UAAU,KAAK,CAAC,CAAC,EAAEL,QAAQ,CAACK,UAAU,CAAC,CAACC,WAAW,CAACtlB,IAAI,CAACjB,IAAI,CAAC;KACnE;IALD,KAAK,IAAIqmB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,YAAY,CAAC1jB,MAAM,EAAE4jB,CAAC,EAAE;MAAAD,KAAA,CAAAC,CAAA;;IAM5C,OAAOrmB,IAAI;GACZ,CAAC;EAEF,OAAOimB,QAAQ;AACjB,CAAC;AAED,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CACpBlmB,IAAU,EACVkI,KAAa,EACblH,KAAa,EACbyf,WAAmB,EACnBzQ,SAAiB,EACjBqU,UAAkB,EAClBgB,eAAuB,EACvBC,WAAmB,EACnBjI,GAAY,EACZkI,gBAAwB,EACxBC,wBAAgC,EAChCC,kBAA0B,EAC1BC,0BAAkC,EAClCC,oBAA4B,EAC5BC,4BAAoC,EACpCC,sBAA8B,EAC9BC,8BAAsC,EACtCC,wBAAgC,EAChCC,gCAAwC;EAExC,IAAIQ,OAAgB;EACpB,QAAQxmB,IAAI,CAAC+O,IAAI;IACf,KAAK,WAAW;MACdyX,OAAO,GAAGC,kBAAkB,CAC1BzmB,IAAI,EACJkI,KAAK,EACLlH,KAAK,EACLyf,WAAW,EACXzQ,SAAS,EACTqU,UAAU,EACVgB,eAAe,EACfC,WAAW,EACXS,wBAAwB,EACxBC,gCAAgC,CACjC;MACD;IACF,KAAK,SAAS;MACZQ,OAAO,GAAGE,YAAY,CACpB1mB,IAAI,EACJkI,KAAK,EACLlH,KAAK,EACLyf,WAAW,EACXzQ,SAAS,EACTqU,UAAU,EACVgB,eAAe,EACfC,WAAW,EACXjI,GAAG,EACHsI,oBAAoB,EACpBC,4BAA4B,EAC5BC,sBAAsB,EACtBC,8BAA8B,CAC/B;MACD;IACF;MACEU,OAAO,GAAGE,YAAY,CACpB1mB,IAAI,EACJkI,KAAK,EACLlH,KAAK,EACLyf,WAAW,EACXzQ,SAAS,EACTqU,UAAU,EACVgB,eAAe,EACfC,WAAW,EACXjI,GAAG,EACHkI,gBAAgB,EAChBC,wBAAwB,EACxBC,kBAAkB,EAClBC,0BAA0B,CAC3B;MACD;;EAEJ,OAAOc,OAAO;AAChB,CAAC;AAED,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAChB1mB,IAAU,EACVkI,KAAa,EACblH,KAAa,EACbyf,WAAmB,EACnBzQ,SAAiB,EACjBqU,UAAkB,EAClBgB,eAAuB,EACvBC,WAAmB,EACnBjI,GAAY,EACZkI,gBAAwB,EACxBC,wBAAgC,EAChCC,kBAA0B,EAC1BC,0BAAkC;EAElC,IAAInH,EAAU;EACd,IAAIC,EAAU;EACd,IAAInB,GAAG,EAAE;IACPmB,EAAE,GAAGmI,kBAAkB,CAAC3mB,IAAI,CAACN,KAAK,EAAEsB,KAAK,EAAEyf,WAAW,CAAC;IACvDlC,EAAE,GAAGoI,kBAAkB,CAAC3mB,IAAI,CAACE,GAAG,EAAEc,KAAK,EAAEyf,WAAW,CAAC;GACtD,MAAM;IACLlC,EAAE,GAAGqI,eAAe,CAAC5mB,IAAI,CAACN,KAAK,EAAEsB,KAAK,EAAEyf,WAAW,CAAC;IACpDjC,EAAE,GAAGoI,eAAe,CAAC5mB,IAAI,CAACE,GAAG,EAAEc,KAAK,EAAEyf,WAAW,CAAC;;EAEpD,IAAIoG,YAAY,GAAqB7mB,IAAI,CAAC+O,IAAI;EAC9C,IAAI8X,YAAY,KAAK,MAAM,IAAIrI,EAAE,GAAGD,EAAE,GAAG+G,WAAW,GAAG,CAAC,EAAE;IACxDuB,YAAY,GAAG,WAAW;IAC1BrI,EAAE,GAAGD,EAAE,GAAG+G,WAAW,GAAG,CAAC;;EAG3B,IAAAwB,qBAAA,GAAmCC,oBAAoB,CACrDxI,EAAE,EACFC,EAAE,EACFxe,IAAI,CAAC+f,QAAQ,EACb1C,GAAG,CACJ;IALM2J,aAAa,GAAAF,qBAAA;IAAEG,SAAS,GAAAH,qBAAA;EAM/B,IAAMnG,CAAC,GAAGuG,eAAe,CAAChf,KAAK,EAAE8H,SAAS,EAAEqU,UAAU,CAAC;EACvD,IAAMpI,YAAY,GAAGjc,IAAI,CAAC+O,IAAI,KAAK,SAAS,GAAG/O,IAAI,CAACic,YAAY,GAAGxY,SAAS;EAE5E,IAAMuS,MAAM,GAAA7C,QAAA;IACVuJ,eAAe,EAAE+I,kBAAkB;IACnC0B,uBAAuB,EAAEzB,0BAA0B;IACnD0B,aAAa,EAAE7B,gBAAgB;IAC/B8B,qBAAqB,EAAE7B;KACpBxlB,IAAI,CAACgW,MAAM,CACf;EACD,OAAA7C,QAAA,KACKnT,IAAI;IACP6mB,YAAY,EAAZA,YAAY;IACZtI,EAAE,EAAFA,EAAE;IACFC,EAAE,EAAFA,EAAE;IACFmC,CAAC,EAADA,CAAC;IACDzY,KAAK,EAALA,KAAK;IACL+e,SAAS,EAATA,SAAS;IACTD,aAAa,EAAbA,aAAa;IACb3B,eAAe,EAAfA,eAAe;IACfC,WAAW,EAAXA,WAAW;IACXrJ,YAAY,EAAZA,YAAY;IACZ1Q,MAAM,EAAE8Y,UAAU;IAClBkC,WAAW,EAAE,EAAE;IACfvQ,MAAM,EAANA;;AAEJ,CAAC;AAED,IAAMyQ,kBAAkB,GAAG,SAArBA,kBAAkBA,CACtBzmB,IAAU,EACVkI,KAAa,EACblH,KAAa,EACbyf,WAAmB,EACnBzQ,SAAiB,EACjBqU,UAAkB,EAClBgB,eAAuB,EACvBC,WAAmB,EACnBS,wBAAgC,EAChCC,gCAAwC;EAExC,IAAMlF,CAAC,GAAG8F,eAAe,CAAC5mB,IAAI,CAACN,KAAK,EAAEsB,KAAK,EAAEyf,WAAW,CAAC;EACzD,IAAME,CAAC,GAAGuG,eAAe,CAAChf,KAAK,EAAE8H,SAAS,EAAEqU,UAAU,CAAC;EAEvD,IAAM9F,EAAE,GAAGuC,CAAC,GAAGuD,UAAU,GAAG,GAAG;EAC/B,IAAM7F,EAAE,GAAGsC,CAAC,GAAGuD,UAAU,GAAG,GAAG;EAE/B,IAAMiD,aAAa,GAAGjD,UAAU,GAAG,KAAK;EACxC,IAAMrO,MAAM,GAAA7C,QAAA;IACVuJ,eAAe,EAAEqJ,wBAAwB;IACzCoB,uBAAuB,EAAEnB,gCAAgC;IACzDoB,aAAa,EAAE,EAAE;IACjBC,qBAAqB,EAAE;KACpBrnB,IAAI,CAACgW,MAAM,CACf;EACD,OAAA7C,QAAA,KACKnT,IAAI;IACPE,GAAG,EAAEF,IAAI,CAACN,KAAK;IACf6e,EAAE,EAAFA,EAAE;IACFC,EAAE,EAAFA,EAAE;IACFmC,CAAC,EAADA,CAAC;IACDzY,KAAK,EAALA,KAAK;IACL+e,SAAS,EAAE,CAAC;IACZD,aAAa,EAAE,CAAC;IAChB3B,eAAe,EAAfA,eAAe;IACfC,WAAW,EAAXA,WAAW;IACXuB,YAAY,EAAE7mB,IAAI,CAAC+O,IAAI;IACvBgR,QAAQ,EAAE,CAAC;IACXxU,MAAM,EAAE+b,aAAa;IACrBrL,YAAY,EAAExY,SAAS;IACvB8iB,WAAW,EAAE,EAAE;IACfvQ,MAAM,EAANA;;AAEJ,CAAC;AAED,IAAM4Q,eAAe,GAAG,SAAlBA,eAAeA,CAAIW,KAAW,EAAEvmB,KAAa,EAAEyf,WAAmB;EACtE,IAAMvY,KAAK,GAAGlH,KAAK,CAAC0U,SAAS,CAAC,UAAAmP,CAAC;IAAA,OAAIA,CAAC,CAAC5gB,OAAO,EAAE,IAAIsjB,KAAK,CAACtjB,OAAO,EAAE;IAAC,GAAG,CAAC;EAEtE,IAAMujB,eAAe,GAAGD,KAAK,CAACtjB,OAAO,EAAE,GAAGjD,KAAK,CAACkH,KAAK,CAAC,CAACjE,OAAO,EAAE;EAChE,IAAMwjB,iBAAiB,GACrBD,eAAe,IAAIxmB,KAAK,CAACkH,KAAK,GAAG,CAAC,CAAC,CAACjE,OAAO,EAAE,GAAGjD,KAAK,CAACkH,KAAK,CAAC,CAACjE,OAAO,EAAE,CAAC;EACzE,IAAM6c,CAAC,GAAG5Y,KAAK,GAAGuY,WAAW,GAAGgH,iBAAiB,GAAGhH,WAAW;EAC/D,OAAOK,CAAC;AACV,CAAC;AACD,IAAM6F,kBAAkB,GAAG,SAArBA,kBAAkBA,CACtBY,KAAW,EACXvmB,KAAa,EACbyf,WAAmB;EAEnB,IAAIK,CAAC,GAAG8F,eAAe,CAACW,KAAK,EAAEvmB,KAAK,EAAEyf,WAAW,CAAC;EAClDK,CAAC,IAAIL,WAAW;EAChB,OAAOK,CAAC;AACV,CAAC;AACD,IAAMoG,eAAe,GAAG,SAAlBA,eAAeA,CACnBhf,KAAa,EACb8H,SAAiB,EACjBqU,UAAkB;EAElB,IAAM1D,CAAC,GAAGzY,KAAK,GAAG8H,SAAS,GAAG,CAACA,SAAS,GAAGqU,UAAU,IAAI,CAAC;EAC1D,OAAO1D,CAAC;AACV,CAAC;AAED,IAAaoG,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAC/BW,MAAc,EACdC,MAAc,EACd5H,QAAgB,EAChB1C,GAAY;EAEZ,IAAM2J,aAAa,GAAG,CAACW,MAAM,GAAGD,MAAM,IAAI3H,QAAQ,GAAG,IAAI;EACzD,IAAIkH,SAAiB;EACrB,IAAI5J,GAAG,EAAE;IACP4J,SAAS,GAAGU,MAAM,GAAGX,aAAa;GACnC,MAAM;IACLC,SAAS,GAAGS,MAAM;;EAEpB,OAAO,CAACV,aAAa,EAAEC,SAAS,CAAC;AACnC,CAAC;AAED,IAWMW,WAAW,GAAG,SAAdA,WAAWA,CAAI9G,CAAS,EAAE9gB,IAAa;EAC3C,IAAI8gB,CAAC,IAAI9gB,IAAI,CAACwe,EAAE,EAAE,OAAO,GAAG,CAAC,KACxB,IAAIsC,CAAC,IAAI9gB,IAAI,CAACue,EAAE,EAAE,OAAO,CAAC,CAAC,KAC3B;IACH,IAAMsJ,QAAQ,GAAG7nB,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACue,EAAE;IAClC,IAAMuJ,eAAe,GAAGxlB,IAAI,CAACmC,KAAK,CAAE,CAACqc,CAAC,GAAG9gB,IAAI,CAACue,EAAE,IAAI,GAAG,GAAIsJ,QAAQ,CAAC;IACpE,OAAOC,eAAe;;AAE1B,CAAC;AACD,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIjH,CAAS,EAAE9gB,IAAa;EAC9C,IAAI8gB,CAAC,IAAI9gB,IAAI,CAACwe,EAAE,EAAE,OAAO,CAAC,CAAC,KACtB,IAAIsC,CAAC,IAAI9gB,IAAI,CAACue,EAAE,EAAE,OAAO,GAAG,CAAC,KAC7B;IACH,IAAMsJ,QAAQ,GAAG7nB,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACue,EAAE;IAClC,IAAMuJ,eAAe,GAAGxlB,IAAI,CAACmC,KAAK,CAAE,CAACzE,IAAI,CAACwe,EAAE,GAAGsC,CAAC,IAAI,GAAG,GAAI+G,QAAQ,CAAC;IACpE,OAAOC,eAAe;;AAE1B,CAAC;AAED,IAAaE,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAC3Bf,SAAiB,EACjBgB,KAAa,EACb5D,UAAkB;EAElB,IAAM6D,KAAK,GAAG,CACZjB,SAAS,GAAG,CAAC,EACbgB,KAAK,GAAG5D,UAAU,EAClB4C,SAAS,GAAG,CAAC,EACbgB,KAAK,GAAG5D,UAAU,EAClB4C,SAAS,EACTgB,KAAK,GAAG5D,UAAU,GAAG,IAAI,CAC1B;EACD,OAAO6D,KAAK,CAAC3f,IAAI,CAAC,GAAG,CAAC;AACxB,CAAC;AAED,IAAM4f,QAAQ,GAAG,SAAXA,QAAQA,CAAIrH,CAAS,EAAEsH,KAAa,EAAEpoB,IAAa;EACvD,IAAI8gB,CAAC,IAAI9gB,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACslB,WAAW,GAAG,CAAC,EAAE;IACvCxE,CAAC,GAAG9gB,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACslB,WAAW,GAAG,CAAC;;EAEpC,IAAM+C,KAAK,GAAG/lB,IAAI,CAACmC,KAAK,CAAC,CAACqc,CAAC,GAAG9gB,IAAI,CAACue,EAAE,IAAI6J,KAAK,CAAC;EAC/C,IAAME,gBAAgB,GAAGD,KAAK,GAAGD,KAAK;EACtC,IAAMG,IAAI,GAAGvoB,IAAI,CAACue,EAAE,GAAG+J,gBAAgB;EACvC,OAAOC,IAAI;AACb,CAAC;AAED,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAI1H,CAAS,EAAEsH,KAAa,EAAEpoB,IAAa;EACrD,IAAI8gB,CAAC,IAAI9gB,IAAI,CAACue,EAAE,GAAGve,IAAI,CAACslB,WAAW,GAAG,CAAC,EAAE;IACvCxE,CAAC,GAAG9gB,IAAI,CAACue,EAAE,GAAGve,IAAI,CAACslB,WAAW,GAAG,CAAC;;EAEpC,IAAM+C,KAAK,GAAG/lB,IAAI,CAACmC,KAAK,CAAC,CAACqc,CAAC,GAAG9gB,IAAI,CAACwe,EAAE,IAAI4J,KAAK,CAAC;EAC/C,IAAME,gBAAgB,GAAGD,KAAK,GAAGD,KAAK;EACtC,IAAMG,IAAI,GAAGvoB,IAAI,CAACwe,EAAE,GAAG8J,gBAAgB;EACvC,OAAOC,IAAI;AACb,CAAC;AAED,IAAME,OAAO,GAAG,SAAVA,OAAOA,CAAI3H,CAAS,EAAEsH,KAAa,EAAEpoB,IAAa;EACtD,IAAMqoB,KAAK,GAAG/lB,IAAI,CAACmC,KAAK,CAAC,CAACqc,CAAC,GAAG9gB,IAAI,CAACue,EAAE,IAAI6J,KAAK,CAAC;EAC/C,IAAME,gBAAgB,GAAGD,KAAK,GAAGD,KAAK;EACtC,IAAMM,KAAK,GAAG1oB,IAAI,CAACue,EAAE,GAAG+J,gBAAgB;EACxC,IAAMK,KAAK,GAAGD,KAAK,GAAG1oB,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACue,EAAE;EACvC,OAAO,CAACmK,KAAK,EAAEC,KAAK,CAAC;AACvB,CAAC;AAED,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CACX9H,CAAS,EACT+H,KAAa,EACbC,QAAc,EACdV,KAAa,EACbW,QAAgB;EAEhB,IAAIzqB,OAAO,GAAG,IAAIC,IAAI,CAAE,CAACuiB,CAAC,GAAG+H,KAAK,IAAIT,KAAK,GAAIW,QAAQ,GAAGD,QAAQ,CAAC7kB,OAAO,EAAE,CAAC;EAC7E3F,OAAO,GAAG,IAAIC,IAAI,CAChBD,OAAO,CAAC2F,OAAO,EAAE,GACf,CAAC3F,OAAO,CAAC0qB,iBAAiB,EAAE,GAAGF,QAAQ,CAACE,iBAAiB,EAAE,IAAI,KAAK,CACvE;EACD,OAAO1qB,OAAO;AAChB,CAAC;AAKD,IAAa2qB,yBAAyB,GAAG,SAA5BA,yBAAyBA,CACpCC,IAAY,EACZC,MAAqB,EACrB/Y,YAAqB,EACrBgY,KAAa,EACbW,QAAgB,EAChBK,gBAAwB,EACxB/L,GAAY;EAEZ,IAAInW,MAAoD;EACxD,QAAQkJ,YAAY,CAACrB,IAAI;IACvB,KAAK,WAAW;MACd7H,MAAM,GAAGmiB,qCAAqC,CAC5CH,IAAI,EACJC,MAAM,EACN/Y,YAAY,EACZgY,KAAK,EACLW,QAAQ,EACRK,gBAAgB,CACjB;MACD;IACF;MACEliB,MAAM,GAAGoiB,+BAA+B,CACtCJ,IAAI,EACJC,MAAM,EACN/Y,YAAY,EACZgY,KAAK,EACLW,QAAQ,EACRK,gBAAgB,EAChB/L,GAAG,CACJ;MACD;;EAEJ,OAAOnW,MAAM;AACf,CAAC;AAED,IAAMoiB,+BAA+B,GAAG,SAAlCA,+BAA+BA,CACnCJ,IAAY,EACZC,MAAqB,EACrB/Y,YAAqB,EACrBgY,KAAa,EACbW,QAAgB,EAChBK,gBAAwB,EACxB/L,GAAY;EAEZ,IAAMkM,WAAW,GAAApW,QAAA,KAAiB/C,YAAY,CAAE;EAChD,IAAIoZ,SAAS,GAAG,KAAK;EACrB,QAAQL,MAAM;IACZ,KAAK,UAAU;MACb,IAAI9L,GAAG,EAAE;QACPkM,WAAW,CAACxJ,QAAQ,GAAGgI,cAAc,CAACmB,IAAI,EAAE9Y,YAAY,CAAC;OAC1D,MAAM;QACLmZ,WAAW,CAACxJ,QAAQ,GAAG6H,WAAW,CAACsB,IAAI,EAAE9Y,YAAY,CAAC;;MAExDoZ,SAAS,GAAGD,WAAW,CAACxJ,QAAQ,KAAK3P,YAAY,CAAC2P,QAAQ;MAC1D,IAAIyJ,SAAS,EAAE;QACb,IAAAC,sBAAA,GAAmC1C,oBAAoB,CACrDwC,WAAW,CAAChL,EAAE,EACdgL,WAAW,CAAC/K,EAAE,EACd+K,WAAW,CAACxJ,QAAQ,EACpB1C,GAAG,CACJ;UALM2J,aAAa,GAAAyC,sBAAA;UAAExC,SAAS,GAAAwC,sBAAA;QAM/BF,WAAW,CAACvC,aAAa,GAAGA,aAAa;QACzCuC,WAAW,CAACtC,SAAS,GAAGA,SAAS;;MAEnC;IACF,KAAK,OAAO;MAAE;QACZ,IAAMyB,KAAK,GAAGP,QAAQ,CAACe,IAAI,EAAEd,KAAK,EAAEhY,YAAY,CAAC;QACjDmZ,WAAW,CAAChL,EAAE,GAAGmK,KAAK;QACtBc,SAAS,GAAGD,WAAW,CAAChL,EAAE,KAAKnO,YAAY,CAACmO,EAAE;QAC9C,IAAIiL,SAAS,EAAE;UACb,IAAInM,GAAG,EAAE;YACPkM,WAAW,CAACrpB,GAAG,GAAG0oB,OAAO,CACvBF,KAAK,EACLtY,YAAY,CAACmO,EAAE,EACfnO,YAAY,CAAClQ,GAAG,EAChBkoB,KAAK,EACLW,QAAQ,CACT;WACF,MAAM;YACLQ,WAAW,CAAC7pB,KAAK,GAAGkpB,OAAO,CACzBF,KAAK,EACLtY,YAAY,CAACmO,EAAE,EACfnO,YAAY,CAAC1Q,KAAK,EAClB0oB,KAAK,EACLW,QAAQ,CACT;;UAEH,IAAAW,sBAAA,GAAmC3C,oBAAoB,CACrDwC,WAAW,CAAChL,EAAE,EACdgL,WAAW,CAAC/K,EAAE,EACd+K,WAAW,CAACxJ,QAAQ,EACpB1C,GAAG,CACJ;YALMsM,cAAa,GAAAD,sBAAA;YAAEE,UAAS,GAAAF,sBAAA;UAM/BH,WAAW,CAACvC,aAAa,GAAG2C,cAAa;UACzCJ,WAAW,CAACtC,SAAS,GAAG2C,UAAS;;QAEnC;;IAEF,KAAK,KAAK;MAAE;QACV,IAAMjB,KAAK,GAAGH,MAAM,CAACU,IAAI,EAAEd,KAAK,EAAEhY,YAAY,CAAC;QAC/CmZ,WAAW,CAAC/K,EAAE,GAAGmK,KAAK;QACtBa,SAAS,GAAGD,WAAW,CAAC/K,EAAE,KAAKpO,YAAY,CAACoO,EAAE;QAC9C,IAAIgL,SAAS,EAAE;UACb,IAAInM,GAAG,EAAE;YACPkM,WAAW,CAAC7pB,KAAK,GAAGkpB,OAAO,CACzBD,KAAK,EACLvY,YAAY,CAACoO,EAAE,EACfpO,YAAY,CAAC1Q,KAAK,EAClB0oB,KAAK,EACLW,QAAQ,CACT;WACF,MAAM;YACLQ,WAAW,CAACrpB,GAAG,GAAG0oB,OAAO,CACvBD,KAAK,EACLvY,YAAY,CAACoO,EAAE,EACfpO,YAAY,CAAClQ,GAAG,EAChBkoB,KAAK,EACLW,QAAQ,CACT;;UAEH,IAAAc,sBAAA,GAAmC9C,oBAAoB,CACrDwC,WAAW,CAAChL,EAAE,EACdgL,WAAW,CAAC/K,EAAE,EACd+K,WAAW,CAACxJ,QAAQ,EACpB1C,GAAG,CACJ;YALMyM,eAAa,GAAAD,sBAAA;YAAEE,WAAS,GAAAF,sBAAA;UAM/BN,WAAW,CAACvC,aAAa,GAAG8C,eAAa;UACzCP,WAAW,CAACtC,SAAS,GAAG8C,WAAS;;QAEnC;;IAEF,KAAK,MAAM;MAAE;QACX,IAAAC,QAAA,GAA+BvB,OAAO,CACpCS,IAAI,GAAGE,gBAAgB,EACvBhB,KAAK,EACLhY,YAAY,CACb;UAJM6Z,SAAS,GAAAD,QAAA;UAAEE,SAAS,GAAAF,QAAA;QAK3BR,SAAS,GAAGS,SAAS,KAAK7Z,YAAY,CAACmO,EAAE;QACzC,IAAIiL,SAAS,EAAE;UACbD,WAAW,CAAC7pB,KAAK,GAAGkpB,OAAO,CACzBqB,SAAS,EACT7Z,YAAY,CAACmO,EAAE,EACfnO,YAAY,CAAC1Q,KAAK,EAClB0oB,KAAK,EACLW,QAAQ,CACT;UACDQ,WAAW,CAACrpB,GAAG,GAAG0oB,OAAO,CACvBsB,SAAS,EACT9Z,YAAY,CAACoO,EAAE,EACfpO,YAAY,CAAClQ,GAAG,EAChBkoB,KAAK,EACLW,QAAQ,CACT;UACDQ,WAAW,CAAChL,EAAE,GAAG0L,SAAS;UAC1BV,WAAW,CAAC/K,EAAE,GAAG0L,SAAS;UAC1B,IAAAC,sBAAA,GAAmCpD,oBAAoB,CACrDwC,WAAW,CAAChL,EAAE,EACdgL,WAAW,CAAC/K,EAAE,EACd+K,WAAW,CAACxJ,QAAQ,EACpB1C,GAAG,CACJ;YALM+M,eAAa,GAAAD,sBAAA;YAAEE,WAAS,GAAAF,sBAAA;UAM/BZ,WAAW,CAACvC,aAAa,GAAGoD,eAAa;UACzCb,WAAW,CAACtC,SAAS,GAAGoD,WAAS;;QAEnC;;;EAGJ,OAAO;IAAEb,SAAS,EAATA,SAAS;IAAED,WAAW,EAAXA;GAAa;AACnC,CAAC;AAED,IAAMF,qCAAqC,GAAG,SAAxCA,qCAAqCA,CACzCH,IAAY,EACZC,MAAqB,EACrB/Y,YAAqB,EACrBgY,KAAa,EACbW,QAAgB,EAChBK,gBAAwB;EAExB,IAAMG,WAAW,GAAApW,QAAA,KAAiB/C,YAAY,CAAE;EAChD,IAAIoZ,SAAS,GAAG,KAAK;EACrB,QAAQL,MAAM;IACZ,KAAK,MAAM;MAAE;QACX,IAAAmB,SAAA,GAA+B7B,OAAO,CACpCS,IAAI,GAAGE,gBAAgB,EACvBhB,KAAK,EACLhY,YAAY,CACb;UAJM6Z,SAAS,GAAAK,SAAA;UAAEJ,SAAS,GAAAI,SAAA;QAK3Bd,SAAS,GAAGS,SAAS,KAAK7Z,YAAY,CAACmO,EAAE;QACzC,IAAIiL,SAAS,EAAE;UACbD,WAAW,CAAC7pB,KAAK,GAAGkpB,OAAO,CACzBqB,SAAS,EACT7Z,YAAY,CAACmO,EAAE,EACfnO,YAAY,CAAC1Q,KAAK,EAClB0oB,KAAK,EACLW,QAAQ,CACT;UACDQ,WAAW,CAACrpB,GAAG,GAAGqpB,WAAW,CAAC7pB,KAAK;UACnC6pB,WAAW,CAAChL,EAAE,GAAG0L,SAAS;UAC1BV,WAAW,CAAC/K,EAAE,GAAG0L,SAAS;;QAE5B;;;EAGJ,OAAO;IAAEV,SAAS,EAATA,SAAS;IAAED,WAAW,EAAXA;GAAa;AACnC,CAAC;SCzkBegB,eAAeA,CAC7Bld,KAAgE;EAEhE,OAAQA,KAA6B,CAACzP,GAAG,KAAK6F,SAAS;AACzD;AAEA,SAUgB+mB,iBAAiBA,CAAClrB,KAAa;EAC7C,IAAMmrB,YAAY,GAAGnrB,KAAK,CAAC2M,MAAM,CAC/B,UAAA8P,CAAC;IAAA,OAAIA,CAAC,CAACE,YAAY,IAAIF,CAAC,CAAChN,IAAI,KAAK,SAAS;IAC5C;EACD,IAAI0b,YAAY,CAAChoB,MAAM,GAAG,CAAC,EAAE;IAAA,IAAA2jB,KAAA,YAAAA,MAAA,EACmB;MAC5C,IAAMsE,WAAW,GAAGD,YAAY,CAAC/kB,CAAC,CAAC;MACnC,IAAMilB,QAAQ,GAAGC,WAAW,CAACtrB,KAAK,EAAEorB,WAAW,CAAC;MAChDprB,KAAK,GAAGA,KAAK,CAAC2M,MAAM,CAAC,UAAA8P,CAAC;QAAA,OAAI4O,QAAQ,CAACvrB,OAAO,CAAC2c,CAAC,CAAC,KAAK,CAAC,CAAC;QAAC;KACtD;IAJD,KAAK,IAAIrW,CAAC,GAAG,CAAC,EAAE+kB,YAAY,CAAChoB,MAAM,GAAGiD,CAAC,EAAEA,CAAC,EAAE;MAAA0gB,KAAA;;;EAM9C,OAAO9mB,KAAK;AACd;AAEA,SAASsrB,WAAWA,CAACC,QAAgB,EAAE7qB,IAAU;EAC/C,IAAIV,KAAK,GAAW,EAAE;EACtB,IAAIU,IAAI,CAAC+O,IAAI,KAAK,SAAS,EAAE;IAC3BzP,KAAK,GAAGurB,QAAQ,CAAC5e,MAAM,CACrB,UAAA8P,CAAC;MAAA,OAAIA,CAAC,CAACoK,YAAY,IAAIpK,CAAC,CAACoK,YAAY,CAAC/mB,OAAO,CAACY,IAAI,CAACwR,EAAE,CAAC,KAAK,CAAC,CAAC;MAC9D;GACF,MAAM;IACLlS,KAAK,GAAGurB,QAAQ,CAAC5e,MAAM,CAAC,UAAA8P,CAAC;MAAA,OAAIA,CAAC,CAAC+O,OAAO,IAAI/O,CAAC,CAAC+O,OAAO,KAAK9qB,IAAI,CAACwR,EAAE;MAAC;;EAElE,IAAIuZ,YAAY,GAAW,EAAE;EAC7BzrB,KAAK,CAAC6M,OAAO,CAAC,UAAA4P,CAAC;IACbgP,YAAY,CAAC9pB,IAAI,CAAAgF,KAAA,CAAjB8kB,YAAY,EAASH,WAAW,CAACC,QAAQ,EAAE9O,CAAC,CAAC,CAAC;GAC/C,CAAC;EACFzc,KAAK,GAAGA,KAAK,CAAC0rB,MAAM,CAAC1rB,KAAK,EAAEyrB,YAAY,CAAC;EACzC,OAAOzrB,KAAK;AACd;AAEA,IAAa2rB,SAAS,GAAG,SAAZA,SAASA,CAAIC,KAAW,EAAEC,KAAW;EAChD,IAAMC,MAAM,GAAGF,KAAK,CAACG,YAAY,IAAItnB,MAAM,CAACunB,SAAS;EACrD,IAAMC,MAAM,GAAGJ,KAAK,CAACE,YAAY,IAAItnB,MAAM,CAACunB,SAAS;EACrD,IAAIF,MAAM,GAAGG,MAAM,EAAE;IACnB,OAAO,CAAC;GACT,MAAM,IAAIH,MAAM,GAAGG,MAAM,EAAE;IAC1B,OAAO,CAAC,CAAC;GACV,MAAM;IACL,OAAO,CAAC;;AAEZ,CAAC;;;;;;ACvCM,IAAMC,UAAU,GAA8B,SAAxCA,UAAUA,CAAA/iB,IAAA;MACrBqY,CAAC,GAAArY,IAAA,CAADqY,CAAC;IACDH,CAAC,GAAAlY,IAAA,CAADkY,CAAC;IACDrV,KAAK,GAAA7C,IAAA,CAAL6C,KAAK;IACLC,MAAM,GAAA9C,IAAA,CAAN8C,MAAM;IACNsR,UAAU,GAAApU,IAAA,CAAVoU,UAAU;IACVoK,SAAS,GAAAxe,IAAA,CAATwe,SAAS;IACTD,aAAa,GAAAve,IAAA,CAAbue,aAAa;IACb3B,eAAe,GAAA5c,IAAA,CAAf4c,eAAe;IACfrP,MAAM,GAAAvN,IAAA,CAANuN,MAAM;IACN+C,WAAW,GAAAtQ,IAAA,CAAXsQ,WAAW;EAEX,IAAM0S,eAAe,GAAG,SAAlBA,eAAeA,CAAA;IACnB,OAAO5O,UAAU,GAAG7G,MAAM,CAACqR,qBAAqB,GAAGrR,MAAM,CAACoR,aAAa;GACxE;EAED,IAAMsE,WAAW,GAAG,SAAdA,WAAWA,CAAA;IACf,OAAO7O,UAAU,GAAG7G,MAAM,CAACmR,uBAAuB,GAAGnR,MAAM,CAAC0G,eAAe;GAC5E;EAED,OACE5O,KAAA,CAAAC,aAAA;IAAGgL,WAAW,EAAEA;KACdjL,KAAA,CAAAC,aAAA;IACE+S,CAAC,EAAEA,CAAC;IACJxV,KAAK,EAAEA,KAAK;IACZqV,CAAC,EAAEA,CAAC;IACJpV,MAAM,EAAEA,MAAM;IACdogB,EAAE,EAAEtG,eAAe;IACnBuG,EAAE,EAAEvG,eAAe;IACnB5D,IAAI,EAAEiK,WAAW,EAAE;IACnB1d,SAAS,EAAE6d,QAAK,CAACC;IACjB,EACFhe,KAAA,CAAAC,aAAA;IACE+S,CAAC,EAAEmG,SAAS;IACZ3b,KAAK,EAAE0b,aAAa;IACpBrG,CAAC,EAAEA,CAAC;IACJpV,MAAM,EAAEA,MAAM;IACdogB,EAAE,EAAEtG,eAAe;IACnBuG,EAAE,EAAEvG,eAAe;IACnB5D,IAAI,EAAEgK,eAAe;IACrB,CACA;AAER,CAAC;ACrDM,IAAMM,aAAa,GAAiC,SAA9CA,aAAaA,CAAAtjB,IAAA;MACxBqY,CAAC,GAAArY,IAAA,CAADqY,CAAC;IACDH,CAAC,GAAAlY,IAAA,CAADkY,CAAC;IACDrV,KAAK,GAAA7C,IAAA,CAAL6C,KAAK;IACLC,MAAM,GAAA9C,IAAA,CAAN8C,MAAM;IACN8Z,eAAe,GAAA5c,IAAA,CAAf4c,eAAe;IACftM,WAAW,GAAAtQ,IAAA,CAAXsQ,WAAW;EAEX,OACEjL,KAAA,CAAAC,aAAA;IACE+S,CAAC,EAAEA,CAAC;IACJH,CAAC,EAAEA,CAAC;IACJrV,KAAK,EAAEA,KAAK;IACZC,MAAM,EAAEA,MAAM;IACdyC,SAAS,EAAE6d,QAAM,CAACG,SAAS;IAC3BL,EAAE,EAAEtG,eAAe;IACnBuG,EAAE,EAAEvG,eAAe;IACnBtM,WAAW,EAAEA;IACb;AAEN,CAAC;ACxBM,IAAMkT,iBAAiB,GAAqC,SAAtDA,iBAAiBA,CAAAxjB,IAAA;MAC5ByjB,aAAa,GAAAzjB,IAAA,CAAbyjB,aAAa;IACbnT,WAAW,GAAAtQ,IAAA,CAAXsQ,WAAW;EAEX,OACEjL,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAE6d,QAAM,CAACG,SAAS;IAC3BlH,MAAM,EAAEoH,aAAa;IACrBnT,WAAW,EAAEA;IACb;AAEN,CAAC;ACVM,IAAMoT,GAAG,GAA4B,SAA/BA,GAAGA,CAAA1jB,IAAA;MACdzI,IAAI,GAAAyI,IAAA,CAAJzI,IAAI;IACJosB,oBAAoB,GAAA3jB,IAAA,CAApB2jB,oBAAoB;IACpBC,gBAAgB,GAAA5jB,IAAA,CAAhB4jB,gBAAgB;IAChBhP,GAAG,GAAA5U,IAAA,CAAH4U,GAAG;IACHiP,YAAY,GAAA7jB,IAAA,CAAZ6jB,YAAY;IACZzP,UAAU,GAAApU,IAAA,CAAVoU,UAAU;EAEV,IAAMqP,aAAa,GAAGlE,gBAAgB,CACpC,CAAC,CAAC3K,GAAG,GAAGrd,IAAI,CAACgnB,aAAa,GAAGhnB,IAAI,CAACinB,SAAS,EAC3CjnB,IAAI,CAAC2gB,CAAC,EACN3gB,IAAI,CAACuL,MAAM,CACZ;EACD,IAAMghB,YAAY,GAAGvsB,IAAI,CAACuL,MAAM,GAAG,CAAC;EACpC,OACEuC,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAE6d,QAAM,CAACW,UAAU;IAAE1Q,QAAQ,EAAE;KACzChO,KAAA,CAAAC,aAAA,CAACyd,UAAU;IACT1K,CAAC,EAAE9gB,IAAI,CAACue,EAAE;IACVoC,CAAC,EAAE3gB,IAAI,CAAC2gB,CAAC;IACTrV,KAAK,EAAEtL,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACue,EAAE;IACxBhT,MAAM,EAAEvL,IAAI,CAACuL,MAAM;IACnB0b,SAAS,EAAEjnB,IAAI,CAACinB,SAAS;IACzBD,aAAa,EAAEhnB,IAAI,CAACgnB,aAAa;IACjC3B,eAAe,EAAErlB,IAAI,CAACqlB,eAAe;IACrCrP,MAAM,EAAEhW,IAAI,CAACgW,MAAM;IACnB6G,UAAU,EAAEA,UAAU;IACtB9D,WAAW,EAAE,SAAbA,WAAWA,CAAE5R,CAAC;MACZklB,gBAAgB,IAAIC,YAAY,CAAC,MAAM,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;;IAEnD,EACF2G,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KACVqe,gBAAgB,IACfve,KAAA,CAAAC,aAAA,YAEED,KAAA,CAAAC,aAAA,CAACge,aAAa;IACZjL,CAAC,EAAE9gB,IAAI,CAACue,EAAE,GAAG,CAAC;IACdoC,CAAC,EAAE3gB,IAAI,CAAC2gB,CAAC,GAAG,CAAC;IACbrV,KAAK,EAAEtL,IAAI,CAACslB,WAAW;IACvB/Z,MAAM,EAAEghB,YAAY;IACpBlH,eAAe,EAAErlB,IAAI,CAACqlB,eAAe;IACrCtM,WAAW,EAAE,SAAbA,WAAWA,CAAE5R,CAAC;MACZmlB,YAAY,CAAC,OAAO,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;;IAEhC,EAEF2G,KAAA,CAAAC,aAAA,CAACge,aAAa;IACZjL,CAAC,EAAE9gB,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACslB,WAAW,GAAG,CAAC;IACjC3E,CAAC,EAAE3gB,IAAI,CAAC2gB,CAAC,GAAG,CAAC;IACbrV,KAAK,EAAEtL,IAAI,CAACslB,WAAW;IACvB/Z,MAAM,EAAEghB,YAAY;IACpBlH,eAAe,EAAErlB,IAAI,CAACqlB,eAAe;IACrCtM,WAAW,EAAE,SAAbA,WAAWA,CAAE5R,CAAC;MACZmlB,YAAY,CAAC,KAAK,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;;IAE9B,CAEL,EACAilB,oBAAoB,IACnBte,KAAA,CAAAC,aAAA,CAACke,iBAAiB;IAChBC,aAAa,EAAEA,aAAa;IAC5BnT,WAAW,EAAE,SAAbA,WAAWA,CAAE5R,CAAC;MACZmlB,YAAY,CAAC,UAAU,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;;IAGtC,CACC,CACF;AAER,CAAC;ACrEM,IAAMslB,QAAQ,GAA4B,SAApCA,QAAQA,CAAAhkB,IAAA;MACnBzI,IAAI,GAAAyI,IAAA,CAAJzI,IAAI;IACJosB,oBAAoB,GAAA3jB,IAAA,CAApB2jB,oBAAoB;IACpBC,gBAAgB,GAAA5jB,IAAA,CAAhB4jB,gBAAgB;IAChBC,YAAY,GAAA7jB,IAAA,CAAZ6jB,YAAY;IACZzP,UAAU,GAAApU,IAAA,CAAVoU,UAAU;EAEV,IAAMqP,aAAa,GAAGlE,gBAAgB,CACpChoB,IAAI,CAACgnB,aAAa,GAAGhnB,IAAI,CAACue,EAAE,EAC5Bve,IAAI,CAAC2gB,CAAC,EACN3gB,IAAI,CAACuL,MAAM,CACZ;EACD,OACEuC,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAE6d,QAAM,CAACW,UAAU;IAAE1Q,QAAQ,EAAE;KACzChO,KAAA,CAAAC,aAAA,CAACyd,UAAU;IACT1K,CAAC,EAAE9gB,IAAI,CAACue,EAAE;IACVoC,CAAC,EAAE3gB,IAAI,CAAC2gB,CAAC;IACTrV,KAAK,EAAEtL,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACue,EAAE;IACxBhT,MAAM,EAAEvL,IAAI,CAACuL,MAAM;IACnB0b,SAAS,EAAEjnB,IAAI,CAACinB,SAAS;IACzBD,aAAa,EAAEhnB,IAAI,CAACgnB,aAAa;IACjC3B,eAAe,EAAErlB,IAAI,CAACqlB,eAAe;IACrCrP,MAAM,EAAEhW,IAAI,CAACgW,MAAM;IACnB6G,UAAU,EAAEA,UAAU;IACtB9D,WAAW,EAAE,SAAbA,WAAWA,CAAE5R,CAAC;MACZklB,gBAAgB,IAAIC,YAAY,CAAC,MAAM,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;;IAEnD,EACF2G,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KACVoe,oBAAoB,IACnBte,KAAA,CAAAC,aAAA,CAACke,iBAAiB;IAChBC,aAAa,EAAEA,aAAa;IAC5BnT,WAAW,EAAE,SAAbA,WAAWA,CAAE5R,CAAC;MACZmlB,YAAY,CAAC,UAAU,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;;IAGtC,CACC,CACF;AAER,CAAC;;;;;AC3CM,IAAMulB,SAAS,GAA4B,SAArCA,SAASA,CAAAjkB,IAAA;MACpBzI,IAAI,GAAAyI,IAAA,CAAJzI,IAAI;IACJqsB,gBAAgB,GAAA5jB,IAAA,CAAhB4jB,gBAAgB;IAChBC,YAAY,GAAA7jB,IAAA,CAAZ6jB,YAAY;IACZzP,UAAU,GAAApU,IAAA,CAAVoU,UAAU;EAEV,IAAMzF,SAAS,mBAAgBpX,IAAI,CAACue,EAAE,GAAGve,IAAI,CAACuL,MAAM,GAAG,KAAK,iBACxDvL,IAAI,CAAC2gB,CAAC,GAAG3gB,IAAI,CAACuL,MAAM,GAAG,IAAI,OAAG;EAClC,IAAMmgB,WAAW,GAAG,SAAdA,WAAWA,CAAA;IACf,OAAO7O,UAAU,GACb7c,IAAI,CAACgW,MAAM,CAACmR,uBAAuB,GACnCnnB,IAAI,CAACgW,MAAM,CAAC0G,eAAe;GAChC;EAED,OACE5O,KAAA,CAAAC,aAAA;IAAG+N,QAAQ,EAAE,CAAC;IAAE9N,SAAS,EAAE2e,QAAM,CAACC;KAChC9e,KAAA,CAAAC,aAAA;IACE0T,IAAI,EAAEiK,WAAW,EAAE;IACnB5K,CAAC,EAAE9gB,IAAI,CAACue,EAAE;IACVjT,KAAK,EAAEtL,IAAI,CAACuL,MAAM;IAClBoV,CAAC,EAAE3gB,IAAI,CAAC2gB,CAAC;IACTpV,MAAM,EAAEvL,IAAI,CAACuL,MAAM;IACnBqgB,EAAE,EAAE5rB,IAAI,CAACqlB,eAAe;IACxBsG,EAAE,EAAE3rB,IAAI,CAACqlB,eAAe;IACxBjO,SAAS,EAAEA,SAAS;IACpBpJ,SAAS,EAAE2e,QAAM,CAACE,mBAAmB;IACrC9T,WAAW,EAAE,SAAbA,WAAWA,CAAE5R,CAAC;MACZklB,gBAAgB,IAAIC,YAAY,CAAC,MAAM,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;;IAEnD,CACA;AAER,CAAC;;;;;;AChCM,IAAM2lB,OAAO,GAA4B,SAAnCA,OAAOA,CAAArkB,IAAA;MAA+BzI,IAAI,GAAAyI,IAAA,CAAJzI,IAAI;IAAE6c,UAAU,GAAApU,IAAA,CAAVoU,UAAU;EACjE,IAAMkQ,QAAQ,GAAGlQ,UAAU,GACvB7c,IAAI,CAACgW,MAAM,CAACmR,uBAAuB,GACnCnnB,IAAI,CAACgW,MAAM,CAAC0G,eAAe;EAC/B,IAAMsQ,YAAY,GAAGnQ,UAAU,GAC3B7c,IAAI,CAACgW,MAAM,CAACqR,qBAAqB,GACjCrnB,IAAI,CAACgW,MAAM,CAACoR,aAAa;EAC7B,IAAM6F,WAAW,GAAGjtB,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACue,EAAE;EAErC,IAAM2O,mBAAmB,GAAG,CAC1BltB,IAAI,CAACue,EAAE,EACPve,IAAI,CAAC2gB,CAAC,GAAG3gB,IAAI,CAACuL,MAAM,GAAG,CAAC,GAAG,CAAC,EAC5BvL,IAAI,CAACue,EAAE,EACPve,IAAI,CAAC2gB,CAAC,GAAG3gB,IAAI,CAACuL,MAAM,EACpBvL,IAAI,CAACue,EAAE,GAAG,EAAE,EACZve,IAAI,CAAC2gB,CAAC,GAAG3gB,IAAI,CAACuL,MAAM,GAAG,CAAC,GAAG,CAAC,CAC7B,CAAChD,IAAI,CAAC,GAAG,CAAC;EACX,IAAM4kB,oBAAoB,GAAG,CAC3BntB,IAAI,CAACwe,EAAE,EACPxe,IAAI,CAAC2gB,CAAC,GAAG3gB,IAAI,CAACuL,MAAM,GAAG,CAAC,GAAG,CAAC,EAC5BvL,IAAI,CAACwe,EAAE,EACPxe,IAAI,CAAC2gB,CAAC,GAAG3gB,IAAI,CAACuL,MAAM,EACpBvL,IAAI,CAACwe,EAAE,GAAG,EAAE,EACZxe,IAAI,CAAC2gB,CAAC,GAAG3gB,IAAI,CAACuL,MAAM,GAAG,CAAC,GAAG,CAAC,CAC7B,CAAChD,IAAI,CAAC,GAAG,CAAC;EAEX,OACEuF,KAAA,CAAAC,aAAA;IAAG+N,QAAQ,EAAE,CAAC;IAAE9N,SAAS,EAAEof,QAAM,CAACC;KAChCvf,KAAA,CAAAC,aAAA;IACE0T,IAAI,EAAEsL,QAAQ;IACdjM,CAAC,EAAE9gB,IAAI,CAACue,EAAE;IACVjT,KAAK,EAAE2hB,WAAW;IAClBtM,CAAC,EAAE3gB,IAAI,CAAC2gB,CAAC;IACTpV,MAAM,EAAEvL,IAAI,CAACuL,MAAM;IACnBqgB,EAAE,EAAE5rB,IAAI,CAACqlB,eAAe;IACxBsG,EAAE,EAAE3rB,IAAI,CAACqlB,eAAe;IACxBrX,SAAS,EAAEof,QAAM,CAACE;IAClB,EACFxf,KAAA,CAAAC,aAAA;IACE+S,CAAC,EAAE9gB,IAAI,CAACinB,SAAS;IACjB3b,KAAK,EAAEtL,IAAI,CAACgnB,aAAa;IACzBrG,CAAC,EAAE3gB,IAAI,CAAC2gB,CAAC;IACTpV,MAAM,EAAEvL,IAAI,CAACuL,MAAM;IACnBogB,EAAE,EAAE3rB,IAAI,CAACqlB,eAAe;IACxBuG,EAAE,EAAE5rB,IAAI,CAACqlB,eAAe;IACxB5D,IAAI,EAAEuL;IACN,EACFlf,KAAA,CAAAC,aAAA;IACE0T,IAAI,EAAEsL,QAAQ;IACdjM,CAAC,EAAE9gB,IAAI,CAACue,EAAE;IACVjT,KAAK,EAAE2hB,WAAW;IAClBtM,CAAC,EAAE3gB,IAAI,CAAC2gB,CAAC;IACTpV,MAAM,EAAEvL,IAAI,CAACuL,MAAM,GAAG,CAAC;IACvBqgB,EAAE,EAAE5rB,IAAI,CAACqlB,eAAe;IACxBsG,EAAE,EAAE3rB,IAAI,CAACqlB,eAAe;IACxBrX,SAAS,EAAEof,QAAM,CAACG;IAClB,EACFzf,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEof,QAAM,CAACG,UAAU;IAC5BzI,MAAM,EAAEoI,mBAAmB;IAC3BzL,IAAI,EAAEsL;IACN,EACFjf,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEof,QAAM,CAACG,UAAU;IAC5BzI,MAAM,EAAEqI,oBAAoB;IAC5B1L,IAAI,EAAEsL;IACN,CACA;AAER,CAAC;;;;;;AC3CM,IAAMS,QAAQ,GAA4B,SAApCA,QAAQA,CAA4B7L,KAAK;EACpD,IAAA8L,MAAA,GAAAta,QAAA,KAWKwO,KAAK;IAVR3hB,IAAI,GAAAytB,MAAA,CAAJztB,IAAI;IACJyd,WAAW,GAAAgQ,MAAA,CAAXhQ,WAAW;IACXiQ,QAAQ,GAAAD,MAAA,CAARC,QAAQ;IACRrJ,UAAU,GAAAoJ,MAAA,CAAVpJ,UAAU;IACVxH,UAAU,GAAA4Q,MAAA,CAAV5Q,UAAU;IACVQ,GAAG,GAAAoQ,MAAA,CAAHpQ,GAAG;IACHiP,YAAY,GAAAmB,MAAA,CAAZnB,YAAY;IACZF,oBAAoB,GAAAqB,MAAA,CAApBrB,oBAAoB;IACpBC,gBAAgB,GAAAoB,MAAA,CAAhBpB,gBAAgB;EAIlB,IAAMsB,OAAO,GAAGnkB,MAAM,CAAiB,IAAI,CAAC;EAC5C,IAAAR,SAAA,GAAgCC,QAAQ,CAAc6E,KAAA,CAAAC,aAAA,aAAO,CAAC;IAAvD6f,QAAQ,GAAA5kB,SAAA;IAAE6kB,WAAW,GAAA7kB,SAAA;EAC5B,IAAAI,UAAA,GAAwCH,QAAQ,CAAC,IAAI,CAAC;IAA/C6kB,YAAY,GAAA1kB,UAAA;IAAE2kB,eAAe,GAAA3kB,UAAA;EACpC,IAAM8V,gBAAgB,GAAGla,eAAe,CAAChF,IAAI,CAACiF,MAAM,CAAC;EACrD,IAAM+oB,WAAW,GAAG9oB,cAAc,CAACga,gBAAgB,CAAC;EACpD,IAAM+O,eAAe,GAAG9oB,kBAAkB,CAAC+Z,gBAAgB,CAAC;EAE5D,IAAMgP,aAAa,GAAGrkB,OAAO,CAC3B;IAAA,OAAO;MACL7J,IAAI,EAAJA,IAAI;MACJyd,WAAW,EAAXA,WAAW;MACX4G,UAAU,EAAVA,UAAU;MACV+H,oBAAoB,EAApBA,oBAAoB;MACpBC,gBAAgB,EAAhBA,gBAAgB;MAChBqB,QAAQ,EAARA,QAAQ;MACR7Q,UAAU,EAAVA,UAAU;MACVQ,GAAG,EAAHA,GAAG;MACHiP,YAAY,EAAZA;KACD;GAAC,EACF,CACEtsB,IAAI,EACJyd,WAAW,EACX4G,UAAU,EACV+H,oBAAoB,EACpBC,gBAAgB,EAChBqB,QAAQ,EACR7Q,UAAU,EACVQ,GAAG,EACHiP,YAAY,CACb,CACF;EAED5gB,SAAS,CAAC;IACR,QAAQ1L,IAAI,CAAC6mB,YAAY;MACvB,KAAK,WAAW;QACdgH,WAAW,CAAC/f,KAAA,CAAAC,aAAA,CAAC2e,SAAS,EAAAxmB,MAAA,CAAAkO,MAAA,KAAK8Z,aAAa,EAAI,CAAC;QAC7C;MACF,KAAK,SAAS;QACZL,WAAW,CAAC/f,KAAA,CAAAC,aAAA,CAAC+e,OAAO,EAAA5mB,MAAA,CAAAkO,MAAA,KAAK8Z,aAAa,EAAI,CAAC;QAC3C;MACF,KAAK,WAAW;QACdL,WAAW,CAAC/f,KAAA,CAAAC,aAAA,CAAC0e,QAAQ,EAAAvmB,MAAA,CAAAkO,MAAA,KAAK8Z,aAAa,EAAI,CAAC;QAC5C;MACF;QACEL,WAAW,CAAC/f,KAAA,CAAAC,aAAA,CAACoe,GAAG,EAAAjmB,MAAA,CAAAkO,MAAA,KAAK8Z,aAAa,EAAI,CAAC;QACvC;;GAEL,EAAE,CACDluB,IAAI,EACJkuB,aAAa,CACd,CAAC;EAEF,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA;IAChB,IAAI,CAACR,OAAO,CAAC9iB,OAAO,IAAI,OAAO8iB,OAAO,CAAC9iB,OAAO,CAACujB,OAAO,KAAK,UAAU,EAAE;MACrE,OAAO,CAAC;;IAEV,OAAOT,OAAO,CAAC9iB,OAAO,CAACujB,OAAO,EAAE,CAAC9iB,KAAK;GACvC;EAEDI,SAAS,CAAC;IACRqiB,eAAe,CAACI,YAAY,EAAE,GAAGnuB,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACue,EAAE,CAAC;GACpD,EAAE,CAACoP,OAAO,EAAE3tB,IAAI,CAAC,CAAC;EAEnB,IAAMquB,IAAI,GAAG,SAAPA,IAAIA,CAAA;IACR,IAAM/iB,KAAK,GAAGtL,IAAI,CAACwe,EAAE,GAAGxe,IAAI,CAACue,EAAE;IAC/B,IAAM+P,QAAQ,GAAGtuB,IAAI,CAACumB,WAAW,CAAC9jB,MAAM,GAAG,CAAC;IAC5C,IAAIqrB,YAAY,EAAE;MAChB,OAAO9tB,IAAI,CAACue,EAAE,GAAGjT,KAAK,GAAG,GAAG;;IAE9B,IAAI+R,GAAG,IAAIsQ,OAAO,CAAC9iB,OAAO,EAAE;MAC1B,OACE7K,IAAI,CAACue,EAAE,GACP4P,YAAY,EAAE,GACd1Q,WAAW,GAAG,CAAC6Q,QAAQ,GACvB7Q,WAAW,GAAG,GAAG;KAEpB,MAAM;MACL,OAAOzd,IAAI,CAACue,EAAE,GAAGjT,KAAK,GAAGmS,WAAW,GAAG,CAAC6Q,QAAQ,GAAG7Q,WAAW,GAAG,GAAG;;GAEvE;EAED,OACE3P,KAAA,CAAAC,aAAA;IACEU,SAAS,EAAE,SAAXA,SAASA,CAAEtH,CAAC;MACV,QAAQA,CAAC,CAACvJ,GAAG;QACX,KAAK,QAAQ;UAAE;YACb,IAAI8vB,QAAQ,EAAEpB,YAAY,CAAC,QAAQ,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;YAC7C;;;MAGJA,CAAC,CAAC4Q,eAAe,EAAE;KACpB;IACDwW,YAAY,EAAE,SAAdA,YAAYA,CAAEpnB,CAAC;MACbmlB,YAAY,CAAC,YAAY,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;KACpC;IACDqnB,YAAY,EAAE,SAAdA,YAAYA,CAAErnB,CAAC;MACbmlB,YAAY,CAAC,YAAY,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;KACpC;IACD+V,aAAa,EAAE,SAAfA,aAAaA,CAAE/V,CAAC;MACdmlB,YAAY,CAAC,UAAU,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;KAClC;IACDmV,OAAO,EAAE,SAATA,OAAOA,CAAEnV,CAAC;MACRmlB,YAAY,CAAC,OAAO,EAAEtsB,IAAI,EAAEmH,CAAC,CAAC;KAC/B;IACDsnB,OAAO,EAAE,SAATA,OAAOA,CAAA;MACLnC,YAAY,CAAC,QAAQ,EAAEtsB,IAAI,CAAC;;KAG7B4tB,QAAQ,EACT9f,KAAA,CAAAC,aAAA;IACE+S,CAAC,EAAEuN,IAAI,EAAE;IACT1N,CAAC,EAAE3gB,IAAI,CAAC2gB,CAAC,GAAG0D,UAAU,GAAG,GAAG;IAC5BrW,SAAS,EACP8f,YAAY,GACR1f,KAAK,CAACsgB,QAAQ,GACItgB,KAAK,CAACugB,eAAe;IAE7CpgB,GAAG,EAAEof;KAEJ,CAAC,CAACM,eAAe,IAChBngB,KAAA,CAAAC,aAAA;IAAOC,SAAS,EAAEI,KAAK,CAACwgB,SAAS;IAAEnN,IAAI,EAAEuM;cAG1C,EACDlgB,KAAA,CAAAC,aAAA;IAAO8gB,EAAE,EAAEZ,eAAe,GAAG,CAAC,GAAG;KAAIjuB,IAAI,CAACwU,IAAI,CAAS,CAClD,CACL;AAER,CAAC;AC1IM,IAAMsa,gBAAgB,GAAoC,SAApDA,gBAAgBA,CAAArmB,IAAA;MAC3BnJ,KAAK,GAAAmJ,IAAA,CAALnJ,KAAK;IACL0B,KAAK,GAAAyH,IAAA,CAALzH,KAAK;IACL+tB,UAAU,GAAAtmB,IAAA,CAAVsmB,UAAU;IACV3e,YAAY,GAAA3H,IAAA,CAAZ2H,YAAY;IACZJ,SAAS,GAAAvH,IAAA,CAATuH,SAAS;IACTyQ,WAAW,GAAAhY,IAAA,CAAXgY,WAAW;IACXsI,QAAQ,GAAAtgB,IAAA,CAARsgB,QAAQ;IACRiG,GAAG,GAAAvmB,IAAA,CAAHumB,GAAG;IACH3K,UAAU,GAAA5b,IAAA,CAAV4b,UAAU;IACV4K,UAAU,GAAAxmB,IAAA,CAAVwmB,UAAU;IACVxR,WAAW,GAAAhV,IAAA,CAAXgV,WAAW;IACX3N,UAAU,GAAArH,IAAA,CAAVqH,UAAU;IACVC,QAAQ,GAAAtH,IAAA,CAARsH,QAAQ;IACRsN,GAAG,GAAA5U,IAAA,CAAH4U,GAAG;IACH6R,aAAa,GAAAzmB,IAAA,CAAbymB,aAAa;IACbC,aAAa,GAAA1mB,IAAA,CAAb0mB,aAAa;IACb9e,eAAe,GAAA5H,IAAA,CAAf4H,eAAe;IACf+e,YAAY,GAAA3mB,IAAA,CAAZ2mB,YAAY;IACZC,gBAAgB,GAAA5mB,IAAA,CAAhB4mB,gBAAgB;IAChBnS,aAAa,GAAAzU,IAAA,CAAbyU,aAAa;IACbZ,OAAO,GAAA7T,IAAA,CAAP6T,OAAO;IACPgT,QAAQ,GAAA7mB,IAAA,CAAR6mB,QAAQ;EAER,IAAMpH,KAAK,GACT8G,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEnkB,OAAO,IAAI,gBAAgB,IAAImkB,GAAG,CAACnkB,OAAO,GAC3CmkB,GAAG,CAACnkB,OAAO,CAAC0kB,cAAc,EAAE,GAC5B9rB,SAAS;EACf,IAAAuF,SAAA,GAA0BC,QAAQ,CAAC,CAAC,CAAC;IAA9Bmf,KAAK,GAAApf,SAAA;IAAEwmB,QAAQ,GAAAxmB,SAAA;EACtB,IAAAI,UAAA,GAAgDH,QAAQ,CAAC,CAAC,CAAC;IAApDmgB,gBAAgB,GAAAhgB,UAAA;IAAEqmB,mBAAmB,GAAArmB,UAAA;EAC5C,IAAAsmB,UAAA,GAAgCzmB,QAAQ,CAAC,KAAK,CAAC;IAAxC0mB,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAG5BhkB,SAAS,CAAC;IACR,IAAMmkB,SAAS,GACb7uB,KAAK,CAAC,CAAC,CAAC,CAACiD,OAAO,EAAE,GAClBjD,KAAK,CAAC,CAAC,CAAC,CAACiD,OAAO,EAAE,GAClBjD,KAAK,CAAC,CAAC,CAAC,CAACgoB,iBAAiB,EAAE,GAAG,EAAE,GAAG,IAAI,GACxChoB,KAAK,CAAC,CAAC,CAAC,CAACgoB,iBAAiB,EAAE,GAAG,EAAE,GAAG,IAAI;IAC1C,IAAM8G,QAAQ,GAAI/G,QAAQ,GAAGtI,WAAW,GAAIoP,SAAS;IACrDL,QAAQ,CAACM,QAAQ,CAAC;GACnB,EAAE,CAACrP,WAAW,EAAEzf,KAAK,EAAE+nB,QAAQ,CAAC,CAAC;EAElCrd,SAAS,CAAC;IACR,IAAMuM,eAAe,YAAfA,eAAeA,CAAU5K,KAAiB;MAAA;;QAC9C,IAAI,CAAC0hB,UAAU,CAACxF,WAAW,IAAI,CAACrB,KAAK,IAAI,EAAC8G,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEnkB,OAAO,GAAE,OAAAoC,OAAA,CAAAC,OAAA;QACxDG,KAAK,CAACC,cAAc,EAAE;QAEtB4a,KAAK,CAACpH,CAAC,GAAGzT,KAAK,CAAC2K,OAAO;QACvB,IAAM+X,MAAM,GAAG7H,KAAK,CAAC8H,eAAe,CAClChB,GAAG,aAAHA,GAAG,wBAAAiB,qBAAA,GAAHjB,GAAG,CAAEnkB,OAAO,CAACqlB,YAAY,EAAE,cAAAD,qBAAA,uBAA3BA,qBAAA,CAA6BE,OAAO,EAAE,CACvC;QAED,IAAAC,qBAAA,GAAmCnH,yBAAyB,CAC1D8G,MAAM,CAACjP,CAAC,EACRiO,UAAU,CAAC5F,MAAuB,EAClC4F,UAAU,CAACxF,WAAW,EACtBnB,KAAK,EACLW,QAAQ,EACRK,gBAAgB,EAChB/L,GAAG,CACJ;UAROmM,SAAS,GAAA4G,qBAAA,CAAT5G,SAAS;UAAED,WAAW,GAAA6G,qBAAA,CAAX7G,WAAW;QAS9B,IAAIC,SAAS,EAAE;UACb0F,aAAa,CAAC;YAAE/F,MAAM,EAAE4F,UAAU,CAAC5F,MAAM;YAAEI,WAAW,EAAXA;WAAa,CAAC;;QAC1D,OAAAtc,OAAA,CAAAC,OAAA;OACF,QAAA/F,CAAA;QAAA,OAAA8F,OAAA,CAAAE,MAAA,CAAAhG,CAAA;;;IAED,IAAMkpB,cAAa,YAAb9X,aAAaA,CAAUlL,KAAiB;MAAA;;;cAgExC,CAACijB,gBAAgB;YACnBnB,aAAa,CAACoB,oBAAoB,CAAC;;;QAhErC,IAAQpH,MAAM,GAAwC4F,UAAU,CAAxD5F,MAAM;UAAEoH,oBAAoB,GAAkBxB,UAAU,CAAhDwB,oBAAoB;UAAEhH,WAAW,GAAKwF,UAAU,CAA1BxF,WAAW;QACjD,IAAI,CAACA,WAAW,IAAI,CAACrB,KAAK,IAAI,EAAC8G,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEnkB,OAAO,KAAI,CAAC0lB,oBAAoB,EAClE,OAAAtjB,OAAA,CAAAC,OAAA;QACFG,KAAK,CAACC,cAAc,EAAE;QAEtB4a,KAAK,CAACpH,CAAC,GAAGzT,KAAK,CAAC2K,OAAO;QACvB,IAAM+X,MAAM,GAAG7H,KAAK,CAAC8H,eAAe,CAClChB,GAAG,aAAHA,GAAG,wBAAAwB,sBAAA,GAAHxB,GAAG,CAAEnkB,OAAO,CAACqlB,YAAY,EAAE,cAAAM,sBAAA,uBAA3BA,sBAAA,CAA6BL,OAAO,EAAE,CACvC;QACD,IAAAM,sBAAA,GAAwCxH,yBAAyB,CAC/D8G,MAAM,CAACjP,CAAC,EACRqI,MAAuB,EACvBI,WAAW,EACXnB,KAAK,EACLW,QAAQ,EACRK,gBAAgB,EAChB/L,GAAG,CACJ;UARoBqT,cAAc,GAAAD,sBAAA,CAA3BlH,WAAW;QAUnB,IAAMoH,iBAAiB,GACrBJ,oBAAoB,CAAC7wB,KAAK,KAAKgxB,cAAc,CAAChxB,KAAK,IACnD6wB,oBAAoB,CAACrwB,GAAG,KAAKwwB,cAAc,CAACxwB,GAAG,IAC/CqwB,oBAAoB,CAACxQ,QAAQ,KAAK2Q,cAAc,CAAC3Q,QAAQ;QAG3DiP,GAAG,CAACnkB,OAAO,CAAC6B,mBAAmB,CAAC,WAAW,EAAEuL,eAAe,CAAC;QAC7D+W,GAAG,CAACnkB,OAAO,CAAC6B,mBAAmB,CAAC,SAAS,EAAE2jB,cAAa,CAAC;QACzDnB,aAAa,CAAC;UAAE/F,MAAM,EAAE;SAAI,CAAC;QAC7ByG,WAAW,CAAC,KAAK,CAAC;QAGlB,IAAIU,gBAAgB,GAAG,IAAI;QAAC,IAAAM,MAAA;UAAA,IAE1B,CAACzH,MAAM,KAAK,MAAM,IAAIA,MAAM,KAAK,KAAK,IAAIA,MAAM,KAAK,OAAO,KAC5DiG,YAAY,IACZuB,iBAAiB;YAAA,IAAAE,KAAA,GAAA9pB,MAAA,aAEb;cAAA,OAAAkG,OAAA,CAAAC,OAAA,CACmBkiB,YAAY,CAC/BsB,cAAc,EACdA,cAAc,CAACnK,WAAW,CAC3B,EAAAnf,IAAA,WAHKF,MAAM;gBAAA,IAIRA,MAAM,KAAKzD,SAAS;kBACtB6sB,gBAAgB,GAAGppB,MAAM;;;aAE5B,cAAe;cACdopB,gBAAgB,GAAG,KAAK;aACzB;YAAA,IAAAO,KAAA,IAAAA,KAAA,CAAAzpB,IAAA,SAAAypB,KAAA,CAAAzpB,IAAA;;YAAA,IAAA0pB,MAAA;cAAA,IACQzB,gBAAgB,IAAIsB,iBAAiB;gBAAA,IAAAI,MAAA,GAAAhqB,MAAA,aAC1C;kBAAA,OAAAkG,OAAA,CAAAC,OAAA,CACmBmiB,gBAAgB,CACnCqB,cAAc,EACdA,cAAc,CAACnK,WAAW,CAC3B,EAAAnf,IAAA,WAHKF,MAAM;oBAAA,IAIRA,MAAM,KAAKzD,SAAS;sBACtB6sB,gBAAgB,GAAGppB,MAAM;;;iBAE5B,cAAe;kBACdopB,gBAAgB,GAAG,KAAK;iBACzB;gBAAA,IAAAS,MAAA,IAAAA,MAAA,CAAA3pB,IAAA,SAAA2pB,MAAA,CAAA3pB,IAAA;;;YAAA,IAAA0pB,MAAA,IAAAA,MAAA,CAAA1pB,IAAA,SAAA0pB,MAAA,CAAA1pB,IAAA;;;QAAA,OAAA6F,OAAA,CAAAC,OAAA,CAAA0jB,MAAA,IAAAA,MAAA,CAAAxpB,IAAA,GAAAwpB,MAAA,CAAAxpB,IAAA,CAAA4pB,MAAA,IAAAA,MAAA,CAAAJ,MAAA;OAOJ,QAAAzpB,CAAA;QAAA,OAAA8F,OAAA,CAAAE,MAAA,CAAAhG,CAAA;;;IAED,IACE,CAACwoB,QAAQ,KACRZ,UAAU,CAAC5F,MAAM,KAAK,MAAM,IAC3B4F,UAAU,CAAC5F,MAAM,KAAK,KAAK,IAC3B4F,UAAU,CAAC5F,MAAM,KAAK,OAAO,IAC7B4F,UAAU,CAAC5F,MAAM,KAAK,UAAU,CAAC,IACnC6F,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEnkB,OAAO,EACZ;MACAmkB,GAAG,CAACnkB,OAAO,CAACgB,gBAAgB,CAAC,WAAW,EAAEoM,eAAe,CAAC;MAC1D+W,GAAG,CAACnkB,OAAO,CAACgB,gBAAgB,CAAC,SAAS,EAAEwkB,cAAa,CAAC;MACtDT,WAAW,CAAC,IAAI,CAAC;;GAEpB,EAAE,CACDb,UAAU,EACV3G,KAAK,EACLgB,gBAAgB,EAChBiG,gBAAgB,EAChBtG,QAAQ,EACRqG,YAAY,EACZJ,GAAG,EACHW,QAAQ,EACRzH,KAAK,EACL7K,GAAG,EACH8R,aAAa,EACbD,aAAa,CACd,CAAC;EAKF,IAAM+B,mBAAmB,YAAnBA,mBAAmBA,CACvB9H,MAA8B,EAC9BnpB,IAAa,EACbqN,KAA8C;IAAA;;YAE1C,CAACA,KAAK;UAAA,IACJ8b,MAAM,KAAK,QAAQ;YACrB9Y,eAAe,CAACrQ,IAAI,CAACwR,EAAE,CAAC;;;UAAC,IAIpB+Y,eAAe,CAACld,KAAK,CAAC;YAAA,IAAA6jB,MAAA;cAAA,IACzB/H,MAAM,KAAK,QAAQ;gBAAA,IAAAgI,MAAA;kBAAA,IACjB7B,QAAQ;oBAAA,IAAA8B,MAAA,GAAArqB,MAAA,aACN;sBAAA,OAAAkG,OAAA,CAAAC,OAAA,CACmBoiB,QAAQ,CAACtvB,IAAI,CAAC,EAAAoH,IAAA,WAA7BF,MAAM;wBAAA,IACRA,MAAM,KAAKzD,SAAS,IAAIyD,MAAM;0BAChCgoB,aAAa,CAAC;4BAAE/F,MAAM,EAANA,MAAM;4BAAEI,WAAW,EAAEvpB;2BAAM,CAAC;;;qBAE/C,YAAQoT,KAAK,EAAE;sBACdJ,OAAO,CAACI,KAAK,CAAC,mBAAmB,GAAGA,KAAK,CAAC;qBAC3C;oBAAA,IAAAge,MAAA,IAAAA,MAAA,CAAAhqB,IAAA,SAAAgqB,MAAA,CAAAhqB,IAAA;;;gBAAA,IAAA+pB,MAAA,IAAAA,MAAA,CAAA/pB,IAAA,SAAA+pB,MAAA,CAAA/pB,IAAA;;;YAAA,IAAA8pB,MAAA,IAAAA,MAAA,CAAA9pB,IAAA,SAAA8pB,MAAA,CAAA9pB,IAAA;iBAKF,IAAI+hB,MAAM,KAAK,YAAY,EAAE;YAChC,IAAI,CAAC4F,UAAU,CAAC5F,MAAM,EAAE;cACtB+F,aAAa,CAAC;gBACZ/F,MAAM,EAANA,MAAM;gBACNI,WAAW,EAAEvpB,IAAI;gBACjBuwB,oBAAoB,EAAEvwB;eACvB,CAAC;;WAEL,MAAM,IAAImpB,MAAM,KAAK,YAAY,EAAE;YAClC,IAAI4F,UAAU,CAAC5F,MAAM,KAAK,YAAY,EAAE;cACtC+F,aAAa,CAAC;gBAAE/F,MAAM,EAAE;eAAI,CAAC;;WAEhC,MAAM,IAAIA,MAAM,KAAK,UAAU,EAAE;YAChC,CAAC,CAACjM,aAAa,IAAIA,aAAa,CAACld,IAAI,CAAC;WACvC,MAAM,IAAImpB,MAAM,KAAK,OAAO,EAAE;YAC7B,CAAC,CAAC7M,OAAO,IAAIA,OAAO,CAACtc,IAAI,CAAC;WAC3B,MAEI,IAAImpB,MAAM,KAAK,MAAM,EAAE;YAAA,IAAAkI,sBAAA;YAC1B,IAAI,EAACrC,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEnkB,OAAO,KAAI,CAACqd,KAAK,EAAE;YAC7BA,KAAK,CAACpH,CAAC,GAAGzT,KAAK,CAAC2K,OAAO;YACvB,IAAM+X,MAAM,GAAG7H,KAAK,CAAC8H,eAAe,EAAAqB,sBAAA,GAClCrC,GAAG,CAACnkB,OAAO,CAACqlB,YAAY,EAAE,cAAAmB,sBAAA,uBAA1BA,sBAAA,CAA4BlB,OAAO,EAAE,CACtC;YACDV,mBAAmB,CAACM,MAAM,CAACjP,CAAC,GAAG9gB,IAAI,CAACue,EAAE,CAAC;YACvC2Q,aAAa,CAAC;cACZ/F,MAAM,EAANA,MAAM;cACNI,WAAW,EAAEvpB,IAAI;cACjBuwB,oBAAoB,EAAEvwB;aACvB,CAAC;WACH,MAAM;YACLkvB,aAAa,CAAC;cACZ/F,MAAM,EAANA,MAAM;cACNI,WAAW,EAAEvpB,IAAI;cACjBuwB,oBAAoB,EAAEvwB;aACvB,CAAC;;;;KAEL,QAAAmH,CAAA;MAAA,OAAA8F,OAAA,CAAAE,MAAA,CAAAhG,CAAA;;;EAED,OACE2G,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC;KACXF,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC,QAAQ;IAACyT,IAAI,EAAEwN,UAAU;IAAEqC,MAAM,EAAErC;KAC7C3vB,KAAK,CAACsE,GAAG,CAAC,UAAA5D,IAAI;IACb,OAAOA,IAAI,CAACumB,WAAW,CAAC3iB,GAAG,CAAC,UAAA2tB,KAAK;MAC/B,OACEzjB,KAAA,CAAAC,aAAA,CAACmW,KAAK;QACJtmB,GAAG,kBAAgBoC,IAAI,CAACwR,EAAE,YAAOlS,KAAK,CAACiyB,KAAK,CAACrpB,KAAK,CAAC,CAACsJ,EAAI;QACxD2S,QAAQ,EAAEnkB,IAAI;QACdokB,MAAM,EAAE9kB,KAAK,CAACiyB,KAAK,CAACrpB,KAAK,CAAC;QAC1B8H,SAAS,EAAEA,SAAS;QACpBqU,UAAU,EAAEA,UAAU;QACtB5G,WAAW,EAAEA,WAAW;QACxBJ,GAAG,EAAEA;QACL;KAEL,CAAC;GACH,CAAC,CACA,EACJvP,KAAA,CAAAC,aAAA;IAAGC,SAAS,EAAC,KAAK;IAAC8B,UAAU,EAAEA,UAAU;IAAEC,QAAQ,EAAEA;KAClDzQ,KAAK,CAACsE,GAAG,CAAC,UAAA5D,IAAI;IACb,OACE8N,KAAA,CAAAC,aAAA,CAACyf,QAAQ;MACPxtB,IAAI,EAAEA,IAAI;MACVyd,WAAW,EAAEA,WAAW;MACxB4G,UAAU,EAAEA,UAAU;MACtB+H,oBAAoB,EAAE,CAAC,CAACiD,gBAAgB,IAAI,CAACrvB,IAAI,CAACqa,UAAU;MAC5DgS,gBAAgB,EAAE,CAAC,CAAC+C,YAAY,IAAI,CAACpvB,IAAI,CAACqa,UAAU;MACpDqT,QAAQ,EAAE,CAAC1tB,IAAI,CAACqa,UAAU;MAC1BiS,YAAY,EAAE2E,mBAAmB;MACjCrzB,GAAG,EAAEoC,IAAI,CAACwR,EAAE;MACZqL,UAAU,EAAE,CAAC,CAACzM,YAAY,IAAIpQ,IAAI,CAACwR,EAAE,KAAKpB,YAAY,CAACoB,EAAE;MACzD6L,GAAG,EAAEA;MACL;GAEL,CAAC,CACA,CACF;AAER,CAAC;;;;;;;;;;;;;;ACjSM,IAAMmU,SAAS,GAA6B,SAAtCA,SAASA,CAAA/oB,IAAA;MACpBgpB,SAAS,GAAAhpB,IAAA,CAATgpB,SAAS;IACTC,aAAa,GAAAjpB,IAAA,CAAbipB,aAAa;IACbC,QAAQ,GAAAlpB,IAAA,CAARkpB,QAAQ;IACRphB,WAAW,GAAA9H,IAAA,CAAX8H,WAAW;IACXN,OAAO,GAAAxH,IAAA,CAAPwH,OAAO;IACPuN,OAAO,GAAA/U,IAAA,CAAP+U,OAAO;IACPoU,yBAAyB,GAAAnpB,IAAA,CAAzBmpB,yBAAyB;EAEzB,IAAMC,WAAW,GAAGroB,MAAM,CAAgB,IAAI,CAAC;EAC/C,IAAM2H,sBAAsB,GAAG3H,MAAM,CAAiB,IAAI,CAAC;EAC3D,IAAMsoB,mBAAmB,GAAGtoB,MAAM,CAAiB,IAAI,CAAC;EACxD,IAAMuoB,iBAAiB,GAAGH,yBAAyB,IAAIE,mBAAmB;EAC1E,IAAME,WAAW,GAAA7e,QAAA,KAAQwe,QAAQ;IAAE3C,GAAG,EAAE6C;IAAa;EAErDnmB,SAAS,CAAC;IACR,IAAIyF,sBAAsB,CAACtG,OAAO,EAAE;MAClCsG,sBAAsB,CAACtG,OAAO,CAACwG,SAAS,GAAGpB,OAAO;;GAErD,EAAE,CAACA,OAAO,CAAC,CAAC;EAEbvE,SAAS,CAAC;IACR,IAAIqmB,iBAAiB,CAAClnB,OAAO,EAAE;MAC7BknB,iBAAiB,CAAClnB,OAAO,CAACyG,UAAU,GAAGkM,OAAO;;GAEjD,EAAE,CAACA,OAAO,EAAEuU,iBAAiB,CAAC,CAAC;EAEhC,OACEjkB,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEikB,QAAM,CAACC,sBAAsB;IACxC3jB,GAAG,EAAEwjB,iBAAiB;IACtBI,GAAG,EAAC;KAEJrkB,KAAA,CAAAC,aAAA;IACEqkB,KAAK,EAAC,4BAA4B;IAClC9mB,KAAK,EAAEmmB,SAAS,CAACjR,QAAQ;IACzBjV,MAAM,EAAEmmB,aAAa,CAAC7hB,YAAY;IAClCC,UAAU,EAAE6hB,QAAQ,CAAC7hB;KAErBhC,KAAA,CAAAC,aAAA,CAACsU,QAAQ,EAAAnc,MAAA,CAAAkO,MAAA,KAAKsd,aAAa,EAAI,CAC3B,EACN5jB,KAAA,CAAAC,aAAA;IACEQ,GAAG,EAAE4C,sBAAsB;IAC3BnD,SAAS,EAAEikB,QAAM,CAACI,mBAAmB;IACrCjkB,KAAK,EACHmC,WAAW,GACP;MAAEhF,MAAM,EAAEgF,WAAW;MAAEjF,KAAK,EAAEmmB,SAAS,CAACjR;KAAU,GAClD;MAAElV,KAAK,EAAEmmB,SAAS,CAACjR;;KAGzB1S,KAAA,CAAAC,aAAA;IACEqkB,KAAK,EAAC,4BAA4B;IAClC9mB,KAAK,EAAEmmB,SAAS,CAACjR,QAAQ;IACzBjV,MAAM,EAAEomB,QAAQ,CAAC3hB,SAAS,GAAG2hB,QAAQ,CAACryB,KAAK,CAACmD,MAAM;IAClDqN,UAAU,EAAE6hB,QAAQ,CAAC7hB,UAAU;IAC/BvB,GAAG,EAAEsjB;KAEL/jB,KAAA,CAAAC,aAAA,CAAC2T,IAAI,EAAAxb,MAAA,CAAAkO,MAAA,KAAKqd,SAAS,EAAI,EACvB3jB,KAAA,CAAAC,aAAA,CAAC+gB,gBAAgB,EAAA5oB,MAAA,CAAAkO,MAAA,KAAK4d,WAAW,EAAI,CACjC,CACF,CACF;AAEV,CAAC;;;;;AChEM,IAAMM,gBAAgB,GAAoC,SAApDA,gBAAgBA,CAAA7pB,IAAA;MAC3ByX,MAAM,GAAAzX,IAAA,CAANyX,MAAM;IACNM,QAAQ,GAAA/X,IAAA,CAAR+X,QAAQ;IACR+R,aAAa,GAAA9pB,IAAA,CAAb8pB,aAAa;IACblV,GAAG,GAAA5U,IAAA,CAAH4U,GAAG;IACHnJ,QAAQ,GAAAzL,IAAA,CAARyL,QAAQ;IACOse,UAAU,GAAA/pB,IAAA,CAAzB,aAAa;IACbgqB,YAAY,GAAAhqB,IAAA,CAAZgqB,YAAY;IACZC,MAAM,GAAAjqB,IAAA,CAANiqB,MAAM;EAEN,IAAMtS,SAAS,GAAG5W,MAAM,CAAiB,IAAI,CAAC;EAC9C,IAAMmpB,UAAU,GAAGF,YAAY,WAAZA,YAAY,GAAIrS,SAAS;EAE5C1U,SAAS,CAAC;IACR,IAAIinB,UAAU,CAAC9nB,OAAO,EAAE;MACtB8nB,UAAU,CAAC9nB,OAAO,CAACyG,UAAU,GAAG4O,MAAM;;GAEzC,EAAE,CAACA,MAAM,EAAEyS,UAAU,CAAC,CAAC;EAExB,OACE7kB,KAAA,CAAAC,aAAA;IACEokB,GAAG,EAAE9U,GAAG,GAAG,KAAK,GAAG,KAAK;IACxBrP,SAAS,EAAE4kB,QAAM,CAACC,aAAa;IAC/B3e,QAAQ,EAAEA,QAAQ;IAClB3F,GAAG,EAAEokB,UAAU;mBACFH,UAAU;IACvBpkB,KAAK,EAAEskB,MAAM,GAAG;MAAEI,OAAO,EAAE;KAAQ,GAAG;MAAExnB,KAAK,EAAEkV;;KAE/C1S,KAAA,CAAAC,aAAA;IAAKK,KAAK,EAAE;MAAE9C,KAAK,EAAEinB,aAAa,WAAbA,aAAa,GAAI/R;KAAU;IAAExS,SAAS,EAAE4kB,QAAM,CAAC1S;IAAU,CAC1E;AAEV,CAAC;AClBD,IAAM6S,uBAAuB,GAAG,GAAG;AACnC,IAAMC,cAAc,GAAG,GAAG;AAC1B,IAAMC,kBAAkB,GAAG,CAAC;AAE5B,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAI5nB,KAAa,EAAE6nB,cAAsB;EAC/D,IAAMxb,QAAQ,GAAGrV,IAAI,CAAC+V,GAAG,CACvB2a,cAAc,EACdG,cAAc,GAAGH,cAAc,GAAGC,kBAAkB,CACrD;EACD,OAAO3wB,IAAI,CAAC2Y,GAAG,CAAC3Y,IAAI,CAAC+V,GAAG,CAAC/M,KAAK,EAAE0nB,cAAc,CAAC,EAAErb,QAAQ,CAAC;AAC5D,CAAC;AAED,IAAayb,KAAK,GAAwC,SAA7CA,KAAKA,CAAA3qB,IAAA;MAChBnJ,KAAK,GAAAmJ,IAAA,CAALnJ,KAAK;IAAA+zB,iBAAA,GAAA5qB,IAAA,CACLoH,YAAY;IAAZA,YAAY,GAAAwjB,iBAAA,cAAG,EAAE,GAAAA,iBAAA;IAAAC,gBAAA,GAAA7qB,IAAA,CACjBgY,WAAW;IAAXA,WAAW,GAAA6S,gBAAA,cAAG,EAAE,GAAAA,gBAAA;IAAAC,kBAAA,GAAA9qB,IAAA,CAChB+qB,aAAa;IAAbA,aAAa,GAAAD,kBAAA,cAAG,OAAO,GAAAA,kBAAA;IAAAE,cAAA,GAAAhrB,IAAA,CACvBuH,SAAS;IAATA,SAAS,GAAAyjB,cAAA,cAAG,EAAE,GAAAA,cAAA;IAAAC,gBAAA,GAAAjrB,IAAA,CACd8H,WAAW;IAAXA,WAAW,GAAAmjB,gBAAA,cAAG,CAAC,GAAAA,gBAAA;IAAAC,aAAA,GAAAlrB,IAAA,CACflJ,QAAQ;IAARA,QAAQ,GAAAo0B,aAAA,cAAGp2B,QAAQ,CAACiD,GAAG,GAAAmzB,aAAA;IAAAC,kBAAA,GAAAnrB,IAAA,CACvBjJ,aAAa;IAAbA,aAAa,GAAAo0B,kBAAA,cAAG,CAAC,GAAAA,kBAAA;IAAAC,WAAA,GAAAprB,IAAA,CACjBtH,MAAM;IAANA,MAAM,GAAA0yB,WAAA,cAAG,OAAO,GAAAA,WAAA;IAAAC,YAAA,GAAArrB,IAAA,CAChBsrB,OAAO;IAAPA,OAAO,GAAAD,YAAA,cAAG,EAAE,GAAAA,YAAA;IAAAE,oBAAA,GAAAvrB,IAAA,CACZ4c,eAAe;IAAfA,eAAe,GAAA2O,oBAAA,cAAG,CAAC,GAAAA,oBAAA;IAAAC,qBAAA,GAAAxrB,IAAA,CACnB8c,gBAAgB;IAAhBA,gBAAgB,GAAA0O,qBAAA,cAAG,SAAS,GAAAA,qBAAA;IAAAC,qBAAA,GAAAzrB,IAAA,CAC5B+c,wBAAwB;IAAxBA,wBAAwB,GAAA0O,qBAAA,cAAG,SAAS,GAAAA,qBAAA;IAAAC,qBAAA,GAAA1rB,IAAA,CACpCgd,kBAAkB;IAAlBA,kBAAkB,GAAA0O,qBAAA,cAAG,SAAS,GAAAA,qBAAA;IAAAC,qBAAA,GAAA3rB,IAAA,CAC9Bid,0BAA0B;IAA1BA,0BAA0B,GAAA0O,qBAAA,cAAG,SAAS,GAAAA,qBAAA;IAAAC,qBAAA,GAAA5rB,IAAA,CACtCkd,oBAAoB;IAApBA,oBAAoB,GAAA0O,qBAAA,cAAG,SAAS,GAAAA,qBAAA;IAAAC,qBAAA,GAAA7rB,IAAA,CAChCmd,4BAA4B;IAA5BA,4BAA4B,GAAA0O,qBAAA,cAAG,SAAS,GAAAA,qBAAA;IAAAC,qBAAA,GAAA9rB,IAAA,CACxCod,sBAAsB;IAAtBA,sBAAsB,GAAA0O,qBAAA,cAAG,SAAS,GAAAA,qBAAA;IAAAC,sBAAA,GAAA/rB,IAAA,CAClCqd,8BAA8B;IAA9BA,8BAA8B,GAAA0O,sBAAA,cAAG,SAAS,GAAAA,sBAAA;IAAAC,qBAAA,GAAAhsB,IAAA,CAC1Csd,wBAAwB;IAAxBA,wBAAwB,GAAA0O,qBAAA,cAAG,SAAS,GAAAA,qBAAA;IAAAC,sBAAA,GAAAjsB,IAAA,CACpCud,gCAAgC;IAAhCA,gCAAgC,GAAA0O,sBAAA,cAAG,SAAS,GAAAA,sBAAA;IAAAC,QAAA,GAAAlsB,IAAA,CAC5C4U,GAAG;IAAHA,GAAG,GAAAsX,QAAA,cAAG,KAAK,GAAAA,QAAA;IAAAC,gBAAA,GAAAnsB,IAAA,CACX6c,WAAW;IAAXA,WAAW,GAAAsP,gBAAA,cAAG,CAAC,GAAAA,gBAAA;IAAAC,aAAA,GAAApsB,IAAA,CACfsgB,QAAQ;IAARA,QAAQ,GAAA8L,aAAA,cAAG,MAAM,GAAAA,aAAA;IAAAC,eAAA,GAAArsB,IAAA,CACjBwmB,UAAU;IAAVA,UAAU,GAAA6F,eAAA,cAAG,MAAM,GAAAA,eAAA;IAAAC,eAAA,GAAAtsB,IAAA,CACnBqH,UAAU;IAAVA,UAAU,GAAAilB,eAAA,cAAG,iFAAiF,GAAAA,eAAA;IAAAC,aAAA,GAAAvsB,IAAA,CAC9FsH,QAAQ;IAARA,QAAQ,GAAAilB,aAAA,cAAG,MAAM,GAAAA,aAAA;IAAAC,gBAAA,GAAAxsB,IAAA,CACjBgV,WAAW;IAAXA,WAAW,GAAAwX,gBAAA,cAAG,EAAE,GAAAA,gBAAA;IAAAC,eAAA,GAAAzsB,IAAA,CAChBiY,UAAU;IAAVA,UAAU,GAAAwU,eAAA,cAAG,0BAA0B,GAAAA,eAAA;IACvCC,QAAQ,GAAA1sB,IAAA,CAAR0sB,QAAQ;IAAAC,mBAAA,GAAA3sB,IAAA,CACRkV,cAAc;IAAdA,cAAc,GAAAyX,mBAAA,cAAGpW,sBAAsB,GAAAoW,mBAAA;IAAAC,mBAAA,GAAA5sB,IAAA,CACvCgI,cAAc;IAAdA,cAAc,GAAA4kB,mBAAA,cAAG/gB,qBAAqB,GAAA+gB,mBAAA;IAAAC,kBAAA,GAAA7sB,IAAA,CACtCiI,aAAa;IAAbA,aAAa,GAAA4kB,kBAAA,cAAGjc,oBAAoB,GAAAic,kBAAA;IAAAC,kBAAA,GAAA9sB,IAAA,CACpCpD,aAAa;IAAbA,aAAa,GAAAkwB,kBAAA,cAAGnyB,sBAAsB,GAAAmyB,kBAAA;IAAAC,qBAAA,GAAA/sB,IAAA,CACtCoI,iBAAiB;IAAjBA,iBAAiB,GAAA2kB,qBAAA,cAAG,IAAI,GAAAA,qBAAA;IACxBzkB,gBAAgB,GAAAtI,IAAA,CAAhBsI,gBAAgB;IAChBqe,YAAY,GAAA3mB,IAAA,CAAZ2mB,YAAY;IACZC,gBAAgB,GAAA5mB,IAAA,CAAhB4mB,gBAAgB;IAChBnS,aAAa,GAAAzU,IAAA,CAAbyU,aAAa;IACbZ,OAAO,GAAA7T,IAAA,CAAP6T,OAAO;IACPgT,QAAQ,GAAA7mB,IAAA,CAAR6mB,QAAQ;IACRmG,QAAQ,GAAAhtB,IAAA,CAARgtB,QAAQ;IACRnlB,eAAe,GAAA7H,IAAA,CAAf6H,eAAe;IACfolB,YAAY,GAAAjtB,IAAA,CAAZitB,YAAY;IACZ9kB,YAAY,GAAAnI,IAAA,CAAZmI,YAAY;EAEZ,IAAM+hB,UAAU,GAAGnpB,MAAM,CAAiB,IAAI,CAAC;EAC/C,IAAMb,WAAW,GAAGa,MAAM,CAAiB,IAAI,CAAC;EAChD,IAAMmsB,iBAAiB,GAAGnsB,MAAM,CAAiB,IAAI,CAAC;EACtD,IAAMosB,eAAe,GAAGpsB,MAAM,CAAiB,IAAI,CAAC;EACpD,IAAMuoB,iBAAiB,GAAGvoB,MAAM,CAAiB,IAAI,CAAC;EACtD,IAAMqsB,cAAc,GAAGrsB,MAAM,CAAgB,IAAI,CAAC;EAClD,IAAMssB,kBAAkB,GAAGtsB,MAAM,CAAgB,IAAI,CAAC;EACtD,IAAMusB,mBAAmB,GAAGvsB,MAAM,CAAuC,IAAI,CAAC;EAC9E,IAAMwsB,iBAAiB,GAAGxsB,MAAM,CAAsB,IAAI,CAAC;EAC3D,IAAMysB,qBAAqB,GACzB,OAAOxvB,MAAM,KAAK,WAAW,IAAI,cAAc,IAAIA,MAAM;EAC3D,IAAAuC,SAAA,GAAkCC,QAAQ,CAAY;MACpD,IAAAitB,eAAA,GAA6B72B,cAAc,CAACC,KAAK,EAAEC,QAAQ,EAAEC,aAAa,CAAC;QAApEqB,SAAS,GAAAq1B,eAAA;QAAEp1B,OAAO,GAAAo1B,eAAA;MACzB,OAAO;QAAE32B,QAAQ,EAARA,QAAQ;QAAEyB,KAAK,EAAEJ,SAAS,CAACC,SAAS,EAAEC,OAAO,EAAEvB,QAAQ;OAAG;KACpE,CAAC;IAHK+iB,SAAS,GAAAtZ,SAAA;IAAEmtB,YAAY,GAAAntB,SAAA;EAI9B,IAAAI,UAAA,GAA8CH,QAAQ,CACpDxF,SAAS,CACV;IAFM2yB,eAAe,GAAAhtB,UAAA;IAAEitB,kBAAkB,GAAAjtB,UAAA;EAI1C,IAAAsmB,UAAA,GAA0CzmB,QAAQ,CAAC8pB,uBAAuB,CAAC;IAApErV,aAAa,GAAAgS,UAAA;IAAE4G,gBAAgB,GAAA5G,UAAA;EACtC,IAAA6G,UAAA,GAAwCttB,QAAQ,CAAC,CAAC,CAAC;IAA5CutB,YAAY,GAAAD,UAAA;IAAEE,eAAe,GAAAF,UAAA;EACpC,IAAAG,UAAA,GAAoCztB,QAAQ,CAAC,KAAK,CAAC;IAA5CqN,UAAU,GAAAogB,UAAA;IAAEC,aAAa,GAAAD,UAAA;EAChC,IAAAE,UAAA,GAAkD3tB,QAAQ,CAAC,CAAC,CAAC;IAAtDsU,iBAAiB,GAAAqZ,UAAA;IAAEC,oBAAoB,GAAAD,UAAA;EAC9C,IAAAE,UAAA,GAAoD7tB,QAAQ,CAACsH,WAAW,CAAC;IAAlE+M,kBAAkB,GAAAwZ,UAAA;IAAEC,qBAAqB,GAAAD,UAAA;EAChD,IAAAE,UAAA,GAAgC/tB,QAAQ,CAAY,EAAE,CAAC;IAAhDgd,QAAQ,GAAA+Q,UAAA;IAAEC,WAAW,GAAAD,UAAA;EAC5B,IAAAE,UAAA,GAAoCjuB,QAAQ,CAAa;MACvDkgB,MAAM,EAAE;KACT,CAAC;IAFK4F,UAAU,GAAAmI,UAAA;IAAEhI,aAAa,GAAAgI,UAAA;EAGhC,IAAM7S,UAAU,GAAGxa,OAAO,CACxB;IAAA,OAAOmG,SAAS,GAAG+jB,OAAO,GAAI,GAAG;KACjC,CAAC/jB,SAAS,EAAE+jB,OAAO,CAAC,CACrB;EAED,IAAAoD,UAAA,GAAwCluB,QAAQ,EAAW;IAApDmH,YAAY,GAAA+mB,UAAA;IAAE9mB,eAAe,GAAA8mB,UAAA;EACpC,IAAAC,UAAA,GAAoCnuB,QAAQ,CAAiB,IAAI,CAAC;IAA3DouB,UAAU,GAAAD,UAAA;IAAEjI,aAAa,GAAAiI,UAAA;EAEhC,IAAM5W,QAAQ,GAAG8B,SAAS,CAACthB,KAAK,CAACyB,MAAM,GAAGge,WAAW;EACrD,IAAMN,eAAe,GAAG8F,QAAQ,CAACxjB,MAAM,GAAGuN,SAAS;EAEnD,IAAAsnB,WAAA,GAA8BruB,QAAQ,CAAC,CAAC,CAAC;IAAlCgH,OAAO,GAAAqnB,WAAA;IAAEC,UAAU,GAAAD,WAAA;EAC1B,IAAAE,WAAA,GAAsCvuB,QAAQ,CAAC,CAAC,CAAC;IAA1CwuB,WAAW,GAAAD,WAAA;IAAEE,cAAc,GAAAF,WAAA;EAClC,IAAAG,WAAA,GAAwC1uB,QAAQ,CAAC,CAAC,CAAC,CAAC;IAA7C2uB,YAAY,GAAAD,WAAA;IAAEE,eAAe,GAAAF,WAAA;EACpC,IAAAG,WAAA,GAAkD7uB,QAAQ,CAAC,IAAI,CAAC;IAAzD8uB,iBAAiB,GAAAD,WAAA;IAAEE,oBAAoB,GAAAF,WAAA;EAC9C,IAAMG,mBAAmB,GAAGzuB,MAAM,CAAC,KAAK,CAAC;EACzC,IAAM0uB,oBAAoB,GAAG1uB,MAAM,CAAC,KAAK,CAAC;EAG1CkC,SAAS,CAAC;IACR,IAAIysB,aAAqB;IACzB,IAAI7nB,eAAe,EAAE;MACnB6nB,aAAa,GAAG3N,iBAAiB,CAAClrB,KAAK,CAAC;KACzC,MAAM;MACL64B,aAAa,GAAG74B,KAAK;;IAEvB64B,aAAa,GAAGA,aAAa,CAACC,IAAI,CAACnN,SAAS,CAAC;IAC7C,IAAAoN,gBAAA,GAA6Bh5B,cAAc,CACzC84B,aAAa,EACb54B,QAAQ,EACRC,aAAa,CACd;MAJMqB,SAAS,GAAAw3B,gBAAA;MAAEv3B,OAAO,GAAAu3B,gBAAA;IAKzB,IAAIC,QAAQ,GAAG13B,SAAS,CAACC,SAAS,EAAEC,OAAO,EAAEvB,QAAQ,CAAC;IACtD,IAAI8d,GAAG,EAAE;MACPib,QAAQ,GAAGA,QAAQ,CAACC,OAAO,EAAE;MAC7B,IAAIX,YAAY,KAAK,CAAC,CAAC,EAAE;QACvBC,eAAe,CAACS,QAAQ,CAAC71B,MAAM,GAAGge,WAAW,CAAC;;;IAGlD0V,YAAY,CAAC;MAAEn1B,KAAK,EAAEs3B,QAAQ;MAAE/4B,QAAQ,EAARA;KAAU,CAAC;IAC3C03B,WAAW,CACT7R,iBAAiB,CACf+S,aAAa,EACbG,QAAQ,EACR7X,WAAW,EACXzQ,SAAS,EACTqU,UAAU,EACVgB,eAAe,EACfC,WAAW,EACXjI,GAAG,EACHkI,gBAAgB,EAChBC,wBAAwB,EACxBC,kBAAkB,EAClBC,0BAA0B,EAC1BC,oBAAoB,EACpBC,4BAA4B,EAC5BC,sBAAsB,EACtBC,8BAA8B,EAC9BC,wBAAwB,EACxBC,gCAAgC,CACjC,CACF;GACF,EAAE,CACD1mB,KAAK,EACLC,QAAQ,EACRC,aAAa,EACbwQ,SAAS,EACTqV,eAAe,EACf5E,WAAW,EACX4D,UAAU,EACViB,WAAW,EACXC,gBAAgB,EAChBC,wBAAwB,EACxBC,kBAAkB,EAClBC,0BAA0B,EAC1BC,oBAAoB,EACpBC,4BAA4B,EAC5BC,sBAAsB,EACtBC,8BAA8B,EAC9BC,wBAAwB,EACxBC,gCAAgC,EAChC3I,GAAG,EACHua,YAAY,EACZtnB,eAAe,CAChB,CAAC;EAEF5E,SAAS,CAAC;IACR,IACEnM,QAAQ,KAAK+iB,SAAS,CAAC/iB,QAAQ,KAC7B41B,QAAQ,IAAI,CAACiB,eAAe,IAC3BjB,QAAQ,IAAI,CAAAiB,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEn0B,OAAO,EAAE,MAAKkzB,QAAQ,CAAClzB,OAAO,EAAG,CAAC,EAClE;MACA,IAAMjB,KAAK,GAAGshB,SAAS,CAACthB,KAAK;MAC7B,IAAMkH,KAAK,GAAGlH,KAAK,CAAC0U,SAAS,CAC3B,UAACmP,CAAC,EAAEnf,CAAC;QAAA,OACHyvB,QAAQ,CAAClzB,OAAO,EAAE,IAAI4iB,CAAC,CAAC5iB,OAAO,EAAE,IACjCyD,CAAC,GAAG,CAAC,KAAK1E,KAAK,CAACyB,MAAM,IACtB0yB,QAAQ,CAAClzB,OAAO,EAAE,GAAGjB,KAAK,CAAC0E,CAAC,GAAG,CAAC,CAAC,CAACzD,OAAO,EAAE;QAC9C;MACD,IAAIiG,KAAK,KAAK,CAAC,CAAC,EAAE;QAChB;;MAEFmuB,kBAAkB,CAAClB,QAAQ,CAAC;MAC5B0C,eAAe,CAACpX,WAAW,GAAGvY,KAAK,CAAC;;GAEvC,EAAE,CACDitB,QAAQ,EACR1U,WAAW,EACX6B,SAAS,CAACthB,KAAK,EACfshB,SAAS,CAAC/iB,QAAQ,EAClBA,QAAQ,EACR62B,eAAe,EACfC,kBAAkB,CACnB,CAAC;EAEF3qB,SAAS,CAAC;IACR,IAAQ6d,WAAW,GAAawF,UAAU,CAAlCxF,WAAW;MAAEJ,MAAM,GAAK4F,UAAU,CAArB5F,MAAM;IAC3B,IAAII,WAAW,EAAE;MACf,IAAIJ,MAAM,KAAK,QAAQ,EAAE;QACvB+F,aAAa,CAAC;UAAE/F,MAAM,EAAE;SAAI,CAAC;QAC7B8N,WAAW,CAAChR,QAAQ,CAACha,MAAM,CAAC,UAAA8P,CAAC;UAAA,OAAIA,CAAC,CAACvK,EAAE,KAAK+X,WAAW,CAAC/X,EAAE;UAAC,CAAC;OAC3D,MAAM,IACL2X,MAAM,KAAK,MAAM,IACjBA,MAAM,KAAK,KAAK,IAChBA,MAAM,KAAK,OAAO,IAClBA,MAAM,KAAK,UAAU,EACrB;QACA,IAAMqP,aAAa,GAAGvS,QAAQ,CAACtL,IAAI,CAAC,UAAAoB,CAAC;UAAA,OAAIA,CAAC,CAACvK,EAAE,KAAK+X,WAAW,CAAC/X,EAAE;UAAC;QACjE,IACEgnB,aAAa,KACZA,aAAa,CAAC94B,KAAK,CAACuE,OAAO,EAAE,KAAKslB,WAAW,CAAC7pB,KAAK,CAACuE,OAAO,EAAE,IAC5Du0B,aAAa,CAACt4B,GAAG,CAAC+D,OAAO,EAAE,KAAKslB,WAAW,CAACrpB,GAAG,CAAC+D,OAAO,EAAE,IACzDu0B,aAAa,CAACzY,QAAQ,KAAKwJ,WAAW,CAACxJ,QAAQ,CAAC,EAClD;UAEA,IAAM0Y,WAAW,GAAGxS,QAAQ,CAACriB,GAAG,CAAC,UAAAmY,CAAC;YAAA,OAChCA,CAAC,CAACvK,EAAE,KAAK+X,WAAW,CAAC/X,EAAE,GAAG+X,WAAW,GAAGxN,CAAC;YAC1C;UACDkb,WAAW,CAACwB,WAAW,CAAC;;;;GAI/B,EAAE,CAAC1J,UAAU,EAAE9I,QAAQ,CAAC,CAAC;EAE1Bva,SAAS,CAAC;IACR,IAAI2rB,UAAU,EAAE;MACdJ,WAAW,CAAChR,QAAQ,CAACriB,GAAG,CAAC,UAAAmY,CAAC;QAAA,OAAKA,CAAC,CAACvK,EAAE,KAAK6lB,UAAU,CAAC7lB,EAAE,GAAGuK,CAAC,GAAGsb,UAAU;OAAC,CAAC,CAAC;MACzElI,aAAa,CAAC,IAAI,CAAC;;GAEtB,EAAE,CAACkI,UAAU,EAAEpR,QAAQ,CAAC,CAAC;EAE1Bva,SAAS,CAAC;IACR,IAAMgtB,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA;MACtB,IAAI/F,UAAU,CAAC9nB,OAAO,EAAE;QACtB4rB,eAAe,CAAC9D,UAAU,CAAC9nB,OAAO,CAACuT,WAAW,CAAC;;KAElD;IACDsa,kBAAkB,EAAE;IACpBjyB,MAAM,CAACoF,gBAAgB,CAAC,QAAQ,EAAE6sB,kBAAkB,CAAC;IACrD,OAAO;MAAA,OAAMjyB,MAAM,CAACiG,mBAAmB,CAAC,QAAQ,EAAEgsB,kBAAkB,CAAC;;GACtE,EAAE,EAAE,CAAC;EAENhtB,SAAS,CAAC;IACR,IAAI,CAAC8nB,aAAa,EAAE;MAClB8C,gBAAgB,CAAC,CAAC,CAAC;MACnB;;IAEF,IAAIE,YAAY,EAAE;MAChBF,gBAAgB,CAAC,UAAAxkB,IAAI;QAAA,OAAIohB,kBAAkB,CAACphB,IAAI,EAAE0kB,YAAY,CAAC;QAAC;;GAEnE,EAAE,CAAChD,aAAa,EAAEgD,YAAY,CAAC,CAAC;EAEjC,IAAMmC,cAAc,GAAGnF,aAAa,GAChC9V,aAAa,GAAGuV,kBAAkB,GAClC,CAAC;EAELvnB,SAAS,CAAC;IACR,IAAI8qB,YAAY,EAAE;MAChBK,oBAAoB,CAACv0B,IAAI,CAAC+V,GAAG,CAACme,YAAY,GAAGmC,cAAc,EAAE,CAAC,CAAC,CAAC;;GAEnE,EAAE,CAACnC,YAAY,EAAEmC,cAAc,CAAC,CAAC;EAElCjtB,SAAS,CAAC;IACR,IAAI6E,WAAW,EAAE;MACfwmB,qBAAqB,CAACxmB,WAAW,GAAGV,YAAY,CAAC;KAClD,MAAM;MACLknB,qBAAqB,CAACz3B,KAAK,CAACmD,MAAM,GAAGuN,SAAS,GAAGH,YAAY,CAAC;;GAEjE,EAAE,CAACU,WAAW,EAAEjR,KAAK,EAAEuQ,YAAY,EAAEG,SAAS,CAAC,CAAC;EAEjDtE,SAAS,CAAC;IACR,OAAO;MACL,IAAIqqB,mBAAmB,CAAClrB,OAAO,EAAE;QAC/Bb,QAAQ,CAAC0C,mBAAmB,CAAC,WAAW,EAAEqpB,mBAAmB,CAAClrB,OAAO,CAAC;QACtEkrB,mBAAmB,CAAClrB,OAAO,GAAG,IAAI;;MAEpC,IAAImrB,iBAAiB,CAACnrB,OAAO,EAAE;QAC7Bb,QAAQ,CAAC0C,mBAAmB,CAAC,SAAS,EAAEspB,iBAAiB,CAACnrB,OAAO,CAAC;QAClEmrB,iBAAiB,CAACnrB,OAAO,GAAG,IAAI;;KAEnC;GACF,EAAE,EAAE,CAAC;EAGNa,SAAS,CAAC;IACR,IAAMktB,WAAW,GAAG,SAAdA,WAAWA,CAAIvrB,KAAiB;MACpC,IAAIA,KAAK,CAACwrB,QAAQ,IAAIxrB,KAAK,CAACyrB,MAAM,EAAE;QAClC,IAAMC,UAAU,GAAG1rB,KAAK,CAACyrB,MAAM,GAAGzrB,KAAK,CAACyrB,MAAM,GAAGzrB,KAAK,CAAC2rB,MAAM;QAC7D,IAAIC,UAAU,GAAGrB,YAAY,GAAGmB,UAAU;QAC1C,IAAIE,UAAU,GAAG,CAAC,EAAE;UAClBA,UAAU,GAAG,CAAC;SACf,MAAM,IAAIA,UAAU,GAAGzY,QAAQ,EAAE;UAChCyY,UAAU,GAAGzY,QAAQ;;QAEvB0X,oBAAoB,CAACrtB,OAAO,GAAG,IAAI;QACnCgtB,eAAe,CAACoB,UAAU,CAAC;QAC3B5rB,KAAK,CAACC,cAAc,EAAE;OACvB,MAAM,IAAIiD,WAAW,EAAE;QACtB,IAAI2oB,UAAU,GAAGjpB,OAAO,GAAG5C,KAAK,CAAC2rB,MAAM;QACvC,IAAIE,UAAU,GAAG,CAAC,EAAE;UAClBA,UAAU,GAAG,CAAC;SACf,MAAM,IAAIA,UAAU,GAAG/Y,eAAe,GAAG5P,WAAW,EAAE;UACrD2oB,UAAU,GAAG/Y,eAAe,GAAG5P,WAAW;;QAE5C,IAAI2oB,UAAU,KAAKjpB,OAAO,EAAE;UAC1BsnB,UAAU,CAAC2B,UAAU,CAAC;UACtB7rB,KAAK,CAACC,cAAc,EAAE;;;KAG3B;IAGD,IAAM6rB,SAAS,GAAGxG,UAAU,CAAC9nB,OAAO;IACpCsuB,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEttB,gBAAgB,CAAC,OAAO,EAAE+sB,WAAW,EAAE;MAChD7sB,OAAO,EAAE;KACV,CAAC;IACF,OAAO;MACLotB,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEzsB,mBAAmB,CAAC,OAAO,EAAEksB,WAAW,CAAC;KACrD;GACF,EAAE,CACD3oB,OAAO,EACP2nB,YAAY,EACZrnB,WAAW,EACXiQ,QAAQ,EACRnD,GAAG,EACH8C,eAAe,CAChB,CAAC;EAGFzU,SAAS,CAAC;IACR,IAAM0tB,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA;MACtB,IAAMC,EAAE,GAAGzD,eAAe,CAAC/qB,OAAO;MAClC,IAAIwuB,EAAE,EAAE;QACNrB,oBAAoB,CAACqB,EAAE,CAACC,WAAW,IAAI,CAAC,CAAC;;KAE5C;IACDF,kBAAkB,EAAE;IACpB,IAAMG,EAAE,GAAI9yB,MAAc,CAAC6F,cAAc;IACzC,IAAMktB,EAAE,GAAGD,EAAE,GAAG,IAAIA,EAAE,CAACH,kBAAkB,CAAC,GAAG,IAAI;IACjD,IAAII,EAAE,IAAI5D,eAAe,CAAC/qB,OAAO,EAAE;MACjC2uB,EAAE,CAAC/sB,OAAO,CAACmpB,eAAe,CAAC/qB,OAAO,CAAC;;IAErCpE,MAAM,CAACoF,gBAAgB,CAAC,QAAQ,EAAEutB,kBAAkB,CAAC;IACrD,OAAO;MACL,IAAII,EAAE,EAAE;QACNA,EAAE,CAAC7sB,UAAU,EAAE;;MAEjBlG,MAAM,CAACiG,mBAAmB,CAAC,QAAQ,EAAE0sB,kBAAkB,CAAC;KACzD;GACF,EAAE,CAAC95B,KAAK,EAAEwQ,UAAU,EAAEC,QAAQ,EAAEyjB,aAAa,EAAEoC,eAAe,EAAEvwB,aAAa,CAAC,CAAC;EAEhF,IAAMo0B,aAAa,GAAG,SAAhBA,aAAaA,CAAIpsB,KAAqC;IAC1D,IAAI4C,OAAO,KAAK5C,KAAK,CAACI,aAAa,CAAC4D,SAAS,IAAI,CAAC4mB,mBAAmB,CAACptB,OAAO,EAAE;MAC7E0sB,UAAU,CAAClqB,KAAK,CAACI,aAAa,CAAC4D,SAAS,CAAC;MACzC4mB,mBAAmB,CAACptB,OAAO,GAAG,IAAI;KACnC,MAAM;MACLotB,mBAAmB,CAACptB,OAAO,GAAG,KAAK;;GAEtC;EAED,IAAM6uB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIrsB,KAAqC;IAC7D,IACEoqB,WAAW,KAAKpqB,KAAK,CAACI,aAAa,CAAC6D,UAAU,IAC9C,CAAC2mB,mBAAmB,CAACptB,OAAO,EAC5B;MACA6sB,cAAc,CAACrqB,KAAK,CAACI,aAAa,CAAC6D,UAAU,CAAC;MAC9C2mB,mBAAmB,CAACptB,OAAO,GAAG,IAAI;KACnC,MAAM;MACLotB,mBAAmB,CAACptB,OAAO,GAAG,KAAK;;GAEtC;EAED,IAAM8uB,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAItsB,KAAqC;IAC9D,IACEuqB,YAAY,KAAKvqB,KAAK,CAACI,aAAa,CAAC6D,UAAU,IAC/C,CAAC4mB,oBAAoB,CAACrtB,OAAO,EAC7B;MACAgtB,eAAe,CAACxqB,KAAK,CAACI,aAAa,CAAC6D,UAAU,CAAC;MAC/C4mB,oBAAoB,CAACrtB,OAAO,GAAG,IAAI;KACpC,MAAM;MACLqtB,oBAAoB,CAACrtB,OAAO,GAAG,KAAK;;IAEtC,IAAIknB,iBAAiB,CAAClnB,OAAO,IAAIknB,iBAAiB,CAAClnB,OAAO,CAACyG,UAAU,KAAKjE,KAAK,CAACI,aAAa,CAAC6D,UAAU,EAAE;MACxGygB,iBAAiB,CAAClnB,OAAO,CAACyG,UAAU,GAAGjE,KAAK,CAACI,aAAa,CAAC6D,UAAU;;GAExE;EAKD,IAAMlE,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,KAA0C;IAC/D,IAAMlD,MAAM,GAAGkD,KAAK,CAAClD,MAAM;IAC3B,IAAIA,MAAM,YAAYgR,WAAW,EAAE;MACjC,IACEhR,MAAM,CAACiR,iBAAiB,IACxBjR,MAAM,CAACkR,OAAO,KAAK,OAAO,IAC1BlR,MAAM,CAACkR,OAAO,KAAK,UAAU,IAC7BlR,MAAM,CAACkR,OAAO,KAAK,QAAQ,EAC3B;QACA;;;IAGJhO,KAAK,CAACC,cAAc,EAAE;IACtB,IAAI4rB,UAAU,GAAGjpB,OAAO;IACxB,IAAIgpB,UAAU,GAAGrB,YAAY;IAC7B,IAAIgC,GAAG,GAAG,IAAI;IACd,QAAQvsB,KAAK,CAACzP,GAAG;MACf,KAAK,MAAM;MACX,KAAK,WAAW;QACds7B,UAAU,IAAIlpB,SAAS;QACvB4pB,GAAG,GAAG,KAAK;QACX;MACF,KAAK,IAAI;MACT,KAAK,SAAS;QACZV,UAAU,IAAIlpB,SAAS;QACvB4pB,GAAG,GAAG,KAAK;QACX;MACF,KAAK,MAAM;MACX,KAAK,WAAW;QACdX,UAAU,IAAIxY,WAAW;QACzB;MACF,KAAK,OAAO;MACZ,KAAK,YAAY;QACfwY,UAAU,IAAIxY,WAAW;QACzB;;IAEJ,IAAImZ,GAAG,EAAE;MACP,IAAIX,UAAU,GAAG,CAAC,EAAE;QAClBA,UAAU,GAAG,CAAC;OACf,MAAM,IAAIA,UAAU,GAAGzY,QAAQ,EAAE;QAChCyY,UAAU,GAAGzY,QAAQ;;MAEvB0X,oBAAoB,CAACrtB,OAAO,GAAG,IAAI;MACnCgtB,eAAe,CAACoB,UAAU,CAAC;KAC5B,MAAM;MACL,IAAIC,UAAU,GAAG,CAAC,EAAE;QAClBA,UAAU,GAAG,CAAC;OACf,MAAM,IAAIA,UAAU,GAAG/Y,eAAe,GAAG5P,WAAW,EAAE;QACrD2oB,UAAU,GAAG/Y,eAAe,GAAG5P,WAAW;;MAE5CgnB,UAAU,CAAC2B,UAAU,CAAC;;GAEzB;EAKD,IAAMW,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,MAAc;IACxC,IAAMC,eAAe,GAAG9T,QAAQ,CAACtL,IAAI,CAAC,UAAAoB,CAAC;MAAA,OAAIA,CAAC,CAACvK,EAAE,KAAKsoB,MAAM;MAAC;IAC3D,IAAME,eAAe,GAAG/T,QAAQ,CAACtL,IAAI,CACnC,UAAAoB,CAAC;MAAA,OAAI,CAAC,CAAC3L,YAAY,IAAI2L,CAAC,CAACvK,EAAE,KAAKpB,YAAY,CAACoB,EAAE;MAChD;IACD,IAAIikB,QAAQ,EAAE;MACZ,IAAIuE,eAAe,EAAE;QACnBvE,QAAQ,CAACuE,eAAe,EAAE,KAAK,CAAC;;MAElC,IAAID,eAAe,EAAE;QACnBtE,QAAQ,CAACsE,eAAe,EAAE,IAAI,CAAC;;;IAGnC1pB,eAAe,CAAC0pB,eAAe,CAAC;GACjC;EACD,IAAME,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIj6B,IAAU;IACrC,IAAIsQ,eAAe,IAAItQ,IAAI,CAACic,YAAY,KAAKxY,SAAS,EAAE;MACtD6M,eAAe,CAAA6C,QAAA,KAAMnT,IAAI;QAAEic,YAAY,EAAE,CAACjc,IAAI,CAACic;QAAc,CAAC;;GAEjE;EAED,IAAMie,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIliB,OAAe;IAC1C,IAAI6d,cAAc,CAAChrB,OAAO,IAAI,IAAI,IAAIirB,kBAAkB,CAACjrB,OAAO,IAAI,IAAI,EAAE;MACxE;;IAEF,IAAI,CAAC8nB,UAAU,CAAC9nB,OAAO,EAAE;MACvB;;IAEF,IAAMsN,KAAK,GAAGH,OAAO,GAAG6d,cAAc,CAAChrB,OAAO;IAC9C,IAAMuN,SAAS,GAAG8a,kBAAkB,CAClC4C,kBAAkB,CAACjrB,OAAO,GAAGsN,KAAK,EAClCwa,UAAU,CAAC9nB,OAAO,CAACuT,WAAW,CAC/B;IACDkY,gBAAgB,CAACle,SAAS,CAAC;GAC5B;EAED,IAAM+hB,sBAAsB,GAC1B,SADIA,sBAAsBA,CAC1B9sB,KAAK;IACHA,KAAK,CAACC,cAAc,EAAE;IACtBuoB,cAAc,CAAChrB,OAAO,GAAGwC,KAAK,CAAC2K,OAAO;IACtC8d,kBAAkB,CAACjrB,OAAO,GAAG6S,aAAa;IAC1CiZ,aAAa,CAAC,IAAI,CAAC;IACnB,IAAItpB,KAAK,CAACI,aAAa,CAAC2sB,iBAAiB,EAAE;MACzC/sB,KAAK,CAACI,aAAa,CAAC2sB,iBAAiB,CAAC/sB,KAAK,CAACgtB,SAAS,CAAC;;GAEzD;EAEH,IAAMC,sBAAsB,GAC1B,SADIA,sBAAsBA,CAC1BjtB,KAAK;IACH6sB,mBAAmB,CAAC7sB,KAAK,CAAC2K,OAAO,CAAC;GACnC;EAEH,IAAMuiB,oBAAoB,GAA8C,SAAlEA,oBAAoBA,CAA8CltB,KAAK;IAC3EwoB,cAAc,CAAChrB,OAAO,GAAG,IAAI;IAC7BirB,kBAAkB,CAACjrB,OAAO,GAAG,IAAI;IACjC8rB,aAAa,CAAC,KAAK,CAAC;IACpB,IAAItpB,KAAK,CAACI,aAAa,CAAC+sB,qBAAqB,EAAE;MAC7CntB,KAAK,CAACI,aAAa,CAAC+sB,qBAAqB,CAACntB,KAAK,CAACgtB,SAAS,CAAC;;GAE7D;EAED,IAAMI,oBAAoB,GAA4C,SAAhEA,oBAAoBA,CAA4CptB,KAAK;IACzEA,KAAK,CAACC,cAAc,EAAE;IACtBuoB,cAAc,CAAChrB,OAAO,GAAGwC,KAAK,CAAC2K,OAAO;IACtC8d,kBAAkB,CAACjrB,OAAO,GAAG6S,aAAa;IAC1CiZ,aAAa,CAAC,IAAI,CAAC;IACnB,IAAIZ,mBAAmB,CAAClrB,OAAO,EAAE;MAC/Bb,QAAQ,CAAC0C,mBAAmB,CAAC,WAAW,EAAEqpB,mBAAmB,CAAClrB,OAAO,CAAC;;IAExE,IAAImrB,iBAAiB,CAACnrB,OAAO,EAAE;MAC7Bb,QAAQ,CAAC0C,mBAAmB,CAAC,SAAS,EAAEspB,iBAAiB,CAACnrB,OAAO,CAAC;;IAEpE,IAAMoN,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,SAAqB;MAC5CgiB,mBAAmB,CAAChiB,SAAS,CAACF,OAAO,CAAC;KACvC;IACD,IAAMO,aAAa,GAAG,SAAhBA,aAAaA,CAAA;MACjBsd,cAAc,CAAChrB,OAAO,GAAG,IAAI;MAC7BirB,kBAAkB,CAACjrB,OAAO,GAAG,IAAI;MACjC8rB,aAAa,CAAC,KAAK,CAAC;MACpB,IAAIZ,mBAAmB,CAAClrB,OAAO,EAAE;QAC/Bb,QAAQ,CAAC0C,mBAAmB,CAAC,WAAW,EAAEqpB,mBAAmB,CAAClrB,OAAO,CAAC;QACtEkrB,mBAAmB,CAAClrB,OAAO,GAAG,IAAI;;MAEpC,IAAImrB,iBAAiB,CAACnrB,OAAO,EAAE;QAC7Bb,QAAQ,CAAC0C,mBAAmB,CAAC,SAAS,EAAEspB,iBAAiB,CAACnrB,OAAO,CAAC;QAClEmrB,iBAAiB,CAACnrB,OAAO,GAAG,IAAI;;KAEnC;IACDkrB,mBAAmB,CAAClrB,OAAO,GAAGoN,eAAe;IAC7C+d,iBAAiB,CAACnrB,OAAO,GAAG0N,aAAa;IACzCvO,QAAQ,CAAC6B,gBAAgB,CAAC,WAAW,EAAEoM,eAAe,CAAC;IACvDjO,QAAQ,CAAC6B,gBAAgB,CAAC,SAAS,EAAE0M,aAAa,CAAC;GACpD;EACD,IAAMkZ,SAAS,GAAc;IAC3BhR,WAAW,EAAXA,WAAW;IACXD,QAAQ,EAARA,QAAQ;IACRlhB,KAAK,EAAEA,KAAK;IACZ0Q,SAAS,EAATA,SAAS;IACThP,KAAK,EAAEshB,SAAS,CAACthB,KAAK;IACtB0f,UAAU,EAAVA,UAAU;IACVrD,GAAG,EAAHA;GACD;EACD,IAAMqU,aAAa,GAAkB;IACnCpP,SAAS,EAATA,SAAS;IACTnhB,MAAM,EAANA,MAAM;IACN5B,QAAQ,EAARA,QAAQ;IACRsQ,YAAY,EAAZA,YAAY;IACZ4Q,WAAW,EAAXA,WAAW;IACX3Q,UAAU,EAAVA,UAAU;IACVC,QAAQ,EAARA,QAAQ;IACRsN,GAAG,EAAHA;GACD;EACD,IAAMsU,QAAQ,GAA0B;IACtCryB,KAAK,EAAE2mB,QAAQ;IACfjlB,KAAK,EAAEshB,SAAS,CAACthB,KAAK;IACtB+tB,UAAU,EAAVA,UAAU;IACV3e,YAAY,EAAZA,YAAY;IACZJ,SAAS,EAATA,SAAS;IACTqU,UAAU,EAAVA,UAAU;IACV5D,WAAW,EAAXA,WAAW;IACXwO,UAAU,EAAVA,UAAU;IACVlG,QAAQ,EAARA,QAAQ;IACRjZ,UAAU,EAAVA,UAAU;IACVC,QAAQ,EAARA,QAAQ;IACR0N,WAAW,EAAXA,WAAW;IACX+C,QAAQ,EAARA,QAAQ;IACRnD,GAAG,EAAHA,GAAG;IACH6R,aAAa,EAAbA,aAAa;IACbC,aAAa,EAAbA,aAAa;IACb9e,eAAe,EAAEwpB,kBAAkB;IACnCzK,YAAY,EAAZA,YAAY;IACZC,gBAAgB,EAAhBA,gBAAgB;IAChBnS,aAAa,EAAbA,aAAa;IACbZ,OAAO,EAAPA,OAAO;IACPgT,QAAQ,EAARA;GACD;EAED,IAAM9c,UAAU,GAAkB;IAChCxC,SAAS,EAATA,SAAS;IACTL,QAAQ,EAAE6jB,aAAa;IACvB1jB,UAAU,EAAVA,UAAU;IACVC,QAAQ,EAARA,QAAQ;IACRzQ,KAAK,EAAE2mB,QAAQ;IACfpW,YAAY,EAAZA,YAAY;IACZI,OAAO,EAAPA,OAAO;IACPE,gBAAgB,EAAEsnB,WAAW;IAC7BlnB,WAAW,EAAXA,WAAW;IACXC,wBAAwB,EAAEyhB,QAAM,CAACI,mBAAmB;IACpDzpB,kBAAkB,EAAE+sB,iBAAiB;IACrC9sB,gBAAgB,EAAE+sB,eAAe;IACjC5kB,kBAAkB,EAAE0oB,gBAAgB;IACpCtpB,YAAY,EAAZA,YAAY;IACZzH,WAAW,EAAXA,WAAW;IACX0H,eAAe,EAAEwpB,kBAAkB;IACnCvpB,eAAe,EAAE2pB,mBAAmB;IACpCxpB,cAAc,EAAdA,cAAc;IACdC,aAAa,EAAbA,aAAa;IACbrL,aAAa,EAAbA,aAAa;IACbsL,YAAY,EAAE+kB,YAAY;IAC1B9kB,YAAY,EAAZA,YAAY;IACZC,iBAAiB,EAAjBA,iBAAiB;IACjBE,gBAAgB,EAAhBA;GACD;EACD,OACEjD,KAAA,CAAAC,aAAA,cACED,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEikB,QAAM,CAACyI,OAAO;IACzBjsB,SAAS,EAAErB,aAAa;IACxB0O,QAAQ,EAAE,CAAC;IACXvN,GAAG,EAAEokB;KAEJa,aAAa,IACZ1lB,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEikB,QAAM,CAAC0I,aAAa;IAC/BvsB,KAAK,EAAE;MAAE9C,KAAK,EAAEoS;KAAe;mBACnB;KAEZ5P,KAAA,CAAAC,aAAA,CAAC6B,QAAQ,EAAA1J,MAAA,CAAAkO,MAAA,KAAK5B,UAAU,EAAI,CAE/B,EACAghB,aAAa,IACZ1lB,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAKikB,QAAM,CAAC2I,WAAW,UAC9BtkB,UAAU,GAAG2b,QAAM,CAAC4I,iBAAiB,GAAG,EAC1C,CAAE;IACFC,aAAa,EAAE7E,qBAAqB,GAAGkE,sBAAsB,GAAG12B,SAAS;IACzEs3B,aAAa,EAAE9E,qBAAqB,GAAGqE,sBAAsB,GAAG72B,SAAS;IACzEu3B,WAAW,EAAE/E,qBAAqB,GAAGsE,oBAAoB,GAAG92B,SAAS;IACrEw3B,eAAe,EAAEhF,qBAAqB,GAAGsE,oBAAoB,GAAG92B,SAAS;IACzEsV,WAAW,EAAEkd,qBAAqB,GAAGxyB,SAAS,GAAGg3B,oBAAoB;IACrEprB,IAAI,EAAC,WAAW;kBACL,uBAAuB;wBACjB,UAAU;mBACf;IAEf,EACDvB,KAAA,CAAAC,aAAA;IACEC,SAAS,EAAEikB,QAAM,CAACiJ,UAAU;IAC5B9sB,KAAK,EAAE;MAAEsD,QAAQ,EAAEshB;KAAgB;mBACvB;KAEZllB,KAAA,CAAAC,aAAA,CAACyjB,SAAS;IACRC,SAAS,EAAEA,SAAS;IACpBC,aAAa,EAAEA,aAAa;IAC5BC,QAAQ,EAAEA,QAAQ;IAClBphB,WAAW,EAAEA,WAAW;IACxBN,OAAO,EAAEA,OAAO;IAChBuN,OAAO,EAAEoa,YAAY;IACrBhG,yBAAyB,EAAEG;IAC3B,CACE,EACLhD,UAAU,CAACxF,WAAW,IACrBzb,KAAA,CAAAC,aAAA,CAACqP,OAAO;IACNK,WAAW,EAAEA,WAAW;IACxBzN,SAAS,EAAEA,SAAS;IACpBsN,kBAAkB,EAAEA,kBAAkB;IACtCC,iBAAiB,EAAEA,iBAAiB;IACpCzN,UAAU,EAAEA,UAAU;IACtBC,QAAQ,EAAEA,QAAQ;IACjByN,OAAO,EAAEoa,YAAY;IACtB3nB,OAAO,EAAEA,OAAO;IAChBjQ,IAAI,EAAE+uB,UAAU,CAACxF,WAAW;IAC5B1Z,YAAY,EAAEA,YAAY;IAC1B6N,aAAa,EAAEib,cAAc;IAC7Bhb,cAAc,EAAEA,cAAc;IAC9BN,GAAG,EAAEA,GAAG;IACRmD,QAAQ,EAAEA,QAAQ;IAClB3P,iBAAiB,EAAEA;IAEtB,EACD/C,KAAA,CAAAC,aAAA,CAACkS,cAAc;IACbE,eAAe,EAAEA,eAAe;IAChC5P,WAAW,EAAEA,WAAW;IACxBV,YAAY,EAAEA,YAAY;IAC1BqQ,MAAM,EAAEjQ,OAAO;IACfiE,QAAQ,EAAEulB,aAAa;IACvBpc,GAAG,EAAEA;IACL,CACE,EACNvP,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAEikB,QAAM,CAACkJ,SAAS;IAAE/sB,KAAK,EAAE;MAAE,kBAAkB,EAAK6kB,kBAAkB;;KAClFnlB,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAEikB,QAAM,CAACmJ;KACpB5H,aAAa,IACZ1lB,KAAA,CAAAC,aAAA,CAACukB,gBAAgB;IACf9R,QAAQ,EAAE9C,aAAa;IACvB6U,aAAa,EAAEwF,iBAAiB;IAChC7X,MAAM,EAAEuX,WAAW;IACnBpa,GAAG,EAAEA,GAAG;IACRnJ,QAAQ,EAAEwlB;IAEb,CACG,EACLlG,aAAa,IAAI1lB,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAEikB,QAAM,CAACoJ;IAAkB,EAC3DvtB,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAEikB,QAAM,CAACqJ;KACrBxtB,KAAA,CAAAC,aAAA,CAACukB,gBAAgB;IACf9R,QAAQ,EAAEA,QAAQ;IAClBN,MAAM,EAAE0X,YAAY;IACpBva,GAAG,EAAEA,GAAG;IACRnJ,QAAQ,EAAEylB;IACV,CACE,CACF,CACF;AAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}